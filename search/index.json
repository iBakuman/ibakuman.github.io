[{"content":"å‰è¨€ åœ¨æ—¥å¸¸å¼€å‘çš„è¿‡ç¨‹ä¸­ï¼Œæœ‰å…³ Unicode ã€UTF-8 çš„é—®é¢˜å¹¶ä¸å¸¸å‡ºç°ï¼Œä½†åœ¨é˜…è¯»æŠ€æœ¯æ–‡ç« æˆ–æºç æ—¶å‡ºç°é¢‘ç‡å°±æ¯”è¾ƒé«˜äº†ã€‚ç¬”è€…æœ€è¿‘åˆšå¥½å°±åœ¨å¼€å‘æ—¶é‡åˆ°äº†å’Œ Unicode ç›¸å…³çš„é—®é¢˜ï¼Œå‘ç°è‡ªå·±å¯¹è¿™æ–¹é¢çš„åŸºç¡€çŸ¥è¯†å¹¶æ²¡æœ‰å……åˆ†æŒæ¡ã€‚å› æ­¤å°†ç›¸å…³çŸ¥è¯†æ¢³ç†å‡ºæ¥ï¼Œå¸®åŠ©å¤§å®¶ç†è§£æ¸…æ¥š Unicode å’Œ UTF-8ã€‚\nå­—ç¬¦é›† ä»€ä¹ˆæ˜¯å­—ç¬¦é›†ï¼Ÿ å­—ç¬¦é›†ï¼ˆCharacter setï¼‰æ˜¯å¤šä¸ªå­—ç¬¦çš„é›†åˆï¼Œå¹¶ä¸”æ¯ä¸ªå­—ç¬¦éƒ½æ‹¥æœ‰å”¯ä¸€çš„ç¼–å·ï¼ˆå³ç ç‚¹ï¼ŒCode Pointï¼‰ã€‚ä¸åŒçš„å­—ç¬¦é›†æ‰€åŒ…å«çš„å­—ç¬¦ä¸ªæ•°ä¸åŒï¼Œå¸¸è§çš„å­—ç¬¦é›†æœ‰ï¼šASCII å­—ç¬¦é›†ã€GB2312 å­—ç¬¦é›†ã€BIG5 å­—ç¬¦é›†ã€ GB18030 å­—ç¬¦é›†ã€Unicode å­—ç¬¦é›†ç­‰ã€‚\nåœ¨æ²¡æœ‰è®¡ç®—æœºä¹‹å‰ï¼Œå¤§éƒ¨åˆ†ä¿¡æ¯ä»¥æ–‡æœ¬çš„å½¢å¼å­˜åœ¨ï¼Œé‚£ä¹ˆå¦‚ä½•å°†æ–‡æœ¬å­˜å‚¨åˆ°è®¡ç®—æœºä¸­å‘¢ï¼Ÿ\næˆ‘ä»¬çŸ¥é“ï¼Œåœ¨è®¡ç®—æœºä¸­æ˜¯é€šè¿‡äºŒè¿›åˆ¶å€¼æ¥è¡¨ç¤ºä¿¡æ¯çš„ï¼Œæ¯ä¸ªäºŒè¿›åˆ¶ä½ï¼ˆbitï¼‰éƒ½æœ‰ 0 å’Œ 1 ä¸¤ç§çŠ¶æ€ã€‚è€Œè®¡ç®—æœºä¸­å­˜å‚¨çš„æœ€å°å•ä½å°±æ˜¯å­—èŠ‚ï¼ˆByteï¼‰ï¼Œç”± 8 ä¸ªäºŒè¿›åˆ¶ä½ç»„æˆï¼Œé‚£ä¹ˆå°±å¯ä»¥è¡¨ç¤º 2^8=256 ç§çŠ¶æ€ã€‚\nåˆ©ç”¨è¿™ 256 ä¸ªäºŒè¿›åˆ¶å€¼ï¼Œæˆ‘ä»¬å¯ä»¥å°†å­—ç¬¦è½¬æ¢ä¸ºæ•°å€¼å­˜å‚¨åˆ°è®¡ç®—æœºä¸­ï¼Œå‡è®¾æˆ‘ä»¬è§„å®šï¼š\nmakefile\nå¤åˆ¶ä»£ç \nA: 00000000 B: 00000001 C: 00000010\nè¿™æ ·æœ‰äº†ä¸€å¯¹ä¸€çš„æ˜ å°„å…³ç³»åï¼Œæˆ‘ä»¬å°±å¯ä»¥æŠŠæ–‡æœ¬ ABC ç”¨ 00000000 00000001 00000010 å­˜å‚¨åˆ°è®¡ç®—æœºä¸­ã€‚è¿™æ ·çš„ä¸€ä¸ªåŒ…å«å­—ç¬¦ ABC çš„æ˜ å°„é›†åˆå°±æ˜¯æˆ‘ä»¬è‡ªå®šä¹‰çš„â€ å­—ç¬¦é›† â€œã€‚\nASCII ç  æˆ‘ä»¬åœ¨ä¸Šä¸€èŠ‚ä»‹ç»å­—ç¬¦é›†æ—¶è‡ªå®šä¹‰äº†ä¸€ä¸ªåªåŒ…å« ABC ä¸‰ä¸ªå­—æ¯çš„å­—ç¬¦é›†ï¼Œä»…ä»…ä½œä¸ºä¾‹å­å¯ä»¥ï¼Œä½†æ˜¯åº”ç”¨åˆ°å®é™…çš„è¯æ˜¾ç„¶æ˜¯ä¸å¤Ÿç”¨çš„ï¼Œå› ä¸ºæ—¢æ²¡æœ‰å°†æ‰€æœ‰çš„å­—æ¯å†™å…¥ï¼Œä¹Ÿæ— æ³•æ˜ å°„ç©ºæ ¼æˆ–æ ‡ç‚¹ç¬¦å·ç­‰å­—ç¬¦ã€‚\nä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œåœ¨ä¸Šä¸–çºªå…­åå¹´ä»£ï¼Œç¾å›½åˆ¶å®šäº†ä¸€å¥—å­—ç¬¦ç¼–ç ï¼Œå³ ASCII ç ï¼ˆAmerican Standard Code for Information Interchangeï¼Œç¾å›½ä¿¡æ¯äº¤æ¢æ ‡å‡†ä»£ç ï¼Œè¯¦è§ç»´åŸºç™¾ç§‘ - ASCIIï¼‰ï¼Œå°†è‹±è¯­å­—ç¬¦ä¸äºŒè¿›åˆ¶å€¼è¿›è¡Œä¸€ä¸€å¯¹åº”ï¼Œä¸€ç›´æ²¿ç”¨è‡³ä»Šã€‚\næ ‡å‡† ASCII ç ä½¿ç”¨ 7 ä½äºŒè¿›åˆ¶æ•°ï¼ˆå‰©ä¸‹çš„é¦–ä½äºŒè¿›åˆ¶ä¸º 0ï¼‰æ¥è¡¨ç¤ºæ‰€æœ‰çš„å¤§å†™å’Œå°å†™å­—æ¯ï¼Œæ•°å­— 0 åˆ° 9ã€æ ‡ç‚¹ç¬¦å·ï¼Œä»¥åŠåœ¨ç¾å¼è‹±è¯­ä¸­ä½¿ç”¨çš„ç‰¹æ®Šæ§åˆ¶å­—ç¬¦ã€‚æ¯”å¦‚ç©ºæ ¼ SPACE çš„åè¿›åˆ¶å€¼æ˜¯ 32ï¼ˆäºŒè¿›åˆ¶ 00100000 ï¼‰ï¼Œå¤§å†™çš„å­—æ¯ A çš„åè¿›åˆ¶å€¼æ˜¯ 65ï¼ˆäºŒè¿›åˆ¶ 01000001ï¼‰ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚\nASCII ç å¯¹äºç¾å›½è¿™ç§ä½¿ç”¨è‹±è¯­ä½œä¸ºæ¯è¯­çš„å›½å®¶æ˜¯å¤Ÿç”¨äº†ï¼Œä½†æ˜¯å¯¹äºä½¿ç”¨å…¶ä»–è¯­è¨€çš„å›½å®¶ï¼Œ128 ä¸ªäºŒè¿›åˆ¶å€¼ä»ä¸è¶³ä»¥è¡¨ç¤ºæ‰€æœ‰å­—ç¬¦ï¼Œäºæ˜¯ä¸€äº›å›½å®¶å†³å®šåˆ©ç”¨å­—èŠ‚ä¸­çš„é—²ç½®æœ€é«˜ä½ç¼–å…¥æ–°çš„å­—ç¬¦ï¼Œè¿™æ ·ä¸€æ¥è¿™äº›å›½å®¶ä½¿ç”¨äº† 8 ä½äºŒè¿›åˆ¶å€¼å°±å¯ä»¥è¡¨ç¤ºæœ€å¤š 256 ä¸ªå­—ç¬¦ã€‚\nç„¶è€Œè¿™åˆå¸¦æ¥äº†æ–°çš„é—®é¢˜ï¼Œå³ä½¿ä¸åŒå›½å®¶éƒ½ä½¿ç”¨ 256 ä¸ªå­—ç¬¦çš„ç¼–ç æ–¹å¼ï¼Œä½†æ˜¯åŒä¸€ä¸ªäºŒè¿›åˆ¶å€¼åœ¨ä¸åŒçš„å›½å®¶å´è¡¨ç¤ºä¸åŒçš„å­—ç¬¦ï¼Œä¾‹å¦‚ 130 åœ¨æ³•è¯­ä¸­è¡¨ç¤º Ã© ï¼Œåœ¨å¸Œä¼¯æ¥è¯­ç¼–ç ä¸­å´ä»£è¡¨äº†å­—æ¯ Gimel (×’)ï¼Œå°±ä¼šé€ æˆä¹±ç ã€‚\nä¸ºäº†è§£å†³å¤šè¯­è¨€ç¯å¢ƒä¸‹äº§ç”Ÿçš„ç¼–ç å†²çªé—®é¢˜ï¼ŒUnicode åº”è¿è€Œç”Ÿã€‚\nUnicode Unicode å°†ä¸–ç•Œä¸Šçš„æ‰€æœ‰å­—ç¬¦å›Šæ‹¬å…¶ä¸­ï¼Œå¹¶ä¸ºæ¯ä¸€ä¸ªå­—ç¬¦å®šä¹‰å”¯ä¸€çš„ä»£ç ï¼ˆå³ä¸€ä¸ªæ•´æ•°ï¼‰ï¼Œç§°ä½œç ç‚¹ï¼ˆCode Pointï¼‰ã€‚\nç ç‚¹çš„èŒƒå›´æ˜¯ U+0000~U+10FFFFï¼ŒU+ è¡¨ç¤ºè¿™æ˜¯ Unicode å­—ç¬¦é›†ï¼Œåé¢è·Ÿç€ä¸€ä¸ªåå…­è¿›åˆ¶æ•°ã€‚\nç›®å‰çš„ Unicode å­—ç¬¦åˆ†ä¸º 17 ç»„ç¼–æ’ï¼Œæ¯ä¸ªç¼–ç»„å­˜æ”¾ 65536 ï¼ˆå³ 2^16ï¼‰ä¸ªç ç‚¹ï¼Œç§°ä¸ºä¸€ä¸ªå¹³é¢ï¼ˆPlaneï¼‰ã€‚\nä¾‹å¦‚ï¼ŒU+0041 è¡¨ç¤ºè‹±è¯­çš„å¤§å†™å­—æ¯ Aï¼ŒU+4E25 è¡¨ç¤ºæ±‰å­—ä¸¥ï¼Œå®ƒä»¬éƒ½ä½äºåŸºæœ¬å¤šæ–‡ç§å¹³é¢ã€‚è¯¦è§ç»´åŸºç™¾ç§‘ - Unicodeã€‚\nå­—ç¬¦ç¼–ç  ä»€ä¹ˆæ˜¯å­—ç¬¦ç¼–ç ï¼Ÿ å­—ç¬¦ï¼Œå³å­—æ¯ã€æ•°å­—ã€è¿ç®—ç¬¦å·ã€æ ‡ç‚¹ç¬¦å·å’Œå…¶ä»–ç¬¦å·ï¼Œä»¥åŠä¸€äº›åŠŸèƒ½æ€§ç¬¦å·ã€‚\nç¼–ç ï¼Œæ ¹æ®è¯æ€§çš„ä¸åŒï¼Œè¡¨ç¤ºçš„å«ä¹‰ä¹Ÿä¸åŒï¼š\nä½œä¸ºåŠ¨è¯æ—¶ï¼Œè¡¨ç¤ºä¿¡æ¯ä»ä¸€ç§å½¢å¼æˆ–æ ¼å¼è½¬æ¢ä¸ºå¦ä¸€ç§å½¢å¼çš„è¿‡ç¨‹ï¼Œä¾‹å¦‚å°†å¤§å†™å­—æ¯ A è½¬æ¢ä¸ºäºŒè¿›åˆ¶å€¼ 1000001 çš„è¿‡ç¨‹å°±æ˜¯ä¸€ä¸ªç¼–ç åŠ¨ä½œï¼› ä½œä¸ºåè¯æ—¶ï¼Œæœ‰ä¸¤ç§è¡¨ç¤º è¡¨ç¤ºå°†å­—ç¬¦è½¬ä¸ºæœºå™¨ç çš„æ–¹æ¡ˆï¼Œä¾‹å¦‚ ASCII ç¼–ç ã€UTF-8 ç¼–ç ç­‰ï¼› å¦ä¸€ç§æ˜¯è¡¨ç¤ºå°†å­—ç¬¦è½¬æ¢åå¾—åˆ°çš„æœºå™¨ç ï¼Œä¾‹å¦‚ 100001 å°±æ˜¯ A çš„ç¼–ç ã€‚ å› æ­¤åœ¨é˜…è¯»æœ‰å…³å­—ç¬¦ç¼–ç çš„æ–‡ç« æ—¶ï¼Œåº”è¯¥æ ¹æ®å½“å‰ä¸Šä¸‹æ–‡æ¥åˆ¤æ–­ç¼–ç ä¸€è¯çš„å«ä¹‰ã€‚\nUnicode çš„å®ç°æ–¹å¼ Unicode å­—ç¬¦é›†è§£å†³äº†å¤šè¯­ç§é—´çš„å†²çªé—®é¢˜ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰è§„å®šå¦‚ä½•å°†ç¼–ç å­˜å‚¨åˆ°è®¡ç®—æœºä¸­ã€‚\nä»¥å¤§å†™å­—æ¯ A ä¸ºä¾‹ï¼Œå®ƒçš„ Unicode ç ç‚¹ä¸º U+0041 ï¼Œè½¬æ¢æˆäºŒè¿›åˆ¶ä¸º 1000001 ï¼Œéœ€è¦ä½¿ç”¨ 1 ä¸ªå­—èŠ‚å­˜å‚¨ï¼›æ±‰å­— ä¸¥ çš„ Unicode ç ç‚¹ä¸º U+4E25 ï¼Œè½¬æ¢æˆäºŒè¿›åˆ¶ä¸º 1001110 00100101ï¼Œéœ€è¦ä½¿ç”¨ 2 ä¸ªå­—èŠ‚å­˜å‚¨ã€‚è€Œä½äºç¼–å·æ›´é åçš„å¹³é¢ä¸­çš„å­—ç¬¦ï¼Œè½¬æ¢æˆäºŒè¿›åˆ¶æ•°å­—å°±ä¼šæ›´é•¿ï¼Œæœ€é«˜ä½ U+10FFFF ç”šè‡³éœ€è¦ 3 ä¸ªå­—èŠ‚æ¥å­˜å‚¨ã€‚\nåœ¨è¿™ç§æƒ…å†µä¸‹æ‰€é¢ä¸´çš„é—®é¢˜å°±æ˜¯ï¼Œè®¡ç®—æœºæ— æ³•å¾—çŸ¥æŸä¸ªå­—ç¬¦ç©¶ç«Ÿéœ€è¦å¤šå°‘å­—èŠ‚å­˜å‚¨ï¼Œå‡è®¾ç»Ÿä¸€ä½¿ç”¨ 3 ä¸ªå­—èŠ‚æ¥å­˜å‚¨ 1 ä¸ªå­—ç¬¦ï¼Œé‚£ä¹ˆå­˜å‚¨ä½äºåŸºæœ¬å¤šæ–‡ç§å¹³é¢çš„å­—ç¬¦ï¼Œå°±ä¼šæœ‰ 2 ä¸ªå­—èŠ‚çš„æ‰€æœ‰ä½éƒ½æ˜¯ 0 ï¼Œä¼šé€ æˆå­˜å‚¨èµ„æºçš„æµªè´¹ã€‚\nä¸ºäº†è§£å†³å­˜å‚¨æ–¹å¼ä¸Šå­˜åœ¨çš„é—®é¢˜ï¼Œå°±å‡ºç°äº† UTF (Unicode è½¬æ¢æ ¼å¼ï¼ŒUnicode Transformation Formatsï¼Œç®€ç§° UTFï¼‰ç³»åˆ—çš„ç¼–ç æ–¹å¼ã€‚ä¸‹é¢ä»‹ç»ä¸€ä¸‹å‡ ç§å¸¸è§çš„å®ç°æ–¹å¼ã€‚\nUTF-8 ç¼–ç  UTF-8 ç¼–ç æ˜¯äº’è”ç½‘ä¸Šä½¿ç”¨æœ€å¹¿æ³›çš„ä¸€ç§ Unicode çš„å®ç°æ–¹å¼ã€‚\nå®ƒæ˜¯ä¸€ç§å˜é•¿ç¼–ç ã€‚å¯¹äº ASCII å­—ç¬¦ä»ç”¨ 7 ä½ç¼–ç è¡¨ç¤ºï¼Œå ç”¨ä¸€ä¸ªå­—èŠ‚ï¼ˆé¦–ä½è¡¥ 0ï¼‰ï¼›è€Œé‡åˆ°å…¶ä»– Unicode å­—ç¬¦æ—¶ï¼Œå°†æŒ‰ä¸€å®šç®—æ³•è½¬æ¢ï¼Œæ¯ä¸ªå­—ç¬¦ä½¿ç”¨ 1 åˆ° 4 ä¸ªå­—èŠ‚ç¼–ç ã€‚\nç¼–ç è§„åˆ™ä¹Ÿå¾ˆç®€å•ï¼š\nç¼–ç åçš„å­—èŠ‚é•¿åº¦ä¸º 1 æ—¶ï¼Œé¦–ä½ä¸º 0 ï¼Œå‰©ä½™ 7 ä½ä¸º Unicode ç ç‚¹å€¼ã€‚å› æ­¤ç ç‚¹å€¼çš„èŒƒå›´æ˜¯ 0~128ï¼Œåœ¨è¿™ä¸ªèŒƒå›´å†… ASCII ç¼–ç å’Œ UTF-8 æ˜¯ç›¸åŒçš„ï¼› ç¼–ç åçš„å­—èŠ‚é•¿åº¦ n å¤§äº 1 æ—¶ï¼Œé¦–ä¸ªå­—èŠ‚çš„å‰ n ä½éƒ½æ˜¯ 1ï¼ˆå³ï¼Œæœ‰å‡ ä¸ª 1 å°±è¡¨ç¤ºæ€»å…±æœ‰å‡ ä¸ªå­—èŠ‚ï¼‰ï¼Œn+1 ä½ä¸º 0 ï¼Œå…¶ä»–å­—èŠ‚çš„å‰ä¸¤ä½å‡ä¸º 10ï¼Œå‰©ä½™çš„ä½ä¸º Unicode ç ç‚¹å€¼ã€‚ åœ¨ Unicode ä¸­ï¼Œä¸€èˆ¬ä½¿ç”¨é¢‘ç‡è¾ƒé«˜çš„éƒ½æ˜¯ç¼–ç å€¼è¾ƒå°çš„å­—ç¬¦ï¼ˆå³å¤§éƒ¨åˆ†éƒ½ä½äºåŸºæœ¬å¤šæ–‡ç§å¹³é¢ï¼‰ï¼Œå¹¶ä¸” Unicode ä¸­å‰ 128 ä¸ªå­—ç¬¦ä¹Ÿæ˜¯å’Œ ASCII ç çš„äºŒè¿›åˆ¶å€¼ç›¸åŒã€‚UTF-8 é‡‡ç”¨çš„è¿™ç§å˜é•¿ç¼–ç è§„åˆ™ï¼Œå¯ä»¥å°½å¯èƒ½çš„èŠ‚çœå†…å­˜ç©ºé—´ï¼Œå¹¶ä¸”å®Œå…¨å…¼å®¹ ASCII ç ï¼Œå› æ­¤ï¼Œå®ƒé€æ¸æˆä¸ºç”µå­é‚®ä»¶ã€ç½‘é¡µåŠå…¶ä»–å­˜å‚¨æˆ–ä¼ é€æ–‡å­—ä¼˜å…ˆé‡‡ç”¨çš„ç¼–ç æ–¹å¼ã€‚\nä»¥å¤§å†™å­—æ¯ A ä¸ºä¾‹ï¼Œç ç‚¹ä¸º U+0041 ï¼Œç¼–ç åä¸º 1 ä¸ªå­—èŠ‚ï¼Œå’Œ ASCII ç¼–ç ä¸‹çš„å­˜å‚¨æ–¹å¼ç›¸åŒï¼Œéƒ½æ˜¯ 01000001 ï¼›\nè€Œå¯¹äºæ±‰å­—ä¸¥ï¼Œç ç‚¹ä¸º U+4E25ï¼Œç¼–ç åä¸º 3 ä¸ªå­—èŠ‚ã€‚ç ç‚¹å€¼è½¬æ¢ä¸ºäºŒè¿›åˆ¶æ˜¯ 1001110 00100101ï¼Œå…± 15 ä½ï¼Œç”±è½¬æ¢å…³ç³»è¡¨å¯çŸ¥å®ƒè½åœ¨ 3 å­—èŠ‚åºåˆ—ä¸­ï¼Œå› æ­¤è½¬æ¢åçš„æ ¼å¼åº”è¯¥æ˜¯ 1110xxxx 10xxxxxx 10xxxxxxï¼Œå°†ç ç‚¹å€¼æŒ‰é¡ºåºè¡¥ä½åå¾—åˆ° 11100100 10111000 10100101ï¼Œè¿™å°±æ˜¯ UTF-8 ç¼–ç åçš„æ±‰å­—ä¸¥ï¼Œè¿‡ç¨‹å¦‚ä¸‹å›¾ï¼š\næˆ‘ä»¬æ¥éªŒè¯ä¸‹ä¸Šé¢çš„è½¬æ¢è¿‡ç¨‹ã€‚\né¦–å…ˆå‡†å¤‡ä¸¤ä¸ª txt æ–‡ä»¶ï¼Œç¬¬ä¸€ä¸ªæ–‡ä»¶é‡Œåªæœ‰å­—æ¯ Aï¼Œç¬¬äºŒä¸ªæ–‡ä»¶é‡Œåªæœ‰æ±‰å­— ä¸¥ï¼Œä¿å­˜æ–‡ä»¶æ—¶ä»¥ UTF-8 æ ¼å¼ä¿å­˜ã€‚è¿™é‡Œç¬”è€…ç”¨çš„æ˜¯ Mac ç³»ç»Ÿï¼Œå¯ä»¥ç›´æ¥åœ¨å‘½ä»¤è¡Œä¸­æ‰§è¡Œ echo å‘½ä»¤è¾“å‡ºåˆ° txt æ–‡ä»¶ä¸­ï¼Œé»˜è®¤çš„ç¼–ç æ ¼å¼å°±æ˜¯ UTF-8ï¼š\nbash\nå¤åˆ¶ä»£ç \necho 'A' \u0026gt; 'A.txt' echo 'ä¸¥' \u0026gt; 'ä¸¥.txt'\nç„¶åæ‰“å¼€å‘½ä»¤è¡Œï¼Œä½¿ç”¨ hexdump å‘½ä»¤æŸ¥çœ‹æ–‡ä»¶ï¼š\nhexdump å‘½ä»¤å¯ä»¥ä»¥ ASCIIã€å…«è¿›åˆ¶ã€åè¿›åˆ¶æˆ–åå…­è¿›åˆ¶æ˜¾ç¤ºæ–‡ä»¶å†…å®¹ã€‚\nç¬¬ä¸€åˆ—çš„ä¸¤ä¸ªå€¼æ˜¯æ–‡ä»¶ä¸­çš„å­—ç¬¦åç§»é‡ï¼Œæˆ‘ä»¬çš„é‡ç‚¹åœ¨ç¬¬äºŒåˆ—ã€‚æ˜¾ç„¶ A.txt çš„ç»“æœæ˜¯ç¬¦åˆé¢„æœŸçš„ï¼Œå› ä¸º ASCII ç åœ¨ UTF-8 çš„ç¼–ç æ–¹å¼ä¸‹å’Œ Unicode ç ç‚¹å€¼æ˜¯ç›¸åŒçš„ã€‚è€Œä¸¥.txt çš„ç»“æœä¸å¤ªä¸€æ ·ï¼Œæ˜¾ç„¶æ˜¯ç»è¿‡äº†å˜é•¿çš„ç¼–ç ç®—æ³•è½¬æ¢åå¾—åˆ°çš„ã€‚\næˆ‘ä»¬å°† e4 b8 a5 çš„åå…­è¿›åˆ¶å€¼è½¬æ¢ä¸€ä¸‹ã€‚å¯ä»¥ä½¿ç”¨åœ¨çº¿è¿›åˆ¶è½¬æ¢å·¥å…· tool.oschina.net/hexconvert/ æˆ–è€…ç›´æ¥å°†æ¯ä¸€ä¸ªåå…­è¿›åˆ¶æ•°è½¬æ¢ä¸ºäºŒè¿›åˆ¶è¿›è¡Œç»„åˆï¼Œè½¬æ¢ç»“æœå°±æ˜¯ï¼š\nè¿™æ ·å°±å’Œä¸Šæ–‡æˆ‘ä»¬è½¬æ¢çš„ç»“æœç›¸åŒäº†ã€‚\nUTF-16 ç¼–ç  UTF-16 ä¹Ÿæ˜¯ä¸€ç§å˜é•¿ç¼–ç ï¼Œå®ƒå°† Unicode ç ç‚¹æ˜ å°„ä¸º 16 ä½é•¿çš„æ•´æ•°ï¼ˆå³ç å…ƒï¼‰çš„åºåˆ—ï¼Œç”¨äºæ•°æ®å­˜å‚¨æˆ–ä¼ é€’ã€‚Unicode å­—ç¬¦çš„ç ç‚¹ï¼Œä½¿ç”¨ 1 ä¸ªæˆ–è€… 2 ä¸ª 16 ä½é•¿çš„ç å…ƒæ¥è¡¨ç¤ºã€‚\nç å…ƒï¼ˆCode Unitï¼Œä¹Ÿç§° â€œä»£ç å•å…ƒâ€ï¼‰æ˜¯æŒ‡ä¸€ä¸ªå·²ç¼–ç çš„æ–‡æœ¬ä¸­å…·æœ‰æœ€çŸ­çš„æ¯”ç‰¹ç»„åˆçš„å•å…ƒã€‚å¯¹äº UTF-8 æ¥è¯´ï¼Œç å…ƒæ˜¯ 8bit ï¼›å¯¹äº UTF-16 æ¥è¯´ï¼Œç å…ƒæ˜¯ 16bitï¼›å¯¹äº UTF-32 æ¥è¯´ï¼Œç å…ƒæ˜¯ 32bitã€‚\nUnicode çš„åŸºæœ¬å¤šæ–‡ç§å¹³é¢ç ç‚¹èŒƒå›´æ˜¯ U+0000 åˆ° U+FFFF ï¼Œä¸è¿‡ä» U+D800 åˆ° U+DFFF ä¹‹é—´çš„ç ä½åŒºæ®µæ˜¯æ°¸ä¹…ä¿ç•™ä¸æ˜ å°„åˆ° Unicode å­—ç¬¦çš„ï¼Œå› æ­¤ UTF-16 å°±åˆ©ç”¨ä¿ç•™ä¸‹æ¥çš„ U+D800 åˆ° U+DFFF åŒºå—çš„ç ä½æ¥å¯¹è¾…åŠ©å¹³é¢çš„å­—ç¬¦çš„ç ä½è¿›è¡Œç¼–ç ã€‚\nç¼–ç è§„åˆ™å¦‚ä¸‹ï¼š\nå¯¹äºä» U+0000 åˆ° U+D7FF ä»¥åŠ U+E000 åˆ° U+FFFF çš„ç ä½ï¼šUTF-16 ç¼–ç è¿™ä¸ªèŒƒå›´å†…çš„ç ä½ä¸º 16bit çš„å•ä¸ªç å…ƒï¼Œæ•°å€¼å°±ç­‰ä»·äºå¯¹åº”çš„ç ä½ï¼› å¯¹äºä» U+10000 åˆ° U+10FFFF çš„ç ä½ï¼šè¿™ä¸ªèŒƒå›´æ˜¯è¡¥å……å¹³é¢ä¸­çš„ç ä½ï¼Œåœ¨ UTF-16 ä¸­è¢«ç¼–ç ä¸ºä¸¤ä¸ª 16bit çš„ç å…ƒï¼ˆå³ 32 ä½ï¼Œ4 å­—èŠ‚ï¼‰ï¼Œç§°ä½œ_ä»£ç†å¯¹ã€‚_ ç¼–ç è¿‡ç¨‹å¦‚ä¸‹ï¼š\nç ä½å‡å»Â 0x10000ï¼Œå¾—åˆ°çš„å€¼çš„èŒƒå›´ä¸º 20bit çš„Â 0...0xFFFFFã€‚ é«˜ä½çš„ 10bit çš„å€¼ï¼ˆä»å·¦å¾€å³æ•°ç¬¬ 1 ä½åˆ°ç¬¬ 10 ä½ï¼‰åŠ ä¸ŠÂ 0xD800Â åå¾—åˆ°ç¬¬ä¸€ä¸ªç å…ƒï¼Œç§°ä½œå‰å¯¼ä»£ç†ï¼Œå€¼çš„èŒƒå›´æ˜¯Â 0xD800...0xDBFF ã€‚ ä½ä½çš„ 10bit çš„å€¼ï¼ˆä»å·¦å¾€å³æ•°ç¬¬ 11 ä½åˆ°ç¬¬ 20 ä½ï¼‰åŠ ä¸ŠÂ 0xDC00Â åå¾—åˆ°ç¬¬äºŒä¸ªç å…ƒï¼Œç§°ä½œåå°¾ä»£ç†ï¼Œå€¼çš„èŒƒå›´æ˜¯Â 0xDC00...0xDFFFã€‚ ä»¥è¡¥å……å¹³é¢çš„å­—ç¬¦ ğŸ¶ ä¸ºä¾‹ï¼Œå®ƒçš„ç ç‚¹å€¼æ˜¯ U+1F436ï¼š\nunicode-table.com/cn/ å¯ä»¥åœ¨è¿™ä¸ªç½‘ç«™ä¸­æŸ¥æ‰¾æŸä¸ª Unicode å­—ç¬¦çš„ç ç‚¹å€¼\nç¬¬ä¸€æ­¥ï¼Œ0x1F436 å‡å» 0x10000ï¼Œå¾—åˆ° 0xF436 ï¼Œè½¬ä¸ºäºŒè¿›åˆ¶ä½ä¸º 11110100 00110110 é«˜ä½ 10bit ä¸º 00 0011 1101ï¼ˆä¸è¶³çš„ä½è¡¥ 0ï¼‰ï¼Œè½¬ä¸º 16 è¿›åˆ¶æ˜¯ 0x003D ï¼ŒåŠ ä¸Š 0xD800 åä¸º 0xD83D ä½ä½ 10bit ä¸º 00 0011 0110ï¼Œè½¬ä¸º 16 è¿›åˆ¶æ˜¯ 0x0036 ï¼ŒåŠ ä¸Š 0xDC00 åä¸º 0xDC36 å› æ­¤æœ€ç»ˆè½¬æ¢åçš„å€¼åº”è¯¥æ˜¯ D8 3D DC 36ã€‚æ•´ä¸ªè¿‡ç¨‹å¯ä»¥çœ‹ä¸‹å›¾ï¼š\nåŒæ ·åœ°ï¼Œæˆ‘ä»¬æ¥éªŒè¯ä¸‹ä¸Šé¢çš„è½¬æ¢è¿‡ç¨‹ã€‚\nå°†å•ä¸ªå­—ç¬¦å­˜å‚¨åœ¨ txt æ–‡ä»¶ä¸­ï¼Œé€‰æ‹© UTF-16 BE çš„ç¼–ç æ–¹å¼è¿›è¡Œä¿å­˜ã€‚\nUTF-16 BE æ˜¯ä¸€ç§å­—èŠ‚åºï¼Œæœ‰å…³å­—èŠ‚åºçš„çŸ¥è¯†è§ä¸‹ä¸€èŠ‚ã€‚\nåŒæ ·ä½¿ç”¨ hexdump å‘½ä»¤æŸ¥çœ‹ï¼š\nç¬¦åˆæ¨æµ‹ç»“æœã€‚\nUTF å­—èŠ‚åº å­—èŠ‚åºä¹Ÿå«å°¾åºæˆ–ç«¯åºï¼Œè¯¦ç»†ä»‹ç»å¯è§ ç»´åŸºç™¾ç§‘ - å­—èŠ‚åºã€‚\né¡¾åæ€ä¹‰ï¼Œå­—èŠ‚åºå°±æ˜¯æŒ‡å­—èŠ‚ä¹‹é—´çš„é¡ºåºï¼Œåœ¨ä¼ è¾“ or å­˜å‚¨è¿‡ç¨‹ä¸­å¦‚æœæœ€å°ç¼–ç å•å…ƒè¶…è¿‡ 1 ä¸ªå­—èŠ‚ï¼Œéœ€è¦æŒ‡å®šç¼–ç å•å…ƒå†…çš„å­—èŠ‚é—´é¡ºåºã€‚å› æ­¤å¯¹äº UTF-8 ä¸å­˜åœ¨å­—èŠ‚åºçš„é—®é¢˜ï¼Œè€Œ UTF-16 æ—¶å°±éœ€è¦è€ƒè™‘å­—èŠ‚åºçš„é—®é¢˜äº†ã€‚\nå­—èŠ‚åºæœ‰ä¸¤ä¸ªé€šç”¨è§„åˆ™ï¼š\nå°ç«¯åºï¼ˆlittle endianï¼‰ï¼šå¤šä½æ•°çš„ä½ä½æ”¾åœ¨è¾ƒå°çš„åœ°å€å¤„ï¼Œé«˜ä½æ”¾åœ¨è¾ƒå¤§çš„åœ°å€å¤„ã€‚ å¤§ç«¯åºï¼ˆbig endianï¼‰ï¼šå’Œå°ç«¯åºç›¸åï¼Œå¤šä½æ•°çš„é«˜ä½æ”¾åœ¨è¾ƒå°çš„åœ°å€å¤„ï¼Œä½ä½æ”¾åœ¨è¾ƒå¤§çš„åœ°å€å¤„ã€‚ ä»¥ä¸Šä¸€èŠ‚çš„æ–‡æœ¬ä¸ºä¾‹ï¼Œä¸‹å›¾ä¸ºå­—ç¬¦ğŸ¶åœ¨ UTF-16 ç¼–ç ä¸‹ä½¿ç”¨ä¸åŒç«¯åºæ—¶åœ¨å†…å­˜ä¸­çš„å­˜å‚¨ç»“æœï¼š\nç½‘ç»œä¼ è¾“ä¸­ä¸€èˆ¬é‡‡ç”¨å¤§ç«¯åºï¼Œä¹Ÿè¢«ç§°ä¹‹ä¸ºç½‘ç»œå­—èŠ‚åºï¼Œæˆ–ç½‘ç»œåºã€‚åœ¨ç½‘ç»œä¼ è¾“æ—¶ï¼Œä¸å­˜åœ¨å­—èŠ‚åºåˆ—é—®é¢˜ã€‚è€Œåœ¨è§£ç æ—¶ç”±äº cpu ç¡¬ä»¶å·®å¼‚ï¼Œå­˜åœ¨å­—èŠ‚åºé—®é¢˜ï¼Œæ‰€ä»¥éœ€è¦é€šè¿‡ BOM(byte order mark) æ ‡è¯†æ¥æ ‡è®°å­—èŠ‚é¡ºåºï¼Œé€šå¸¸å‡ºç°åœ¨å­—èŠ‚æµçš„å¼€å¤´ã€‚\nUTF-8 ä¸ UTF-16 å¯¹æ¯” ç»¼ä¸Šæ‰€è¿°ï¼Œæˆ‘ä»¬æ¥å¯¹æ¯”ä¸€ä¸‹ UTF-8 å’Œ UTF-16ã€‚\næ ‡é¢˜ UTF-8 UTF-16 å…¼å®¹æ€§ å¥½ï¼Œå®Œç¾å…¼å®¹ ASCII ç ï¼Œå­—ç¬¦ç©ºé—´è¶³å¤Ÿå¤§ UTF-16 èƒ½è¡¨ç¤ºçš„å­—ç¬¦æ•°æœ‰ 6w å¤šï¼Œçœ‹èµ·æ¥å¾ˆå¤šï¼Œä½†æ˜¯å®é™…ä¸Šç›®å‰ Unicode æ”¶å½•çš„å­—ç¬¦å·²ç»è¾¾åˆ° 9w ä¸ªå­—ç¬¦ï¼Œæ—©å·²è¶…è¿‡ UTF-16 çš„å­˜å‚¨èŒƒå›´ å­—èŠ‚åº ä¸å­˜åœ¨å­—èŠ‚åºé—®é¢˜ï¼Œä¿¡æ¯äº¤æ¢ä¾¿æ· å­˜åœ¨å¤§å°ç«¯å­—èŠ‚åºé—®é¢˜ï¼Œä¿¡æ¯äº¤æ¢æ—¶å¯èƒ½å‡ºç°é—®é¢˜ å®¹é”™ç‡ é«˜ï¼Œä¸ªåˆ«å­—èŠ‚çš„é”™è¯¯ä¸ä¼šå¯¼è‡´æ•´ä¸ªæ–‡æ¡£çš„ä¸å¯ç”¨ï¼Œå­—ç¬¦è¾¹ç•Œæ˜æ˜¾ ä½ï¼Œå±€éƒ¨çš„å­—èŠ‚é”™è¯¯ï¼Œå¯èƒ½å¯¼è‡´æ‰€æœ‰åç»­å­—ç¬¦å…¨éƒ¨é”™ä¹± æ•ˆç‡ å˜é•¿å­—èŠ‚å¯¼è‡´è®¡ç®—å­—ç¬¦æ•°å’Œæ‰§è¡Œç´¢å¼•ç­‰æ“ä½œæ•ˆç‡éƒ½ä¸é«˜ åŒå­—èŠ‚ï¼Œåœ¨è®¡ç®—å­—ç¬¦ä¸²é•¿åº¦ã€æ‰§è¡Œç´¢å¼•æ“ä½œæ—¶é€Ÿåº¦å¾ˆå¿« å¤šè¯­ç§ç¯å¢ƒ ASCII ç åªå ç”¨ä¸€ä¸ªå­—èŠ‚ï¼Œè€Œå¯¹äº CJK æ–‡å­—æ¥è¯´è´Ÿæ‹…å¤ªå¤§ï¼Œä¸€ä¸ªå­—ç¬¦å ç”¨ 3 ä¸ªå­—èŠ‚ åˆšå¥½å’Œå‰è€…ç›¸å Â· æ— è®ºæ˜¯ UTF-8 å’Œ UTF-16/32 éƒ½å„æœ‰ä¼˜ç¼ºç‚¹ï¼Œå› æ­¤é€‰æ‹©çš„æ—¶å€™åº”å½“ç«‹è¶³äºå®é™…çš„åº”ç”¨åœºæ™¯ã€‚\næ€»ç»“ æœ¬æ–‡ä¸»è¦ä»‹ç»äº†å­—ç¬¦ç¼–ç å’Œå­—ç¬¦é›†ã€Unicode ç¼–ç ä»¥åŠ Unicode çš„å®ç°æ–¹å¼ â€”â€” UTF-8 å’Œ UTF-16 ä¸¤ç§ç¼–ç æ–¹å¼çš„ç›¸å…³çŸ¥è¯†ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ Unicode ç¼–ç ä¸€èˆ¬æŒ‡çš„æ˜¯ Unicode å­—ç¬¦é›†ï¼Œè€Œ UTF-8 å’Œ UTF-16 ç¼–ç æŒ‡çš„æ˜¯ Unicode çš„å®ç°æ–¹å¼ï¼Œå¸Œæœ›æœ¬æ–‡èƒ½å¤Ÿå¸®åŠ©å¤§å®¶ç†è§£æ¸…æ¥šè¿™äº›çŸ¥è¯†ã€‚\n","date":"2023-05-17T18:56:45+08:00","image":"https://ibakuman.github.io/gallery/landscape/03_hua119d5172e80ee912c81cee3e4b607ac_783790_120x120_fill_q75_box_smart1.jpg","permalink":"https://ibakuman.github.io/posts/misc/unicode-and-utf8/","title":"ä¸€æ¬¡æ€§å¼„æ‡‚ Unicode å’Œ UTF-8"},{"content":"é¢˜ç›®æè¿° ç»™å®šä¸€ä¸ªæ•°ç»„ prices ï¼Œå®ƒçš„ç¬¬Â i ä¸ªå…ƒç´ Â prices[i] è¡¨ç¤ºä¸€æ”¯ç»™å®šè‚¡ç¥¨ç¬¬ i å¤©çš„ä»·æ ¼ã€‚\nä½ åªèƒ½é€‰æ‹© æŸä¸€å¤© ä¹°å…¥è¿™åªè‚¡ç¥¨ï¼Œå¹¶é€‰æ‹©åœ¨ æœªæ¥çš„æŸä¸€ä¸ªä¸åŒçš„æ—¥å­ å–å‡ºè¯¥è‚¡ç¥¨ã€‚è®¾è®¡ä¸€ä¸ªç®—æ³•æ¥è®¡ç®—ä½ æ‰€èƒ½è·å–çš„æœ€å¤§åˆ©æ¶¦ã€‚\nè¿”å›ä½ å¯ä»¥ä»è¿™ç¬”äº¤æ˜“ä¸­è·å–çš„æœ€å¤§åˆ©æ¶¦ã€‚å¦‚æœä½ ä¸èƒ½è·å–ä»»ä½•åˆ©æ¶¦ï¼Œè¿”å› 0 ã€‚\nç¤ºä¾‹ 1ï¼š\nè¾“å…¥ï¼š[7,1,5,3,6,4] è¾“å‡ºï¼š5 è§£é‡Šï¼šåœ¨ç¬¬ 2 å¤©ï¼ˆè‚¡ç¥¨ä»·æ ¼ = 1ï¼‰çš„æ—¶å€™ä¹°å…¥ï¼Œåœ¨ç¬¬ 5 å¤©ï¼ˆè‚¡ç¥¨ä»·æ ¼ = 6ï¼‰çš„æ—¶å€™å–å‡ºï¼Œæœ€å¤§åˆ©æ¶¦ = 6-1 = 5 ã€‚ æ³¨æ„åˆ©æ¶¦ä¸èƒ½æ˜¯ 7-1 = 6, å› ä¸ºå–å‡ºä»·æ ¼éœ€è¦å¤§äºä¹°å…¥ä»·æ ¼ï¼›åŒæ—¶ï¼Œä½ ä¸èƒ½åœ¨ä¹°å…¥å‰å–å‡ºè‚¡ç¥¨ã€‚ ç¤ºä¾‹ 2ï¼š\nè¾“å…¥ï¼šprices = [7,6,4,3,1] è¾“å‡ºï¼š0 è§£é‡Šï¼šåœ¨è¿™ç§æƒ…å†µä¸‹, æ²¡æœ‰äº¤æ˜“å®Œæˆ, æ‰€ä»¥æœ€å¤§åˆ©æ¶¦ä¸º 0ã€‚ æç¤ºï¼š\n1 \u0026lt;= prices.length \u0026lt;= 105 0 \u0026lt;= prices[i] \u0026lt;= 104 è§£æ³•ä¸€ï¼šä¸€æ¬¡éå† ä½¿ç”¨ä¸€ä¸ªå˜é‡ minPrice è®°å½•å½“å¤©å‰é¢è‚¡ç¥¨çš„æœ€ä½ä»·ï¼Œå¦‚æœ prices[i] - minPrice å¤§äº resï¼Œåˆ™æ›´æ–° resï¼Œæœ€åè¿”å› res å³å¯ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 func maxProfit(prices []int) int { n := len(prices) minPrice, res := prices[0], 0 for i := 1; i \u0026lt; n; i++ { if prices[i] \u0026lt; minPrice { minPrice = prices[i] } else if res \u0026lt; prices[i]-minPrice { res = prices[i] - minPrice } } return res } ","date":"2023-05-16T12:36:38+08:00","image":"https://ibakuman.github.io/gallery/landscape/27_hubc821d6e6d7f4a0f5b14def3892e014e_5550125_120x120_fill_q75_box_smart1.jpg","permalink":"https://ibakuman.github.io/posts/leetccode/problems/0121-best-time-to-buy-and-sell-stock/","title":"121. ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº"},{"content":"é¢˜ç›®æè¿° ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ prices ï¼Œå…¶ä¸­Â prices[i] è¡¨ç¤ºæŸæ”¯è‚¡ç¥¨ç¬¬ i å¤©çš„ä»·æ ¼ã€‚\nåœ¨æ¯ä¸€å¤©ï¼Œä½ å¯ä»¥å†³å®šæ˜¯å¦è´­ä¹°å’Œ / æˆ–å‡ºå”®è‚¡ç¥¨ã€‚ä½ åœ¨ä»»ä½•æ—¶å€™Â æœ€å¤šÂ åªèƒ½æŒæœ‰ ä¸€è‚¡ è‚¡ç¥¨ã€‚ä½ ä¹Ÿå¯ä»¥å…ˆè´­ä¹°ï¼Œç„¶ååœ¨ åŒä¸€å¤© å‡ºå”®ã€‚\nè¿”å› ä½ èƒ½è·å¾—çš„ æœ€å¤§ åˆ©æ¶¦Â ã€‚\nç¤ºä¾‹ 1ï¼š\nè¾“å…¥ï¼šprices = [7,1,5,3,6,4] è¾“å‡ºï¼š7 è§£é‡Šï¼šåœ¨ç¬¬ 2 å¤©ï¼ˆè‚¡ç¥¨ä»·æ ¼ = 1ï¼‰çš„æ—¶å€™ä¹°å…¥ï¼Œåœ¨ç¬¬ 3 å¤©ï¼ˆè‚¡ç¥¨ä»·æ ¼ = 5ï¼‰çš„æ—¶å€™å–å‡º, è¿™ç¬”äº¤æ˜“æ‰€èƒ½è·å¾—åˆ©æ¶¦ = 5 - 1 = 4 ã€‚éšåï¼Œåœ¨ç¬¬ 4 å¤©ï¼ˆè‚¡ç¥¨ä»·æ ¼ = 3ï¼‰çš„æ—¶å€™ä¹°å…¥ï¼Œåœ¨ç¬¬ 5 å¤©ï¼ˆè‚¡ç¥¨ä»·æ ¼ = 6ï¼‰çš„æ—¶å€™å–å‡º, è¿™ç¬”äº¤æ˜“æ‰€èƒ½è·å¾—åˆ©æ¶¦ = 6 - 3 = 3 ã€‚ æ€»åˆ©æ¶¦ä¸º 4 + 3 = 7 ã€‚ ç¤ºä¾‹ 2ï¼š\nè¾“å…¥ï¼šprices = [1,2,3,4,5] è¾“å‡ºï¼š4 è§£é‡Šï¼šåœ¨ç¬¬ 1 å¤©ï¼ˆè‚¡ç¥¨ä»·æ ¼ = 1ï¼‰çš„æ—¶å€™ä¹°å…¥ï¼Œåœ¨ç¬¬ 5 å¤© ï¼ˆè‚¡ç¥¨ä»·æ ¼ = 5ï¼‰çš„æ—¶å€™å–å‡º, è¿™ç¬”äº¤æ˜“æ‰€èƒ½è·å¾—åˆ©æ¶¦ = 5 - 1 = 4 ã€‚ æ€»åˆ©æ¶¦ä¸º 4 ã€‚ ç¤ºä¾‹Â 3ï¼š\nè¾“å…¥ï¼šprices = [7,6,4,3,1] è¾“å‡ºï¼š0 è§£é‡Šï¼šåœ¨è¿™ç§æƒ…å†µä¸‹, äº¤æ˜“æ— æ³•è·å¾—æ­£åˆ©æ¶¦ï¼Œæ‰€ä»¥ä¸å‚ä¸äº¤æ˜“å¯ä»¥è·å¾—æœ€å¤§åˆ©æ¶¦ï¼Œæœ€å¤§åˆ©æ¶¦ä¸º 0 ã€‚ æç¤ºï¼š\n1 \u0026lt;= prices.length \u0026lt;= 3 * 104 0 \u0026lt;= prices[i] \u0026lt;= 104 è§£æ³•ä¸€ï¼šå›æº¯ï¼ˆè¶…æ—¶ï¼‰ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 func maxProfit(prices []int) int { n := len(prices) res := 0 // status represents whether the stock is currently held or not. // 1 indicates holding and 0 indicates not holding. var backtracking func(idx, profit int, status bool) backtracking = func(idx, profit int, status bool) { if idx == n { if profit \u0026gt; res { res = profit } return } // no operation backtracking(idx+1, profit, status) if status { // sell stocks backtracking(idx+1, profit+prices[idx], false) } else { // buy stocks backtracking(idx+1, profit-prices[idx], true) } } backtracking(0, 0, false) return res } è§£æ³•äºŒï¼šåŠ¨æ€è§„åˆ’ è§„å®šï¼šdp[i][j] è®°å½•çš„æ˜¯å‰ i å¤©æŒè‚¡çŠ¶æ€ä¸º j æ—¶èƒ½å¤Ÿè·å¾—çš„æœ€å¤§åˆ©æ¶¦ã€‚j çš„å–å€¼ä¸º 0 æˆ– 1ï¼Œj==0 è¡¨ç¤ºæœªæŒè‚¡ï¼Œj==1 è¡¨ç¤ºæŒè‚¡ã€‚\nç”±ä¸Šé¢çš„è§„å®šå¯å¾—ï¼š\n\\begin{equation} \\begin{cases} \\text{dp[i][0]} = max(dp[i-1][1] + prices[i],dp[i-1][0]) \\\\ \\text{dp[i][1]} = max(dp[i-1][1], dp[i-1][0] - prices[i]) \\\\ \\end{cases} \\end{equation}\nåˆå§‹æ—¶ dp[0][0] = 0ã€dp[0][1] = -prices[0]\nç”±æ­¤å¯å†™å‡ºå¦‚ä¸‹åŠ¨æ€è§„åˆ’ä»£ç ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 func max(nums ...int) int { ans := nums[0] for i := 1; i \u0026lt; len(nums); i++ { if nums[i] \u0026gt; ans { ans = nums[i] } } return ans } func maxProfit(prices []int) int { n := len(prices) if n \u0026lt; 2 { return 0 } dp := make([][2]int, n) dp[0][0], dp[0][1] = 0, -prices[0] for i := 1; i \u0026lt; n; i++ { dp[i][0] = max(dp[i-1][1]+prices[i], dp[i-1][0]) dp[i][1] = max(dp[i-1][0]-prices[i], dp[i-1][1]) } return dp[n-1][0] } ä¼˜åŒ–ä¸Šé¢ä»£ç ï¼Œä¼˜åŒ–åçš„ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 func max(nums ...int) int { ans := nums[0] for i := 1; i \u0026lt; len(nums); i++ { if nums[i] \u0026gt; ans { ans = nums[i] } } return ans } func maxProfit(prices []int) int { n := len(prices) if n \u0026lt; 2 { return 0 } dp := make([][2]int, 2) dp[0][0], dp[0][1] = 0, -prices[0] for i := 1; i \u0026lt; n; i++ { dp[1][0] = max(dp[0][1]+prices[i], dp[0][0]) dp[1][1] = max(dp[0][0]-prices[i], dp[0][1]) dp[0] = dp[1] } return dp[1][0] } è§£æ³•ä¸‰ï¼šè´ªå¿ƒç®—æ³• 1 2 3 4 5 6 7 8 9 func maxProfit(prices []int) int { res := 0 for i := 1; i \u0026lt; len(prices); i++ { if prices[i] \u0026gt; prices[i-1] { res += prices[i] - prices[i-1] } } return res } ","date":"2023-05-16T12:33:56+08:00","image":"https://ibakuman.github.io/gallery/landscape/32_hu51b920b09f70697adb8efd022a77ced5_660746_120x120_fill_q75_box_smart1.jpg","permalink":"https://ibakuman.github.io/posts/leetccode/problems/0122-best-time-to-buy-and-sell-stock-ii/","title":"122. ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº II"},{"content":"é¢˜ç›®æè¿° ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ nums ï¼Œè¯·ä½ æ‰¾å‡ºä¸€ä¸ªå…·æœ‰æœ€å¤§å’Œçš„è¿ç»­å­æ•°ç»„ï¼ˆå­æ•°ç»„æœ€å°‘åŒ…å«ä¸€ä¸ªå…ƒç´ ï¼‰ï¼Œè¿”å›å…¶æœ€å¤§å’Œã€‚\nå­æ•°ç»„ æ˜¯æ•°ç»„ä¸­çš„ä¸€ä¸ªè¿ç»­éƒ¨åˆ†ã€‚\nç¤ºä¾‹ 1ï¼š\nè¾“å…¥ï¼šnums = [-2,1,-3,4,-1,2,1,-5,4] è¾“å‡ºï¼š6 è§£é‡Šï¼šè¿ç»­å­æ•°ç»„Â [4,-1,2,1] çš„å’Œæœ€å¤§ï¼Œä¸ºÂ 6 ã€‚ ç¤ºä¾‹ 2ï¼š\nè¾“å…¥ï¼šnums = [1] è¾“å‡ºï¼š1 ç¤ºä¾‹ 3ï¼š\nè¾“å…¥ï¼šnums = [5,4,-1,7,8] è¾“å‡ºï¼š23 æç¤ºï¼š\n1 \u0026lt;= nums.length \u0026lt;= 105 -104 \u0026lt;= nums[i] \u0026lt;= 104 è¿›é˜¶: å¦‚æœä½ å·²ç»å®ç°å¤æ‚åº¦ä¸º O(n) çš„è§£æ³•ï¼Œå°è¯•ä½¿ç”¨æ›´ä¸ºç²¾å¦™çš„ åˆ†æ²»æ³• æ±‚è§£ã€‚\nè§£æ³•ä¸€ï¼šåŠ¨æ€è§„åˆ’ dp[i] å®šä¹‰ä¸ºä»¥ nums[i] ç»“å°¾çš„å­æ•°ç»„çš„æœ€å¤§å’Œ\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 func max(nums ...int) int { ans := nums[0] for i := 1; i \u0026lt; len(nums); i++ { if nums[i] \u0026gt; ans { ans = nums[i] } } return ans } func maxSubArray(nums []int) int { n := len(nums) dp := make([]int, n) dp[0] = nums[0] for i := 1; i \u0026lt; n; i++ { if dp[i-1] \u0026lt; 0 { dp[i] = nums[i] } else { dp[i] = dp[i-1] + nums[i] } } return max(dp...) } å‘ç°æ±‚ dp[i] æ—¶åªä½¿ç”¨åˆ°äº† dp[i-1] æ•…å¯ä»¥ä½¿ç”¨ 2 ä¸ªå˜é‡æ¥å–ä»£ dp æ•°ç»„ï¼Œå¹¶åœ¨æ±‚ dp[i] æ—¶æ›´æ–°è¦è¿”å›çš„ç»“æœã€‚ä¼˜åŒ–åçš„ä»£ç å¦‚ä¸‹ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 func maxSubArray(nums []int) int { n := len(nums) prev, res := nums[0], nums[0] for i := 1; i \u0026lt; n; i++ { if prev \u0026lt; 0 { prev = nums[i] } else { prev += nums[i] } if prev \u0026gt; res { res = prev } } return res } ","date":"2023-05-16T12:17:43+08:00","image":"https://ibakuman.github.io/gallery/landscape/18_hu7a8b922ea914ad8a12e0fc01dcf809f5_223556_120x120_fill_q75_box_smart1.jpg","permalink":"https://ibakuman.github.io/posts/leetccode/problems/0053-maximum-subarray/","title":"53. æœ€å¤§å­æ•°ç»„å’Œ"},{"content":"é¢˜ç›®æè¿° å¦‚æœè¿ç»­æ•°å­—ä¹‹é—´çš„å·®ä¸¥æ ¼åœ°åœ¨æ­£æ•°å’Œè´Ÿæ•°ä¹‹é—´äº¤æ›¿ï¼Œåˆ™æ•°å­—åºåˆ—ç§°ä¸ºæ‘†åŠ¨åºåˆ— ã€‚ç¬¬ä¸€ä¸ªå·®ï¼ˆå¦‚æœå­˜åœ¨çš„è¯ï¼‰å¯èƒ½æ˜¯æ­£æ•°æˆ–è´Ÿæ•°ã€‚ä»…æœ‰ä¸€ä¸ªå…ƒç´ æˆ–è€…å«ä¸¤ä¸ªä¸ç­‰å…ƒç´ çš„åºåˆ—ä¹Ÿè§†ä½œæ‘†åŠ¨åºåˆ—ã€‚\nä¾‹å¦‚ï¼ŒÂ [1, 7, 4, 9, 2, 5] æ˜¯ä¸€ä¸ª æ‘†åŠ¨åºåˆ— ï¼Œå› ä¸ºå·®å€¼ (6, -3, 5, -7, 3)Â æ˜¯æ­£è´Ÿäº¤æ›¿å‡ºç°çš„ã€‚\nç›¸åï¼Œ[1, 4, 7, 2, 5]Â å’ŒÂ [1, 7, 4, 5, 5] ä¸æ˜¯æ‘†åŠ¨åºåˆ—ï¼Œç¬¬ä¸€ä¸ªåºåˆ—æ˜¯å› ä¸ºå®ƒçš„å‰ä¸¤ä¸ªå·®å€¼éƒ½æ˜¯æ­£æ•°ï¼Œç¬¬äºŒä¸ªåºåˆ—æ˜¯å› ä¸ºå®ƒçš„æœ€åä¸€ä¸ªå·®å€¼ä¸ºé›¶ã€‚\nå­åºåˆ—: å¯ä»¥é€šè¿‡ä»åŸå§‹åºåˆ—ä¸­åˆ é™¤ä¸€äº›ï¼ˆä¹Ÿå¯ä»¥ä¸åˆ é™¤ï¼‰å…ƒç´ æ¥è·å¾—ï¼Œå‰©ä¸‹çš„å…ƒç´ ä¿æŒå…¶åŸå§‹é¡ºåºã€‚\nç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ nums ï¼Œè¿”å› nums ä¸­ä½œä¸º æ‘†åŠ¨åºåˆ— çš„ æœ€é•¿å­åºåˆ—çš„é•¿åº¦ ã€‚\nç¤ºä¾‹ 1ï¼š\nè¾“å…¥ï¼šnums = [1,7,4,9,2,5] è¾“å‡ºï¼š6 è§£é‡Šï¼šæ•´ä¸ªåºåˆ—å‡ä¸ºæ‘†åŠ¨åºåˆ—ï¼Œå„å…ƒç´ ä¹‹é—´çš„å·®å€¼ä¸º (6, -3, 5, -7, 3) ã€‚ ç¤ºä¾‹ 2ï¼š\nè¾“å…¥ï¼šnums = [1,17,5,10,13,15,10,5,16,8] è¾“å‡ºï¼š7 è§£é‡Šï¼šè¿™ä¸ªåºåˆ—åŒ…å«å‡ ä¸ªé•¿åº¦ä¸º 7 æ‘†åŠ¨åºåˆ—ã€‚ å…¶ä¸­ä¸€ä¸ªæ˜¯ [1, 17, 10, 13, 10, 16, 8] ï¼Œå„å…ƒç´ ä¹‹é—´çš„å·®å€¼ä¸º (16, -7, 3, -3, 6, -8) ã€‚ ç¤ºä¾‹ 3ï¼š\nè¾“å…¥ï¼šnums = [1,2,3,4,5,6,7,8,9] è¾“å‡ºï¼š2 æç¤ºï¼š\n1 \u0026lt;= nums.length \u0026lt;= 1000 0 \u0026lt;= nums[i] \u0026lt;= 1000 è¿›é˜¶: ä½ èƒ½å¦ç”¨Â O(n) æ—¶é—´å¤æ‚åº¦å®Œæˆæ­¤é¢˜ï¼Ÿ\nè§£æ³•ä¸€ï¼šåŠ¨æ€è§„åˆ’ çº¦å®šï¼š\næŸä¸ªåºåˆ—è¢«ç§°ä¸ºã€Œä¸Šå‡æ‘†åŠ¨åºåˆ—ã€ï¼Œå½“ä¸”ä»…å½“è¯¥åºåˆ—æ˜¯æ‘†åŠ¨åºåˆ—ï¼Œä¸”æœ€åä¸€ä¸ªå…ƒç´ å‘ˆä¸Šå‡è¶‹åŠ¿ã€‚å¦‚åºåˆ— [1,3,2,4][1,3,2,4][1,3,2,4] å³ä¸ºã€Œä¸Šå‡æ‘†åŠ¨åºåˆ—ã€ã€‚\næŸä¸ªåºåˆ—è¢«ç§°ä¸ºã€Œä¸‹é™æ‘†åŠ¨åºåˆ—ã€ï¼Œå½“ä¸”ä»…å½“è¯¥åºåˆ—æ˜¯æ‘†åŠ¨åºåˆ—ï¼Œä¸”æœ€åä¸€ä¸ªå…ƒç´ å‘ˆä¸‹é™è¶‹åŠ¿ã€‚å¦‚åºåˆ— [4,2,3,1][4,2,3,1][4,2,3,1] å³ä¸ºã€Œä¸‹é™æ‘†åŠ¨åºåˆ—ã€ã€‚\nç‰¹åˆ«åœ°ï¼Œå¯¹äºé•¿åº¦ä¸º 111 çš„åºåˆ—ï¼Œå®ƒæ—¢æ˜¯ã€Œä¸Šå‡æ‘†åŠ¨åºåˆ—ã€ï¼Œä¹Ÿæ˜¯ã€Œä¸‹é™æ‘†åŠ¨åºåˆ—ã€ã€‚\nåºåˆ—ä¸­çš„æŸä¸ªå…ƒç´ è¢«ç§°ä¸ºã€Œå³°ã€ï¼Œå½“ä¸”ä»…å½“è¯¥å…ƒç´ ä¸¤ä¾§çš„ç›¸é‚»å…ƒç´ å‡å°äºå®ƒã€‚å¦‚åºåˆ— [1,3,2,4][1,3,2,4][1,3,2,4] ä¸­ï¼Œ333 å°±æ˜¯ä¸€ä¸ªã€Œå³°ã€ã€‚\nåºåˆ—ä¸­çš„æŸä¸ªå…ƒç´ è¢«ç§°ä¸ºã€Œè°·ã€ï¼Œå½“ä¸”ä»…å½“è¯¥å…ƒç´ ä¸¤ä¾§çš„ç›¸é‚»å…ƒç´ å‡å¤§äºå®ƒã€‚å¦‚åºåˆ— [1,3,2,4][1,3,2,4][1,3,2,4] ä¸­ï¼Œ222 å°±æ˜¯ä¸€ä¸ªã€Œè°·ã€ã€‚\nç‰¹åˆ«åœ°ï¼Œå¯¹äºä½äºåºåˆ—ä¸¤ç«¯çš„å…ƒç´ ï¼Œåªæœ‰ä¸€ä¾§çš„ç›¸é‚»å…ƒç´ å°äºæˆ–å¤§äºå®ƒï¼Œæˆ‘ä»¬ä¹Ÿç§°å…¶ä¸ºã€Œå³°ã€æˆ–ã€Œè°·ã€ã€‚å¦‚åºåˆ— [1,3,2,4][1,3,2,4][1,3,2,4] ä¸­ï¼Œ111 ä¹Ÿæ˜¯ä¸€ä¸ªã€Œè°·ã€ï¼Œ444 ä¹Ÿæ˜¯ä¸€ä¸ªã€Œå³°ã€ã€‚\nå› ä¸ºä¸€æ®µç›¸é‚»çš„ç›¸åŒå…ƒç´ ä¸­æˆ‘ä»¬æœ€å¤šåªèƒ½é€‰æ‹©å…¶ä¸­çš„ä¸€ä¸ªï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å¿½ç•¥ç›¸é‚»çš„ç›¸åŒå…ƒç´ ã€‚ç°åœ¨æˆ‘ä»¬å‡å®šåºåˆ—ä¸­ä»»æ„ä¸¤ä¸ªç›¸é‚»å…ƒç´ éƒ½ä¸ç›¸åŒï¼Œå³è¦ä¹ˆå·¦ä¾§å¤§äºå³ä¾§ï¼Œè¦ä¹ˆå³ä¾§å¤§äºå·¦ä¾§ã€‚å¯¹äºåºåˆ—ä¸­æ—¢éã€Œå³°ã€ä¹Ÿéã€Œè°·ã€çš„å…ƒç´ ï¼Œæˆ‘ä»¬ç§°å…¶ä¸ºã€Œè¿‡æ¸¡å…ƒç´ ã€ã€‚å¦‚åºåˆ— [1,2,3,4][1,2,3,4][1,2,3,4] ä¸­ï¼Œ222 å’Œ 333 éƒ½æ˜¯ã€Œè¿‡æ¸¡å…ƒç´ ã€ã€‚\nè§„å®šæ•°ç»„ up å’Œ down çš„æ„ä¹‰å¦‚ä¸‹ï¼š\nup[i] è¡¨ç¤ºä»¥å‰ i ä¸ªå…ƒç´ ä¸­çš„æŸä¸€ä¸ªä¸ºç»“å°¾çš„æœ€é•¿çš„ã€Œä¸Šå‡æ‘†åŠ¨åºåˆ—ã€çš„é•¿åº¦ã€‚ down[i] è¡¨ç¤ºä»¥å‰ i ä¸ªå…ƒç´ ä¸­çš„æŸä¸€ä¸ªä¸ºç»“å°¾çš„æœ€é•¿çš„ã€Œä¸‹é™æ‘†åŠ¨åºåˆ—ã€çš„é•¿åº¦ã€‚ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 func max(nums ...int) int { ans := nums[0] for i := 1; i \u0026lt; len(nums); i++ { if nums[i] \u0026gt; ans { ans = nums[i] } } return ans } func wiggleMaxLength(nums []int) int { n := len(nums) if n \u0026lt; 2 { return n } up, down := make([]int, n), make([]int, n) up[0], down[0] = 1, 1 for i := 1; i \u0026lt; n; i++ { if nums[i] \u0026gt; nums[i-1] { down[i] = down[i-1] up[i] = max(up[i-1], down[i-1]+1) } else if nums[i] \u0026lt; nums[i-1] { up[i] = up[i-1] down[i] = max(down[i-1], up[i-1]+1) } else { up[i] = up[i-1] down[i] = down[i-1] } } return max(down[n-1], up[n-1]) } è§£æ³•äºŒï¼šè´ªå¿ƒ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 func wiggleMaxLength(nums []int) int { n := len(nums) if n \u0026lt; 2 { return n } ans := 1 flag := 0 for i := 1; i \u0026lt; n; i++ { if nums[i] == nums[i-1] { continue } else if nums[i] \u0026gt; nums[i-1] { if flag == 1 { continue } flag = 1 ans++ } else { // nums[i] \u0026lt; nums[i-1] if flag == 2 { continue } flag = 2 ans++ } } return ans } ","date":"2023-05-09T21:20:22+08:00","image":"https://ibakuman.github.io/gallery/landscape/06_hu81244abf406e14dcc233313eedffeb78_1696606_120x120_fill_q75_box_smart1.jpg","permalink":"https://ibakuman.github.io/posts/leetccode/problems/0376-wiggle-subsequence/","title":"376. æ‘†åŠ¨åºåˆ—"},{"content":"é¢˜ç›®æè¿° ç¼–å†™ä¸€ä¸ªç¨‹åºï¼Œé€šè¿‡å¡«å……ç©ºæ ¼æ¥è§£å†³æ•°ç‹¬é—®é¢˜ã€‚\næ•°ç‹¬çš„è§£æ³•éœ€ éµå¾ªå¦‚ä¸‹è§„åˆ™ï¼š\næ•°å­—Â 1-9Â åœ¨æ¯ä¸€è¡Œåªèƒ½å‡ºç°ä¸€æ¬¡ã€‚ æ•°å­—Â 1-9Â åœ¨æ¯ä¸€åˆ—åªèƒ½å‡ºç°ä¸€æ¬¡ã€‚ æ•°å­—Â 1-9Â åœ¨æ¯ä¸€ä¸ªä»¥ç²—å®çº¿åˆ†éš”çš„Â 3x3Â å®«å†…åªèƒ½å‡ºç°ä¸€æ¬¡ã€‚ï¼ˆè¯·å‚è€ƒç¤ºä¾‹å›¾ï¼‰ æ•°ç‹¬éƒ¨åˆ†ç©ºæ ¼å†…å·²å¡«å…¥äº†æ•°å­—ï¼Œç©ºç™½æ ¼ç”¨Â '.'Â è¡¨ç¤ºã€‚\nç¤ºä¾‹ 1ï¼š\nè¾“å…¥ï¼šboard = [ [\"5\",\"3\",\".\",\".\",\"7\",\".\",\".\",\".\",\".\"], [\"6\",\".\",\".\",\"1\",\"9\",\"5\",\".\",\".\",\".\"], [\".\",\"9\",\"8\",\".\",\".\",\".\",\".\",\"6\",\".\"], [\"8\",\".\",\".\",\".\",\"6\",\".\",\".\",\".\",\"3\"], [\"4\",\".\",\".\",\"8\",\".\",\"3\",\".\",\".\",\"1\"], [\"7\",\".\",\".\",\".\",\"2\",\".\",\".\",\".\",\"6\"], [\".\",\"6\",\".\",\".\",\".\",\".\",\"2\",\"8\",\".\"], [\".\",\".\",\".\",\"4\",\"1\",\"9\",\".\",\".\",\"5\"], [\".\",\".\",\".\",\".\",\"8\",\".\",\".\",\"7\",\"9\"]] è¾“å‡ºï¼š[ [\"5\",\"3\",\"4\",\"6\",\"7\",\"8\",\"9\",\"1\",\"2\"], [\"6\",\"7\",\"2\",\"1\",\"9\",\"5\",\"3\",\"4\",\"8\"], [\"1\",\"9\",\"8\",\"3\",\"4\",\"2\",\"5\",\"6\",\"7\"], [\"8\",\"5\",\"9\",\"7\",\"6\",\"1\",\"4\",\"2\",\"3\"], [\"4\",\"2\",\"6\",\"8\",\"5\",\"3\",\"7\",\"9\",\"1\"], [\"7\",\"1\",\"3\",\"9\",\"2\",\"4\",\"8\",\"5\",\"6\"], [\"9\",\"6\",\"1\",\"5\",\"3\",\"7\",\"2\",\"8\",\"4\"], [\"2\",\"8\",\"7\",\"4\",\"1\",\"9\",\"6\",\"3\",\"5\"], [\"3\",\"4\",\"5\",\"2\",\"8\",\"6\",\"1\",\"7\",\"9\"]] è§£é‡Šï¼šè¾“å…¥çš„æ•°ç‹¬å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œå”¯ä¸€æœ‰æ•ˆçš„è§£å†³æ–¹æ¡ˆå¦‚ä¸‹æ‰€ç¤ºï¼š æç¤ºï¼š\nboard.length == 9 board[i].length == 9 board[i][j] æ˜¯ä¸€ä½æ•°å­—æˆ–è€… '.' é¢˜ç›®æ•°æ® ä¿è¯ è¾“å…¥æ•°ç‹¬ä»…æœ‰ä¸€ä¸ªè§£ è§£æ³•ä¸€ï¼šå›æº¯ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 func solveSudoku(board [][]byte) { var rowRecord, colRecord [9][10]bool var blockRecord [3][3][10]bool var spaces [][2]int for rowIdx, row := range board { for colIdx, ch := range row { if ch == \u0026#39;.\u0026#39; { spaces = append(spaces, [2]int{rowIdx, colIdx}) } else { num := ch - \u0026#39;0\u0026#39; rowRecord[rowIdx][num] = true colRecord[colIdx][num] = true blockRecord[rowIdx/3][colIdx/3][num] = true } } } var dfs func(pos int) bool dfs = func(pos int) bool { if pos == len(spaces) { return true } rowIdx, colIdx := spaces[pos][0], spaces[pos][1] for digit := 1; digit \u0026lt;= 9; digit++ { if !rowRecord[rowIdx][digit] \u0026amp;\u0026amp; !colRecord[colIdx][digit] \u0026amp;\u0026amp; !blockRecord[rowIdx/3][colIdx/3][digit] { rowRecord[rowIdx][digit] = true colRecord[colIdx][digit] = true blockRecord[rowIdx/3][colIdx/3][digit] = true board[rowIdx][colIdx] = byte(\u0026#39;0\u0026#39; + digit) if dfs(pos + 1) { return true } rowRecord[rowIdx][digit] = false colRecord[colIdx][digit] = false blockRecord[rowIdx/3][colIdx/3][digit] = false } } return false } dfs(0) return } ","date":"2023-05-09T19:10:58+08:00","image":"https://ibakuman.github.io/gallery/landscape/13_hudf999d0dc4b7b257102e5c819f964247_303499_120x120_fill_q75_box_smart1.jpg","permalink":"https://ibakuman.github.io/posts/leetccode/problems/0037-sudoku-solver/","title":"37. è§£æ•°ç‹¬"},{"content":" 376. æ‘†åŠ¨åºåˆ— 53. æœ€å¤§å­æ•°ç»„å’Œ 122. ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº II ","date":"2023-05-09T19:08:41+08:00","image":"https://ibakuman.github.io/gallery/landscape/31_hu50ead7b655b5f47cafc1e1da4c3aac1b_499903_120x120_fill_q75_box_smart1.jpg","permalink":"https://ibakuman.github.io/posts/leetccode/dynamic-programming/","title":"å¯ä»¥ä½¿ç”¨åŠ¨æ€è§„åˆ’æ€æƒ³è§£å†³çš„ LeetCode é¢˜ç›®"},{"content":" 455. åˆ†å‘é¥¼å¹² 122. ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº II ","date":"2023-05-09T19:08:41+08:00","image":"https://ibakuman.github.io/gallery/landscape/05_hub432477bc07843360148c20e5d960cbf_635143_120x120_fill_q75_box_smart1.jpg","permalink":"https://ibakuman.github.io/posts/leetccode/greedy/","title":"å¯ä»¥ä½¿ç”¨è´ªå¿ƒç®—æ³•æ€æƒ³è§£å†³çš„ LeetCode é¢˜ç›®"},{"content":"é¢˜ç›®æè¿° å‡è®¾ä½ æ˜¯ä¸€ä½å¾ˆæ£’çš„å®¶é•¿ï¼Œæƒ³è¦ç»™ä½ çš„å­©å­ä»¬ä¸€äº›å°é¥¼å¹²ã€‚ä½†æ˜¯ï¼Œæ¯ä¸ªå­©å­æœ€å¤šåªèƒ½ç»™ä¸€å—é¥¼å¹²ã€‚\nå¯¹æ¯ä¸ªå­©å­ iï¼Œéƒ½æœ‰ä¸€ä¸ªèƒƒå£å€¼Â g[i]ï¼Œè¿™æ˜¯èƒ½è®©å­©å­ä»¬æ»¡è¶³èƒƒå£çš„é¥¼å¹²çš„æœ€å°å°ºå¯¸ï¼›å¹¶ä¸”æ¯å—é¥¼å¹² jï¼Œéƒ½æœ‰ä¸€ä¸ªå°ºå¯¸ s[j] ã€‚å¦‚æœ s[j]Â \u0026gt;= g[i]ï¼Œæˆ‘ä»¬å¯ä»¥å°†è¿™ä¸ªé¥¼å¹² j åˆ†é…ç»™å­©å­ i ï¼Œè¿™ä¸ªå­©å­ä¼šå¾—åˆ°æ»¡è¶³ã€‚ä½ çš„ç›®æ ‡æ˜¯å°½å¯èƒ½æ»¡è¶³è¶Šå¤šæ•°é‡çš„å­©å­ï¼Œå¹¶è¾“å‡ºè¿™ä¸ªæœ€å¤§æ•°å€¼ã€‚\nç¤ºä¾‹Â 1:\nè¾“å…¥: g = [1,2,3], s = [1,1] è¾“å‡º: 1 è§£é‡Š: ä½ æœ‰ä¸‰ä¸ªå­©å­å’Œä¸¤å—å°é¥¼å¹²ï¼Œ3ä¸ªå­©å­çš„èƒƒå£å€¼åˆ†åˆ«æ˜¯ï¼š1,2,3ã€‚ è™½ç„¶ä½ æœ‰ä¸¤å—å°é¥¼å¹²ï¼Œç”±äºä»–ä»¬çš„å°ºå¯¸éƒ½æ˜¯1ï¼Œä½ åªèƒ½è®©èƒƒå£å€¼æ˜¯1çš„å­©å­æ»¡è¶³ã€‚ æ‰€ä»¥ä½ åº”è¯¥è¾“å‡º1ã€‚ ç¤ºä¾‹Â 2:\nè¾“å…¥: g = [1,2], s = [1,2,3] è¾“å‡º: 2 è§£é‡Š: ä½ æœ‰ä¸¤ä¸ªå­©å­å’Œä¸‰å—å°é¥¼å¹²ï¼Œ2ä¸ªå­©å­çš„èƒƒå£å€¼åˆ†åˆ«æ˜¯1,2ã€‚ ä½ æ‹¥æœ‰çš„é¥¼å¹²æ•°é‡å’Œå°ºå¯¸éƒ½è¶³ä»¥è®©æ‰€æœ‰å­©å­æ»¡è¶³ã€‚ æ‰€ä»¥ä½ åº”è¯¥è¾“å‡º2. æç¤ºï¼š\n1 \u0026lt;= g.length \u0026lt;= 3 * 104 0 \u0026lt;= s.length \u0026lt;= 3 * 104 1 \u0026lt;= g[i], s[j] \u0026lt;=Â 231 - 1 è§£æ³•ä¸€ï¼šè´ªå¿ƒ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 func findContentChildren(g []int, s []int) int { sort.Ints(g) sort.Ints(s) i, ans := 0, 0 for j := 0; j \u0026lt; len(g); j++ { for i \u0026lt; len(s) \u0026amp;\u0026amp; g[j] \u0026gt; s[i] { i++ } if i == len(s) { break } i++ ans++ } return ans } ","date":"2023-05-09T19:02:43+08:00","image":"https://ibakuman.github.io/gallery/landscape/22_hu10b223e1bd445490681d4773ec1182e8_2472398_120x120_fill_q75_box_smart1.jpg","permalink":"https://ibakuman.github.io/posts/leetccode/problems/0455-assign-cookies/","title":"455. åˆ†å‘é¥¼å¹²"},{"content":"é¢˜ç›®æè¿° æŒ‰ç…§å›½é™…è±¡æ£‹çš„è§„åˆ™ï¼Œçš‡åå¯ä»¥æ”»å‡»ä¸ä¹‹å¤„åœ¨åŒä¸€è¡Œæˆ–åŒä¸€åˆ—æˆ–åŒä¸€æ–œçº¿ä¸Šçš„æ£‹å­ã€‚\nnÂ çš‡åé—®é¢˜ ç ”ç©¶çš„æ˜¯å¦‚ä½•å°† nÂ ä¸ªçš‡åæ”¾ç½®åœ¨ nÃ—n çš„æ£‹ç›˜ä¸Šï¼Œå¹¶ä¸”ä½¿çš‡åå½¼æ­¤ä¹‹é—´ä¸èƒ½ç›¸äº’æ”»å‡»ã€‚\nç»™ä½ ä¸€ä¸ªæ•´æ•° n ï¼Œè¿”å›æ‰€æœ‰ä¸åŒçš„Â n çš‡åé—®é¢˜ çš„è§£å†³æ–¹æ¡ˆã€‚\næ¯ä¸€ç§è§£æ³•åŒ…å«ä¸€ä¸ªä¸åŒçš„Â n çš‡åé—®é¢˜ çš„æ£‹å­æ”¾ç½®æ–¹æ¡ˆï¼Œè¯¥æ–¹æ¡ˆä¸­ 'Q' å’Œ '.' åˆ†åˆ«ä»£è¡¨äº†çš‡åå’Œç©ºä½ã€‚\nç¤ºä¾‹ 1ï¼š\nè¾“å…¥ï¼šn = 4 è¾“å‡ºï¼š[[\u0026quot;.Q..\u0026quot;,\u0026quot;\u0026hellip;Q\u0026quot;,\u0026ldquo;Q\u0026hellip;\u0026rdquo;,\u0026quot;..Q.\u0026quot;],[\u0026quot;..Q.\u0026quot;,\u0026ldquo;Q\u0026hellip;\u0026rdquo;,\u0026quot;\u0026hellip;Q\u0026quot;,\u0026quot;.Q..\u0026quot;]] è§£é‡Šï¼šå¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œ4 çš‡åé—®é¢˜å­˜åœ¨ä¸¤ä¸ªä¸åŒçš„è§£æ³•ã€‚ ç¤ºä¾‹ 2ï¼š\nè¾“å…¥ï¼šn = 1 è¾“å‡ºï¼š[[\u0026ldquo;Q\u0026rdquo;]] æç¤ºï¼š\n1 \u0026lt;= n \u0026lt;= 9 è§£æ³•ä¸€ï¼šå›æº¯ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 func solveNQueens(n int) [][]string { var ans [][]string tmp := make([][]byte, n) for i := 0; i \u0026lt; n; i++ { tmp[i] = make([]byte, n) for j := 0; j \u0026lt; n; j++ { tmp[i][j] = \u0026#39;.\u0026#39; } } columns := make([]bool, n) leftToR := make(map[int]bool) rightToL := make(map[int]bool) var backtracking func(row int) backtracking = func(row int) { if row == n { t := make([]string, n) for i := 0; i \u0026lt; n; i++ { t[i] = string(tmp[i]) } ans = append(ans, t) return } for col := 0; col \u0026lt; n; col++ { if !columns[col] \u0026amp;\u0026amp; !leftToR[col-row] \u0026amp;\u0026amp; !rightToL[col+row] { columns[col] = true leftToR[col-row] = true rightToL[col+row] = true tmp[row][col] = \u0026#39;Q\u0026#39; backtracking(row + 1) tmp[row][col] = \u0026#39;.\u0026#39; columns[col] = false leftToR[col-row] = false rightToL[col+row] = false } } } backtracking(0) return ans } ","date":"2023-05-09T14:02:33+08:00","image":"https://ibakuman.github.io/gallery/landscape/11_hudf52b8b325017a6d69e0e042062b02e2_3188398_120x120_fill_q75_box_smart1.jpg","permalink":"https://ibakuman.github.io/posts/leetccode/problems/0051-n-queens/","title":"51. N çš‡å"},{"content":"é¢˜ç›®æè¿° ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ nums ï¼Œæ‰¾å‡ºå¹¶è¿”å›æ‰€æœ‰è¯¥æ•°ç»„ä¸­ä¸åŒçš„é€’å¢å­åºåˆ—ï¼Œé€’å¢å­åºåˆ—ä¸­ è‡³å°‘æœ‰ä¸¤ä¸ªå…ƒç´  ã€‚ä½ å¯ä»¥æŒ‰ ä»»æ„é¡ºåº è¿”å›ç­”æ¡ˆã€‚\næ•°ç»„ä¸­å¯èƒ½å«æœ‰é‡å¤å…ƒç´ ï¼Œå¦‚å‡ºç°ä¸¤ä¸ªæ•´æ•°ç›¸ç­‰ï¼Œä¹Ÿå¯ä»¥è§†ä½œé€’å¢åºåˆ—çš„ä¸€ç§ç‰¹æ®Šæƒ…å†µã€‚\nç¤ºä¾‹ 1ï¼š\nè¾“å…¥ï¼šnums = [4,6,7,7] è¾“å‡ºï¼š[[4,6],[4,6,7],[4,6,7,7],[4,7],[4,7,7],[6,7],[6,7,7],[7,7]] ç¤ºä¾‹ 2ï¼š\nè¾“å…¥ï¼šnums = [4,4,3,2,1] è¾“å‡ºï¼š[[4,4]] æç¤ºï¼š\n1 \u0026lt;= nums.length \u0026lt;= 15 -100 \u0026lt;= nums[i] \u0026lt;= 100 è§£æ³•ä¸€ï¼šå›æº¯ å¦‚ä¸‹ä»£ç å½“ nums = [1,2,1,2,3] ä¸èƒ½é€šè¿‡ï¼Œè¾“å‡ºå¦‚ä¸‹\n[[1,2],[1,2,2],[1,2,2,3],[1,2,3],[1,1],[1,1,2], [1,1,2,3],[1,1,3],[1,2],[1,2,3],[1,3],[2,2],[2,2,3], [2,3],[1,2],[1,2,3],[1,3],[2,3]] é¢„æœŸç»“æœå¦‚ä¸‹\n[[1,2],[1,2,2],[1,2,2,3],[1,2,3],[1,1],[1,1,2], [1,1,2,3],[1,1,3],[1,3],[2,2],[2,2,3],[2,3]] å¯ä»¥è§‚å¯Ÿåˆ° [1, 2] å‡ºç°äº†é‡å¤ï¼Œä¸‹é¢æ˜¯æ­£ç¡®ä»£ç \n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 func findSubsequences(nums []int) [][]int { n := len(nums) if n \u0026lt; 2 { return [][]int{} } var ans [][]int var tmp []int var backtracking func(startIdx int) backtracking = func(startIdx int) { if len(tmp) \u0026gt;= 2 { ans = append(ans, append([]int(nil), tmp...)) } visited := make(map[int]bool) for i := startIdx; i \u0026lt; n; i++ { if visited[nums[i]] { continue } visited[nums[i]] = true if len(tmp) == 0 || nums[i] \u0026gt;= tmp[len(tmp)-1] { tmp = append(tmp, nums[i]) backtracking(i + 1) tmp = tmp[:len(tmp)-1] } } } backtracking(0) return ans } ","date":"2023-05-09T11:32:32+08:00","image":"https://ibakuman.github.io/gallery/landscape/14_hu408d85e3d6fd20da711d14997ee2c37d_918594_120x120_fill_q75_box_smart1.jpg","permalink":"https://ibakuman.github.io/posts/leetccode/problems/0491-non-decreasing-subsequences/","title":"491. é€’å¢å­åºåˆ—"},{"content":"é¢˜ç›®æè¿° ç»™å®šä¸€ä¸ªä¸å«é‡å¤æ•°å­—çš„æ•°ç»„ nums ï¼Œè¿”å›å…¶ æ‰€æœ‰å¯èƒ½çš„å…¨æ’åˆ— ã€‚ä½ å¯ä»¥ æŒ‰ä»»æ„é¡ºåº è¿”å›ç­”æ¡ˆã€‚\nç¤ºä¾‹ 1ï¼š\nè¾“å…¥ï¼šnums = [1,2,3] è¾“å‡ºï¼š[[1,2,3],[1,3,2],[2,1,3],[2,3,1],[3,1,2],[3,2,1]] ç¤ºä¾‹ 2ï¼š\nè¾“å…¥ï¼šnums = [0,1] è¾“å‡ºï¼š[[0,1],[1,0]] ç¤ºä¾‹ 3ï¼š\nè¾“å…¥ï¼šnums = [1] è¾“å‡ºï¼š[[1]] æç¤ºï¼š\n1 \u0026lt;= nums.length \u0026lt;= 6 -10 \u0026lt;= nums[i] \u0026lt;= 10 nums ä¸­çš„æ‰€æœ‰æ•´æ•° äº’ä¸ç›¸åŒ è§£æ³•ä¸€ï¼šå›æº¯ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 func permute(nums []int) [][]int { n := len(nums) used := make([]bool, n) var ans [][]int var tmp []int var backtracking func(cnt int) backtracking = func(cnt int) { if cnt == n { ans = append(ans, append([]int(nil), tmp...)) return } for i := 0; i \u0026lt; n; i++ { if !used[i] { used[i] = true tmp = append(tmp, nums[i]) backtracking(cnt+1) tmp = tmp[:len(tmp)-1] used[i] = false } } } backtracking(0) return ans } ","date":"2023-05-09T11:28:44+08:00","image":"https://ibakuman.github.io/gallery/landscape/17_hudbc1561b7a760b2f47477637bc223f35_938024_120x120_fill_q75_box_smart1.jpg","permalink":"https://ibakuman.github.io/posts/leetccode/problems/0046-permutations/","title":"46. å…¨æ’åˆ—"},{"content":"é¢˜ç›®æè¿° ç»™å®šä¸€ä¸ªå¯åŒ…å«é‡å¤æ•°å­—çš„åºåˆ— nums ï¼ŒæŒ‰ä»»æ„é¡ºåº è¿”å›æ‰€æœ‰ä¸é‡å¤çš„å…¨æ’åˆ—ã€‚\nç¤ºä¾‹ 1ï¼š\nè¾“å…¥ï¼šnums = [1,1,2] è¾“å‡ºï¼š [[1,1,2], [1,2,1], [2,1,1]] ç¤ºä¾‹ 2ï¼š\nè¾“å…¥ï¼šnums = [1,2,3] è¾“å‡ºï¼š[[1,2,3],[1,3,2],[2,1,3],[2,3,1],[3,1,2],[3,2,1]] æç¤ºï¼š\n1 \u0026lt;= nums.length \u0026lt;= 8 -10 \u0026lt;= nums[i] \u0026lt;= 10 è§£æ³•ä¸€ï¼šæ’åº + å›æº¯ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 func permuteUnique(nums []int) [][]int { n := len(nums) sort.Ints(nums) used := make([]bool, n) var ans [][]int var tmp []int var backtracking func(cnt int) backtracking = func(cnt int) { if cnt == n { ans = append(ans, append([]int(nil), tmp...)) return } for i := 0; i \u0026lt; n; i++ { if used[i] || i \u0026gt; 0 \u0026amp;\u0026amp; !used[i-1] \u0026amp;\u0026amp; nums[i] == nums[i-1] { continue } used[i] = true tmp = append(tmp, nums[i]) backtracking(cnt + 1) tmp = tmp[:len(tmp)-1] used[i] = false } } backtracking(0) return ans } ","date":"2023-05-09T11:13:17+08:00","image":"https://ibakuman.github.io/gallery/landscape/26_hu8ac3923ab95114b170942013d0440a93_813873_120x120_fill_q75_box_smart1.jpg","permalink":"https://ibakuman.github.io/posts/leetccode/problems/0047-permutations-ii/","title":"47. å…¨æ’åˆ— II"},{"content":"é¢˜ç›®æè¿° ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ nums ï¼Œå…¶ä¸­å¯èƒ½åŒ…å«é‡å¤å…ƒç´ ï¼Œè¯·ä½ è¿”å›è¯¥æ•°ç»„æ‰€æœ‰å¯èƒ½çš„å­é›†ï¼ˆå¹‚é›†ï¼‰ã€‚\nè§£é›† ä¸èƒ½ åŒ…å«é‡å¤çš„å­é›†ã€‚è¿”å›çš„è§£é›†ä¸­ï¼Œå­é›†å¯ä»¥æŒ‰ ä»»æ„é¡ºåº æ’åˆ—ã€‚\nç¤ºä¾‹ 1ï¼š\nè¾“å…¥ï¼šnums = [1,2,2] è¾“å‡ºï¼š[[ ],[1],[1,2],[1,2,2],[2],[2,2]] ç¤ºä¾‹ 2ï¼š\nè¾“å…¥ï¼šnums = [0] è¾“å‡ºï¼š[[ ],[0]] æç¤ºï¼š\n1 \u0026lt;= nums.length \u0026lt;= 10 -10 \u0026lt;= nums[i] \u0026lt;= 10 è§£æ³•ä¸€ï¼šæ’åº + å›æº¯ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 func subsetsWithDup(nums []int) [][]int { sort.Ints(nums) n := len(nums) var ans [][]int var tmp []int var backtracking func(idx int) backtracking = func(idx int) { ans = append(ans, append([]int(nil), tmp...)) for i := idx; i \u0026lt; n; i++ { if i == idx || nums[i] != nums[i-1] { tmp = append(tmp, nums[i]) backtracking(i + 1) tmp = tmp[:len(tmp)-1] } } } backtracking(0) return ans } ","date":"2023-05-08T23:55:09+08:00","image":"https://ibakuman.github.io/gallery/landscape/06_hu81244abf406e14dcc233313eedffeb78_1696606_120x120_fill_q75_box_smart1.jpg","permalink":"https://ibakuman.github.io/posts/leetccode/problems/0090-subsets-ii/","title":"90. å­é›† II"},{"content":"é¢˜ç›®æè¿° ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„Â nums ï¼Œæ•°ç»„ä¸­çš„å…ƒç´  äº’ä¸ç›¸åŒ ã€‚è¿”å›è¯¥æ•°ç»„æ‰€æœ‰å¯èƒ½çš„å­é›†ï¼ˆå¹‚é›†ï¼‰ã€‚\nè§£é›† ä¸èƒ½ åŒ…å«é‡å¤çš„å­é›†ã€‚ä½ å¯ä»¥æŒ‰ ä»»æ„é¡ºåº è¿”å›è§£é›†ã€‚\nç¤ºä¾‹ 1ï¼š\nè¾“å…¥ï¼šnums = [1,2,3] è¾“å‡ºï¼š[[ ],[1],[2],[1,2],[3],[1,3],[2,3],[1,2,3]] ç¤ºä¾‹ 2ï¼š\nè¾“å…¥ï¼šnums = [0] è¾“å‡ºï¼š[[ ],[0]] æç¤ºï¼š\n1 \u0026lt;= nums.length \u0026lt;= 10 -10 \u0026lt;= nums[i] \u0026lt;= 10 nums ä¸­çš„æ‰€æœ‰å…ƒç´  äº’ä¸ç›¸åŒ è§£æ³•ä¸€ï¼šå›æº¯ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 func subsets(nums []int) [][]int { n := len(nums) ans := make([][]int, int(math.Pow(2, float64(n)))) var tmp []int tIdx := 0 var backtracking func(idx int) backtracking = func(idx int) { if idx \u0026gt;= n { ans[tIdx] = append([]int(nil), tmp...) tIdx++ return } else { // idx \u0026lt; n tmp = append(tmp, nums[idx]) backtracking(idx + 1) tmp = tmp[:len(tmp)-1] backtracking(idx + 1) } } backtracking(0) return ans } å®˜æ–¹é¢˜è§£å¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 func subsets(nums []int) (ans [][]int) { set := []int{} var dfs func(int) dfs = func(cur int) { if cur == len(nums) { ans = append(ans, append([]int(nil), set...)) return } set = append(set, nums[cur]) dfs(cur + 1) set = set[:len(set)-1] dfs(cur + 1) } dfs(0) return } è§£æ³•äºŒï¼šè¿­ä»£ å®˜æ–¹é¢˜è§£å¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 func subsets(nums []int) (ans [][]int) { n := len(nums) for mask := 0; mask \u0026lt; 1\u0026lt;\u0026lt;n; mask++ { set := []int{} for i, v := range nums { if mask\u0026gt;\u0026gt;i\u0026amp;1 \u0026gt; 0 { set = append(set, v) } } ans = append(ans, append([]int(nil), set...)) } return } ","date":"2023-05-08T23:30:06+08:00","image":"https://ibakuman.github.io/gallery/landscape/18_hu7a8b922ea914ad8a12e0fc01dcf809f5_223556_120x120_fill_q75_box_smart1.jpg","permalink":"https://ibakuman.github.io/posts/leetccode/problems/0078-subsets/","title":"78. å­é›†"},{"content":"é¢˜ç›®æè¿° æœ‰æ•ˆ IP åœ°å€ æ­£å¥½ç”±å››ä¸ªæ•´æ•°ï¼ˆæ¯ä¸ªæ•´æ•°ä½äº 0 åˆ° 255 ä¹‹é—´ç»„æˆï¼Œä¸”ä¸èƒ½å«æœ‰å‰å¯¼ 0ï¼‰ï¼Œæ•´æ•°ä¹‹é—´ç”¨ '.' åˆ†éš”ã€‚\nä¾‹å¦‚ï¼š\u0026quot;0.1.2.201\u0026quot; å’Œ \u0026quot;192.168.1.1\u0026quot; æ˜¯ æœ‰æ•ˆ IP åœ°å€ï¼Œä½†æ˜¯ \u0026quot;0.011.255.245\u0026quot;ã€\u0026quot;192.168.1.312\u0026quot; å’Œ \u0026quot;192.168@1.1\u0026quot; æ˜¯ æ— æ•ˆ IP åœ°å€ã€‚ ç»™å®šä¸€ä¸ªåªåŒ…å«æ•°å­—çš„å­—ç¬¦ä¸² s ï¼Œç”¨ä»¥è¡¨ç¤ºä¸€ä¸ª IP åœ°å€ï¼Œè¿”å›æ‰€æœ‰å¯èƒ½çš„æœ‰æ•ˆ IP åœ°å€ï¼Œè¿™äº›åœ°å€å¯ä»¥é€šè¿‡åœ¨ s ä¸­æ’å…¥Â '.' æ¥å½¢æˆã€‚ä½  ä¸èƒ½Â é‡æ–°æ’åºæˆ–åˆ é™¤ s ä¸­çš„ä»»ä½•æ•°å­—ã€‚ä½ å¯ä»¥æŒ‰ ä»»ä½• é¡ºåºè¿”å›ç­”æ¡ˆã€‚\nç¤ºä¾‹ 1ï¼š\nè¾“å…¥ï¼šs = \u0026ldquo;25525511135\u0026rdquo; è¾“å‡ºï¼š[\u0026ldquo;255.255.11.135\u0026rdquo;,\u0026ldquo;255.255.111.35\u0026rdquo;] ç¤ºä¾‹ 2ï¼š\nè¾“å…¥ï¼šs = \u0026ldquo;0000\u0026rdquo; è¾“å‡ºï¼š[\u0026ldquo;0.0.0.0\u0026rdquo;] ç¤ºä¾‹ 3ï¼š\nè¾“å…¥ï¼šs = \u0026ldquo;101023\u0026rdquo; è¾“å‡ºï¼š[\u0026ldquo;1.0.10.23\u0026rdquo;,\u0026ldquo;1.0.102.3\u0026rdquo;,\u0026ldquo;10.1.0.23\u0026rdquo;,\u0026ldquo;10.10.2.3\u0026rdquo;,\u0026ldquo;101.0.2.3\u0026rdquo;] æç¤ºï¼š\n1 \u0026lt;= s.length \u0026lt;= 20 s ä»…ç”±æ•°å­—ç»„æˆ è§£æ³•ä¸€ï¼šå›æº¯ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 func restoreIpAddresses(s string) []string { if len(s) \u0026lt; 4 || len(s) \u0026gt; 16 { return []string{} } getNum := func(i, j int) int { res := 0 for i \u0026lt;= j { res = res*10 + int(s[i]-\u0026#39;0\u0026#39;) i++ } return res } n := len(s) var ans []string var tmp []string var backtracking func(segId, segStart int) backtracking = func(segId, segStart int) { if segStart \u0026gt;= n { if segId == 4 { ans = append(ans, strings.Join(tmp, \u0026#34;.\u0026#34;)) } return } else if segId \u0026gt; 3 { // pruning operation in backtracking algorithm // segStart \u0026lt; n \u0026amp;\u0026amp; segId \u0026gt; 3 return } else { // segStart \u0026lt; n \u0026amp;\u0026amp; segId \u0026lt;= 3 if s[segStart] == \u0026#39;0\u0026#39; { tmp = append(tmp, \u0026#34;0\u0026#34;) backtracking(segId+1, segStart+1) tmp = tmp[:len(tmp)-1] } else { for j := segStart; j \u0026lt; n; j++ { if getNum(segStart, j) \u0026gt; 255 { break } tmp = append(tmp, s[segStart:j+1]) backtracking(segId+1, j+1) tmp = tmp[:len(tmp)-1] } } } } backtracking(0, 0) return ans } å®˜æ–¹é¢˜è§£å¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 const SEG_COUNT = 4 var ( ans []string segments []int ) func restoreIpAddresses(s string) []string { segments = make([]int, SEG_COUNT) ans = []string{} dfs(s, 0, 0) return ans } func dfs(s string, segId, segStart int) { // å¦‚æœæ‰¾åˆ°äº† 4 æ®µ IP åœ°å€å¹¶ä¸”éå†å®Œäº†å­—ç¬¦ä¸²ï¼Œé‚£ä¹ˆå°±æ˜¯ä¸€ç§ç­”æ¡ˆ if segId == SEG_COUNT { if segStart == len(s) { ipAddr := \u0026#34;\u0026#34; for i := 0; i \u0026lt; SEG_COUNT; i++ { ipAddr += strconv.Itoa(segments[i]) if i != SEG_COUNT - 1 { ipAddr += \u0026#34;.\u0026#34; } } ans = append(ans, ipAddr) } return } // å¦‚æœè¿˜æ²¡æœ‰æ‰¾åˆ° 4 æ®µ IP åœ°å€å°±å·²ç»éå†å®Œäº†å­—ç¬¦ä¸²ï¼Œé‚£ä¹ˆæå‰å›æº¯ if segStart == len(s) { return } // ç”±äºä¸èƒ½æœ‰å‰å¯¼é›¶ï¼Œå¦‚æœå½“å‰æ•°å­—ä¸º 0ï¼Œé‚£ä¹ˆè¿™ä¸€æ®µ IP åœ°å€åªèƒ½ä¸º 0 if s[segStart] == \u0026#39;0\u0026#39; { segments[segId] = 0 dfs(s, segId + 1, segStart + 1) } // ä¸€èˆ¬æƒ…å†µï¼Œæšä¸¾æ¯ä¸€ç§å¯èƒ½æ€§å¹¶é€’å½’ addr := 0 for segEnd := segStart; segEnd \u0026lt; len(s); segEnd++ { addr = addr * 10 + int(s[segEnd] - \u0026#39;0\u0026#39;) if addr \u0026gt; 0 \u0026amp;\u0026amp; addr \u0026lt;= 0xFF { segments[segId] = addr dfs(s, segId + 1, segEnd + 1) } else { break } } } ","date":"2023-05-08T20:45:34+08:00","image":"https://ibakuman.github.io/gallery/landscape/31_hu50ead7b655b5f47cafc1e1da4c3aac1b_499903_120x120_fill_q75_box_smart1.jpg","permalink":"https://ibakuman.github.io/posts/leetccode/problems/0093-restore-ip-addresses/","title":"93. å¤åŸ IP åœ°å€"},{"content":"é¢˜ç›®æè¿° ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸² sï¼Œè¯·ä½ å°† s åˆ†å‰²æˆä¸€äº›å­ä¸²ï¼Œä½¿æ¯ä¸ªå­ä¸²éƒ½æ˜¯ å›æ–‡ä¸² ã€‚è¿”å› s æ‰€æœ‰å¯èƒ½çš„åˆ†å‰²æ–¹æ¡ˆã€‚\nå›æ–‡ä¸² æ˜¯æ­£ç€è¯»å’Œåç€è¯»éƒ½ä¸€æ ·çš„å­—ç¬¦ä¸²ã€‚\nç¤ºä¾‹ 1ï¼š\nè¾“å…¥ï¼šs = \u0026ldquo;aab\u0026rdquo; è¾“å‡ºï¼š[[\u0026ldquo;a\u0026rdquo;,\u0026ldquo;a\u0026rdquo;,\u0026ldquo;b\u0026rdquo;],[\u0026ldquo;aa\u0026rdquo;,\u0026ldquo;b\u0026rdquo;]] ç¤ºä¾‹ 2ï¼š\nè¾“å…¥ï¼šs = \u0026ldquo;a\u0026rdquo; è¾“å‡ºï¼š[[\u0026ldquo;a\u0026rdquo;]] æç¤ºï¼š\n1 \u0026lt;= s.length \u0026lt;= 16 s ä»…ç”±å°å†™è‹±æ–‡å­—æ¯ç»„æˆ è§£æ³•ä¸€ï¼šåŠ¨æ€è§„åˆ’ + å›æº¯ddd 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 func partition(s string) [][]string { n := len(s) dp := make([][]bool, n) for i := 0; i \u0026lt; n; i++ { dp[i] = make([]bool, n) for j := 0; j \u0026lt;= i; j++ { dp[i][j] = true } } for i := n - 2; i \u0026gt;= 0; i-- { for j := i + 1; j \u0026lt; n; j++ { if s[i] == s[j] \u0026amp;\u0026amp; dp[i+1][j-1] { dp[i][j] = true } } } var ans [][]string var tmp []string var backtracking func(idx int) backtracking = func(idx int) { if idx \u0026gt;= n { // replica := make([]string, len(tmp)) // copy(replica, tmp) // ans = append(ans, replica) // replace above three lines with the following one lines ans = append(ans, append([]string(nil), tmp...)) return } for j := idx; j \u0026lt; n; j++ { if dp[idx][j] { tmp = append(tmp, s[idx:j+1]) backtracking(j + 1) tmp = tmp[:len(tmp)-1] } } } backtracking(0) return ans } ","date":"2023-05-08T19:53:35+08:00","image":"https://ibakuman.github.io/gallery/landscape/10_hucf27c6ee6e299e97a870b7c7ce3b8818_623029_120x120_fill_q75_box_smart1.jpg","permalink":"https://ibakuman.github.io/posts/leetccode/problems/0131-palindrome-partitioning/","title":"131. åˆ†å‰²å›æ–‡ä¸²"},{"content":"é¢˜ç›®æè¿° ç»™å®šä¸€ä¸ªå€™é€‰äººç¼–å·çš„é›†åˆÂ candidatesÂ å’Œä¸€ä¸ªç›®æ ‡æ•°Â targetÂ ï¼Œæ‰¾å‡ºÂ candidatesÂ ä¸­æ‰€æœ‰å¯ä»¥ä½¿æ•°å­—å’Œä¸ºÂ targetÂ çš„ç»„åˆã€‚\ncandidatesÂ ä¸­çš„æ¯ä¸ªæ•°å­—åœ¨æ¯ä¸ªç»„åˆä¸­åªèƒ½ä½¿ç”¨Â ä¸€æ¬¡Â ã€‚\næ³¨æ„: è§£é›†ä¸èƒ½åŒ…å«é‡å¤çš„ç»„åˆã€‚\nç¤ºä¾‹Â 1:\nè¾“å…¥: candidates =Â [10,1,2,7,6,1,5], target =Â 8, è¾“å‡º: [ [1,1,6], [1,2,5], [1,7], [2,6] ] ç¤ºä¾‹Â 2:\nè¾“å…¥: candidates =Â [2,5,2,1,2], target =Â 5, è¾“å‡º: [ [1,2,2], [5] ] æç¤º:\n1 \u0026lt;=Â candidates.length \u0026lt;= 100 1 \u0026lt;=Â candidates[i] \u0026lt;= 50 1 \u0026lt;= target \u0026lt;= 30 è§£æ³•ä¸€ï¼šå›æº¯ æ­£ç¡®ä»£ç  1\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 func combinationSum2(candidates []int, target int) [][]int { if len(candidates) == 0 { return [][]int{} } var c []int var res [][]int sort.Ints(candidates) findCombinationSum2(candidates, target, 0, c, \u0026amp;res) return res } func findCombinationSum2(nums []int, target int, index int, c []int, res *[][]int) { if target \u0026lt;= 0 { if target == 0 { b := make([]int, len(c)) copy(b, c) *res = append(*res, b) } return } for i := index; i \u0026lt; len(nums); i++ { if i \u0026gt; index \u0026amp;\u0026amp; nums[i] == nums[i-1] { continue } if nums[i] \u0026gt; target { break } c = append(c, nums[i]) findCombinationSum2(nums, target-nums[i], i+1, c, res) c = c[:len(c)-1] } } æ­£ç¡®ä»£ç  2\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 func combinationSum2(candidates []int, target int) [][]int { var ans [][]int var tmp []int n := len(candidates) sort.Ints(candidates) var backtracking func(idx, curSum int) backtracking = func(idx, curSum int) { if curSum == target { replica := make([]int, len(tmp)) copy(replica, tmp) ans = append(ans, replica) return } if idx \u0026gt;= n || curSum \u0026gt; target { return } for i := idx; i \u0026lt; n; i++ { if i == idx || candidates[i] != candidates[i-1] { tmp = append(tmp, candidates[idx]) backtracking(i+1, curSum+candidates[idx]) tmp = tmp[:len(tmp)-1] } } } backtracking(0, 0) return ans } ","date":"2023-05-08T18:10:43+08:00","image":"https://ibakuman.github.io/gallery/landscape/07_hu38aa638bb2ccd6db7051157dcdf19c8f_1416034_120x120_fill_q75_box_smart1.jpg","permalink":"https://ibakuman.github.io/posts/leetccode/problems/0040-combination-sum-ii/","title":"40. ç»„åˆæ€»å’Œ II"},{"content":"é¢˜ç›®æè¿° ç»™ä½ ä¸€ä¸ª æ— é‡å¤å…ƒç´  çš„æ•´æ•°æ•°ç»„Â candidates å’Œä¸€ä¸ªç›®æ ‡æ•´æ•°Â targetÂ ï¼Œæ‰¾å‡ºÂ candidatesÂ ä¸­å¯ä»¥ä½¿æ•°å­—å’Œä¸ºç›®æ ‡æ•°Â target çš„ æ‰€æœ‰ ä¸åŒç»„åˆ ï¼Œå¹¶ä»¥åˆ—è¡¨å½¢å¼è¿”å›ã€‚ä½ å¯ä»¥æŒ‰ ä»»æ„é¡ºåº è¿”å›è¿™äº›ç»„åˆã€‚\ncandidates ä¸­çš„ åŒä¸€ä¸ª æ•°å­—å¯ä»¥ æ— é™åˆ¶é‡å¤è¢«é€‰å– ã€‚å¦‚æœè‡³å°‘ä¸€ä¸ªæ•°å­—çš„è¢«é€‰æ•°é‡ä¸åŒï¼Œåˆ™ä¸¤ç§ç»„åˆæ˜¯ä¸åŒçš„ã€‚Â å¯¹äºç»™å®šçš„è¾“å…¥ï¼Œä¿è¯å’Œä¸ºÂ target çš„ä¸åŒç»„åˆæ•°å°‘äº 150 ä¸ªã€‚\nç¤ºä¾‹Â 1ï¼š\nè¾“å…¥ï¼šcandidates = [2,3,6,7], target = 7 è¾“å‡ºï¼š[[2,2,3],[7]] è§£é‡Šï¼š 2 å’Œ 3 å¯ä»¥å½¢æˆä¸€ç»„å€™é€‰ï¼Œ2 + 2 + 3 = 7 ã€‚æ³¨æ„ 2 å¯ä»¥ä½¿ç”¨å¤šæ¬¡ã€‚ 7 ä¹Ÿæ˜¯ä¸€ä¸ªå€™é€‰ï¼Œ 7 = 7 ã€‚ ä»…æœ‰è¿™ä¸¤ç§ç»„åˆã€‚ ç¤ºä¾‹Â 2ï¼š\nè¾“å…¥: candidates = [2,3,5], target = 8 è¾“å‡º: [[2,2,2,2],[2,3,3],[3,5]] ç¤ºä¾‹ 3ï¼š\nè¾“å…¥: candidates = [2], target = 1 è¾“å‡º: [] æç¤ºï¼š\n1 \u0026lt;= candidates.length \u0026lt;= 30 2 \u0026lt;= candidates[i] \u0026lt;= 40 candidates çš„æ‰€æœ‰å…ƒç´  äº’ä¸ç›¸åŒ 1 \u0026lt;= target \u0026lt;= 40 è§£æ³•ä¸€ï¼šå›æº¯ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 func combinationSum(candidates []int, target int) [][]int { var ans [][]int var tmp []int var backtracking func(idx, curSum int) backtracking = func(idx, curSum int) { if curSum \u0026gt; target { return } if curSum == target { replica := make([]int, len(tmp)) copy(replica, tmp) ans = append(ans, replica) } for i := idx; i \u0026lt; len(candidates); i++ { tmp = append(tmp, candidates[i]) backtracking(i, curSum+candidates[i]) tmp = tmp[:len(tmp)-1] } } backtracking(0, 0) return ans } ","date":"2023-05-08T13:20:30+08:00","image":"https://ibakuman.github.io/gallery/landscape/34_hu831bdb41d92a36cf3d6edfa1677a708c_300283_120x120_fill_q75_box_smart1.jpg","permalink":"https://ibakuman.github.io/posts/leetccode/problems/0039-combination-sum/","title":"39. ç»„åˆæ€»å’Œ"},{"content":"é¢˜ç›®æè¿° ç»™å®šä¸€ä¸ªä»…åŒ…å«æ•°å­—Â 2-9Â çš„å­—ç¬¦ä¸²ï¼Œè¿”å›æ‰€æœ‰å®ƒèƒ½è¡¨ç¤ºçš„å­—æ¯ç»„åˆã€‚ç­”æ¡ˆå¯ä»¥æŒ‰ ä»»æ„é¡ºåº è¿”å›ã€‚\nç»™å‡ºæ•°å­—åˆ°å­—æ¯çš„æ˜ å°„å¦‚ä¸‹ï¼ˆä¸ç”µè¯æŒ‰é”®ç›¸åŒï¼‰ã€‚æ³¨æ„ 1 ä¸å¯¹åº”ä»»ä½•å­—æ¯ã€‚\nç¤ºä¾‹ 1ï¼š\nè¾“å…¥ï¼šdigits = \u0026ldquo;23\u0026rdquo; è¾“å‡ºï¼š[\u0026ldquo;ad\u0026rdquo;,\u0026ldquo;ae\u0026rdquo;,\u0026ldquo;af\u0026rdquo;,\u0026ldquo;bd\u0026rdquo;,\u0026ldquo;be\u0026rdquo;,\u0026ldquo;bf\u0026rdquo;,\u0026ldquo;cd\u0026rdquo;,\u0026ldquo;ce\u0026rdquo;,\u0026ldquo;cf\u0026rdquo;] ç¤ºä¾‹ 2ï¼š\nè¾“å…¥ï¼šdigits = \u0026quot;\u0026quot; è¾“å‡ºï¼š[ ] ç¤ºä¾‹ 3ï¼š\nè¾“å…¥ï¼šdigits = \u0026ldquo;2\u0026rdquo; è¾“å‡ºï¼š[\u0026ldquo;a\u0026rdquo;,\u0026ldquo;b\u0026rdquo;,\u0026ldquo;c\u0026rdquo;] æç¤ºï¼š\n0 \u0026lt;= digits.length \u0026lt;= 4 digits[i] æ˜¯èŒƒå›´ ['2', '9'] çš„ä¸€ä¸ªæ•°å­—ã€‚ è§£æ³•ä¸€ï¼šå›æº¯ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 func letterCombinations(digits string) []string { if len(digits) == 0 { return []string{} } record := map[byte]string{ \u0026#39;2\u0026#39;: \u0026#34;abc\u0026#34;, \u0026#39;3\u0026#39;: \u0026#34;def\u0026#34;, \u0026#39;4\u0026#39;: \u0026#34;ghi\u0026#34;, \u0026#39;5\u0026#39;: \u0026#34;jkl\u0026#34;, \u0026#39;6\u0026#39;: \u0026#34;mno\u0026#34;, \u0026#39;7\u0026#39;: \u0026#34;pqrs\u0026#34;, \u0026#39;8\u0026#39;: \u0026#34;tuv\u0026#34;, \u0026#39;9\u0026#39;: \u0026#34;wxyz\u0026#34;, } n := len(digits) var ans []string var tmp []rune var backtracking func(idx int) backtracking = func(idx int) { if idx \u0026gt;= n { ans = append(ans, string(tmp)) return } for _, cur := range record[digits[idx]] { tmp = append(tmp, cur) backtracking(idx + 1) tmp = tmp[:len(tmp)-1] } } backtracking(0) return ans } ","date":"2023-05-07T22:13:03+08:00","image":"https://ibakuman.github.io/gallery/landscape/07_hu38aa638bb2ccd6db7051157dcdf19c8f_1416034_120x120_fill_q75_box_smart1.jpg","permalink":"https://ibakuman.github.io/posts/leetccode/problems/0017-letter-combinations-of-a-phone-number/","title":"17. ç”µè¯å·ç çš„å­—æ¯ç»„åˆ"},{"content":" 17. ç”µè¯å·ç çš„å­—æ¯ç»„åˆ 37. è§£æ•°ç‹¬ 39. ç»„åˆæ€»å’Œ 46. å…¨æ’åˆ— 47. å…¨æ’åˆ— II 51. N çš‡å 77. ç»„åˆ 78. å­é›† 90. å­é›† II 93. å¤åŸ IP åœ°å€ 131. åˆ†å‰²å›æ–‡ä¸² 216. ç»„åˆæ€»å’Œ III 491. é€’å¢å­åºåˆ— analogous\n","date":"2023-05-07T22:09:14+08:00","image":"https://ibakuman.github.io/gallery/landscape/22_hu10b223e1bd445490681d4773ec1182e8_2472398_120x120_fill_q75_box_smart1.jpg","permalink":"https://ibakuman.github.io/posts/leetccode/backtracking/","title":"èƒ½å¤Ÿä½¿ç”¨å›æº¯æ€æƒ³è§£å†³çš„ LeetCode é¢˜ç›®"},{"content":"é¢˜ç›®æè¿° æ‰¾å‡ºæ‰€æœ‰ç›¸åŠ ä¹‹å’Œä¸ºÂ n çš„Â k ä¸ªæ•°çš„ç»„åˆï¼Œä¸”æ»¡è¶³ä¸‹åˆ—æ¡ä»¶ï¼š\nåªä½¿ç”¨æ•°å­— 1 åˆ° 9 æ¯ä¸ªæ•°å­—Â æœ€å¤šä½¿ç”¨ä¸€æ¬¡Â è¿”å› æ‰€æœ‰å¯èƒ½çš„æœ‰æ•ˆç»„åˆçš„åˆ—è¡¨ ã€‚è¯¥åˆ—è¡¨ä¸èƒ½åŒ…å«ç›¸åŒçš„ç»„åˆä¸¤æ¬¡ï¼Œç»„åˆå¯ä»¥ä»¥ä»»ä½•é¡ºåºè¿”å›ã€‚\nç¤ºä¾‹ 1:\nè¾“å…¥: k = 3, n = 7 è¾“å‡º: [[1,2,4]] è§£é‡Š: 1 + 2 + 4 = 7 æ²¡æœ‰å…¶ä»–ç¬¦åˆçš„ç»„åˆäº†ã€‚ ç¤ºä¾‹ 2:\nè¾“å…¥: k = 3, n = 9 è¾“å‡º: [[1,2,6], [1,3,5], [2,3,4]] è§£é‡Š: 1 + 2 + 6 = 9 1 + 3 + 5 = 9 2 + 3 + 4 = 9 æ²¡æœ‰å…¶ä»–ç¬¦åˆçš„ç»„åˆäº†ã€‚ ç¤ºä¾‹ 3:\nè¾“å…¥: k = 4, n = 1 è¾“å‡º: [ ] è§£é‡Š: ä¸å­˜åœ¨æœ‰æ•ˆçš„ç»„åˆã€‚ åœ¨[1,9]èŒƒå›´å†…ä½¿ç”¨4ä¸ªä¸åŒçš„æ•°å­—ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°çš„æœ€å°å’Œæ˜¯1+2+3+4 = 10ï¼Œå› ä¸º10 \u0026gt; 1ï¼Œæ²¡æœ‰æœ‰æ•ˆçš„ç»„åˆã€‚ æç¤º:\n2 \u0026lt;= k \u0026lt;= 9 1 \u0026lt;= n \u0026lt;= 60 è§£æ³•ä¸€ï¼šå›æº¯ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 func combinationSum3(k int, n int) [][]int { arr := []int{1, 2, 3, 4, 5, 6, 7, 8, 9} var tmp []int // cnt is the number of selected number var ans [][]int var backtracking func(idx, cnt, sum int) backtracking = func(idx, cnt, sum int) { if cnt == k { if sum == n { replica := make([]int, k) copy(replica, tmp) ans = append(ans, replica) } return } if sum \u0026gt; n || idx \u0026gt;= 9 { return } tmp = append(tmp, arr[idx]) backtracking(idx+1, cnt+1, sum+arr[idx]) tmp = tmp[:len(tmp)-1] backtracking(idx+1, cnt, sum) } backtracking(0, 0, 0) return ans } ","date":"2023-05-07T22:07:42+08:00","image":"https://ibakuman.github.io/gallery/landscape/08_hufd4c43b663954d2f1b153b9f2254ca86_1202710_120x120_fill_q75_box_smart1.jpg","permalink":"https://ibakuman.github.io/posts/leetccode/problems/0216-combination-sum-iii/","title":"216. ç»„åˆæ€»å’Œ III"},{"content":"é¢˜ç›®æè¿° ç»™å®šä¸¤ä¸ªæ•´æ•° n å’Œ kï¼Œè¿”å›èŒƒå›´ [1, n] ä¸­æ‰€æœ‰å¯èƒ½çš„ k ä¸ªæ•°çš„ç»„åˆã€‚\nä½ å¯ä»¥æŒ‰ ä»»ä½•é¡ºåº è¿”å›ç­”æ¡ˆã€‚\nç¤ºä¾‹ 1ï¼š\nè¾“å…¥ï¼šn = 4, k = 2 è¾“å‡ºï¼š [ [2,4], [3,4], [2,3], [1,2], [1,3], [1,4], ] ç¤ºä¾‹ 2ï¼š\nè¾“å…¥ï¼šn = 1, k = 1 è¾“å‡ºï¼š[[1]] æç¤ºï¼š\n1 \u0026lt;= n \u0026lt;= 20 1 \u0026lt;= k \u0026lt;= n è§£æ³•ä¸€ï¼šå›æº¯ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 func combine(n int, k int) [][]int { var ans [][]int var tmp []int var backtracking func(cur int) backtracking = func(cur int) { if len(tmp)+(n-cur+1) \u0026lt; k { return } if len(tmp) == k { replica := make([]int, len(tmp)) copy(replica, tmp) ans = append(ans, replica) // You cannot replace the above three lines with the following two lines // ans = append(ans, []int{}) // copy(ans[len(ans)-1], tmp) return } if cur == n+1 { return } tmp = append(tmp, cur) backtracking(cur + 1) tmp = tmp[:len(tmp)-1] backtracking(cur + 1) } backtracking(1) return ans } æ³¨æ„: ä¸èƒ½ä½¿ç”¨\n1 2 ans = append(ans, []int{}) copy(ans[len(ans)-1], tmp) æ›¿æ¢\n1 2 3 replica := make([]int, len(tmp)) copy(replica, tmp) ans = append(ans, replica) å› ä¸º copy(dst, src []Type) int è¿™ä¸ªå†…ç½®å‡½æ•°çš„å¤åˆ¶é€»è¾‘æ˜¯ï¼šå¤åˆ¶æºåˆ‡ç‰‡ä»ä¸‹æ ‡ 0 å¼€å§‹çš„ x ä¸ªæ•°æ®åˆ° dstï¼Œå…¶ä¸­ x = min(len(dst), len(src))ï¼Œè¿”å› xï¼Œä¸‹é¢æ˜¯ copy(dst, src []Type) int çš„å®˜æ–¹è¯´æ˜ï¼š\n// The copy built-in function copies elements from a source slice into a\n// destination slice. (As a special case, it also will copy bytes from a\n// string to a slice of bytes.) The source and destination may overlap. Copy\n// returns the number of elements copied, which will be the minimum of\n// len(src) and len(dst).\n","date":"2023-05-07T20:06:36+08:00","image":"https://ibakuman.github.io/gallery/landscape/25_hu0a3309c019aba12b8d679d09b57cc9da_1259768_120x120_fill_q75_box_smart1.jpg","permalink":"https://ibakuman.github.io/posts/leetccode/problems/0077-combinations/","title":"77. ç»„åˆ"},{"content":"é¢˜ç›®æè¿° ç»™å‡ºäºŒå‰ æœç´¢ æ ‘çš„æ ¹èŠ‚ç‚¹ï¼Œè¯¥æ ‘çš„èŠ‚ç‚¹å€¼å„ä¸ç›¸åŒï¼Œè¯·ä½ å°†å…¶è½¬æ¢ä¸ºç´¯åŠ æ ‘ï¼ˆGreater Sum Treeï¼‰ï¼Œä½¿æ¯ä¸ªèŠ‚ç‚¹ nodeÂ çš„æ–°å€¼ç­‰äºåŸæ ‘ä¸­å¤§äºæˆ–ç­‰äºÂ node.valÂ çš„å€¼ä¹‹å’Œã€‚\næé†’ä¸€ä¸‹ï¼ŒäºŒå‰æœç´¢æ ‘æ»¡è¶³ä¸‹åˆ—çº¦æŸæ¡ä»¶ï¼š\nèŠ‚ç‚¹çš„å·¦å­æ ‘ä»…åŒ…å«é”® å°äº èŠ‚ç‚¹é”®çš„èŠ‚ç‚¹ã€‚ èŠ‚ç‚¹çš„å³å­æ ‘ä»…åŒ…å«é”® å¤§äº èŠ‚ç‚¹é”®çš„èŠ‚ç‚¹ã€‚ å·¦å³å­æ ‘ä¹Ÿå¿…é¡»æ˜¯äºŒå‰æœç´¢æ ‘ã€‚ æ³¨æ„: æœ¬é¢˜å’Œ 1038:Â https://leetcode-cn.com/problems/binary-search-tree-to-greater-sum-tree/ ç›¸åŒ\nç¤ºä¾‹ 1ï¼š\nè¾“å…¥ï¼š[4,1,6,0,2,5,7,null,null,null,3,null,null,null,8] è¾“å‡ºï¼š[30,36,21,36,35,26,15,null,null,null,33,null,null,null,8] ç¤ºä¾‹ 2ï¼š\nè¾“å…¥ï¼šroot = [0,null,1] è¾“å‡ºï¼š[1,null,1] ç¤ºä¾‹ 3ï¼š\nè¾“å…¥ï¼šroot = [1,0,2] è¾“å‡ºï¼š[3,3,2] ç¤ºä¾‹ 4ï¼š\nè¾“å…¥ï¼šroot = [3,2,4,1] è¾“å‡ºï¼š[7,9,4,10] æç¤ºï¼š\næ ‘ä¸­çš„èŠ‚ç‚¹æ•°ä»‹äº 0Â å’Œ 104 ä¹‹é—´ã€‚ æ¯ä¸ªèŠ‚ç‚¹çš„å€¼ä»‹äº -104Â å’ŒÂ 104Â ä¹‹é—´ã€‚ æ ‘ä¸­çš„æ‰€æœ‰å€¼ äº’ä¸ç›¸åŒ ã€‚ ç»™å®šçš„æ ‘ä¸ºäºŒå‰æœç´¢æ ‘ã€‚ è§£æ³•ä¸€ï¼šä¸­åºä¾¿åˆ© + åç¼€å’Œ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 func convertBST(root *TreeNode) *TreeNode { if root == nil { // Prevent out of bounds error when performing // suffixSum[len(arr)-1] = arr[len(arr)-1] operation return root } var arr []int var inorder func(root *TreeNode) inorder = func(root *TreeNode) { if root == nil { return } inorder(root.Left) arr = append(arr, root.Val) inorder(root.Right) } inorder(root) // suffixSum[i] is the sum of arr[i...len(arr)-1] suffixSum := make([]int, len(arr)) suffixSum[len(arr)-1] = arr[len(arr)-1] for i := len(arr) - 2; i \u0026gt;= 0; i-- { suffixSum[i] = suffixSum[i+1] + arr[i] } idx := 0 var changeVal func(root *TreeNode) changeVal = func(root *TreeNode) { if root == nil { return } changeVal(root.Left) root.Val = suffixSum[idx] idx++ changeVal(root.Right) } changeVal(root) return root } è§£æ³•äºŒï¼šååºä¸­åºéå† 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 func convertBST(root *TreeNode) *TreeNode { var sum int var revInorder func(root *TreeNode) revInorder = func(root *TreeNode) { if root == nil { return } revInorder(root.Right) sum += root.Val root.Val = sum revInorder(root.Left) } revInorder(root) return root } ","date":"2023-05-06T23:07:07+08:00","image":"https://ibakuman.github.io/gallery/landscape/28_hubb8073e5e8dea6b644ad1c33059b37ce_1206472_120x120_fill_q75_box_smart1.jpg","permalink":"https://ibakuman.github.io/posts/leetccode/problems/0538-convert-bst-to-greater-tree/","title":"538. æŠŠäºŒå‰æœç´¢æ ‘è½¬æ¢ä¸ºç´¯åŠ æ ‘"},{"content":"é¢˜ç›®æè¿° ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ nums ï¼Œå…¶ä¸­å…ƒç´ å·²ç»æŒ‰ å‡åº æ’åˆ—ï¼Œè¯·ä½ å°†å…¶è½¬æ¢ä¸ºä¸€æ£µ é«˜åº¦å¹³è¡¡ äºŒå‰æœç´¢æ ‘ã€‚\né«˜åº¦å¹³è¡¡ äºŒå‰æ ‘æ˜¯ä¸€æ£µæ»¡è¶³ã€Œæ¯ä¸ªèŠ‚ç‚¹çš„å·¦å³ä¸¤ä¸ªå­æ ‘çš„é«˜åº¦å·®çš„ç»å¯¹å€¼ä¸è¶…è¿‡ 1 ã€çš„äºŒå‰æ ‘ã€‚\nç¤ºä¾‹ 1ï¼š\nè¾“å…¥ï¼šnums = [-10,-3,0,5,9] è¾“å‡ºï¼š[0,-3,9,-10,null,5] è§£é‡Šï¼š[0,-10,5,null,-3,null,9] ä¹Ÿå°†è¢«è§†ä¸ºæ­£ç¡®ç­”æ¡ˆï¼š ç¤ºä¾‹ 2ï¼š\nè¾“å…¥ï¼šnums = [1,3] è¾“å‡ºï¼š[3,1] è§£é‡Šï¼š[1,null,3] å’Œ [3,1] éƒ½æ˜¯é«˜åº¦å¹³è¡¡äºŒå‰æœç´¢æ ‘ã€‚ æç¤ºï¼š\n1 \u0026lt;= nums.length \u0026lt;= 104 -104 \u0026lt;= nums[i] \u0026lt;= 104 nums æŒ‰ ä¸¥æ ¼é€’å¢ é¡ºåºæ’åˆ— è§£æ³•ä¸€ï¼šé€’å½’ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 /** * Definition for a binary tree node. * type TreeNode struct { * Val int * Left *TreeNode * Right *TreeNode * } */ func sortedArrayToBST(nums []int) *TreeNode { if len(nums) == 0 { return nil } if len(nums) == 1 { return \u0026amp;TreeNode{Val: nums[0]} } mid := len(nums) / 2 root := \u0026amp;TreeNode{Val: nums[mid]} root.Left = sortedArrayToBST(nums[0:mid]) root.Right = sortedArrayToBST(nums[mid+1:len(nums)]) return root } å®˜æ–¹é¢˜è§£å¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 func sortedArrayToBST(nums []int) *TreeNode { return helper(nums, 0, len(nums) - 1) } func helper(nums []int, left, right int) *TreeNode { if left \u0026gt; right { return nil } mid := (left + right) / 2 root := \u0026amp;TreeNode{Val: nums[mid]} root.Left = helper(nums, left, mid - 1) root.Right = helper(nums, mid + 1, right) return root } ","date":"2023-05-06T22:59:04+08:00","image":"https://ibakuman.github.io/gallery/landscape/12_hudcb57a36f165de723463bb2c9342c95a_1835608_120x120_fill_q75_box_smart1.jpg","permalink":"https://ibakuman.github.io/posts/leetccode/problems/0108-convert-sorted-array-to-binary-search-tree/","title":"108. å°†æœ‰åºæ•°ç»„è½¬æ¢ä¸ºäºŒå‰æœç´¢æ ‘"},{"content":"é¢˜ç›®æè¿° ç»™ä½ äºŒå‰æœç´¢æ ‘çš„æ ¹èŠ‚ç‚¹ root ï¼ŒåŒæ—¶ç»™å®šæœ€å°è¾¹ç•Œ low å’Œæœ€å¤§è¾¹ç•Œ highã€‚é€šè¿‡ä¿®å‰ªäºŒå‰æœç´¢æ ‘ï¼Œä½¿å¾—æ‰€æœ‰èŠ‚ç‚¹çš„å€¼åœ¨ [low, high] ä¸­ã€‚ä¿®å‰ªæ ‘ ä¸åº”è¯¥Â æ”¹å˜ä¿ç•™åœ¨æ ‘ä¸­çš„å…ƒç´ çš„ç›¸å¯¹ç»“æ„ (å³ï¼Œå¦‚æœæ²¡æœ‰è¢«ç§»é™¤ï¼ŒåŸæœ‰çš„çˆ¶ä»£å­ä»£å…³ç³»éƒ½åº”å½“ä¿ç•™)ã€‚ å¯ä»¥è¯æ˜ï¼Œå­˜åœ¨Â å”¯ä¸€çš„ç­”æ¡ˆÂ ã€‚\næ‰€ä»¥ç»“æœåº”å½“è¿”å›ä¿®å‰ªå¥½çš„äºŒå‰æœç´¢æ ‘çš„æ–°çš„æ ¹èŠ‚ç‚¹ã€‚æ³¨æ„ï¼Œæ ¹èŠ‚ç‚¹å¯èƒ½ä¼šæ ¹æ®ç»™å®šçš„è¾¹ç•Œå‘ç”Ÿæ”¹å˜ã€‚\nç¤ºä¾‹ 1ï¼š\nè¾“å…¥ï¼šroot = [1,0,2], low = 1, high = 2 è¾“å‡ºï¼š[1,null,2] ç¤ºä¾‹ 2ï¼š\nè¾“å…¥ï¼šroot = [3,0,4,null,2,null,null,1], low = 1, high = 3 è¾“å‡ºï¼š[3,2,null,1] æç¤ºï¼š\næ ‘ä¸­èŠ‚ç‚¹æ•°åœ¨èŒƒå›´ [1, 104] å†… 0 \u0026lt;= Node.val \u0026lt;= 104 æ ‘ä¸­æ¯ä¸ªèŠ‚ç‚¹çš„å€¼éƒ½æ˜¯ å”¯ä¸€ çš„ é¢˜ç›®æ•°æ®ä¿è¯è¾“å…¥æ˜¯ä¸€æ£µæœ‰æ•ˆçš„äºŒå‰æœç´¢æ ‘ 0 \u0026lt;= low \u0026lt;= high \u0026lt;= 104 è§£æ³•ä¸€ï¼šé€’å½’ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 /** * Definition for a binary tree node. * type TreeNode struct { * Val int * Left *TreeNode * Right *TreeNode * } */ func trimBST(root *TreeNode, low int, high int) *TreeNode { if root == nil { return nil } if root.Val \u0026lt; low { return trimBST(root.Right, low, high) } else if root.Val \u0026gt; high { return trimBST(root.Left, low, high) } else if root.Val == low { root.Left = nil root.Right = trimBST(root.Right, low + 1, high) return root } else if root.Val == high { root.Right = nil root.Left = trimBST(root.Left, low, high - 1) return root } else { root.Left = trimBST(root.Left, low, root.Val - 1) root.Right = trimBST(root.Right, root.Val + 1, high) return root } } å®˜æ–¹é¢˜è§£å¦‚ä¸‹\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 func trimBST(root *TreeNode, low, high int) *TreeNode { if root == nil { return nil } if root.Val \u0026lt; low { return trimBST(root.Right, low, high) } if root.Val \u0026gt; high { return trimBST(root.Left, low, high) } root.Left = trimBST(root.Left, low, high) root.Right = trimBST(root.Right, low, high) return root } ","date":"2023-05-06T22:36:51+08:00","image":"https://ibakuman.github.io/gallery/landscape/20_hu04c80cb06f0b716a920690442f749887_1496648_120x120_fill_q75_box_smart1.jpg","permalink":"https://ibakuman.github.io/posts/leetccode/problems/0669-trim-a-binary-search-tree/","title":"669. ä¿®å‰ªäºŒå‰æœç´¢æ ‘"},{"content":"é¢˜ç›®æè¿° ç»™å®šä¸€ä¸ªäºŒå‰æœç´¢æ ‘çš„æ ¹èŠ‚ç‚¹ root å’Œä¸€ä¸ªå€¼ keyï¼Œåˆ é™¤äºŒå‰æœç´¢æ ‘ä¸­çš„Â key å¯¹åº”çš„èŠ‚ç‚¹ï¼Œå¹¶ä¿è¯äºŒå‰æœç´¢æ ‘çš„æ€§è´¨ä¸å˜ã€‚è¿”å›äºŒå‰æœç´¢æ ‘ï¼ˆæœ‰å¯èƒ½è¢«æ›´æ–°ï¼‰çš„æ ¹èŠ‚ç‚¹çš„å¼•ç”¨ã€‚\nä¸€èˆ¬æ¥è¯´ï¼Œåˆ é™¤èŠ‚ç‚¹å¯åˆ†ä¸ºä¸¤ä¸ªæ­¥éª¤ï¼š\né¦–å…ˆæ‰¾åˆ°éœ€è¦åˆ é™¤çš„èŠ‚ç‚¹ï¼› å¦‚æœæ‰¾åˆ°äº†ï¼Œåˆ é™¤å®ƒã€‚ ç¤ºä¾‹ 1:\nè¾“å…¥ï¼šroot = [5,3,6,2,4,null,7], key = 3 è¾“å‡ºï¼š[5,4,6,2,null,null,7] è§£é‡Šï¼šç»™å®šéœ€è¦åˆ é™¤çš„èŠ‚ç‚¹å€¼æ˜¯ 3ï¼Œæ‰€ä»¥æˆ‘ä»¬é¦–å…ˆæ‰¾åˆ° 3 è¿™ä¸ªèŠ‚ç‚¹ï¼Œç„¶ååˆ é™¤å®ƒã€‚ ä¸€ä¸ªæ­£ç¡®çš„ç­”æ¡ˆæ˜¯ [5,4,6,2,null,null,7], å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚ å¦ä¸€ä¸ªæ­£ç¡®ç­”æ¡ˆæ˜¯ [5,2,6,null,4,null,7]ã€‚ ç¤ºä¾‹ 2:\nè¾“å…¥: root = [5,3,6,2,4,null,7], key = 0 è¾“å‡º: [5,3,6,2,4,null,7] è§£é‡Š: äºŒå‰æ ‘ä¸åŒ…å«å€¼ä¸º 0 çš„èŠ‚ç‚¹ ç¤ºä¾‹ 3:\nè¾“å…¥: root = [ ], key = 0 è¾“å‡º: [ ] æç¤º:\nèŠ‚ç‚¹æ•°çš„èŒƒå›´Â [0, 104]. -105Â \u0026lt;= Node.val \u0026lt;= 105 èŠ‚ç‚¹å€¼å”¯ä¸€ rootÂ æ˜¯åˆæ³•çš„äºŒå‰æœç´¢æ ‘ -105Â \u0026lt;= key \u0026lt;= 105 è¿›é˜¶ï¼š è¦æ±‚ç®—æ³•æ—¶é—´å¤æ‚åº¦ä¸ºÂ O (h)ï¼Œh ä¸ºæ ‘çš„é«˜åº¦ã€‚\nè§£æ³•ä¸€ï¼šé€’å½’ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 /** * Definition for a binary tree node. * type TreeNode struct { * Val int * Left *TreeNode * Right *TreeNode * } */ func deleteNode(root *TreeNode, key int) *TreeNode { if root == nil { return nil } if root.Val == key { if root.Right == nil { return root.Left } else { newRoot := root.Right parent := root for newRoot.Left != nil { parent = newRoot newRoot = newRoot.Left } newRoot.Left = root.Left if newRoot != root.Right { // æ³¨æ„ä¸è¦å¿˜è®°æ‰§è¡Œ parent.Left = newRoot.Right parent.Left = newRoot.Right newRoot.Right = root.Right } return newRoot } } else if root.Val \u0026gt; key { root.Left = deleteNode(root.Left, key) } else { root.Right = deleteNode(root.Right, key) } return root } å®˜æ–¹é¢˜è§£å¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 func deleteNode(root *TreeNode, key int) *TreeNode { switch { case root == nil: return nil case root.Val \u0026gt; key: root.Left = deleteNode(root.Left, key) case root.Val \u0026lt; key: root.Right = deleteNode(root.Right, key) case root.Left == nil || root.Right == nil: if root.Left != nil { return root.Left } return root.Right default: successor := root.Right for successor.Left != nil { successor = successor.Left } successor.Right = deleteNode(root.Right, successor.Val) successor.Left = root.Left return successor } return root } ","date":"2023-05-06T21:57:36+08:00","image":"https://ibakuman.github.io/gallery/landscape/17_hudbc1561b7a760b2f47477637bc223f35_938024_120x120_fill_q75_box_smart1.jpg","permalink":"https://ibakuman.github.io/posts/leetccode/problems/0450-delete-node-in-a-bst/","title":"450. åˆ é™¤äºŒå‰æœç´¢æ ‘ä¸­çš„èŠ‚ç‚¹"},{"content":"é¢˜ç›®æè¿° ç»™å®šäºŒå‰æœç´¢æ ‘ï¼ˆBSTï¼‰çš„æ ¹èŠ‚ç‚¹Â rootÂ å’Œè¦æ’å…¥æ ‘ä¸­çš„å€¼Â valueÂ ï¼Œå°†å€¼æ’å…¥äºŒå‰æœç´¢æ ‘ã€‚ è¿”å›æ’å…¥åäºŒå‰æœç´¢æ ‘çš„æ ¹èŠ‚ç‚¹ã€‚ è¾“å…¥æ•°æ® ä¿è¯ æ–°å€¼å’ŒåŸå§‹äºŒå‰æœç´¢æ ‘ä¸­çš„ä»»æ„èŠ‚ç‚¹å€¼éƒ½ä¸åŒã€‚\næ³¨æ„ï¼Œå¯èƒ½å­˜åœ¨å¤šç§æœ‰æ•ˆçš„æ’å…¥æ–¹å¼ï¼Œåªè¦æ ‘åœ¨æ’å…¥åä»ä¿æŒä¸ºäºŒå‰æœç´¢æ ‘å³å¯ã€‚ ä½ å¯ä»¥è¿”å› ä»»æ„æœ‰æ•ˆçš„ç»“æœ ã€‚\nç¤ºä¾‹ 1ï¼š\nè¾“å…¥ï¼šroot = [4,2,7,1,3], val = 5 è¾“å‡ºï¼š[4,2,7,1,3,5] è§£é‡Šï¼šå¦ä¸€ä¸ªæ»¡è¶³é¢˜ç›®è¦æ±‚å¯ä»¥é€šè¿‡çš„æ ‘æ˜¯ï¼š ç¤ºä¾‹ 2ï¼š\nè¾“å…¥ï¼šroot = [40,20,60,10,30,50,70], val = 25 è¾“å‡ºï¼š[40,20,60,10,30,50,70,null,null,25] ç¤ºä¾‹ 3ï¼š\nè¾“å…¥ï¼šroot = [4,2,7,1,3,null,null,null,null,null,null], val = 5 è¾“å‡ºï¼š[4,2,7,1,3,5] æç¤ºï¼š\næ ‘ä¸­çš„èŠ‚ç‚¹æ•°å°†åœ¨Â [0,Â 104] çš„èŒƒå›´å†…ã€‚ -108Â \u0026lt;= Node.val \u0026lt;= 108 æ‰€æœ‰å€¼Â Node.valÂ æ˜¯Â ç‹¬ä¸€æ— äºŒÂ çš„ã€‚ -108Â \u0026lt;= val \u0026lt;= 108 ä¿è¯Â valÂ åœ¨åŸå§‹ BST ä¸­ä¸å­˜åœ¨ã€‚ è§£æ³•ä¸€ï¼šé€’å½’ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 /** * Definition for a binary tree node. * type TreeNode struct { * Val int * Left *TreeNode * Right *TreeNode * } */ func insertIntoBST(root *TreeNode, val int) *TreeNode { if root == nil { return \u0026amp;TreeNode{Val: val} } if root.Val \u0026gt; val { root.Left = insertIntoBST(root.Left, val) } else { root.Right = insertIntoBST(root.Right, val) } return root } è§£æ³•äºŒï¼šè¿­ä»£ å®˜æ–¹é¢˜è§£å¦‚ä¸‹\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 func insertIntoBST(root *TreeNode, val int) *TreeNode { if root == nil { return \u0026amp;TreeNode{Val: val} } p := root for p != nil { if val \u0026lt; p.Val { if p.Left == nil { p.Left = \u0026amp;TreeNode{Val: val} break } p = p.Left } else { if p.Right == nil { p.Right = \u0026amp;TreeNode{Val: val} break } p = p.Right } } return root } ","date":"2023-05-06T21:52:36+08:00","image":"https://ibakuman.github.io/gallery/landscape/32_hu51b920b09f70697adb8efd022a77ced5_660746_120x120_fill_q75_box_smart1.jpg","permalink":"https://ibakuman.github.io/posts/leetccode/problems/0701-insert-into-a-binary-search-tree/","title":"701. äºŒå‰æœç´¢æ ‘ä¸­çš„æ’å…¥æ“ä½œ"},{"content":"é¢˜ç›®æè¿° ç»™å®šä¸€ä¸ªäºŒå‰æœç´¢æ ‘ï¼Œæ‰¾åˆ°è¯¥æ ‘ä¸­ä¸¤ä¸ªæŒ‡å®šèŠ‚ç‚¹çš„æœ€è¿‘å…¬å…±ç¥–å…ˆã€‚\nç™¾åº¦ç™¾ç§‘ä¸­æœ€è¿‘å…¬å…±ç¥–å…ˆçš„å®šä¹‰ä¸ºï¼šâ€œå¯¹äºæœ‰æ ¹æ ‘ T çš„ä¸¤ä¸ªç»“ç‚¹ pã€qï¼Œæœ€è¿‘å…¬å…±ç¥–å…ˆè¡¨ç¤ºä¸ºä¸€ä¸ªç»“ç‚¹ xï¼Œæ»¡è¶³ x æ˜¯ pã€q çš„ç¥–å…ˆä¸” x çš„æ·±åº¦å°½å¯èƒ½å¤§ï¼ˆä¸€ä¸ªèŠ‚ç‚¹ä¹Ÿå¯ä»¥æ˜¯å®ƒè‡ªå·±çš„ç¥–å…ˆï¼‰ã€‚â€\nä¾‹å¦‚ï¼Œç»™å®šå¦‚ä¸‹äºŒå‰æœç´¢æ ‘:Â root =Â [6,2,8,0,4,7,9,null,null,3,5]\nç¤ºä¾‹ 1:\nè¾“å…¥: root = [6,2,8,0,4,7,9,null,null,3,5], p = 2, q = 8 è¾“å‡º: 6 è§£é‡Š: èŠ‚ç‚¹ 2 å’ŒèŠ‚ç‚¹ 8 çš„æœ€è¿‘å…¬å…±ç¥–å…ˆæ˜¯ 6ã€‚ ç¤ºä¾‹ 2:\nè¾“å…¥: root = [6,2,8,0,4,7,9,null,null,3,5], p = 2, q = 4 è¾“å‡º: 2 è§£é‡Š: èŠ‚ç‚¹ 2 å’ŒèŠ‚ç‚¹ 4 çš„æœ€è¿‘å…¬å…±ç¥–å…ˆæ˜¯ 2, å› ä¸ºæ ¹æ®å®šä¹‰æœ€è¿‘å…¬å…±ç¥–å…ˆèŠ‚ç‚¹å¯ä»¥ä¸ºèŠ‚ç‚¹æœ¬èº«ã€‚ è¯´æ˜:\næ‰€æœ‰èŠ‚ç‚¹çš„å€¼éƒ½æ˜¯å”¯ä¸€çš„ã€‚ pã€q ä¸ºä¸åŒèŠ‚ç‚¹ä¸”å‡å­˜åœ¨äºç»™å®šçš„äºŒå‰æœç´¢æ ‘ä¸­ã€‚ è§£æ³•ä¸€ï¼šé€’å½’ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 /** * Definition for a binary tree node. * type TreeNode struct { * Val int * Left *TreeNode * Right *TreeNode * } */ func lowestCommonAncestor(root, p, q *TreeNode) *TreeNode { if root == nil { return nil } if root.Val == p.Val || root.Val == q.Val { return root } left := lowestCommonAncestor(root.Left, p, q) right := lowestCommonAncestor(root.Right, p, q) if left != nil \u0026amp;\u0026amp; right != nil { return root } if left != nil { return left } return right } è§£æ³•äºŒï¼šè¿­ä»£ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 /** * Definition for a binary tree node. * type TreeNode struct { * Val int * Left *TreeNode * Right *TreeNode * } */ func lowestCommonAncestor(root, p, q *TreeNode) *TreeNode { ancestor := root for { if p.Val \u0026lt; ancestor.Val \u0026amp;\u0026amp; q.Val \u0026lt; ancestor.Val { ancestor = ancestor.Left } else if p.Val \u0026gt; ancestor.Val \u0026amp;\u0026amp; q.Val \u0026gt; ancestor.Val { ancestor = ancestor.Right } else { break } } return ancestor } ","date":"2023-05-06T21:42:00+08:00","image":"https://ibakuman.github.io/gallery/landscape/03_hua119d5172e80ee912c81cee3e4b607ac_783790_120x120_fill_q75_box_smart1.jpg","permalink":"https://ibakuman.github.io/posts/leetccode/problems/0235-lowest-common-ancestor-of-a-binary-search-tree/","title":"235. äºŒå‰æœç´¢æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ"},{"content":"é¢˜ç›®æè¿° ç»™å®šä¸€ä¸ªäºŒå‰æ ‘ï¼Œæ‰¾åˆ°è¯¥æ ‘ä¸­ä¸¤ä¸ªæŒ‡å®šèŠ‚ç‚¹çš„æœ€è¿‘å…¬å…±ç¥–å…ˆã€‚\nç™¾åº¦ç™¾ç§‘ä¸­æœ€è¿‘å…¬å…±ç¥–å…ˆçš„å®šä¹‰ä¸ºï¼šâ€œå¯¹äºæœ‰æ ¹æ ‘ T çš„ä¸¤ä¸ªèŠ‚ç‚¹ pã€qï¼Œæœ€è¿‘å…¬å…±ç¥–å…ˆè¡¨ç¤ºä¸ºä¸€ä¸ªèŠ‚ç‚¹ xï¼Œæ»¡è¶³ x æ˜¯ pã€q çš„ç¥–å…ˆä¸” x çš„æ·±åº¦å°½å¯èƒ½å¤§ï¼ˆä¸€ä¸ªèŠ‚ç‚¹ä¹Ÿå¯ä»¥æ˜¯å®ƒè‡ªå·±çš„ç¥–å…ˆï¼‰ã€‚â€\nç¤ºä¾‹ 1ï¼š\nè¾“å…¥ï¼šroot = [3,5,1,6,2,0,8,null,null,7,4], p = 5, q = 1 è¾“å‡ºï¼š3 è§£é‡Šï¼šèŠ‚ç‚¹ 5 å’ŒèŠ‚ç‚¹ 1 çš„æœ€è¿‘å…¬å…±ç¥–å…ˆæ˜¯èŠ‚ç‚¹ 3 ã€‚ ç¤ºä¾‹ 2ï¼š\nè¾“å…¥ï¼šroot = [3,5,1,6,2,0,8,null,null,7,4], p = 5, q = 4 è¾“å‡ºï¼š5 è§£é‡Šï¼šèŠ‚ç‚¹ 5 å’ŒèŠ‚ç‚¹ 4 çš„æœ€è¿‘å…¬å…±ç¥–å…ˆæ˜¯èŠ‚ç‚¹ 5 ã€‚å› ä¸ºæ ¹æ®å®šä¹‰æœ€è¿‘å…¬å…±ç¥–å…ˆèŠ‚ç‚¹å¯ä»¥ä¸ºèŠ‚ç‚¹æœ¬èº«ã€‚ ç¤ºä¾‹ 3ï¼š\nè¾“å…¥ï¼šroot = [1,2], p = 1, q = 2 è¾“å‡ºï¼š1 æç¤ºï¼š\næ ‘ä¸­èŠ‚ç‚¹æ•°ç›®åœ¨èŒƒå›´ [2, 105] å†…ã€‚ -109 \u0026lt;= Node.val \u0026lt;= 109 æ‰€æœ‰ Node.val äº’ä¸ç›¸åŒ ã€‚ p != q p å’Œ q å‡å­˜åœ¨äºç»™å®šçš„äºŒå‰æ ‘ä¸­ã€‚ è§£æ³•ä¸€ï¼šé€’å½’ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 /** * Definition for a binary tree node. * type TreeNode struct { * Val int * Left *TreeNode * Right *TreeNode * } */ func lowestCommonAncestor(root, p, q *TreeNode) *TreeNode { if root == nil { return nil } if root.Val == p.Val || root.Val == q.Val { return root } left := lowestCommonAncestor(root.Left, p, q) right := lowestCommonAncestor(root.Right, p, q) if left != nil \u0026amp;\u0026amp; right != nil { return root } if left != nil { return left } return right } ","date":"2023-05-06T13:56:40+08:00","image":"https://ibakuman.github.io/gallery/landscape/11_hudf52b8b325017a6d69e0e042062b02e2_3188398_120x120_fill_q75_box_smart1.jpg","permalink":"https://ibakuman.github.io/posts/leetccode/problems/0236-lowest-common-ancestor-of-a-binary-tree/","title":"236. äºŒå‰æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ"},{"content":"é¢˜ç›®æè¿° ç»™ä½ ä¸€ä¸ªäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ root ï¼Œåˆ¤æ–­å…¶æ˜¯å¦æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„äºŒå‰æœç´¢æ ‘ã€‚\næœ‰æ•ˆ äºŒå‰æœç´¢æ ‘å®šä¹‰å¦‚ä¸‹ï¼š\nèŠ‚ç‚¹çš„å·¦å­æ ‘åªåŒ…å« å°äº å½“å‰èŠ‚ç‚¹çš„æ•°ã€‚ èŠ‚ç‚¹çš„å³å­æ ‘åªåŒ…å« å¤§äº å½“å‰èŠ‚ç‚¹çš„æ•°ã€‚ æ‰€æœ‰å·¦å­æ ‘å’Œå³å­æ ‘è‡ªèº«å¿…é¡»ä¹Ÿæ˜¯äºŒå‰æœç´¢æ ‘ã€‚ ç¤ºä¾‹ 1ï¼š\nè¾“å…¥ï¼šroot = [2,1,3] è¾“å‡ºï¼štrue ç¤ºä¾‹ 2ï¼š\nè¾“å…¥ï¼šroot = [5,1,4,null,null,3,6] è¾“å‡ºï¼šfalse è§£é‡Šï¼šæ ¹èŠ‚ç‚¹çš„å€¼æ˜¯ 5 ï¼Œä½†æ˜¯å³å­èŠ‚ç‚¹çš„å€¼æ˜¯ 4 ã€‚ æç¤ºï¼š\næ ‘ä¸­èŠ‚ç‚¹æ•°ç›®èŒƒå›´åœ¨ [1, 104] å†… -231 \u0026lt;= Node.val \u0026lt;= 231 - 1 è§£æ³•ä¸€ï¼šé€’å½’ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 /** * Definition for a binary tree node. * type TreeNode struct { * Val int * Left *TreeNode * Right *TreeNode * } */ type Result struct { isValid bool minVal int maxVal int } func isValidBST(root *TreeNode) bool { if root == nil { return true } var dfs func(root *TreeNode) *Result dfs = func(root *TreeNode) *Result { ret := \u0026amp;Result{} if root.Left == nil \u0026amp;\u0026amp; root.Right == nil { ret.isValid, ret.minVal, ret.maxVal = true, root.Val, root.Val } else if root.Left == nil { // root.Right != nil rightRes := dfs(root.Right) if rightRes.isValid \u0026amp;\u0026amp; rightRes.minVal \u0026gt; root.Val { ret.isValid, ret.minVal, ret.maxVal = true, root.Val, rightRes.maxVal } } else if root.Right == nil { // root.Left != nil leftRes := dfs(root.Left) if leftRes.isValid \u0026amp;\u0026amp; leftRes.maxVal \u0026lt; root.Val { ret.isValid, ret.minVal, ret.maxVal = true, leftRes.minVal, root.Val } } else { // root.Left != nil \u0026amp;\u0026amp; root.Right != nil leftRes := dfs(root.Left) rightRes := dfs(root.Right) if leftRes.isValid \u0026amp;\u0026amp; rightRes.isValid \u0026amp;\u0026amp; leftRes.maxVal \u0026lt; root.Val \u0026amp;\u0026amp; rightRes.minVal \u0026gt; root.Val { ret.isValid, ret.minVal, ret.maxVal = true, leftRes.minVal, rightRes.maxVal } } return ret } res := dfs(root) return res.isValid } ","date":"2023-05-06T13:51:46+08:00","image":"https://ibakuman.github.io/gallery/landscape/09_hu8c633d2cf76ab6635d2135cc8fe71c52_994828_120x120_fill_q75_box_smart1.jpg","permalink":"https://ibakuman.github.io/posts/leetccode/problems/0098-validate-binary-search-tree/","title":"98. éªŒè¯äºŒå‰æœç´¢æ ‘"},{"content":"é¢˜ç›®æè¿° ç»™ä½ ä¸€ä¸ªå«é‡å¤å€¼çš„äºŒå‰æœç´¢æ ‘ï¼ˆBSTï¼‰çš„æ ¹èŠ‚ç‚¹ root ï¼Œæ‰¾å‡ºå¹¶è¿”å› BST ä¸­çš„æ‰€æœ‰ ä¼—æ•°ï¼ˆå³ï¼Œå‡ºç°é¢‘ç‡æœ€é«˜çš„å…ƒç´ ï¼‰ã€‚\nå¦‚æœæ ‘ä¸­æœ‰ä¸æ­¢ä¸€ä¸ªä¼—æ•°ï¼Œå¯ä»¥æŒ‰ ä»»æ„é¡ºåº è¿”å›ã€‚\nå‡å®š BST æ»¡è¶³å¦‚ä¸‹å®šä¹‰ï¼š\nç»“ç‚¹å·¦å­æ ‘ä¸­æ‰€å«èŠ‚ç‚¹çš„å€¼ å°äºç­‰äº å½“å‰èŠ‚ç‚¹çš„å€¼ ç»“ç‚¹å³å­æ ‘ä¸­æ‰€å«èŠ‚ç‚¹çš„å€¼ å¤§äºç­‰äº å½“å‰èŠ‚ç‚¹çš„å€¼ å·¦å­æ ‘å’Œå³å­æ ‘éƒ½æ˜¯äºŒå‰æœç´¢æ ‘ ç¤ºä¾‹ 1ï¼š\nè¾“å…¥ï¼šroot = [1,null,2,2] è¾“å‡ºï¼š[2] ç¤ºä¾‹ 2ï¼š\nè¾“å…¥ï¼šroot = [0] è¾“å‡ºï¼š[0] æç¤ºï¼š\næ ‘ä¸­èŠ‚ç‚¹çš„æ•°ç›®åœ¨èŒƒå›´ [1, 104] å†… -105 \u0026lt;= Node.val \u0026lt;= 105 **è¿›é˜¶:**ä½ å¯ä»¥ä¸ä½¿ç”¨é¢å¤–çš„ç©ºé—´å—ï¼Ÿï¼ˆå‡è®¾ç”±é€’å½’äº§ç”Ÿçš„éšå¼è°ƒç”¨æ ˆçš„å¼€é”€ä¸è¢«è®¡ç®—åœ¨å†…ï¼‰\nè§£æ³•ä¸€ï¼šä¸­åºéå† 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 /** * Definition for a binary tree node. * type TreeNode struct { * Val int * Left *TreeNode * Right *TreeNode * } */ func findMode(root *TreeNode) []int { // -10^5 \u0026lt;= root.Val \u0026lt;= 10^5 // base initially is zero var base, count, maxCount int var ans []int update := func(val int) { if val == base { count++ } else { base, count = val, 1 } if count == maxCount { ans = append(ans, base) } else if count \u0026gt; maxCount { ans = []int{base} maxCount = count } } var inorder func(root *TreeNode) inorder = func(root *TreeNode) { if root == nil { return } inorder(root.Left) update(root.Val) inorder(root.Right) } inorder(root) return ans } ","date":"2023-05-06T13:50:19+08:00","image":"https://ibakuman.github.io/gallery/landscape/35_hu84e08b0ba06fbb10b7accce53a019dd9_276966_120x120_fill_q75_box_smart1.jpg","permalink":"https://ibakuman.github.io/posts/leetccode/problems/0501-find-mode-in-binary-search-tree/","title":"501. äºŒå‰æœç´¢æ ‘ä¸­çš„ä¼—æ•°"},{"content":"é¢˜ç›®æè¿° ç»™ä½ ä¸€ä¸ªäºŒå‰æœç´¢æ ‘çš„æ ¹èŠ‚ç‚¹ root ï¼Œè¿”å› æ ‘ä¸­ä»»æ„ä¸¤ä¸åŒèŠ‚ç‚¹å€¼ä¹‹é—´çš„æœ€å°å·®å€¼ ã€‚\nå·®å€¼æ˜¯ä¸€ä¸ªæ­£æ•°ï¼Œå…¶æ•°å€¼ç­‰äºä¸¤å€¼ä¹‹å·®çš„ç»å¯¹å€¼ã€‚\nç¤ºä¾‹ 1ï¼š\nè¾“å…¥ï¼šroot = [4,2,6,1,3] è¾“å‡ºï¼š1 ç¤ºä¾‹ 2ï¼š\nè¾“å…¥ï¼šroot = [1,0,48,null,null,12,49] è¾“å‡ºï¼š1 æç¤ºï¼š\næ ‘ä¸­èŠ‚ç‚¹çš„æ•°ç›®èŒƒå›´æ˜¯ [2, 104] 0 \u0026lt;= Node.val \u0026lt;= 105 è§£æ³•ä¸€ï¼šé€’å½’ é”™è¯¯ä»£ç \n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 func getMinimumDifference(root *TreeNode) int { if root == nil { return math.MaxInt32 } res := math.MaxInt32 if root.Left != nil { res = min(res, abs(root.Val-root.Left.Val)) } if root.Right != nil { res = min(res, abs(root.Val-root.Right.Val)) } res = min(res, getMinimumDifference(root.Left)) res = min(res, getMinimumDifference(root.Right)) return res } func min(a, b int) int { if a \u0026lt; b { return a } return b } func abs(num int) int { if num \u0026lt; 0 { return -num } return num } æ­£ç¡®ä»£ç \n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 type Result struct { diff int minVal int maxVal int } func getMinimumDifference(root *TreeNode) int { if root == nil { return 0 } var dfs func(root *TreeNode) *Result dfs = func(root *TreeNode) *Result { ret := \u0026amp;Result{} if root.Left == nil \u0026amp;\u0026amp; root.Right == nil { // note: assign ret.diff to math.MaxInt32 ret.diff, ret.minVal, ret.maxVal = math.MaxInt32, root.Val, root.Val } else if root.Left == nil { // root.Right != nil rightRes := dfs(root.Right) curDiff := min(rightRes.minVal-root.Val, rightRes.diff) ret.diff, ret.minVal, ret.maxVal = curDiff, root.Val, rightRes.maxVal } else if root.Right == nil { // root.Left != nil leftRes := dfs(root.Left) curDiff := min(root.Val-leftRes.maxVal, leftRes.diff) ret.diff, ret.minVal, ret.maxVal = curDiff, leftRes.minVal, root.Val } else { // root.Left != nil \u0026amp;\u0026amp; root.Right != nil leftRes := dfs(root.Left) rightRes := dfs(root.Right) curDiff := min(root.Val-leftRes.maxVal, rightRes.minVal-root.Val, leftRes.diff, rightRes.diff) ret.diff, ret.minVal, ret.maxVal = curDiff, leftRes.minVal, rightRes.maxVal } return ret } return dfs(root).diff } func min(nums ...int) int { ret := nums[0] for _, num := range nums { if num \u0026lt; ret { ret = num } } return ret } è§£æ³•äºŒï¼šä¸­åºéå† 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 func getMinimumDifference(root *TreeNode) int { // prev not in [0, 10^5] prev, res := -1, math.MaxInt32 var inorder func(root *TreeNode) inorder = func(root *TreeNode) { if root == nil { return } inorder(root.Left) if prev != -1 { res = min(res, root.Val-prev) } prev = root.Val inorder(root.Right) } inorder(root) return res } func min(nums ...int) int { ret := nums[0] for _, num := range nums { if num \u0026lt; ret { ret = num } } return ret } ","date":"2023-05-06T13:46:16+08:00","image":"https://ibakuman.github.io/gallery/landscape/23_hu3a7b7452a865fd9297e7a2768212101d_732306_120x120_fill_q75_box_smart1.jpg","permalink":"https://ibakuman.github.io/posts/leetccode/problems/0530-minimum-absolute-difference-in-bst/","title":"530. äºŒå‰æœç´¢æ ‘çš„æœ€å°ç»å¯¹å·®"},{"content":"é¢˜ç›®æè¿° ç»™å®šäºŒå‰æœç´¢æ ‘ï¼ˆBSTï¼‰çš„æ ¹èŠ‚ç‚¹Â rootÂ å’Œä¸€ä¸ªæ•´æ•°å€¼Â valã€‚\nä½ éœ€è¦åœ¨ BST ä¸­æ‰¾åˆ°èŠ‚ç‚¹å€¼ç­‰äºÂ valÂ çš„èŠ‚ç‚¹ã€‚ è¿”å›ä»¥è¯¥èŠ‚ç‚¹ä¸ºæ ¹çš„å­æ ‘ã€‚ å¦‚æœèŠ‚ç‚¹ä¸å­˜åœ¨ï¼Œåˆ™è¿”å›Â nullÂ ã€‚\nç¤ºä¾‹ 1:\nè¾“å…¥ï¼šroot = [4,2,7,1,3], val = 2 è¾“å‡ºï¼š[2,1,3] ç¤ºä¾‹ 2:\nè¾“å…¥ï¼šroot = [4,2,7,1,3], val = 5 è¾“å‡ºï¼š[] æç¤ºï¼š\næ•°ä¸­èŠ‚ç‚¹æ•°åœ¨Â [1, 5000]Â èŒƒå›´å†… 1 \u0026lt;= Node.val \u0026lt;= 107 rootÂ æ˜¯äºŒå‰æœç´¢æ ‘ 1 \u0026lt;= val \u0026lt;= 107 è§£æ³•ä¸€ï¼šé€’å½’ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 /** * Definition for a binary tree node. * type TreeNode struct { * Val int * Left *TreeNode * Right *TreeNode * } */ func searchBST(root *TreeNode, val int) *TreeNode { if root == nil { return nil } if root.Val == val { return root } else if root.Val \u0026gt; val { return searchBST(root.Left, val) } else { return searchBST(root.Right, val) } } ","date":"2023-05-05T22:53:14+08:00","image":"https://ibakuman.github.io/gallery/landscape/27_hubc821d6e6d7f4a0f5b14def3892e014e_5550125_120x120_fill_q75_box_smart1.jpg","permalink":"https://ibakuman.github.io/posts/leetccode/problems/0700-search-in-a-binary-search-tree/","title":"700. äºŒå‰æœç´¢æ ‘ä¸­çš„æœç´¢"},{"content":"é¢˜ç›®æè¿° ç»™ä½ ä¸¤æ£µäºŒå‰æ ‘ï¼š root1 å’Œ root2 ã€‚\næƒ³è±¡ä¸€ä¸‹ï¼Œå½“ä½ å°†å…¶ä¸­ä¸€æ£µè¦†ç›–åˆ°å¦ä¸€æ£µä¹‹ä¸Šæ—¶ï¼Œä¸¤æ£µæ ‘ä¸Šçš„ä¸€äº›èŠ‚ç‚¹å°†ä¼šé‡å ï¼ˆè€Œå¦ä¸€äº›ä¸ä¼šï¼‰ã€‚ä½ éœ€è¦å°†è¿™ä¸¤æ£µæ ‘åˆå¹¶æˆä¸€æ£µæ–°äºŒå‰æ ‘ã€‚åˆå¹¶çš„è§„åˆ™æ˜¯ï¼šå¦‚æœä¸¤ä¸ªèŠ‚ç‚¹é‡å ï¼Œé‚£ä¹ˆå°†è¿™ä¸¤ä¸ªèŠ‚ç‚¹çš„å€¼ç›¸åŠ ä½œä¸ºåˆå¹¶åèŠ‚ç‚¹çš„æ–°å€¼ï¼›å¦åˆ™ï¼Œä¸ä¸º null çš„èŠ‚ç‚¹å°†ç›´æ¥ä½œä¸ºæ–°äºŒå‰æ ‘çš„èŠ‚ç‚¹ã€‚\nè¿”å›åˆå¹¶åçš„äºŒå‰æ ‘ã€‚\næ³¨æ„: åˆå¹¶è¿‡ç¨‹å¿…é¡»ä»ä¸¤ä¸ªæ ‘çš„æ ¹èŠ‚ç‚¹å¼€å§‹ã€‚\nç¤ºä¾‹ 1ï¼š\nè¾“å…¥ï¼šroot1 = [1,3,2,5], root2 = [2,1,3,null,4,null,7] è¾“å‡ºï¼š[3,4,5,5,4,null,7] ç¤ºä¾‹ 2ï¼š\nè¾“å…¥ï¼šroot1 = [1], root2 = [1,2] è¾“å‡ºï¼š[2,2] æç¤ºï¼š\nä¸¤æ£µæ ‘ä¸­çš„èŠ‚ç‚¹æ•°ç›®åœ¨èŒƒå›´ [0, 2000] å†… -104 \u0026lt;= Node.val \u0026lt;= 104 è§£æ³•ä¸€ï¼šé€’å½’ 1 2 3 4 5 6 7 8 9 10 11 12 13 func mergeTrees(root1 *TreeNode, root2 *TreeNode) *TreeNode { if root1 == nil { return root2 } if root2 == nil { return root1 } root1.Val += root2.Val root1.Left = mergeTrees(root1.Left, root2.Left) root1.Right = mergeTrees(root1.Right, root2.Right) return root1 } ","date":"2023-05-05T21:53:43+08:00","image":"https://ibakuman.github.io/gallery/landscape/13_hudf999d0dc4b7b257102e5c819f964247_303499_120x120_fill_q75_box_smart1.jpg","permalink":"https://ibakuman.github.io/posts/leetccode/problems/0617-merge-two-binary-trees/","title":"617. åˆå¹¶äºŒå‰æ ‘"},{"content":"é¢˜ç›®æè¿° ç»™å®šä¸€ä¸ªä¸é‡å¤çš„æ•´æ•°æ•°ç»„Â nums ã€‚Â æœ€å¤§äºŒå‰æ ‘Â å¯ä»¥ç”¨ä¸‹é¢çš„ç®—æ³•ä»Â nums é€’å½’åœ°æ„å»º:\nåˆ›å»ºä¸€ä¸ªæ ¹èŠ‚ç‚¹ï¼Œå…¶å€¼ä¸ºÂ nums ä¸­çš„æœ€å¤§å€¼ã€‚ é€’å½’åœ°åœ¨æœ€å¤§å€¼Â å·¦è¾¹Â çš„Â å­æ•°ç»„å‰ç¼€ä¸ŠÂ æ„å»ºå·¦å­æ ‘ã€‚ é€’å½’åœ°åœ¨æœ€å¤§å€¼ å³è¾¹ çš„Â å­æ•°ç»„åç¼€ä¸ŠÂ æ„å»ºå³å­æ ‘ã€‚ è¿”å›Â nums æ„å»ºçš„ æœ€å¤§äºŒå‰æ ‘ ã€‚\nç¤ºä¾‹ 1ï¼š\nè¾“å…¥ï¼šnums = [3,2,1,6,0,5] è¾“å‡ºï¼š[6,3,5,null,2,0,null,null,1] è§£é‡Šï¼šé€’å½’è°ƒç”¨å¦‚ä¸‹æ‰€ç¤ºï¼š - [3,2,1,6,0,5] ä¸­çš„æœ€å¤§å€¼æ˜¯ 6 ï¼Œå·¦è¾¹éƒ¨åˆ†æ˜¯ [3,2,1] ï¼Œå³è¾¹éƒ¨åˆ†æ˜¯ [0,5] ã€‚ - [3,2,1] ä¸­çš„æœ€å¤§å€¼æ˜¯ 3 ï¼Œå·¦è¾¹éƒ¨åˆ†æ˜¯ [] ï¼Œå³è¾¹éƒ¨åˆ†æ˜¯ [2,1] ã€‚ - ç©ºæ•°ç»„ï¼Œæ— å­èŠ‚ç‚¹ã€‚ - [2,1] ä¸­çš„æœ€å¤§å€¼æ˜¯ 2 ï¼Œå·¦è¾¹éƒ¨åˆ†æ˜¯ [] ï¼Œå³è¾¹éƒ¨åˆ†æ˜¯ [1] ã€‚ - ç©ºæ•°ç»„ï¼Œæ— å­èŠ‚ç‚¹ã€‚ - åªæœ‰ä¸€ä¸ªå…ƒç´ ï¼Œæ‰€ä»¥å­èŠ‚ç‚¹æ˜¯ä¸€ä¸ªå€¼ä¸º 1 çš„èŠ‚ç‚¹ã€‚ - [0,5] ä¸­çš„æœ€å¤§å€¼æ˜¯ 5 ï¼Œå·¦è¾¹éƒ¨åˆ†æ˜¯ [0] ï¼Œå³è¾¹éƒ¨åˆ†æ˜¯ [] ã€‚ - åªæœ‰ä¸€ä¸ªå…ƒç´ ï¼Œæ‰€ä»¥å­èŠ‚ç‚¹æ˜¯ä¸€ä¸ªå€¼ä¸º 0 çš„èŠ‚ç‚¹ã€‚ - ç©ºæ•°ç»„ï¼Œæ— å­èŠ‚ç‚¹ã€‚ ç¤ºä¾‹ 2ï¼š\nè¾“å…¥ï¼šnums = [3,2,1] è¾“å‡ºï¼š[3,null,2,null,1] æç¤ºï¼š\n1 \u0026lt;= nums.length \u0026lt;= 1000 0 \u0026lt;= nums[i] \u0026lt;= 1000 nums ä¸­çš„æ‰€æœ‰æ•´æ•° äº’ä¸ç›¸åŒ è§£æ³•ä¸€ï¼šçº¯é€’å½’ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 func constructMaximumBinaryTree(nums []int) *TreeNode { if len(nums) == 0 { return nil } best := 0 for i, num := range nums { if num \u0026gt; nums[best] { best = i } } return \u0026amp;TreeNode{ nums[best], constructMaximumBinaryTree(nums[:best]), constructMaximumBinaryTree(nums[best+1:]) } } è§£æ³•äºŒï¼šçº¿æ®µæ ‘ + é€’å½’ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 type segmentTree struct { origin []int res []int } func NewSegmentTree(arr []int) *segmentTree { ret := \u0026amp;segmentTree{origin: arr, res: make([]int, 4*len(arr))} ret.Build() return ret } func (this *segmentTree) Build() { var _build func(idx, l, r int) int _build = func(idx, l, r int) int { if l == r { this.res[idx] = this.origin[l] } else { mid := l + (r-l)/2 leftMax := _build(2*idx, l, mid) rightMax := _build(2*idx+1, mid+1, r) this.res[idx] = max(leftMax, rightMax) } return this.res[idx] } _build(1, 0, len(this.origin)-1) } func (this *segmentTree) GetMax(tl, tr int) int { var _getMax func(idx, l, r, tl, tr int) int // [l...r] æ˜¯ segmentTree ä¸­çš„ segment // [tl...tr]æ˜¯ç›®æ ‡ segment _getMax = func(idx, l, r, tl, tr int) int { if l \u0026gt; r { return math.MinInt32 } else if l == tl \u0026amp;\u0026amp; r == tr { return this.res[idx] } else { mid := l + (r-l)/2 if tr \u0026lt;= mid { return _getMax(2*idx, l, mid, tl, tr) } else if tl \u0026gt;= mid+1 { return _getMax(2*idx+1, mid+1, r, tl, tr) } else { leftMax := _getMax(2*idx, l, mid, tl, mid) rightMax := _getMax(2*idx+1, mid+1, r, mid+1, tr) return max(leftMax, rightMax) } } } return _getMax(1, 0, len(this.origin)-1, tl, tr) } func max(a, b int) int { if a \u0026gt; b { return a } return b } func constructMaximumBinaryTree(nums []int) *TreeNode { sTree := NewSegmentTree(nums) record := make(map[int]int) for v, k := range nums { record[k] = v } var build func(l, r int) *TreeNode build = func(l, r int) *TreeNode { if l == r { return \u0026amp;TreeNode{Val: nums[l]} } else if l \u0026gt; r { return nil } else { maxNum := sTree.GetMax(l, r) idxOfMax := record[maxNum] root := \u0026amp;TreeNode{Val: maxNum} root.Left = build(l, idxOfMax-1) root.Right = build(idxOfMax+1, r) return root } } return build(0, len(nums)-1) } ","date":"2023-05-05T20:44:58+08:00","image":"https://ibakuman.github.io/gallery/landscape/26_hu8ac3923ab95114b170942013d0440a93_813873_120x120_fill_q75_box_smart1.jpg","permalink":"https://ibakuman.github.io/posts/leetccode/problems/0654-maximum-binary-tree/","title":"654. æœ€å¤§äºŒå‰æ ‘"},{"content":" 654. æœ€å¤§äºŒå‰æ ‘ ","date":"2023-05-05T20:23:42+08:00","image":"https://ibakuman.github.io/gallery/landscape/31_hu50ead7b655b5f47cafc1e1da4c3aac1b_499903_120x120_fill_q75_box_smart1.jpg","permalink":"https://ibakuman.github.io/posts/leetccode/segment-tree/","title":"LeetCode ä¸Šå¯ä»¥ä½¿ç”¨çº¿æ®µæ ‘è§£å†³çš„é¢˜ç›®"},{"content":"é¢˜ç›®æè¿° ç»™å®šä¸¤ä¸ªæ•´æ•°æ•°ç»„ inorder å’Œ postorder ï¼Œå…¶ä¸­ inorder æ˜¯äºŒå‰æ ‘çš„ä¸­åºéå†ï¼Œ postorder æ˜¯åŒä¸€æ£µæ ‘çš„ååºéå†ï¼Œè¯·ä½ æ„é€ å¹¶è¿”å›è¿™é¢—Â äºŒå‰æ ‘Â ã€‚\nç¤ºä¾‹ 1:\nè¾“å…¥ï¼šinorder = [9,3,15,20,7], postorder = [9,15,7,20,3] è¾“å‡ºï¼š[3,9,20,null,null,15,7] ç¤ºä¾‹ 2:\nè¾“å…¥ï¼šinorder = [-1], postorder = [-1] è¾“å‡ºï¼š[-1] æç¤º:\n1 \u0026lt;= inorder.length \u0026lt;= 3000 postorder.length == inorder.length -3000 \u0026lt;= inorder[i], postorder[i] \u0026lt;= 3000 inorderÂ å’ŒÂ postorderÂ éƒ½ç”± ä¸åŒ çš„å€¼ç»„æˆ postorderÂ ä¸­æ¯ä¸€ä¸ªå€¼éƒ½åœ¨Â inorderÂ ä¸­ inorderÂ ä¿è¯æ˜¯æ ‘çš„ä¸­åºéå† postorderÂ ä¿è¯æ˜¯æ ‘çš„ååºéå† è§£æ³•ä¸€ï¼šé€’å½’ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 func buildTree(inorder []int, postorder []int) *TreeNode { vToIdx := make(map[int]int) for idx, v := range inorder { vToIdx[v] = idx } var build func(iL, iR, pL, pR int) *TreeNode build = func(iL, iR, pL, pR int) *TreeNode { if iL \u0026gt; iR { return nil } root := \u0026amp;TreeNode{Val: postorder[pR]} // root çš„å·¦å­æ ‘çš„èŠ‚ç‚¹çš„æ•°ç›® lCnt := vToIdx[root.Val] - iL root.Left = build(iL, vToIdx[root.Val]-1, pL, pL+lCnt-1) root.Right = build(vToIdx[root.Val]+1, iR, pL+lCnt, pR-1) return root } return build(0, len(inorder)-1, 0, len(postorder)-1) } å®˜æ–¹é¢˜è§£å¦‚ä¸‹\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 func buildTree(inorder []int, postorder []int) *TreeNode { idxMap := map[int]int{} for i, v := range inorder { idxMap[v] = i } var build func(int, int) *TreeNode build = func(inorderLeft, inorderRight int) *TreeNode { // æ— å‰©ä½™èŠ‚ç‚¹ if inorderLeft \u0026gt; inorderRight { return nil } // ååºéå†çš„æœ«å°¾å…ƒç´ å³ä¸ºå½“å‰å­æ ‘çš„æ ¹èŠ‚ç‚¹ val := postorder[len(postorder)-1] postorder = postorder[:len(postorder)-1] root := \u0026amp;TreeNode{Val: val} // æ ¹æ® val åœ¨ä¸­åºéå†çš„ä½ç½®ï¼Œå°†ä¸­åºéå†åˆ’åˆ†æˆå·¦å³ä¸¤é¢—å­æ ‘ // ç”±äºæˆ‘ä»¬æ¯æ¬¡éƒ½ä»ååºéå†çš„æœ«å°¾å–å…ƒç´ ï¼Œæ‰€ä»¥è¦å…ˆéå†å³å­æ ‘å†éå†å·¦å­æ ‘ inorderRootIndex := idxMap[val] // important! ä¸€å®šè¦å…ˆæ„é€ å³å­æ ‘ root.Right = build(inorderRootIndex+1, inorderRight) root.Left = build(inorderLeft, inorderRootIndex-1) return root } return build(0, len(inorder)-1) } ","date":"2023-05-04T09:37:56+08:00","image":"https://ibakuman.github.io/gallery/landscape/35_hu84e08b0ba06fbb10b7accce53a019dd9_276966_120x120_fill_q75_box_smart1.jpg","permalink":"https://ibakuman.github.io/posts/leetccode/problems/0106-construct-binary-tree-from-inorder-and-postorder-traversal/","title":"106. ä»ä¸­åºä¸ååºéå†åºåˆ—æ„é€ äºŒå‰æ ‘"},{"content":"é¢˜ç›®æè¿° ç»™ä½ äºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹Â root å’Œä¸€ä¸ªè¡¨ç¤ºç›®æ ‡å’Œçš„æ•´æ•°Â targetSum ã€‚åˆ¤æ–­è¯¥æ ‘ä¸­æ˜¯å¦å­˜åœ¨ æ ¹èŠ‚ç‚¹åˆ°å¶å­èŠ‚ç‚¹ çš„è·¯å¾„ï¼Œè¿™æ¡è·¯å¾„ä¸Šæ‰€æœ‰èŠ‚ç‚¹å€¼ç›¸åŠ ç­‰äºç›®æ ‡å’ŒÂ targetSum ã€‚å¦‚æœå­˜åœ¨ï¼Œè¿”å› true ï¼›å¦åˆ™ï¼Œè¿”å› false ã€‚\nå¶å­èŠ‚ç‚¹ æ˜¯æŒ‡æ²¡æœ‰å­èŠ‚ç‚¹çš„èŠ‚ç‚¹ã€‚\nç¤ºä¾‹ 1ï¼š\nè¾“å…¥ï¼šroot = [5,4,8,11,null,13,4,7,2,null,null,null,1], targetSum = 22 è¾“å‡ºï¼štrue è§£é‡Šï¼šç­‰äºç›®æ ‡å’Œçš„æ ¹èŠ‚ç‚¹åˆ°å¶èŠ‚ç‚¹è·¯å¾„å¦‚ä¸Šå›¾æ‰€ç¤ºã€‚ ç¤ºä¾‹ 2ï¼š\nè¾“å…¥ï¼šroot = [1,2,3], targetSum = 5 è¾“å‡ºï¼šfalse è§£é‡Šï¼šæ ‘ä¸­å­˜åœ¨ä¸¤æ¡æ ¹èŠ‚ç‚¹åˆ°å¶å­èŠ‚ç‚¹çš„è·¯å¾„ï¼š (1 \u0026ndash;\u0026gt; 2): å’Œä¸º 3 (1 \u0026ndash;\u0026gt; 3): å’Œä¸º 4 ä¸å­˜åœ¨ sum = 5 çš„æ ¹èŠ‚ç‚¹åˆ°å¶å­èŠ‚ç‚¹çš„è·¯å¾„ã€‚ ç¤ºä¾‹ 3ï¼š\nè¾“å…¥ï¼šroot = [ ], targetSum = 0 è¾“å‡ºï¼šfalse è§£é‡Šï¼šç”±äºæ ‘æ˜¯ç©ºçš„ï¼Œæ‰€ä»¥ä¸å­˜åœ¨æ ¹èŠ‚ç‚¹åˆ°å¶å­èŠ‚ç‚¹çš„è·¯å¾„ã€‚ æç¤ºï¼š\næ ‘ä¸­èŠ‚ç‚¹çš„æ•°ç›®åœ¨èŒƒå›´ [0, 5000] å†… -1000 \u0026lt;= Node.val \u0026lt;= 1000 -1000 \u0026lt;= targetSum \u0026lt;= 1000 è§£æ³•ä¸€ï¼šé€’å½’ é”™è¯¯ä»£ç  1 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 /** * Definition for a binary tree node. * type TreeNode struct { * Val int * Left *TreeNode * Right *TreeNode * } */ func hasPathSum(root *TreeNode, targetSum int) bool { if root == nil { return false } var dfs func(root *TreeNode, targetSum int) bool dfs = func(root *TreeNode, targetSum int) bool { if root == nil { if targetSum == 0 { return true } return false } targetSum -= root.Val left :=dfs(root.Left, targetSum) if left { return true } right :=dfs(root.Right, targetSum) return right } return dfs(root, targetSum) } ä¸èƒ½é€šè¿‡å¦‚ä¸‹æµ‹è¯•ç”¨ä¾‹\nè¾“å…¥ï¼šroot = [1, 2]ï¼›targetSum = 1 è¾“å‡ºï¼štrue é¢„æœŸç»“æœï¼šfalse æ­£ç¡®ä»£ç  1 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 /** * Definition for a binary tree node. * type TreeNode struct { * Val int * Left *TreeNode * Right *TreeNode * } */ func hasPathSum(root *TreeNode, targetSum int) bool { if root != nil { targetSum -= root.Val if root.Left == nil \u0026amp;\u0026amp; root.Right == nil { if targetSum == 0 { return true } return false } left := hasPathSum(root.Left, targetSum) if left { return true } right := hasPathSum(root.Right, targetSum) return right } return false } å®˜æ–¹é¢˜è§£å¦‚ä¸‹ï¼Œä»£ç æ›´åŠ ç®€æ´\n1 2 3 4 5 6 7 8 9 func hasPathSum(root *TreeNode, sum int) bool { if root == nil { return false } if root.Left == nil \u0026amp;\u0026amp; root.Right == nil { return sum == root.Val } return hasPathSum(root.Left, sum - root.Val) || hasPathSum(root.Right, sum - root.Val) } ","date":"2023-05-03T23:55:13+08:00","image":"https://ibakuman.github.io/gallery/landscape/20_hu04c80cb06f0b716a920690442f749887_1496648_120x120_fill_q75_box_smart1.jpg","permalink":"https://ibakuman.github.io/posts/leetccode/problems/0112-path-sum/","title":"112. è·¯å¾„æ€»å’Œ"},{"content":"é¢˜ç›®æè¿° ç»™å®šäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹Â rootÂ ï¼Œè¿”å›æ‰€æœ‰å·¦å¶å­ä¹‹å’Œã€‚\nç¤ºä¾‹ 1ï¼š\nè¾“å…¥: root = [3,9,20,null,null,15,7] è¾“å‡º: 24 è§£é‡Š: åœ¨è¿™ä¸ªäºŒå‰æ ‘ä¸­ï¼Œæœ‰ä¸¤ä¸ªå·¦å¶å­ï¼Œåˆ†åˆ«æ˜¯ 9 å’Œ 15ï¼Œæ‰€ä»¥è¿”å› 24 ç¤ºä¾‹Â 2:\nè¾“å…¥: root = [1] è¾“å‡º: 0 æç¤º:\nèŠ‚ç‚¹æ•°åœ¨Â [1, 1000]Â èŒƒå›´å†… -1000 \u0026lt;= Node.val \u0026lt;= 1000 è§£æ³•ä¸€ï¼šDFS é”™è¯¯ä»£ç  1 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 /** * Definition for a binary tree node. * type TreeNode struct { * Val int * Left *TreeNode * Right *TreeNode * } */ func sumOfLeftLeaves(root *TreeNode) int { if root == nil || root.Left == nil \u0026amp;\u0026amp; root.Right == nil { return 0 } res, curDepth := 0, 0 var dfs func(root *TreeNode, depth int) dfs = func(root *TreeNode, depth int) { if root != nil { depth++ if root.Left == nil \u0026amp;\u0026amp; root.Right == nil { if depth \u0026gt; curDepth { res += root.Val curDepth = depth } return } dfs(root.Left, depth) dfs(root.Right, depth) } } dfs(root, 0) return res } é”™è¯¯ä»£ç  2 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 /** * Definition for a binary tree node. * type TreeNode struct { * Val int * Left *TreeNode * Right *TreeNode * } */ func sumOfLeftLeaves(root *TreeNode) int { if root == nil{ return 0 } res, curDepth := 0, 0 var dfs func(root *TreeNode, depth int, isLeft bool) dfs = func(root *TreeNode, depth int, isLeft bool) { if root != nil { depth++ if root.Left == nil \u0026amp;\u0026amp; root.Right == nil { if depth \u0026gt; curDepth \u0026amp;\u0026amp; isLeft { res += root.Val curDepth = depth } return } dfs(root.Left, depth, true) dfs(root.Right, depth, false) } } dfs(root, 0, false) return res } æ­£ç¡®ä»£ç  1 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 /** * Definition for a binary tree node. * type TreeNode struct { * Val int * Left *TreeNode * Right *TreeNode * } */ func sumOfLeftLeaves(root *TreeNode) int { res := 0 var dfs func(root *TreeNode, isLeft bool) dfs = func(root *TreeNode, isLeft bool) { if root != nil { if root.Left == nil \u0026amp;\u0026amp; root.Right == nil { if isLeft { res += root.Val } return } dfs(root.Left, true) dfs(root.Right, false) } } dfs(root, false) return res } ","date":"2023-05-03T23:33:43+08:00","image":"https://ibakuman.github.io/gallery/landscape/26_hu8ac3923ab95114b170942013d0440a93_813873_120x120_fill_q75_box_smart1.jpg","permalink":"https://ibakuman.github.io/posts/leetccode/problems/0404-sum-of-left-leaves/","title":"404. å·¦å¶å­ä¹‹å’Œ"},{"content":"é¢˜ç›®æè¿° ç»™å®šä¸€ä¸ªäºŒå‰æ ‘çš„ æ ¹èŠ‚ç‚¹ rootï¼Œè¯·æ‰¾å‡ºè¯¥äºŒå‰æ ‘çš„Â æœ€åº•å±‚Â æœ€å·¦è¾¹ èŠ‚ç‚¹çš„å€¼ã€‚å‡è®¾äºŒå‰æ ‘ä¸­è‡³å°‘æœ‰ä¸€ä¸ªèŠ‚ç‚¹ã€‚\nç¤ºä¾‹ 1:\nè¾“å…¥: root = [2,1,3] è¾“å‡º: 1 ç¤ºä¾‹ 2:\nè¾“å…¥: [1,2,3,4,null,5,6,null,null,7] è¾“å‡º: 7 æç¤º:\näºŒå‰æ ‘çš„èŠ‚ç‚¹ä¸ªæ•°çš„èŒƒå›´æ˜¯ [1,104] -231Â \u0026lt;= Node.val \u0026lt;= 231Â - 1 è§£æ³•ä¸€ï¼šDFS 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 /** * Definition for a binary tree node. * type TreeNode struct { * Val int * Left *TreeNode * Right *TreeNode * } */ func findBottomLeftValue(root *TreeNode) int { res, maxDepth := root, 0 var dfs func(root *TreeNode, depth int) dfs = func(root *TreeNode, depth int) { if root != nil { depth += 1 if root.Left == nil \u0026amp;\u0026amp; root.Right == nil { // åªæœ‰å½“ depth \u0026gt; maxDepth æ—¶æ‰æ›´æ–° res if depth \u0026gt; maxDepth { maxDepth = depth res = root } return } // ä¸ºäº†ç¡®ä¿æ˜¯æœ€å·¦è¾¹èŠ‚ç‚¹çš„å€¼ï¼Œéœ€è¦å…ˆéå†å·¦å­æ ‘ï¼ dfs(root.Left, depth) dfs(root.Right, depth) } } dfs(root, 0) return res.Val } è§£æ³•äºŒï¼šBFS å®˜æ–¹é¢˜è§£å¦‚ä¸‹\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 func findBottomLeftValue(root *TreeNode) (ans int) { q := []*TreeNode{root} for len(q) \u0026gt; 0 { node := q[0] q = q[1:] if node.Right != nil { q = append(q, node.Right) } if node.Left != nil { q = append(q, node.Left) } ans = node.Val } return } ","date":"2023-05-03T23:07:21+08:00","image":"https://ibakuman.github.io/gallery/landscape/19_hu3c9ceb46f3c27ef42abe81330e191c65_524406_120x120_fill_q75_box_smart1.jpg","permalink":"https://ibakuman.github.io/posts/leetccode/problems/0513-find-bottom-left-tree-value/","title":"513. æ‰¾æ ‘å·¦ä¸‹è§’çš„å€¼"},{"content":"é¢˜ç›®æè¿° ç»™ä½ ä¸€ä¸ªäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ root ï¼ŒæŒ‰ ä»»æ„é¡ºåº ï¼Œè¿”å›æ‰€æœ‰ä»æ ¹èŠ‚ç‚¹åˆ°å¶å­èŠ‚ç‚¹çš„è·¯å¾„ã€‚\nå¶å­èŠ‚ç‚¹ æ˜¯æŒ‡æ²¡æœ‰å­èŠ‚ç‚¹çš„èŠ‚ç‚¹ã€‚\nç¤ºä¾‹ 1ï¼š\nè¾“å…¥ï¼šroot = [1,2,3,null,5] è¾“å‡ºï¼š[\u0026ldquo;1-\u0026gt;2-\u0026gt;5\u0026rdquo;,\u0026ldquo;1-\u0026gt;3\u0026rdquo;] ç¤ºä¾‹ 2ï¼š\nè¾“å…¥ï¼šroot = [1] è¾“å‡ºï¼š[\u0026ldquo;1\u0026rdquo;] æç¤ºï¼š\næ ‘ä¸­èŠ‚ç‚¹çš„æ•°ç›®åœ¨èŒƒå›´ [1, 100] å†… -100 \u0026lt;= Node.val \u0026lt;= 100 è§£æ³•ä¸€ï¼šé€’å½’ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 func binaryTreePaths(root *TreeNode) []string { var res []string if root == nil { return res } var cur []string var dfs func(root *TreeNode) dfs = func(root *TreeNode) { if root.Left == nil \u0026amp;\u0026amp; root.Right == nil { cur = append(cur, fmt.Sprintf(\u0026#34;%d\u0026#34;, root.Val)) res = append(res, strings.Join(cur, \u0026#34;-\u0026gt;\u0026#34;)) cur = cur[:len(cur)-1] return } cur = append(cur, fmt.Sprintf(\u0026#34;%d\u0026#34;, root.Val)) if root.Left != nil { dfs(root.Left) } if root.Right != nil { dfs(root.Right) } cur = cur[:len(cur)-1] } dfs(root) return res } å®˜æ–¹é¢˜è§£å¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 var paths []string func binaryTreePaths(root *TreeNode) []string { paths = []string{} constructPaths(root, \u0026#34;\u0026#34;) return paths } func constructPaths(root *TreeNode, path string) { if root != nil { pathSB := path pathSB += strconv.Itoa(root.Val) if root.Left == nil \u0026amp;\u0026amp; root.Right == nil { paths = append(paths, pathSB) } else { pathSB += \u0026#34;-\u0026gt;\u0026#34; constructPaths(root.Left, pathSB) constructPaths(root.Right, pathSB) } } } æ€»ç»“ï¼š\nå¯ä»¥ä½¿ç”¨ fmt.Sprintf(\u0026quot;%d\u0026quot;, root.Val) æˆ– strconv.Itoa(root.Val) å°† root.Val è½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚ ","date":"2023-05-03T21:50:20+08:00","image":"https://ibakuman.github.io/gallery/landscape/28_hubb8073e5e8dea6b644ad1c33059b37ce_1206472_120x120_fill_q75_box_smart1.jpg","permalink":"https://ibakuman.github.io/posts/leetccode/problems/0257-binary-tree-paths/","title":"257. äºŒå‰æ ‘çš„æ‰€æœ‰è·¯å¾„"},{"content":"é¢˜ç›®æè¿° ç»™å®šä¸€ä¸ªäºŒå‰æ ‘ï¼Œåˆ¤æ–­å®ƒæ˜¯å¦æ˜¯é«˜åº¦å¹³è¡¡çš„äºŒå‰æ ‘ã€‚æœ¬é¢˜ä¸­ï¼Œä¸€æ£µé«˜åº¦å¹³è¡¡äºŒå‰æ ‘å®šä¹‰ä¸ºï¼š\nä¸€ä¸ªäºŒå‰æ ‘_æ¯ä¸ªèŠ‚ç‚¹_ çš„å·¦å³ä¸¤ä¸ªå­æ ‘çš„é«˜åº¦å·®çš„ç»å¯¹å€¼ä¸è¶…è¿‡ 1 ã€‚\nç¤ºä¾‹ 1ï¼š\nè¾“å…¥ï¼šroot = [3,9,20,null,null,15,7] è¾“å‡ºï¼štrue ç¤ºä¾‹ 2ï¼š\nè¾“å…¥ï¼šroot = [1,2,2,3,3,null,null,4,4] è¾“å‡ºï¼šfalse ç¤ºä¾‹ 3ï¼š\nè¾“å…¥ï¼šroot = [ ] è¾“å‡ºï¼štrue è§£æ³•ä¸€ï¼šè‡ªé¡¶å‘ä¸‹é€’å½’ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 /** * Definition for a binary tree node. * type TreeNode struct { * Val int * Left *TreeNode * Right *TreeNode * } */ func isBalanced(root *TreeNode) bool { if root == nil { return true } lHeight := height(root.Left) rHeight := height(root.Right) return abs(rHeight-lHeight) \u0026lt;= 1 \u0026amp;\u0026amp; isBalanced(root.Left) \u0026amp;\u0026amp; isBalanced(root.Right) } func height(root *TreeNode) int { if root == nil { return 0 } return max(height(root.Left), height(root.Right)) + 1 } func max(a, b int) int { if a \u0026gt; b { return a } return b } func abs(num int) int { if num \u0026lt; 0 { return -num } return num } è§£æ³•äºŒï¼šè‡ªåº•å‘ä¸Šé€’å½’ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 /** * Definition for a binary tree node. * type TreeNode struct { * Val int * Left *TreeNode * Right *TreeNode * } */ func isBalanced(root *TreeNode) bool { return height(root) != -1 } func height(root *TreeNode) int { if root == nil { return 0 } lHeight := height(root.Left) if lHeight == -1 { return -1 } rHeight := height(root.Right) if rHeight == -1 || abs(rHeight-lHeight) \u0026gt; 1 { return -1 } return max(lHeight, rHeight) + 1 } func max(a, b int) int { if a \u0026gt; b { return a } return b } func abs(num int) int { if num \u0026lt; 0 { return -num } return num } ä¼˜åŒ–ä¸Šé¢çš„ä»£ç ï¼Œä¸Šé¢çš„ä»£ç ä¼šæŠŠå·¦å­æ ‘çš„é«˜åº¦å’Œå³å­æ ‘çš„é«˜åº¦éƒ½è®¡ç®—å‡ºä¹‹åæ‰è¿›è¡Œåˆ¤æ–­ã€‚ä¼˜åŒ–æ–¹æ³•å¦‚ä¸‹ï¼šåœ¨è®¡ç®—å‡ºå·¦å­æ ‘çš„é«˜åº¦ååˆ¤æ–­å·¦å­æ ‘æ˜¯å¦å¹³è¡¡ï¼Œå¦‚æœä¸å¹³è¡¡ç›´æ¥è¿”å› -1ï¼Œè¾¾åˆ°å‰ªæçš„ç›®çš„ã€‚ä¼˜åŒ–åçš„ä»£ç å¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 /** * Definition for a binary tree node. * type TreeNode struct { * Val int * Left *TreeNode * Right *TreeNode * } */ func isBalanced(root *TreeNode) bool { return height(root) != -1 } func height(root *TreeNode) int { if root == nil { return 0 } lHeight := height(root.Left) if lHeight == -1 { return -1 } rHeight := height(root.Right) if rHeight == -1 || abs(rHeight-lHeight) \u0026gt; 1 { return -1 } return max(lHeight, rHeight) + 1 } func max(a, b int) int { if a \u0026gt; b { return a } return b } func abs(num int) int { if num \u0026lt; 0 { return -num } return num } ","date":"2023-05-03T13:52:53+08:00","image":"https://ibakuman.github.io/gallery/landscape/24_hu02460565c68f6ee68754f9a01c400f03_406275_120x120_fill_q75_box_smart1.jpg","permalink":"https://ibakuman.github.io/posts/leetccode/problems/0110-balanced-binary-tree/","title":"110. å¹³è¡¡äºŒå‰æ ‘"},{"content":"é¢˜ç›®æè¿° ç»™å®šä¸€ä¸ª N å‰æ ‘ï¼Œæ‰¾åˆ°å…¶æœ€å¤§æ·±åº¦ã€‚æœ€å¤§æ·±åº¦æ˜¯æŒ‡ä»æ ¹èŠ‚ç‚¹åˆ°æœ€è¿œå¶å­èŠ‚ç‚¹çš„æœ€é•¿è·¯å¾„ä¸Šçš„èŠ‚ç‚¹æ€»æ•°ã€‚N å‰æ ‘è¾“å…¥æŒ‰å±‚åºéå†åºåˆ—åŒ–è¡¨ç¤ºï¼Œæ¯ç»„å­èŠ‚ç‚¹ç”±ç©ºå€¼åˆ†éš”ï¼ˆè¯·å‚è§ç¤ºä¾‹ï¼‰ã€‚\nç¤ºä¾‹ 1ï¼š\nè¾“å…¥ï¼šroot = [1,null,3,2,4,null,5,6] è¾“å‡ºï¼š3 ç¤ºä¾‹ 2ï¼š\nè¾“å…¥ï¼šroot = [1,null,2,3,4,5,null,null,6,7,null,8,null,9,10,null,null,11,null,12,null,13,null,null,14] è¾“å‡ºï¼š5 è§£æ³•ä¸€ï¼šé€’å½’ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 /** * Definition for a Node. * type Node struct { * Val int * Children []*Node * } */ func maxDepth(root *Node) int { if root == nil { return 0 } depth := 0 for _, next := range root.Children { depth = max(depth, maxDepth(next)) } return depth + 1 } func max(a, b int) int { if a \u0026gt; b { return a } return b } ","date":"2023-05-03T13:49:46+08:00","image":"https://ibakuman.github.io/gallery/landscape/13_hudf999d0dc4b7b257102e5c819f964247_303499_120x120_fill_q75_box_smart1.jpg","permalink":"https://ibakuman.github.io/posts/leetccode/problems/0559-maximum-depth-of-n-ary-tree/","title":"559. N å‰æ ‘çš„æœ€å¤§æ·±åº¦"},{"content":"é¢˜ç›®æè¿° ç»™å®šä¸€ä¸ªäºŒå‰æ ‘ï¼Œæ‰¾å‡ºå…¶æœ€å°æ·±åº¦ã€‚\næœ€å°æ·±åº¦æ˜¯ä»æ ¹èŠ‚ç‚¹åˆ°æœ€è¿‘å¶å­èŠ‚ç‚¹çš„æœ€çŸ­è·¯å¾„ä¸Šçš„èŠ‚ç‚¹æ•°é‡ã€‚\nè¯´æ˜: å¶å­èŠ‚ç‚¹æ˜¯æŒ‡æ²¡æœ‰å­èŠ‚ç‚¹çš„èŠ‚ç‚¹ã€‚\nç¤ºä¾‹ 1ï¼š\nè¾“å…¥ï¼šroot = [3,9,20,null,null,15,7] è¾“å‡ºï¼š2 ç¤ºä¾‹ 2ï¼š\nè¾“å…¥ï¼šroot = [2,null,3,null,4,null,5,null,6] è¾“å‡ºï¼š5 æç¤ºï¼š\næ ‘ä¸­èŠ‚ç‚¹æ•°çš„èŒƒå›´åœ¨ [0, 105] å†… -1000 \u0026lt;= Node.val \u0026lt;= 1000 è§£æ³•ä¸€ï¼šé€’å½’ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 /** * Definition for a binary tree node. * type TreeNode struct { * Val int * Left *TreeNode * Right *TreeNode * } */ func minDepth(root *TreeNode) int { if root == nil { return 0 } lDepth := minDepth(root.Left) rDepth := minDepth(root.Right) if root.Left == nil { return rDepth + 1 } if root.Right == nil { return lDepth + 1 } return min(lDepth, rDepth) + 1 } func min(a, b int) int { if a \u0026lt; b { return a } return b } ","date":"2023-05-03T13:39:04+08:00","image":"https://ibakuman.github.io/gallery/landscape/08_hufd4c43b663954d2f1b153b9f2254ca86_1202710_120x120_fill_q75_box_smart1.jpg","permalink":"https://ibakuman.github.io/posts/leetccode/problems/0111-minimum-depth-of-binary-tree/","title":"111. äºŒå‰æ ‘çš„æœ€å°æ·±åº¦"},{"content":"é¢˜ç›®æè¿° ç»™ä½ ä¸€æ£µ å®Œå…¨äºŒå‰æ ‘ çš„æ ¹èŠ‚ç‚¹ root ï¼Œæ±‚å‡ºè¯¥æ ‘çš„èŠ‚ç‚¹ä¸ªæ•°ã€‚\nå®Œå…¨äºŒå‰æ ‘ çš„å®šä¹‰å¦‚ä¸‹ï¼šåœ¨å®Œå…¨äºŒå‰æ ‘ä¸­ï¼Œé™¤äº†æœ€åº•å±‚èŠ‚ç‚¹å¯èƒ½æ²¡å¡«æ»¡å¤–ï¼Œå…¶ä½™æ¯å±‚èŠ‚ç‚¹æ•°éƒ½è¾¾åˆ°æœ€å¤§å€¼ï¼Œå¹¶ä¸”æœ€ä¸‹é¢ä¸€å±‚çš„èŠ‚ç‚¹éƒ½é›†ä¸­åœ¨è¯¥å±‚æœ€å·¦è¾¹çš„è‹¥å¹²ä½ç½®ã€‚è‹¥æœ€åº•å±‚ä¸ºç¬¬ h å±‚ï¼Œåˆ™è¯¥å±‚åŒ…å« 1~Â 2hÂ ä¸ªèŠ‚ç‚¹ã€‚\nç¤ºä¾‹ 1ï¼š\nè¾“å…¥ï¼šroot = [1,2,3,4,5,6] è¾“å‡ºï¼š6 ç¤ºä¾‹ 2ï¼š\nè¾“å…¥ï¼šroot = [ ] è¾“å‡ºï¼š0 ç¤ºä¾‹ 3ï¼š\nè¾“å…¥ï¼šroot = [1] è¾“å‡ºï¼š1 æç¤ºï¼š\næ ‘ä¸­èŠ‚ç‚¹çš„æ•°ç›®èŒƒå›´æ˜¯ [0, 5 * 104] 0 \u0026lt;= Node.val \u0026lt;= 5 * 104 é¢˜ç›®æ•°æ®ä¿è¯è¾“å…¥çš„æ ‘æ˜¯ å®Œå…¨äºŒå‰æ ‘ è¿›é˜¶: éå†æ ‘æ¥ç»Ÿè®¡èŠ‚ç‚¹æ˜¯ä¸€ç§æ—¶é—´å¤æ‚åº¦ä¸º O(n) çš„ç®€å•è§£å†³æ–¹æ¡ˆã€‚ä½ å¯ä»¥è®¾è®¡ä¸€ä¸ªæ›´å¿«çš„ç®—æ³•å—ï¼Ÿ\nè§£æ³•ä¸€ï¼šäºŒåˆ†æœç´¢ ","date":"2023-05-03T13:31:41+08:00","image":"https://ibakuman.github.io/gallery/landscape/01_hu984801500a3ee8d5189999f9716a0882_2696078_120x120_fill_q75_box_smart1.jpg","permalink":"https://ibakuman.github.io/posts/leetccode/problems/0222-count-complete-tree-nodes/","title":"222. å®Œå…¨äºŒå‰æ ‘çš„èŠ‚ç‚¹ä¸ªæ•°"},{"content":"é¢˜ç›®æè¿° ç»™å®šä¸€ä¸ªäºŒå‰æ ‘ï¼Œæ‰¾å‡ºå…¶æœ€å¤§æ·±åº¦ã€‚\näºŒå‰æ ‘çš„æ·±åº¦ä¸ºæ ¹èŠ‚ç‚¹åˆ°æœ€è¿œå¶å­èŠ‚ç‚¹çš„æœ€é•¿è·¯å¾„ä¸Šçš„èŠ‚ç‚¹æ•°ã€‚\nè¯´æ˜:Â å¶å­èŠ‚ç‚¹æ˜¯æŒ‡æ²¡æœ‰å­èŠ‚ç‚¹çš„èŠ‚ç‚¹ã€‚\nç¤ºä¾‹ï¼š\nç»™å®šäºŒå‰æ ‘ [3,9,20,null,null,15,7]ï¼Œ\n3 / \\\\ 9 20 / \\\\ 15 7 è¿”å›å®ƒçš„æœ€å¤§æ·±åº¦Â 3 ã€‚\nè§£æ³•ä¸€ï¼šé€’å½’ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 /** * Definition for a binary tree node. * type TreeNode struct { * Val int * Left *TreeNode * Right *TreeNode * } */ func maxDepth(root *TreeNode) int { if root == nil { return 0 } return max(maxDepth(root.Left), maxDepth(root.Right)) + 1 } func max(a, b int) int { if a \u0026gt; b { return a } return b } ","date":"2023-05-03T11:30:05+08:00","image":"https://ibakuman.github.io/gallery/landscape/25_hu0a3309c019aba12b8d679d09b57cc9da_1259768_120x120_fill_q75_box_smart1.jpg","permalink":"https://ibakuman.github.io/posts/leetccode/problems/0104-maximum-depth-of-binary-tree/","title":"104. äºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦"},{"content":" 101. å¯¹ç§°äºŒå‰æ ‘ 104. äºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦ 110. å¹³è¡¡äºŒå‰æ ‘ 111. äºŒå‰æ ‘çš„æœ€å°æ·±åº¦ 112. è·¯å¾„æ€»å’Œ 133. å…‹éš†å›¾ 206. åè½¬é“¾è¡¨ 226. ç¿»è½¬äºŒå‰æ ‘ 257. äºŒå‰æ ‘çš„æ‰€æœ‰è·¯å¾„ 404. å·¦å¶å­ä¹‹å’Œ 513. æ‰¾æ ‘å·¦ä¸‹è§’çš„å€¼ 559. N å‰æ ‘çš„æœ€å¤§æ·±åº¦ ","date":"2023-05-03T10:07:08+08:00","image":"https://ibakuman.github.io/gallery/landscape/01_hu984801500a3ee8d5189999f9716a0882_2696078_120x120_fill_q75_box_smart1.jpg","permalink":"https://ibakuman.github.io/posts/leetccode/recursion/","title":"ä½¿ç”¨é€’å½’çš„ LeetCode é¢˜ç›®"},{"content":"é¢˜ç›®æè¿° ç»™ä½ ä¸€ä¸ªäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ root ï¼Œ æ£€æŸ¥å®ƒæ˜¯å¦è½´å¯¹ç§°ã€‚\nç¤ºä¾‹ 1ï¼š\nè¾“å…¥ï¼šroot = [1,2,2,3,4,4,3] è¾“å‡ºï¼štrue ç¤ºä¾‹ 2ï¼š\nè¾“å…¥ï¼šroot = [1,2,2,null,3,null,3] è¾“å‡ºï¼šfalse è§£æ³•ä¸€ï¼šé€’å½’ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 func isSymmetric(root *TreeNode) bool { return check(root, root) } func check(p, q *TreeNode) bool { if p == nil \u0026amp;\u0026amp; q == nil { return true } if p == nil || q == nil { return false } return p.Val == q.Val \u0026amp;\u0026amp; check(p.Left, q.Right) \u0026amp;\u0026amp; check(p.Right, q.Left) } ","date":"2023-05-02T12:31:40+08:00","image":"https://ibakuman.github.io/gallery/landscape/02_huf55d0eff1680a905d0940d9535d13b2a_2828685_120x120_fill_q75_box_smart1.jpg","permalink":"https://ibakuman.github.io/posts/leetccode/problems/0101-symmetric-tree/","title":"101. å¯¹ç§°äºŒå‰æ ‘"},{"content":"é¢˜ç›®æè¿° ç»™ä½ ä¸€æ£µäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ root ï¼Œç¿»è½¬è¿™æ£µäºŒå‰æ ‘ï¼Œå¹¶è¿”å›å…¶æ ¹èŠ‚ç‚¹ã€‚\nç¤ºä¾‹ 1ï¼š\nè¾“å…¥ï¼šroot = [4,2,7,1,3,6,9] è¾“å‡ºï¼š[4,7,2,9,6,3,1] ç¤ºä¾‹ 2ï¼š\nè¾“å…¥ï¼šroot = [2,1,3] è¾“å‡ºï¼š[2,3,1] ç¤ºä¾‹ 3ï¼š\nè¾“å…¥ï¼šroot = [ ] è¾“å‡ºï¼š[ ] æç¤ºï¼š\næ ‘ä¸­èŠ‚ç‚¹æ•°ç›®èŒƒå›´åœ¨ [0, 100] å†… -100 \u0026lt;= Node.val \u0026lt;= 100 è§£æ³•ä¸€ï¼šé€’å½’ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 /** * Definition for a binary tree node. * type TreeNode struct { * Val int * Left *TreeNode * Right *TreeNode * } */ func invertTree(root *TreeNode) *TreeNode { if root == nil { return root } left := root.Left root.Left = invertTree(root.Right) root.Right = invertTree(left) return root } ","date":"2023-05-02T12:26:13+08:00","image":"https://ibakuman.github.io/gallery/landscape/17_hudbc1561b7a760b2f47477637bc223f35_938024_120x120_fill_q75_box_smart1.jpg","permalink":"https://ibakuman.github.io/posts/leetccode/problems/0226-invert-binary-tree/","title":"226. ç¿»è½¬äºŒå‰æ ‘"},{"content":" 98. éªŒè¯äºŒå‰æœç´¢æ ‘ 101. å¯¹ç§°äºŒå‰æ ‘ 104. äºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦ 108. å°†æœ‰åºæ•°ç»„è½¬æ¢ä¸ºäºŒå‰æœç´¢æ ‘ 110. å¹³è¡¡äºŒå‰æ ‘ 111. äºŒå‰æ ‘çš„æœ€å°æ·±åº¦ 112. è·¯å¾„æ€»å’Œ 226. ç¿»è½¬äºŒå‰æ ‘ 236. äºŒå‰æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ 257. äºŒå‰æ ‘çš„æ‰€æœ‰è·¯å¾„ 404. å·¦å¶å­ä¹‹å’Œ 450. åˆ é™¤äºŒå‰æœç´¢æ ‘ä¸­çš„èŠ‚ç‚¹ 501. äºŒå‰æœç´¢æ ‘ä¸­çš„ä¼—æ•° 513. æ‰¾æ ‘å·¦ä¸‹è§’çš„å€¼ 530. äºŒå‰æœç´¢æ ‘çš„æœ€å°ç»å¯¹å·® 538. æŠŠäºŒå‰æœç´¢æ ‘è½¬æ¢ä¸ºç´¯åŠ æ ‘ 559. N å‰æ ‘çš„æœ€å¤§æ·±åº¦ 617. åˆå¹¶äºŒå‰æ ‘ 669. ä¿®å‰ªäºŒå‰æœç´¢æ ‘ 700. äºŒå‰æœç´¢æ ‘ä¸­çš„æœç´¢ ","date":"2023-05-02T12:18:21+08:00","image":"https://ibakuman.github.io/gallery/landscape/11_hudf52b8b325017a6d69e0e042062b02e2_3188398_120x120_fill_q75_box_smart1.jpg","permalink":"https://ibakuman.github.io/posts/leetccode/tree/","title":"æœ‰å…³æ ‘çš„ LeetCode é¢˜ç›®"},{"content":" 94. äºŒå‰æ ‘çš„ä¸­åºéå†\n150. é€†æ³¢å…°è¡¨è¾¾å¼æ±‚å€¼\n155. æœ€å°æ ˆ\n","date":"2023-05-02T12:03:00+08:00","image":"https://ibakuman.github.io/gallery/landscape/29_hu8940b943a3a3cf8f8bedd9ed1cbe7245_2487543_120x120_fill_q75_box_smart1.jpg","permalink":"https://ibakuman.github.io/posts/leetccode/stack/","title":"æ ˆç›¸å…³çš„ LeetCode é¢˜ç›®"},{"content":" 42. æ¥é›¨æ°´\n239. æ»‘åŠ¨çª—å£æœ€å¤§å€¼\n739. æ¯æ—¥æ¸©åº¦\n","date":"2023-05-02T11:59:20+08:00","image":"https://ibakuman.github.io/gallery/landscape/18_hu7a8b922ea914ad8a12e0fc01dcf809f5_223556_120x120_fill_q75_box_smart1.jpg","permalink":"https://ibakuman.github.io/posts/leetccode/monotonic-stack/","title":"å•è°ƒæ ˆç›¸å…³çš„ LeetCode é¢˜ç›®"},{"content":"é¢˜ç›®æè¿° ç»™ä½ ä¸¤ä¸ªå•é“¾è¡¨çš„å¤´èŠ‚ç‚¹Â headA å’Œ headB ï¼Œè¯·ä½ æ‰¾å‡ºå¹¶è¿”å›ä¸¤ä¸ªå•é“¾è¡¨ç›¸äº¤çš„èµ·å§‹èŠ‚ç‚¹ã€‚å¦‚æœä¸¤ä¸ªé“¾è¡¨æ²¡æœ‰äº¤ç‚¹ï¼Œè¿”å› null ã€‚\nå›¾ç¤ºä¸¤ä¸ªé“¾è¡¨åœ¨èŠ‚ç‚¹ c1 å¼€å§‹ç›¸äº¤\né¢˜ç›®æ•°æ® ä¿è¯ æ•´ä¸ªé“¾å¼ç»“æ„ä¸­ä¸å­˜åœ¨ç¯ã€‚\næ³¨æ„ï¼Œå‡½æ•°è¿”å›ç»“æœåï¼Œé“¾è¡¨å¿…é¡» ä¿æŒå…¶åŸå§‹ç»“æ„ ã€‚\nç¤ºä¾‹ 1ï¼š\nè¾“å…¥ï¼šintersectVal = 8, listA = [4,1,8,4,5], listB = [5,0,1,8,4,5], skipA = 2, skipB = 3 è¾“å‡ºï¼šIntersected at \u0026lsquo;8\u0026rsquo; è§£é‡Šï¼šç›¸äº¤èŠ‚ç‚¹çš„å€¼ä¸º 8 ï¼ˆæ³¨æ„ï¼Œå¦‚æœä¸¤ä¸ªé“¾è¡¨ç›¸äº¤åˆ™ä¸èƒ½ä¸º 0ï¼‰ã€‚ä»å„è‡ªçš„è¡¨å¤´å¼€å§‹ç®—èµ·ï¼Œé“¾è¡¨ A ä¸º [4,1,8,4,5]ï¼Œé“¾è¡¨ B ä¸º [5,0,1,8,4,5]ã€‚åœ¨ A ä¸­ï¼Œç›¸äº¤èŠ‚ç‚¹å‰æœ‰ 2 ä¸ªèŠ‚ç‚¹ï¼›åœ¨ B ä¸­ï¼Œç›¸äº¤èŠ‚ç‚¹å‰æœ‰ 3 ä¸ªèŠ‚ç‚¹ã€‚ ç¤ºä¾‹Â 2ï¼š\nè¾“å…¥ï¼šintersectValÂ = 2, listA = [0,9,1,2,4], listB = [3,2,4], skipA = 3, skipB = 1 è¾“å‡ºï¼šIntersected at \u0026lsquo;2\u0026rsquo; è§£é‡Šï¼šç›¸äº¤èŠ‚ç‚¹çš„å€¼ä¸º 2 ï¼ˆæ³¨æ„ï¼Œå¦‚æœä¸¤ä¸ªé“¾è¡¨ç›¸äº¤åˆ™ä¸èƒ½ä¸º 0ï¼‰ã€‚ä»å„è‡ªçš„è¡¨å¤´å¼€å§‹ç®—èµ·ï¼Œé“¾è¡¨ A ä¸º [0,9,1,2,4]ï¼Œé“¾è¡¨ B ä¸º [3,2,4]ã€‚åœ¨ A ä¸­ï¼Œç›¸äº¤èŠ‚ç‚¹å‰æœ‰ 3 ä¸ªèŠ‚ç‚¹ï¼›åœ¨ B ä¸­ï¼Œç›¸äº¤èŠ‚ç‚¹å‰æœ‰ 1 ä¸ªèŠ‚ç‚¹ã€‚ ç¤ºä¾‹Â 3ï¼š\nè¾“å…¥ï¼šintersectVal = 0, listA = [2,6,4], listB = [1,5], skipA = 3, skipB = 2 è¾“å‡ºï¼šnull è§£é‡Šï¼šä»å„è‡ªçš„è¡¨å¤´å¼€å§‹ç®—èµ·ï¼Œé“¾è¡¨ A ä¸º [2,6,4]ï¼Œé“¾è¡¨ B ä¸º [1,5]ã€‚ç”±äºè¿™ä¸¤ä¸ªé“¾è¡¨ä¸ç›¸äº¤ï¼Œæ‰€ä»¥ intersectVal å¿…é¡»ä¸º 0ï¼Œè€Œ skipA å’Œ skipB å¯ä»¥æ˜¯ä»»æ„å€¼ã€‚è¿™ä¸¤ä¸ªé“¾è¡¨ä¸ç›¸äº¤ï¼Œå› æ­¤è¿”å› null ã€‚ è§£æ³•ä¸€ï¼šåŒæŒ‡é’ˆ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 /** * Definition for singly-linked list. * type ListNode struct { * Val int * Next *ListNode * } */ func getIntersectionNode(headA, headB *ListNode) *ListNode { if headA == nil || headB == nil { return nil } pA, pB := headA, headB for pA != pB { if pA != nil { pA = pA.Next } else { pA = headB } if pB != nil { pB = pB.Next } else { pB = headA } } return pA } ","date":"2023-05-01T14:13:40+08:00","image":"https://ibakuman.github.io/gallery/landscape/18_hu7a8b922ea914ad8a12e0fc01dcf809f5_223556_120x120_fill_q75_box_smart1.jpg","permalink":"https://ibakuman.github.io/posts/leetccode/interview/02.07-intersection-of-two-linked-lists-lcci/","title":"é¢è¯•é¢˜ 02.07. é“¾è¡¨ç›¸äº¤"},{"content":"é¢˜ç›®æè¿° ç»™ä½ ä¸€ä¸ªé“¾è¡¨ï¼Œåˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬Â n ä¸ªç»“ç‚¹ï¼Œå¹¶ä¸”è¿”å›é“¾è¡¨çš„å¤´ç»“ç‚¹ã€‚\nç¤ºä¾‹ 1ï¼š\nè¾“å…¥ï¼šead = [1,2,3,4,5], n = 2 è¾“å‡ºï¼š[1,2,3,5] ç¤ºä¾‹ 2ï¼š\nè¾“å…¥ï¼šhead = [1], n = 1 è¾“å‡ºï¼š[] ç¤ºä¾‹ 3ï¼š\nè¾“å…¥ï¼šhead = [1,2], n = 1 è¾“å‡ºï¼š[1] è§£æ³•ä¸€ï¼šåŒæŒ‡é’ˆ + è™šæ‹ŸèŠ‚ç‚¹ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 /** * Definition for singly-linked list. * type ListNode struct { * Val int * Next *ListNode * } */ func removeNthFromEnd(head *ListNode, n int) *ListNode { dummyNode := \u0026amp;ListNode{Next: head} slow, fast := head, head for n \u0026gt; 0 \u0026amp;\u0026amp; fast != nil { fast = fast.Next n-- } prev := dummyNode for fast != nil { prev = slow slow = slow.Next fast = fast.Next } prev.Next = slow.Next return dummyNode.Next } ","date":"2023-05-01T13:55:33+08:00","image":"https://ibakuman.github.io/gallery/landscape/20_hu04c80cb06f0b716a920690442f749887_1496648_120x120_fill_q75_box_smart1.jpg","permalink":"https://ibakuman.github.io/posts/leetccode/problems/0019-remove-nth-node-from-end-of-list/","title":"19. åˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬ N ä¸ªç»“ç‚¹"},{"content":" 206. åè½¬é“¾è¡¨\né¢è¯•é¢˜ 02.07. é“¾è¡¨ç›¸äº¤\n","date":"2023-05-01T13:51:53+08:00","image":"https://ibakuman.github.io/gallery/landscape/25_hu0a3309c019aba12b8d679d09b57cc9da_1259768_120x120_fill_q75_box_smart1.jpg","permalink":"https://ibakuman.github.io/posts/leetccode/list/","title":"æœ‰å…³é“¾è¡¨çš„ LeetCode é¢˜ç›®"},{"content":"é¢˜ç›®æè¿° ç»™ä½ å•é“¾è¡¨çš„å¤´èŠ‚ç‚¹ head ï¼Œè¯·ä½ åè½¬é“¾è¡¨ï¼Œå¹¶è¿”å›åè½¬åçš„é“¾è¡¨ã€‚\nç¤ºä¾‹ 1ï¼š\nè¾“å…¥ï¼šhead = [1,2,3,4,5] è¾“å‡ºï¼š[5,4,3,2,1] ç¤ºä¾‹ 2ï¼š\nè¾“å…¥ï¼šhead = [1,2] è¾“å‡ºï¼š[2,1] ç¤ºä¾‹ 3ï¼š\nè¾“å…¥ï¼šhead = [] è¾“å‡ºï¼š[] è§£æ³•ä¸€ï¼šåŒæŒ‡é’ˆ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 /** * Definition for singly-linked list. * type ListNode struct { * Val int * Next *ListNode * } */ func reverseList(head *ListNode) *ListNode { if head == nil || head.Next == nil { return head } var prev *ListNode cur := head for cur != nil { next := cur.Next cur.Next = prev prev = cur cur = next } return prev } è§£æ³•äºŒï¼šé€’å½’ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 /** * Definition for singly-linked list. * type ListNode struct { * Val int * Next *ListNode * } */ func reverseList(head *ListNode) *ListNode { if head == nil || head.Next == nil { return head } newHead := reverseList(head.Next) head.Next.Next = head head.Next = nil return newHead } ","date":"2023-05-01T13:42:28+08:00","image":"https://ibakuman.github.io/gallery/landscape/19_hu3c9ceb46f3c27ef42abe81330e191c65_524406_120x120_fill_q75_box_smart1.jpg","permalink":"https://ibakuman.github.io/posts/leetccode/problems/0206-reverse-linked-list/","title":"206. åè½¬é“¾è¡¨"},{"content":"é¢˜ç›®æè¿° ç»™ä½ ä¸€ä¸ªæ•°ç»„ nums å’Œä¸€ä¸ªå€¼ valï¼Œä½ éœ€è¦ åŸåœ° ç§»é™¤æ‰€æœ‰æ•°å€¼ç­‰äºÂ val çš„å…ƒç´ ï¼Œå¹¶è¿”å›ç§»é™¤åæ•°ç»„çš„æ–°é•¿åº¦ã€‚\nä¸è¦ä½¿ç”¨é¢å¤–çš„æ•°ç»„ç©ºé—´ï¼Œä½ å¿…é¡»ä»…ä½¿ç”¨ O(1) é¢å¤–ç©ºé—´å¹¶ åŸåœ° ä¿®æ”¹è¾“å…¥æ•°ç»„ã€‚\nå…ƒç´ çš„é¡ºåºå¯ä»¥æ”¹å˜ã€‚ä½ ä¸éœ€è¦è€ƒè™‘æ•°ç»„ä¸­è¶…å‡ºæ–°é•¿åº¦åé¢çš„å…ƒç´ ã€‚\nè¯´æ˜:\nä¸ºä»€ä¹ˆè¿”å›æ•°å€¼æ˜¯æ•´æ•°ï¼Œä½†è¾“å‡ºçš„ç­”æ¡ˆæ˜¯æ•°ç»„å‘¢ï¼Ÿ\nè¯·æ³¨æ„ï¼Œè¾“å…¥æ•°ç»„æ˜¯ä»¥ ã€Œå¼•ç”¨ã€ æ–¹å¼ä¼ é€’çš„ï¼Œè¿™æ„å‘³ç€åœ¨å‡½æ•°é‡Œä¿®æ”¹è¾“å…¥æ•°ç»„å¯¹äºè°ƒç”¨è€…æ˜¯å¯è§çš„ã€‚\nä½ å¯ä»¥æƒ³è±¡å†…éƒ¨æ“ä½œå¦‚ä¸‹:\n1 2 3 4 5 6 7 8 // nums æ˜¯ä»¥â€œå¼•ç”¨â€æ–¹å¼ä¼ é€’çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸å¯¹å®å‚ä½œä»»ä½•æ‹·è´ int len = removeElement(nums, val); // åœ¨å‡½æ•°é‡Œä¿®æ”¹è¾“å…¥æ•°ç»„å¯¹äºè°ƒç”¨è€…æ˜¯å¯è§çš„ã€‚ // æ ¹æ®ä½ çš„å‡½æ•°è¿”å›çš„é•¿åº¦, å®ƒä¼šæ‰“å°å‡ºæ•°ç»„ä¸­ è¯¥é•¿åº¦èŒƒå›´å†…çš„æ‰€æœ‰å…ƒç´ ã€‚ for (int i = 0; i \u0026lt; len; i++) { print(nums[i]); } ç¤ºä¾‹ 1ï¼š\nè¾“å…¥ï¼šnums = [3,2,2,3], val = 3 è¾“å‡ºï¼š2, nums = [2,2] è§£é‡Šï¼šå‡½æ•°åº”è¯¥è¿”å›æ–°çš„é•¿åº¦ 2, å¹¶ä¸” nums ä¸­çš„å‰ä¸¤ä¸ªå…ƒç´ å‡ä¸º 2ã€‚ä½ ä¸éœ€è¦è€ƒè™‘æ•°ç»„ä¸­è¶…å‡ºæ–°é•¿åº¦åé¢çš„å…ƒç´ ã€‚ä¾‹å¦‚ï¼Œå‡½æ•°è¿”å›çš„æ–°é•¿åº¦ä¸º 2 ï¼Œè€Œ nums = [2,2,3,3] æˆ– nums = [2,2,0,0]ï¼Œä¹Ÿä¼šè¢«è§†ä½œæ­£ç¡®ç­”æ¡ˆã€‚ ç¤ºä¾‹ 2ï¼š\nè¾“å…¥ï¼šnums = [0,1,2,2,3,0,4,2], val = 2 è¾“å‡ºï¼š5, nums = [0,1,4,0,3] è§£é‡Šï¼šå‡½æ•°åº”è¯¥è¿”å›æ–°çš„é•¿åº¦ 5, å¹¶ä¸” nums ä¸­çš„å‰äº”ä¸ªå…ƒç´ ä¸º 0, 1, 3, 0, 4ã€‚æ³¨æ„è¿™äº”ä¸ªå…ƒç´ å¯ä¸ºä»»æ„é¡ºåºã€‚ä½ ä¸éœ€è¦è€ƒè™‘æ•°ç»„ä¸­è¶…å‡ºæ–°é•¿åº¦åé¢çš„å…ƒç´ ã€‚ è§£æ³•ä¸€ï¼šåŒæŒ‡é’ˆ 1 2 3 4 5 6 7 8 9 10 11 func removeElement(nums []int, val int) int { // i å®šä¹‰ä¸ºï¼šä¸‹ä¸€ä¸ªä¸ç­‰äº val çš„å…ƒç´ åº”è¯¥å­˜æ”¾çš„ä½ç½® i := 0 for j := 0; j \u0026lt; len(nums); j++ { if nums[j] != val { nums[i] = nums[j] i++ } } return i } ","date":"2023-05-01T13:36:04+08:00","image":"https://ibakuman.github.io/gallery/landscape/13_hudf999d0dc4b7b257102e5c819f964247_303499_120x120_fill_q75_box_smart1.jpg","permalink":"https://ibakuman.github.io/posts/leetccode/problems/0027-remove-element/","title":"27. ç§»é™¤å…ƒç´ "},{"content":"é¢˜ç›®æè¿° ç»™å®šä¸€ä¸ªéç©ºçš„å­—ç¬¦ä¸² s ï¼Œæ£€æŸ¥æ˜¯å¦å¯ä»¥é€šè¿‡ç”±å®ƒçš„ä¸€ä¸ªå­ä¸²é‡å¤å¤šæ¬¡æ„æˆã€‚\nç¤ºä¾‹ 1:\nè¾“å…¥: s = \u0026ldquo;abab\u0026rdquo; è¾“å‡º: true è§£é‡Š: å¯ç”±å­ä¸² \u0026ldquo;ab\u0026rdquo; é‡å¤ä¸¤æ¬¡æ„æˆã€‚ ç¤ºä¾‹ 2:\nè¾“å…¥: s = \u0026ldquo;aba\u0026rdquo; è¾“å‡º: false ç¤ºä¾‹ 3:\nè¾“å…¥: s = \u0026ldquo;abcabcabcabc\u0026rdquo; è¾“å‡º: true è§£é‡Š: å¯ç”±å­ä¸² \u0026ldquo;abc\u0026rdquo; é‡å¤å››æ¬¡æ„æˆã€‚ (æˆ–å­ä¸² \u0026ldquo;abcabc\u0026rdquo; é‡å¤ä¸¤æ¬¡æ„æˆã€‚) è§£æ³•ä¸€ï¼šæšä¸¾ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 func repeatedSubstringPattern(s string) bool { n := len(s) for i := 1; i * 2 \u0026lt;= n; i++ { if n % i == 0 { match := true for j := i; j \u0026lt; n; j++ { if s[j] != s[j - i] { match = false break } } if match { return true } } } return false } è§£æ³•äºŒï¼šKMP ç®—æ³• 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 func repeatedSubstringPattern(s string) bool { // æ³¨æ„ï¼šå½“ s åªç”±ä¸€ä¸ªå­—ç¬¦ç»„æˆæ—¶ï¼ˆå¦‚ s=\u0026#34;a\u0026#34;ï¼‰ï¼Œæœ¬å‡½æ•°åº”è¯¥è¿”å› false a := s + s // next[i] çš„å€¼è¡¨ç¤ºçš„æ˜¯ s çš„å­ä¸² s[0...i] æœ€é•¿ä¸”ç›¸ç­‰çš„çœŸå‰ç¼€ä¸çœŸåç¼€çš„é•¿åº¦ next := make([]int, len(s)) for i, j := 0, 1; j \u0026lt; len(s); j++ { // i è¡¨ç¤ºå‰ä¸€ä¸ªå­ä¸²çš„æœ€é•¿ä¸”ç›¸ç­‰çš„çœŸå‰ç¼€ä¸çœŸåç¼€çš„é•¿åº¦ã€‚æ³¨æ„ i ä» 0 å¼€å§‹ // å› ä¸ºåªæœ‰ä¸€ä¸ªå­—ç¬¦çš„å­—ç¬¦ä¸²æ²¡æœ‰çœŸå‰ç¼€ä¸çœŸåç¼€ // j æŒ‡å‘å½“å‰å­ä¸²çš„æœ«å°¾å­—ç¬¦ for i \u0026gt; 0 \u0026amp;\u0026amp; s[i] != s[j] { i = next[i] } if s[i] == s[j] { i++ } next[j] = i } for i, j := 1, 0; i \u0026lt; len(a)-1; i++ { for j \u0026gt; 0 \u0026amp;\u0026amp; s[j] != a[i] { j = next[j] } if s[j] == a[i] { j++ } if j == len(s) { return true } } return false } ","date":"2023-05-01T10:29:47+08:00","image":"https://ibakuman.github.io/gallery/landscape/14_hu408d85e3d6fd20da711d14997ee2c37d_918594_120x120_fill_q75_box_smart1.jpg","permalink":"https://ibakuman.github.io/posts/leetccode/problems/0459-repeated-substring-pattern/","title":"459. é‡å¤çš„å­å­—ç¬¦ä¸²"},{"content":"","date":"2023-05-01T09:25:57+08:00","image":"https://ibakuman.github.io/gallery/landscape/19_hu3c9ceb46f3c27ef42abe81330e191c65_524406_120x120_fill_q75_box_smart1.jpg","permalink":"https://ibakuman.github.io/posts/algorithm/kmp/","title":"KMP ç®—æ³•"},{"content":"é¢˜ç›®æè¿° ç»™ä½ ä¸¤ä¸ªå­—ç¬¦ä¸²Â haystack å’Œ needle ï¼Œè¯·ä½ åœ¨ haystack å­—ç¬¦ä¸²ä¸­æ‰¾å‡º needle å­—ç¬¦ä¸²çš„ç¬¬ä¸€ä¸ªåŒ¹é…é¡¹çš„ä¸‹æ ‡ï¼ˆä¸‹æ ‡ä» 0 å¼€å§‹ï¼‰ã€‚å¦‚æœÂ needle ä¸æ˜¯ haystack çš„ä¸€éƒ¨åˆ†ï¼Œåˆ™è¿”å›Â -1 ã€‚\nç¤ºä¾‹ 1ï¼š\nè¾“å…¥ï¼šhaystack = \u0026ldquo;sadbutsad\u0026rdquo;, needle = \u0026ldquo;sad\u0026rdquo; è¾“å‡ºï¼š0 è§£é‡Šï¼š\u0026ldquo;sad\u0026rdquo; åœ¨ä¸‹æ ‡ 0 å’Œ 6 å¤„åŒ¹é…ã€‚ç¬¬ä¸€ä¸ªåŒ¹é…é¡¹çš„ä¸‹æ ‡æ˜¯ 0 ï¼Œæ‰€ä»¥è¿”å› 0 ã€‚ ç¤ºä¾‹ 2ï¼š\nè¾“å…¥ï¼šhaystack = \u0026ldquo;leetcode\u0026rdquo;, needle = \u0026ldquo;leeto\u0026rdquo; è¾“å‡ºï¼š-1 è§£é‡Šï¼š\u0026ldquo;leeto\u0026rdquo; æ²¡æœ‰åœ¨ \u0026ldquo;leetcode\u0026rdquo; ä¸­å‡ºç°ï¼Œæ‰€ä»¥è¿”å› -1 ã€‚ æç¤ºï¼š\n1 \u0026lt;= haystack.length, needle.length \u0026lt;= 104 haystack å’Œ needle ä»…ç”±å°å†™è‹±æ–‡å­—ç¬¦ç»„æˆ è§£æ³•ä¸€ï¼šKMP ç®—æ³• 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 func strStr(haystack string, needle string) int { nn := len(needle) if nn == 0 { return 0 } next := make([]int, nn) for i, j := 0, 1; j \u0026lt; nn; j++ { for i \u0026gt; 0 \u0026amp;\u0026amp; needle[i] != needle[j] { i = next[i-1] } if needle[i] == needle[j] { i++ } next[j] = i } for i, j := 0, 0; i \u0026lt; len(haystack); i++ { for j \u0026gt; 0 \u0026amp;\u0026amp; haystack[i] != needle[j] { j = next[j-1] } if haystack[i] == needle[j] { j++ } if j == nn { return i - nn + 1 } } return -1 } ","date":"2023-04-30T20:07:29+08:00","image":"https://ibakuman.github.io/gallery/landscape/27_hubc821d6e6d7f4a0f5b14def3892e014e_5550125_120x120_fill_q75_box_smart1.jpg","permalink":"https://ibakuman.github.io/posts/leetccode/problems/0028-find-the-index-of-the-first-occurrence-in-a-string/","title":"28. æ‰¾å‡ºå­—ç¬¦ä¸²ä¸­ç¬¬ä¸€ä¸ªåŒ¹é…é¡¹çš„ä¸‹æ ‡"},{"content":"é¢˜ç›®æè¿° ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸² s ï¼Œè¯·ä½ åè½¬å­—ç¬¦ä¸²ä¸­ å•è¯ çš„é¡ºåºã€‚\nå•è¯ æ˜¯ç”±éç©ºæ ¼å­—ç¬¦ç»„æˆçš„å­—ç¬¦ä¸²ã€‚s ä¸­ä½¿ç”¨è‡³å°‘ä¸€ä¸ªç©ºæ ¼å°†å­—ç¬¦ä¸²ä¸­çš„ å•è¯ åˆ†éš”å¼€ã€‚\nè¿”å› å•è¯ é¡ºåºé¢ å€’ä¸” å•è¯ ä¹‹é—´ç”¨å•ä¸ªç©ºæ ¼è¿æ¥çš„ç»“æœå­—ç¬¦ä¸²ã€‚\næ³¨æ„: è¾“å…¥å­—ç¬¦ä¸² s ä¸­å¯èƒ½ä¼šå­˜åœ¨å‰å¯¼ç©ºæ ¼ã€å°¾éšç©ºæ ¼æˆ–è€…å•è¯é—´çš„å¤šä¸ªç©ºæ ¼ã€‚è¿”å›çš„ç»“æœå­—ç¬¦ä¸²ä¸­ï¼Œå•è¯é—´åº”å½“ä»…ç”¨å•ä¸ªç©ºæ ¼åˆ†éš”ï¼Œä¸”ä¸åŒ…å«ä»»ä½•é¢å¤–çš„ç©ºæ ¼ã€‚\nç¤ºä¾‹ 1ï¼š\nè¾“å…¥ï¼šs = \u0026ldquo;the sky is blue\u0026rdquo; è¾“å‡ºï¼š\u0026ldquo;blue is sky the\u0026rdquo; ç¤ºä¾‹ 2ï¼š\nè¾“å…¥ï¼šs = \u0026quot; hello world \u0026quot; è¾“å‡ºï¼š\u0026ldquo;world hello\u0026rdquo; è§£é‡Šï¼šåè½¬åçš„å­—ç¬¦ä¸²ä¸­ä¸èƒ½å­˜åœ¨å‰å¯¼ç©ºæ ¼å’Œå°¾éšç©ºæ ¼ã€‚ ç¤ºä¾‹ 3ï¼š\nè¾“å…¥ï¼šs = \u0026ldquo;a good example\u0026rdquo; è¾“å‡ºï¼š\u0026ldquo;example good a\u0026rdquo; è§£é‡Šï¼šå¦‚æœä¸¤ä¸ªå•è¯é—´æœ‰å¤šä½™çš„ç©ºæ ¼ï¼Œåè½¬åçš„å­—ç¬¦ä¸²éœ€è¦å°†å•è¯é—´çš„ç©ºæ ¼å‡å°‘åˆ°ä»…æœ‰ä¸€ä¸ªã€‚ æç¤ºï¼š\n1 \u0026lt;= s.length \u0026lt;= 104 s åŒ…å«è‹±æ–‡å¤§å°å†™å­—æ¯ã€æ•°å­—å’Œç©ºæ ¼ ' ' s ä¸­ è‡³å°‘å­˜åœ¨ä¸€ä¸ª å•è¯ è¿›é˜¶: å¦‚æœå­—ç¬¦ä¸²åœ¨ä½ ä½¿ç”¨çš„ç¼–ç¨‹è¯­è¨€ä¸­æ˜¯ä¸€ç§å¯å˜æ•°æ®ç±»å‹ï¼Œè¯·å°è¯•ä½¿ç”¨Â O(1) é¢å¤–ç©ºé—´å¤æ‚åº¦çš„ åŸåœ° è§£æ³•ã€‚\nè§£æ³•ä¸€ï¼šåŒæŒ‡é’ˆ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 func reverseWords(s string) string { s = strings.Trim(s, \u0026#34; \u0026#34;) n := len(s) i, j := n-1, n-1 var res []string for i \u0026gt;= 0 { // æ¯æ¬¡å¾ªç¯å¼€å§‹æ—¶ï¼Œi å’Œ j æŒ‡å‘çš„æ˜¯å½“å‰å•è¯çš„æœ€åä¸€ä¸ªå­—æ¯ for i \u0026gt;= 0 \u0026amp;\u0026amp; s[i] != \u0026#39; \u0026#39; { i-- } // æ­¤æ—¶ i æ‰§è¡Œå½“å‰å•è¯çš„å‰ä¸€ä¸ªç©ºæ ¼ res = append(res, s[i+1:j+1]) // ä¸‹é¢çš„ for å¾ªç¯è·³è¿‡ç©ºæ ¼ï¼Œä½¿ i æŒ‡å‘ä¸‹ä¸€ä¸ªå•è¯çš„æœ€åä¸€ä¸ªå­—æ¯ for i \u0026gt;= 0 \u0026amp;\u0026amp; s[i] == \u0026#39; \u0026#39; { i-- } j = i } return strings.Join(res, \u0026#34; \u0026#34;) } ","date":"2023-04-30T14:28:55+08:00","image":"https://ibakuman.github.io/gallery/landscape/21_hub73357eff33b538ccccba9977cd6e8b3_9581476_120x120_fill_q75_box_smart1.jpg","permalink":"https://ibakuman.github.io/posts/leetccode/problems/0151-reverse-words-in-a-string/","title":"151. åè½¬å­—ç¬¦ä¸²ä¸­çš„å•è¯"},{"content":"é¢˜ç›®æè¿° ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸² s å’Œä¸€ä¸ªæ•´æ•° kï¼Œä»å­—ç¬¦ä¸²å¼€å¤´ç®—èµ·ï¼Œæ¯è®¡æ•°è‡³ 2k ä¸ªå­—ç¬¦ï¼Œå°±åè½¬è¿™ 2k å­—ç¬¦ä¸­çš„å‰ k ä¸ªå­—ç¬¦ã€‚\nå¦‚æœå‰©ä½™å­—ç¬¦å°‘äº k ä¸ªï¼Œåˆ™å°†å‰©ä½™å­—ç¬¦å…¨éƒ¨åè½¬ã€‚ å¦‚æœå‰©ä½™å­—ç¬¦å°äº 2k ä½†å¤§äºæˆ–ç­‰äº k ä¸ªï¼Œåˆ™åè½¬å‰ k ä¸ªå­—ç¬¦ï¼Œå…¶ä½™å­—ç¬¦ä¿æŒåŸæ ·ã€‚ ç¤ºä¾‹ 1ï¼š\nè¾“å…¥ï¼šs = \u0026ldquo;abcdefg\u0026rdquo;, k = 2 è¾“å‡ºï¼š\u0026ldquo;bacdfeg\u0026rdquo; ç¤ºä¾‹ 2ï¼š\nè¾“å…¥ï¼šs = \u0026ldquo;abcd\u0026rdquo;, k = 2 è¾“å‡ºï¼š\u0026ldquo;bacd\u0026rdquo; æç¤ºï¼š\n1 \u0026lt;= s.length \u0026lt;= 104 s ä»…ç”±å°å†™è‹±æ–‡ç»„æˆ 1 \u0026lt;= k \u0026lt;= 104 è§£æ³•ä¸€ï¼šåŒæŒ‡é’ˆ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 func reverseStr(s string, k int) string { b := []byte(s) reverse := func(i, j int) { for i \u0026lt; j { b[i], b[j] = b[j], b[i] i++ j-- } } i, j := 0, 0 for j \u0026lt; len(b) { if j-i+1 == 2*k { reverse(i, i+k-1) i = j + 1 } j++ } if j-i \u0026lt; k { // ç¿»è½¬å‰©ä½™å­—ç¬¦ reverse(i, len(b)-1) } else { // ç¿»è½¬å‰ k ä¸ªå­—ç¬¦ reverse(i, i+k-1) } return string(b) } å®˜æ–¹é¢˜è§£å¦‚ä¸‹\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 func reverseStr(s string, k int) string { t := []byte(s) for i := 0; i \u0026lt; len(s); i += 2 * k { sub := t[i:min(i+k, len(s))] for j, n := 0, len(sub); j \u0026lt; n/2; j++ { sub[j], sub[n-1-j] = sub[n-1-j], sub[j] } } return string(t) } func min(a, b int) int { if a \u0026lt; b { return a } return b } ","date":"2023-04-30T14:11:54+08:00","image":"https://ibakuman.github.io/gallery/landscape/11_hudf52b8b325017a6d69e0e042062b02e2_3188398_120x120_fill_q75_box_smart1.jpg","permalink":"https://ibakuman.github.io/posts/leetccode/problems/0541-reverse-string-ii/","title":"541. åè½¬å­—ç¬¦ä¸² II"},{"content":" 344. åè½¬å­—ç¬¦ä¸²\n151. åè½¬å­—ç¬¦ä¸²ä¸­çš„å•è¯\n28. æ‰¾å‡ºå­—ç¬¦ä¸²ä¸­ç¬¬ä¸€ä¸ªåŒ¹é…é¡¹çš„ä¸‹æ ‡\n459. é‡å¤çš„å­å­—ç¬¦ä¸²\n","date":"2023-04-30T14:10:29+08:00","image":"https://ibakuman.github.io/gallery/landscape/12_hudcb57a36f165de723463bb2c9342c95a_1835608_120x120_fill_q75_box_smart1.jpg","permalink":"https://ibakuman.github.io/posts/leetccode/string/","title":"LeetCode ä¸Šå­—ç¬¦ä¸²ç›¸å…³çš„é¢˜ç›®"},{"content":"é¢˜ç›®æè¿° ç¼–å†™ä¸€ä¸ªå‡½æ•°ï¼Œå…¶ä½œç”¨æ˜¯å°†è¾“å…¥çš„å­—ç¬¦ä¸²åè½¬è¿‡æ¥ã€‚è¾“å…¥å­—ç¬¦ä¸²ä»¥å­—ç¬¦æ•°ç»„ s çš„å½¢å¼ç»™å‡ºã€‚\nä¸è¦ç»™å¦å¤–çš„æ•°ç»„åˆ†é…é¢å¤–çš„ç©ºé—´ï¼Œä½ å¿…é¡» åŸåœ°ä¿®æ”¹è¾“å…¥æ•°ç»„ã€ä½¿ç”¨ O(1) çš„é¢å¤–ç©ºé—´è§£å†³è¿™ä¸€é—®é¢˜ã€‚\nç¤ºä¾‹ 1ï¼š\nè¾“å…¥ï¼šs = [\u0026ldquo;h\u0026rdquo;,\u0026ldquo;e\u0026rdquo;,\u0026ldquo;l\u0026rdquo;,\u0026ldquo;l\u0026rdquo;,\u0026ldquo;o\u0026rdquo;] è¾“å‡ºï¼š[\u0026ldquo;o\u0026rdquo;,\u0026ldquo;l\u0026rdquo;,\u0026ldquo;l\u0026rdquo;,\u0026ldquo;e\u0026rdquo;,\u0026ldquo;h\u0026rdquo;] ç¤ºä¾‹ 2ï¼š\nè¾“å…¥ï¼šs = [\u0026ldquo;H\u0026rdquo;,\u0026ldquo;a\u0026rdquo;,\u0026ldquo;n\u0026rdquo;,\u0026ldquo;n\u0026rdquo;,\u0026ldquo;a\u0026rdquo;,\u0026ldquo;h\u0026rdquo;] è¾“å‡ºï¼š[\u0026ldquo;h\u0026rdquo;,\u0026ldquo;a\u0026rdquo;,\u0026ldquo;n\u0026rdquo;,\u0026ldquo;n\u0026rdquo;,\u0026ldquo;a\u0026rdquo;,\u0026ldquo;H\u0026rdquo;] æç¤ºï¼š\n1 \u0026lt;= s.length \u0026lt;= 105 s[i] éƒ½æ˜¯ ASCII ç è¡¨ä¸­çš„å¯æ‰“å°å­—ç¬¦ è§£æ³•ä¸€ï¼šåŒæŒ‡é’ˆ é”™è¯¯ä»£ç \n1 2 3 4 5 func reverseString(s []byte) { for i := 0, j := len(s) - 1; i \u0026lt; j; i++, j-- { s[i], s[j] = s[j], s[i] } } ä¸Šé¢ä»£ç çš„æŠ¥é”™ä¿¡æ¯å¦‚ä¸‹\nLine 2: Char 19: syntax error: unexpected :=, expecting { (solution.go)\næ­£ç¡®ä»£ç \n1 2 3 4 5 6 func reverseString(s []byte) { for i, j := 0, len(s) - 1; i \u0026lt; j; i++{ s[i], s[j] = s[j], s[i] j-- } } ","date":"2023-04-30T14:04:40+08:00","image":"https://ibakuman.github.io/gallery/landscape/08_hufd4c43b663954d2f1b153b9f2254ca86_1202710_120x120_fill_q75_box_smart1.jpg","permalink":"https://ibakuman.github.io/posts/leetccode/problems/0344-reverse-string/","title":"344. åè½¬å­—ç¬¦ä¸²"},{"content":"é¢˜ç›®æè¿° ç»™ä½ ä¸€ä¸ªç”± n ä¸ªæ•´æ•°ç»„æˆçš„æ•°ç»„Â nums ï¼Œå’Œä¸€ä¸ªç›®æ ‡å€¼ target ã€‚è¯·ä½ æ‰¾å‡ºå¹¶è¿”å›æ»¡è¶³ä¸‹è¿°å…¨éƒ¨æ¡ä»¶ä¸”ä¸é‡å¤çš„å››å…ƒç»„Â [nums[a], nums[b], nums[c], nums[d]]Â ï¼ˆè‹¥ä¸¤ä¸ªå››å…ƒç»„å…ƒç´ ä¸€ä¸€å¯¹åº”ï¼Œåˆ™è®¤ä¸ºä¸¤ä¸ªå››å…ƒç»„é‡å¤ï¼‰ï¼š\n0 \u0026lt;= a, b, c, dÂ \u0026lt; n aã€bã€c å’Œ d äº’ä¸ç›¸åŒ nums[a] + nums[b] + nums[c] + nums[d] == target ä½ å¯ä»¥æŒ‰ ä»»æ„é¡ºåº è¿”å›ç­”æ¡ˆ ã€‚\nç¤ºä¾‹ 1ï¼š\nè¾“å…¥ï¼šnums = [1,0,-1,0,-2,2], target = 0 è¾“å‡ºï¼š[[-2,-1,1,2],[-2,0,0,2],[-1,0,0,1]] ç¤ºä¾‹ 2ï¼š\nè¾“å…¥ï¼šnums = [2,2,2,2,2], target = 8 è¾“å‡ºï¼š[[2,2,2,2]] æç¤ºï¼š\n1 \u0026lt;= nums.length \u0026lt;= 200 -109 \u0026lt;= nums[i] \u0026lt;= 109 -109 \u0026lt;= target \u0026lt;= 109 è§£æ³•ä¸€ï¼šæ’åº + åŒæŒ‡é’ˆ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 func fourSum(nums []int, target int) [][]int { if len(nums) \u0026lt; 4 { return [][]int{} } sort.Ints(nums) n := len(nums) var ans [][]int for i := 0; i \u0026lt; n-3; i++ {// ç¡®å®šç¬¬ä¸€ä¸ªæ•° // å‰ªæ if nums[i]+nums[n-3]+nums[n-2]+nums[n-1] \u0026lt; target { continue } // å‰ªæ if nums[i]+nums[i+1]+nums[i+2]+nums[i+3] \u0026gt; target { break } if i == 0 || nums[i] != nums[i-1] { // ç¡®å®šç¬¬äºŒä¸ªæ•° for j := i + 1; j \u0026lt; n-2; j++ { // å‰ªæ if nums[i]+nums[j]+nums[n-1]+nums[n-2] \u0026lt; target { continue } // å‰ªæ if nums[i]+nums[j]+nums[j+1]+nums[j+2] \u0026gt; target { break } if j == i+1 || nums[j] != nums[j-1] { // ä½¿ç”¨åŒæŒ‡é’ˆç¡®å®šç¬¬ä¸‰/å››ä¸ªæ•° left, right := j+1, n-1 for left \u0026lt; right { if left == j+1 || nums[left] != nums[left-1] { sum := nums[i] + nums[j] + nums[left] + nums[right] if sum == target { ans = append(ans, []int{nums[i], nums[j], nums[left], nums[right]}) left++ right-- } else if sum \u0026lt; target { left++ } else { // sum \u0026gt; target right-- } } else { left++ } } } } } } return ans } ","date":"2023-04-30T13:35:48+08:00","image":"https://ibakuman.github.io/gallery/landscape/27_hubc821d6e6d7f4a0f5b14def3892e014e_5550125_120x120_fill_q75_box_smart1.jpg","permalink":"https://ibakuman.github.io/posts/leetccode/problems/0018-4sum/","title":"18. å››æ•°ä¹‹å’Œ"},{"content":" 15. ä¸‰æ•°ä¹‹å’Œ\n18. å››æ•°ä¹‹å’Œ\n19. åˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬ N ä¸ªç»“ç‚¹\n27. ç§»é™¤å…ƒç´ \n206. åè½¬é“¾è¡¨\n344. åè½¬å­—ç¬¦ä¸²\n541. åè½¬å­—ç¬¦ä¸² II\n","date":"2023-04-30T13:08:02+08:00","image":"https://ibakuman.github.io/gallery/landscape/28_hubb8073e5e8dea6b644ad1c33059b37ce_1206472_120x120_fill_q75_box_smart1.jpg","permalink":"https://ibakuman.github.io/posts/leetccode/double-pointer/","title":"åŒæŒ‡é’ˆç›¸å…³çš„ LeetCode é¢˜ç›®"},{"content":"é¢˜ç›®æè¿° ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ nums ï¼Œåˆ¤æ–­æ˜¯å¦å­˜åœ¨ä¸‰å…ƒç»„ [nums[i], nums[j], nums[k]] æ»¡è¶³ i != jã€i != k ä¸” j != k ï¼ŒåŒæ—¶è¿˜æ»¡è¶³ nums[i] + nums[j] + nums[k] == 0 ã€‚è¯·\nä½ è¿”å›æ‰€æœ‰å’Œä¸º 0 ä¸”ä¸é‡å¤çš„ä¸‰å…ƒç»„ã€‚\næ³¨æ„: ç­”æ¡ˆä¸­ä¸å¯ä»¥åŒ…å«é‡å¤çš„ä¸‰å…ƒç»„ã€‚\nç¤ºä¾‹ 1ï¼š\n1 2 3 4 5 6 7 8 è¾“å…¥ï¼šnums = [-1,0,1,2,-1,-4] è¾“å‡ºï¼š[[-1,-1,2],[-1,0,1]] è§£é‡Šï¼š nums[0] + nums[1] + nums[2] = (-1) + 0 + 1 = 0 ã€‚ nums[1] + nums[2] + nums[4] = 0 + 1 + (-1) = 0 ã€‚ nums[0] + nums[3] + nums[4] = (-1) + 2 + (-1) = 0 ã€‚ ä¸åŒçš„ä¸‰å…ƒç»„æ˜¯ [-1,0,1] å’Œ [-1,-1,2] ã€‚ æ³¨æ„ï¼Œè¾“å‡ºçš„é¡ºåºå’Œä¸‰å…ƒç»„çš„é¡ºåºå¹¶ä¸é‡è¦ã€‚ ç¤ºä¾‹ 2ï¼š\n1 2 3 è¾“å…¥ï¼šnums = [0,1,1] è¾“å‡ºï¼š[] è§£é‡Šï¼šå”¯ä¸€å¯èƒ½çš„ä¸‰å…ƒç»„å’Œä¸ä¸º 0 ã€‚ ç¤ºä¾‹ 3ï¼š\n1 2 3 è¾“å…¥ï¼šnums = [0,0,0] è¾“å‡ºï¼š[[0,0,0]] è§£é‡Šï¼šå”¯ä¸€å¯èƒ½çš„ä¸‰å…ƒç»„å’Œä¸º 0 ã€‚ æç¤ºï¼š\n3 \u0026lt;= nums.length \u0026lt;= 3000 -105 \u0026lt;= nums[i] \u0026lt;= 105 è§£æ³•ä¸€ï¼šæ’åº + åŒæŒ‡é’ˆ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 func threeSum(nums []int) [][]int { sort.Ints(nums) var ans [][]int for i := 0; i \u0026lt; len(nums)-2; i++ { if i == 0 || nums[i] != nums[i-1] { left, right := i+1, len(nums)-1 for left \u0026lt; right { if left == i+1 || nums[left] != nums[left-1] { if nums[left]+nums[right] == -nums[i] { ans = append(ans, []int{nums[i], nums[left], nums[right]}) // å¦‚æœåªæ‰§è¡Œ left++ï¼Œç”±äº nums å‡åºï¼Œæ•…ä¸‹ä¸€æ¬¡ä¸€å®šè¦æ‰§è¡Œ right-- // å¦‚æœåªæ‰§è¡Œ right--ï¼Œç”±äº nums å‡åºï¼Œæ•…ä¸‹ä¸€æ¬¡ä¸€å®šè¦æ‰§è¡Œ left++ left++ right-- } else if nums[left]+nums[right] \u0026gt; -nums[i] { right-- } else { left++ } } else { left++ } } } } return ans } ","date":"2023-04-30T13:03:58+08:00","image":"https://ibakuman.github.io/gallery/landscape/33_hu66ca492386bb42c90e91c813efc08adf_1739420_120x120_fill_q75_box_smart1.jpg","permalink":"https://ibakuman.github.io/posts/leetccode/problems/0015-3sum/","title":"15. ä¸‰æ•°ä¹‹å’Œ"},{"content":" 232.ç”¨æ ˆå®ç°é˜Ÿåˆ—\n347.å‰ k ä¸ªé«˜é¢‘å…ƒç´ \n","date":"2023-04-30T12:52:29+08:00","image":"https://ibakuman.github.io/gallery/landscape/19_hu3c9ceb46f3c27ef42abe81330e191c65_524406_120x120_fill_q75_box_smart1.jpg","permalink":"https://ibakuman.github.io/posts/leetccode/queue/","title":"é˜Ÿåˆ—ç›¸å…³çš„ LeetCode é¢˜ç›®"},{"content":"é¢˜ç›®æè¿° è¯·ä½ ä»…ä½¿ç”¨ä¸¤ä¸ªæ ˆå®ç°å…ˆå…¥å…ˆå‡ºé˜Ÿåˆ—ã€‚é˜Ÿåˆ—åº”å½“æ”¯æŒä¸€èˆ¬é˜Ÿåˆ—æ”¯æŒçš„æ‰€æœ‰æ“ä½œï¼ˆpushã€popã€peekã€emptyï¼‰ï¼š\nå®ç° MyQueue ç±»ï¼š\nvoid push(int x) å°†å…ƒç´  x æ¨åˆ°é˜Ÿåˆ—çš„æœ«å°¾ int pop() ä»é˜Ÿåˆ—çš„å¼€å¤´ç§»é™¤å¹¶è¿”å›å…ƒç´  int peek() è¿”å›é˜Ÿåˆ—å¼€å¤´çš„å…ƒç´  boolean empty() å¦‚æœé˜Ÿåˆ—ä¸ºç©ºï¼Œè¿”å› true ï¼›å¦åˆ™ï¼Œè¿”å› false è¯´æ˜ï¼š\nä½  åªèƒ½ ä½¿ç”¨æ ‡å‡†çš„æ ˆæ“ä½œ â€”â€” ä¹Ÿå°±æ˜¯åªæœ‰Â push to top,Â peek/pop from top,Â size, å’ŒÂ is emptyÂ æ“ä½œæ˜¯åˆæ³•çš„ã€‚ ä½ æ‰€ä½¿ç”¨çš„è¯­è¨€ä¹Ÿè®¸ä¸æ”¯æŒæ ˆã€‚ä½ å¯ä»¥ä½¿ç”¨ list æˆ–è€… dequeï¼ˆåŒç«¯é˜Ÿåˆ—ï¼‰æ¥æ¨¡æ‹Ÿä¸€ä¸ªæ ˆï¼Œåªè¦æ˜¯æ ‡å‡†çš„æ ˆæ“ä½œå³å¯ã€‚ ç¤ºä¾‹ 1ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 è¾“å…¥ï¼š [\u0026#34;MyQueue\u0026#34;, \u0026#34;push\u0026#34;, \u0026#34;push\u0026#34;, \u0026#34;peek\u0026#34;, \u0026#34;pop\u0026#34;, \u0026#34;empty\u0026#34;] [[], [1], [2], [], [], []] è¾“å‡ºï¼š [null, null, null, 1, 1, false] è§£é‡Šï¼š MyQueue myQueue = new MyQueue(); myQueue.push(1); // queue is: [1] myQueue.push(2); // queue is: [1, 2] (leftmost is front of the queue) myQueue.peek(); // return 1 myQueue.pop(); // return 1, queue is [2] myQueue.empty(); // return false æç¤ºï¼š\n1 \u0026lt;= x \u0026lt;= 9 æœ€å¤šè°ƒç”¨ 100 æ¬¡ pushã€popã€peek å’Œ empty å‡è®¾æ‰€æœ‰æ“ä½œéƒ½æ˜¯æœ‰æ•ˆçš„ ï¼ˆä¾‹å¦‚ï¼Œä¸€ä¸ªç©ºçš„é˜Ÿåˆ—ä¸ä¼šè°ƒç”¨ pop æˆ–è€… peek æ“ä½œï¼‰ è¿›é˜¶ï¼š\nä½ èƒ½å¦å®ç°æ¯ä¸ªæ“ä½œå‡æ‘Šæ—¶é—´å¤æ‚åº¦ä¸º O(1) çš„é˜Ÿåˆ—ï¼Ÿæ¢å¥è¯è¯´ï¼Œæ‰§è¡Œ n ä¸ªæ“ä½œçš„æ€»æ—¶é—´å¤æ‚åº¦ä¸º O(n) ï¼Œå³ä½¿å…¶ä¸­ä¸€ä¸ªæ“ä½œå¯èƒ½èŠ±è´¹è¾ƒé•¿æ—¶é—´ã€‚ è§£æ³•ä¸€ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 type MyQueue struct { in []int out []int } func Constructor() MyQueue { return MyQueue{} } func (this *MyQueue) Push(x int) { this.in = append(this.in, x) } func (this *MyQueue) Pop() int { if this.Empty() { panic(\u0026#34;queue is empty!\u0026#34;) } else if len(this.out) == 0 { // å¦‚æœ this.out æœ‰å…ƒç´ åˆ™ä¸€å®šè¦æŠŠæ‰€æœ‰å…ƒç´ éƒ½å¼¹å‡ºåå†æŠŠ this.in ä¸­æ‰€æœ‰å…ƒç´ å‹å…¥ this.out for len(this.in) \u0026gt; 0 { this.out = append(this.out, this.in[len(this.in)-1]) this.in = this.in[:len(this.in)-1] } } // ç°åœ¨ this.out è‚¯å®šæœ‰å…ƒç´  ret := this.out[len(this.out)-1] this.out = this.out[:len(this.out)-1] return ret } func (this *MyQueue) Peek() int { if this.Empty() { panic(\u0026#34;queue is empty!\u0026#34;) } else if len(this.out) == 0 { // å¦‚æœ this.out æœ‰å…ƒç´ åˆ™ä¸€å®šè¦æŠŠæ‰€æœ‰å…ƒç´ éƒ½å¼¹å‡ºåå†æŠŠ this.in ä¸­æ‰€æœ‰å…ƒç´ å‹å…¥ this.out for len(this.in) \u0026gt; 0 { this.out = append(this.out, this.in[len(this.in)-1]) this.in = this.in[:len(this.in)-1] } } // ç°åœ¨ this.out è‚¯å®šæœ‰å…ƒç´  return this.out[len(this.out)-1] } func (this *MyQueue) Empty() bool { return len(this.in) == 0 \u0026amp;\u0026amp; len(this.out) == 0 } ","date":"2023-04-29T21:17:02+08:00","image":"https://ibakuman.github.io/gallery/landscape/24_hu02460565c68f6ee68754f9a01c400f03_406275_120x120_fill_q75_box_smart1.jpg","permalink":"https://ibakuman.github.io/posts/leetccode/problems/0232-implement-queue-using-stacks/","title":"232.ç”¨æ ˆå®ç°é˜Ÿåˆ—"},{"content":"é¢˜ç›®æè¿° ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ nums å’Œä¸€ä¸ªæ•´æ•° k ï¼Œè¯·ä½ è¿”å›å…¶ä¸­å‡ºç°é¢‘ç‡å‰ k é«˜çš„å…ƒç´ ã€‚ä½ å¯ä»¥æŒ‰ ä»»æ„é¡ºåº è¿”å›ç­”æ¡ˆã€‚\nç¤ºä¾‹ 1:\nè¾“å…¥: nums = [1,1,1,2,2,3], k = 2 è¾“å‡º: [1,2] ç¤ºä¾‹ 2:\nè¾“å…¥: nums = [1], k = 1 è¾“å‡º: [1] æç¤ºï¼š\n1 \u0026lt;= nums.length \u0026lt;= 105 k çš„å–å€¼èŒƒå›´æ˜¯ [1, æ•°ç»„ä¸­ä¸ç›¸åŒçš„å…ƒç´ çš„ä¸ªæ•°] é¢˜ç›®æ•°æ®ä¿è¯ç­”æ¡ˆå”¯ä¸€ï¼Œæ¢å¥è¯è¯´ï¼Œæ•°ç»„ä¸­å‰ k ä¸ªé«˜é¢‘å…ƒç´ çš„é›†åˆæ˜¯å”¯ä¸€çš„ è¿›é˜¶ï¼šä½ æ‰€è®¾è®¡ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦ å¿…é¡» ä¼˜äº O(nlogn) ï¼Œå…¶ä¸­ n æ˜¯æ•°ç»„å¤§å°ã€‚\nè§£æ³•ä¸€ï¼šå“ˆå¸Œè¡¨ + ä¼˜å…ˆé˜Ÿåˆ— 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 var record map[int]int type PriorityQueue struct { sort.IntSlice } func (pq *PriorityQueue) Less(i, j int) bool { // æ³¨æ„ï¼šä¼˜å…ˆé˜Ÿåˆ—é‡Œå­˜å‚¨çš„æ˜¯ keyï¼Œæ‰€ä»¥æ¯”è¾ƒæ—¶è¦å–å¯¹åº”çš„ value æ¥è¿›è¡Œæ¯”è¾ƒã€‚ return record[pq.IntSlice[i]] \u0026lt; record[pq.IntSlice[j]] } func (pq *PriorityQueue) Push(val interface{}) { pq.IntSlice = append(pq.IntSlice, val.(int)) } func (pq *PriorityQueue) Pop() interface{} { tmp := pq.IntSlice ret := tmp[len(tmp)-1] pq.IntSlice = tmp[:len(tmp)-1] return ret } func topKFrequent(nums []int, k int) []int { record = make(map[int]int) for _, num := range nums { record[num]++ } pq := \u0026amp;PriorityQueue{make([]int, 0, k)} // æ³¨æ„ä¸è¦å°†å˜é‡ key å‘½åä¸ºå˜é‡ kï¼Œå› ä¸ºå˜é‡ k å·²å­˜åœ¨ï¼Œä¼šå¯¼è‡´è¦†ç›–ã€‚ for key, v := range record { if len(pq.IntSlice) \u0026lt; k { heap.Push(pq, key) } else { if record[pq.IntSlice[0]] \u0026lt; v { heap.Pop(pq) heap.Push(pq, key) } } } return pq.IntSlice } ","date":"2023-04-29T20:58:50+08:00","image":"https://ibakuman.github.io/gallery/landscape/22_hu10b223e1bd445490681d4773ec1182e8_2472398_120x120_fill_q75_box_smart1.jpg","permalink":"https://ibakuman.github.io/posts/leetccode/problems/0347-top-k-frequent-elements/","title":"347.å‰ k ä¸ªé«˜é¢‘å…ƒç´ "},{"content":"Go è¯­è¨€å®ç°ä¼˜å…ˆé˜Ÿåˆ— Go è¯­è¨€æ ‡å‡†åº“æ²¡æœ‰æä¾›ä¼˜å…ˆé˜Ÿåˆ—çš„å®ç°ï¼Œä½†æ˜¯æä¾›äº†æœ€å¤§å †/æœ€å°å †çš„å®ç°ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ­¤åŸºç¡€ä¸Šå®ç°ä¼˜å…ˆé˜Ÿåˆ—ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 type PriorityQueue struct { sort.IntSlice } func (pq *PriorityQueue) Less(i, j int) bool { // return pq.IntSlice[i] \u0026lt; pq.IntSlice[j] // æœ€å°ä¼˜å…ˆé˜Ÿåˆ— return pq.IntSlice[i] \u0026gt; pq.IntSlice[j] // æœ€å¤§ä¼˜å…ˆé˜Ÿåˆ— } func (pq *PriorityQueue) Push(v interface{}) { pq.IntSlice = append(pq.IntSlice, v.(int)) } func (pq *PriorityQueue) Pop() interface{} { tmp := pq.IntSlice v := tmp[len(tmp)-1] pq.IntSlice = tmp[:len(tmp)-1] return v } æ³¨æ„ï¼š\nå…¥é˜Ÿè°ƒç”¨çš„æ˜¯ heap.Push è€Œä¸æ˜¯è°ƒç”¨ pq.Pushï¼Œå‡ºé˜Ÿè°ƒç”¨çš„æ˜¯ heap.Pop è€Œä¸æ˜¯è°ƒç”¨ pq.Popã€‚ å¦‚æœè¦æ„é€ æœ€å°å †ï¼Œåˆ™ Less å‡½æ•°çš„å®ç°éœ€è¦è¿”å› pq.IntSlice[i] \u0026lt; pq.IntSlice[j]ï¼›å¦‚æœè¦æ„é€ æœ€å¤§å †ï¼Œåˆ™ Less å‡½æ•°çš„å®ç°éœ€è¦è¿”å› pq.IntSlice[i] \u0026gt; pq.IntSlice[j]ã€‚å¯ä»¥è¿™æ ·è®°å¿†ï¼šå› ä¸ºæ˜¯æœ€å°å †ï¼Œæ‰€ä»¥ä½¿ç”¨å°äºå·ã€‚ ","date":"2023-04-29T14:21:13+08:00","image":"https://ibakuman.github.io/gallery/landscape/07_hu38aa638bb2ccd6db7051157dcdf19c8f_1416034_120x120_fill_q75_box_smart1.jpg","permalink":"https://ibakuman.github.io/posts/algorithm/priority-queue/implementation-of-priority-queue-in-different-languages/","title":"ä¼˜å…ˆé˜Ÿåˆ—åœ¨ä¸åŒè¯­è¨€ä¸­çš„å®ç°"},{"content":"é¢˜ç›®æè¿° ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ numsï¼Œæœ‰ä¸€ä¸ªå¤§å°ä¸ºÂ k çš„æ»‘åŠ¨çª—å£ä»æ•°ç»„çš„æœ€å·¦ä¾§ç§»åŠ¨åˆ°æ•°ç»„çš„æœ€å³ä¾§ã€‚ä½ åªå¯ä»¥çœ‹åˆ°åœ¨æ»‘åŠ¨çª—å£å†…çš„ kÂ ä¸ªæ•°å­—ã€‚æ»‘åŠ¨çª—å£æ¯æ¬¡åªå‘å³ç§»åŠ¨ä¸€ä½ã€‚\nè¿”å› æ»‘åŠ¨çª—å£ä¸­çš„æœ€å¤§å€¼ ã€‚\nç¤ºä¾‹ 1ï¼š\nè¾“å…¥ï¼šnums = [1,3,-1,-3,5,3,6,7], k = 3 è¾“å‡ºï¼š[3,3,5,5,6,7] è§£é‡Šï¼š\n1 2 3 4 5 6 7 8 æ»‘åŠ¨çª—å£çš„ä½ç½® æœ€å¤§å€¼ --------------- ----- [1 3 -1] -3 5 3 6 7 3 1 [3 -1 -3] 5 3 6 7 3 1 3 [-1 -3 5] 3 6 7 5 1 3 -1 [-3 5 3] 6 7 5 1 3 -1 -3 [5 3 6] 7 6 1 3 -1 -3 5 [3 6 7] 7 ç¤ºä¾‹ 2ï¼š\nè¾“å…¥ï¼šnums = [1], k = 1 è¾“å‡ºï¼š[1] æç¤ºï¼š\n1 \u0026lt;= nums.length \u0026lt;= 105 -104Â \u0026lt;= nums[i] \u0026lt;= 104 1 \u0026lt;= k \u0026lt;= nums.length è§£æ³•ä¸€ï¼šä¼˜å…ˆé˜Ÿåˆ— 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 var a []int type PriorityQueue struct { sort.IntSlice } func (pq *PriorityQueue) Less(i, j int) bool { // æ³¨æ„ï¼šä¼˜å…ˆé˜Ÿåˆ—é‡Œå­˜å‚¨çš„æ˜¯ä¸‹æ ‡ï¼Œæ‰€ä»¥æ¯”è¾ƒæ—¶è¦å–ä¸‹æ ‡å¯¹åº”çš„å…ƒç´  return a[pq.IntSlice[i]] \u0026gt; a[pq.IntSlice[j]] } func (pq *PriorityQueue) Push(v interface{}) { pq.IntSlice = append(pq.IntSlice, v.(int)) } func (pq *PriorityQueue) Pop() interface{} { tmp := pq.IntSlice v := tmp[len(tmp)-1] pq.IntSlice = tmp[:len(tmp)-1] return v } func maxSlidingWindow(nums []int, k int) []int { a = nums pq := \u0026amp;PriorityQueue{make([]int, k)} for i := 0; i \u0026lt; k; i++ { pq.IntSlice[i] = i } heap.Init(pq) n := len(nums) ans := make([]int, n-k+1) ans[0] = a[pq.IntSlice[0]] for i := k; i \u0026lt; n; i++ { heap.Push(pq, i) for pq.IntSlice[0] \u0026lt;= i-k { heap.Pop(pq) } ans[i-k+1] = a[pq.IntSlice[0]] } return ans } è§£æ³•äºŒï¼šå•è°ƒåŒç«¯é˜Ÿåˆ— 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 func maxSlidingWindow(nums []int, k int) []int { deque := make([]int, k) push := func(i int) { for len(deque) \u0026gt; 0 \u0026amp;\u0026amp; nums[deque[len(deque)-1]] \u0026lt; nums[i] { deque = deque[:len(deque)-1] } deque = append(deque, i) } for i := 0; i \u0026lt; k; i++ { push(i) } ans := make([]int, len(nums)-k+1) ans[0] = nums[deque[0]] for i := k; i \u0026lt; len(nums); i++ { push(i) for deque[0] \u0026lt;= i-k { deque = deque[1:] } ans[i-k+1] = nums[deque[0]] } return ans } ","date":"2023-04-29T14:18:00+08:00","image":"https://ibakuman.github.io/gallery/landscape/25_hu0a3309c019aba12b8d679d09b57cc9da_1259768_120x120_fill_q75_box_smart1.jpg","permalink":"https://ibakuman.github.io/posts/leetccode/problems/0239-sliding-window-maximum/","title":"239. æ»‘åŠ¨çª—å£æœ€å¤§å€¼"},{"content":"é¢˜ç›®æè¿° ç¤ºä¾‹ 1ï¼š\n1 2 3 è¾“å…¥ï¼šheight = [0,1,0,2,1,0,1,3,2,1,2,1] è¾“å‡ºï¼š6 è§£é‡Šï¼šä¸Šé¢æ˜¯ç”±æ•°ç»„ [0,1,0,2,1,0,1,3,2,1,2,1] è¡¨ç¤ºçš„é«˜åº¦å›¾ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¯ä»¥æ¥ 6 ä¸ªå•ä½çš„é›¨æ°´ï¼ˆè“è‰²éƒ¨åˆ†è¡¨ç¤ºé›¨æ°´ï¼‰ã€‚ ç¤ºä¾‹ 2ï¼š\n1 2 è¾“å…¥ï¼šheight = [4,2,0,3,2,5] è¾“å‡ºï¼š9 æç¤ºï¼š\nn == height.length 1 \u0026lt;= n \u0026lt;= 2 * 104 0 \u0026lt;= height[i] \u0026lt;= 105 è§£æ³•ä¸€ï¼šåŠ¨æ€è§„åˆ’ è§£æ³•äºŒï¼šå•è°ƒæ ˆ ç»´æŠ¤ä¸€ä¸ªå•è°ƒæ ˆï¼Œå•è°ƒæ ˆå­˜å‚¨çš„æ˜¯ä¸‹æ ‡ï¼Œæ»¡è¶³ä»æ ˆåº•åˆ°æ ˆé¡¶çš„ä¸‹æ ‡åœ¨ heights æ•°ç»„ä¸­æŒ‡å‘çš„å…ƒç´ é€’å‡ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 func trap(height []int) int { var stack []int res := 0 for i := 0; i \u0026lt; len(height); i++ { for len(stack) \u0026gt; 0 \u0026amp;\u0026amp; height[stack[len(stack)-1]] \u0026lt; height[i] { idx := stack[len(stack)-1] stack = stack[:len(stack)-1] if len(stack) \u0026lt;= 0 { break } left := stack[len(stack)-1] width := i - left - 1 lower := min(height[i], height[left]) res += width * (lower - height[idx]) } stack = append(stack, i) } return res } func min(x, y int) int { if x \u0026lt; y { return x } return y } è§£æ³•ä¸‰ï¼šåŒæŒ‡é’ˆ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 func trap(height []int) int { var max = func(x, y int) int { if x \u0026lt; y { return y } return x } n := len(height) leftMax, rightMax := height[0], height[n-1] left, right := 1, n-2 sum := 0 count := n - 2 for count \u0026gt; 0 { if leftMax \u0026gt; rightMax { if height[right] \u0026lt; rightMax { sum += rightMax - height[right] } rightMax = max(rightMax, height[right]) right-- } else { if height[left] \u0026lt; leftMax { sum += leftMax - height[left] } leftMax = max(leftMax, height[left]) left++ } count-- } return sum } 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 func trap(height []int) int { left, right := 0, len(height) - 1 leftMax, rightMax := 0, 0 res := 0 for left \u0026lt; right {// æ”¹ä¸º left \u0026lt;= right ä¹Ÿèƒ½é€šè¿‡ï¼Œä¸ºä»€ä¹ˆï¼Ÿ leftMax = max(height[left], leftMax) rightMax = max(height[right], rightMax) if height[left] \u0026lt; height[right] { res += leftMax - height[left] left++ } else { res += rightMax - height[right] right-- } } return res } func max(x, y int) int { if x \u0026gt; y { return x } return y } æ€è€ƒï¼šä¸Šé¢ä»£ç ç”± left \u0026lt; right æ”¹ä¸º left \u0026lt;= right ä¹Ÿèƒ½é€šè¿‡çš„åŸå› æ˜¯ä»€ä¹ˆï¼Ÿ\n","date":"2023-04-29T13:34:54+08:00","image":"https://ibakuman.github.io/gallery/landscape/03_hua119d5172e80ee912c81cee3e4b607ac_783790_120x120_fill_q75_box_smart1.jpg","permalink":"https://ibakuman.github.io/posts/leetccode/problems/0042-trapping-rain-water/","title":"42. æ¥é›¨æ°´"},{"content":"é¢˜ç›®æè¿° ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„Â temperaturesÂ ï¼Œè¡¨ç¤ºæ¯å¤©çš„æ¸©åº¦ï¼Œè¿”å›ä¸€ä¸ªæ•°ç»„Â answerÂ ï¼Œå…¶ä¸­Â answer[i]Â æ˜¯æŒ‡å¯¹äºç¬¬ i å¤©ï¼Œä¸‹ä¸€ä¸ªæ›´é«˜æ¸©åº¦å‡ºç°åœ¨å‡ å¤©åã€‚å¦‚æœæ°”æ¸©åœ¨è¿™ä¹‹åéƒ½ä¸ä¼šå‡é«˜ï¼Œè¯·åœ¨è¯¥ä½ç½®ç”¨Â 0 æ¥ä»£æ›¿ã€‚\nç¤ºä¾‹ 1:\n1 2 è¾“å…¥: temperatures = [73,74,75,71,69,72,76,73] è¾“å‡º: [1,1,4,2,1,1,0,0] ç¤ºä¾‹ 2:\n1 2 è¾“å…¥: temperatures = [30,40,50,60] è¾“å‡º: [1,1,1,0] ç¤ºä¾‹ 3:\n1 2 è¾“å…¥: temperatures = [30,60,90] è¾“å‡º: [1,1,0] æç¤ºï¼š\n1 \u0026lt;=Â temperatures.length \u0026lt;= 105 30 \u0026lt;=Â temperatures[i]Â \u0026lt;= 100 è§£æ³•ä¸€ï¼šå•è°ƒæ ˆ ä¸‹é¢ä»£ç ä½¿ç”¨å•è°ƒé€’å‡æ ˆï¼ˆæ€»æ ˆåº•åˆ°æ ˆåº•ä¸¥æ ¼é€’å‡ï¼‰æ¥è§£å†³è¿™ä¸ªé—®é¢˜\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 func dailyTemperatures(temperatures []int) []int { res := make([]int, len(temperatures)) var descStack []int for i := 0; i \u0026lt; len(temperatures); i++ { for len(descStack) \u0026gt; 0 \u0026amp;\u0026amp; temperatures[i] \u0026gt; temperatures[descStack[len(descStack)-1]] { res[descStack[len(descStack)-1]] = i - descStack[len(descStack)-1] descStack = descStack[:len(descStack)-1] } descStack = append(descStack, i) } for len(descStack) \u0026gt; 0 { res[descStack[len(descStack)-1]] = 0 descStack = descStack[:len(descStack)-1] } return res } ","date":"2023-04-29T10:38:51+08:00","image":"https://ibakuman.github.io/gallery/landscape/31_hu50ead7b655b5f47cafc1e1da4c3aac1b_499903_120x120_fill_q75_box_smart1.jpg","permalink":"https://ibakuman.github.io/posts/leetccode/problems/0739-daily-temperatures/","title":"739. æ¯æ—¥æ¸©åº¦"},{"content":"é¢˜ç›®æè¿° ç»™ä½ æ— å‘Â è¿é€š å›¾ä¸­ä¸€ä¸ªèŠ‚ç‚¹çš„å¼•ç”¨ï¼Œè¯·ä½ è¿”å›è¯¥å›¾çš„Â æ·±æ‹·è´ï¼ˆå…‹éš†ï¼‰ã€‚\nå›¾ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹éƒ½åŒ…å«å®ƒçš„å€¼ valï¼ˆintï¼‰ å’Œå…¶é‚»å±…çš„åˆ—è¡¨ï¼ˆlist[Node]ï¼‰ã€‚\n1 2 3 4 class Node { public int val; public List\u0026lt;Node\u0026gt; neighbors; } æµ‹è¯•ç”¨ä¾‹æ ¼å¼ï¼š\nç®€å•èµ·è§ï¼Œæ¯ä¸ªèŠ‚ç‚¹çš„å€¼éƒ½å’Œå®ƒçš„ç´¢å¼•ç›¸åŒã€‚ä¾‹å¦‚ï¼Œç¬¬ä¸€ä¸ªèŠ‚ç‚¹å€¼ä¸º 1ï¼ˆval = 1ï¼‰ï¼Œç¬¬äºŒä¸ªèŠ‚ç‚¹å€¼ä¸º 2ï¼ˆval = 2ï¼‰ï¼Œä»¥æ­¤ç±»æ¨ã€‚è¯¥å›¾åœ¨æµ‹è¯•ç”¨ä¾‹ä¸­ä½¿ç”¨é‚»æ¥åˆ—è¡¨è¡¨ç¤ºã€‚\né‚»æ¥åˆ—è¡¨ æ˜¯ç”¨äºè¡¨ç¤ºæœ‰é™å›¾çš„æ— åºåˆ—è¡¨çš„é›†åˆã€‚æ¯ä¸ªåˆ—è¡¨éƒ½æè¿°äº†å›¾ä¸­èŠ‚ç‚¹çš„é‚»å±…é›†ã€‚\nç»™å®šèŠ‚ç‚¹å°†å§‹ç»ˆæ˜¯å›¾ä¸­çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ï¼ˆå€¼ä¸º 1ï¼‰ã€‚ä½ å¿…é¡»å°†Â ç»™å®šèŠ‚ç‚¹çš„æ‹·è´ ä½œä¸ºå¯¹å…‹éš†å›¾çš„å¼•ç”¨è¿”å›ã€‚\nç¤ºä¾‹ 1ï¼š\nè¾“å…¥ï¼šadjList = [[2,4],[1,3],[2,4],[1,3]] è¾“å‡ºï¼š[[2,4],[1,3],[2,4],[1,3]] è§£é‡Šï¼š å›¾ä¸­æœ‰ 4 ä¸ªèŠ‚ç‚¹ã€‚ èŠ‚ç‚¹ 1 çš„å€¼æ˜¯ 1ï¼Œå®ƒæœ‰ä¸¤ä¸ªé‚»å±…ï¼šèŠ‚ç‚¹ 2 å’Œ 4 ã€‚ èŠ‚ç‚¹ 2 çš„å€¼æ˜¯ 2ï¼Œå®ƒæœ‰ä¸¤ä¸ªé‚»å±…ï¼šèŠ‚ç‚¹ 1 å’Œ 3 ã€‚ èŠ‚ç‚¹ 3 çš„å€¼æ˜¯ 3ï¼Œå®ƒæœ‰ä¸¤ä¸ªé‚»å±…ï¼šèŠ‚ç‚¹ 2 å’Œ 4 ã€‚ èŠ‚ç‚¹ 4 çš„å€¼æ˜¯ 4ï¼Œå®ƒæœ‰ä¸¤ä¸ªé‚»å±…ï¼šèŠ‚ç‚¹ 1 å’Œ 3 ã€‚ ç¤ºä¾‹ 2ï¼š\nè¾“å…¥ï¼šadjList = [[]] è¾“å‡ºï¼š[[]] è§£é‡Šï¼šè¾“å…¥åŒ…å«ä¸€ä¸ªç©ºåˆ—è¡¨ã€‚è¯¥å›¾ä»…ä»…åªæœ‰ä¸€ä¸ªå€¼ä¸º 1 çš„èŠ‚ç‚¹ï¼Œå®ƒæ²¡æœ‰ä»»ä½•é‚»å±…ã€‚ ç¤ºä¾‹ 3ï¼š\nè¾“å…¥ï¼šadjList = [] è¾“å‡ºï¼š[] è§£é‡Šï¼šè¿™ä¸ªå›¾æ˜¯ç©ºçš„ï¼Œå®ƒä¸å«ä»»ä½•èŠ‚ç‚¹ã€‚ ç¤ºä¾‹ 4ï¼š\nè¾“å…¥ï¼šadjList = [[2],[1]] è¾“å‡ºï¼š[[2],[1]] æç¤ºï¼š\nèŠ‚ç‚¹æ•°ä¸è¶…è¿‡ 100 ã€‚ æ¯ä¸ªèŠ‚ç‚¹å€¼Â Node.val éƒ½æ˜¯å”¯ä¸€çš„ï¼Œ1 \u0026lt;= Node.val \u0026lt;= 100ã€‚ æ— å‘å›¾æ˜¯ä¸€ä¸ªç®€å•å›¾ï¼Œè¿™æ„å‘³ç€å›¾ä¸­æ²¡æœ‰é‡å¤çš„è¾¹ï¼Œä¹Ÿæ²¡æœ‰è‡ªç¯ã€‚ ç”±äºå›¾æ˜¯æ— å‘çš„ï¼Œå¦‚æœèŠ‚ç‚¹ p æ˜¯èŠ‚ç‚¹ q çš„é‚»å±…ï¼Œé‚£ä¹ˆèŠ‚ç‚¹ q ä¹Ÿå¿…é¡»æ˜¯èŠ‚ç‚¹ pÂ çš„é‚»å±…ã€‚ å›¾æ˜¯è¿é€šå›¾ï¼Œä½ å¯ä»¥ä»ç»™å®šèŠ‚ç‚¹è®¿é—®åˆ°æ‰€æœ‰èŠ‚ç‚¹ã€‚ è§£æ³•ä¸€ï¼šé€’å½’ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 /** * Definition for a Node. * type Node struct { * Val int * Neighbors []*Node * } */ func cloneGraph(node *Node) *Node { record := make(map[*Node]*Node) var _copy func(node *Node) *Node _copy = func(node *Node) *Node { if node == nil { return nil } if record[node] != nil { return record[node] } newNode := \u0026amp;Node{Val: node.Val} record[node] = newNode for _, next := range node.Neighbors { newNode.Neighbors = append(newNode.Neighbors, _copy(next)) } return newNode } return _copy(node) } ä¼˜åŒ–ï¼šç”±äºäº‹å…ˆå·²ç»çŸ¥é“äº†å½“å‰å…‹éš†èŠ‚ç‚¹çš„é‚»å±…èŠ‚ç‚¹æ•°ç›®ï¼Œæ•…å¯ä»¥é€šè¿‡äº‹å…ˆåˆ†é…åˆ‡ç‰‡å®¹é‡æ¥é¿å…è°ƒç”¨ appendï¼Œä¼˜åŒ–åçš„ä»£ç å¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 func cloneGraph(node *Node) *Node { record := make(map[*Node]*Node) var _copy func(node *Node) *Node _copy = func(node *Node) *Node { if node == nil { return nil } if record[node] != nil { return record[node] } newNode := \u0026amp;Node{Val: node.Val, Neighbors: make([]*Node, len(node.Neighbors))} record[node] = newNode for i, next := range node.Neighbors { newNode.Neighbors[i] = _copy(next) } return newNode } return _copy(node) } ","date":"2023-04-27T21:15:51+08:00","image":"https://ibakuman.github.io/gallery/landscape/10_hucf27c6ee6e299e97a870b7c7ce3b8818_623029_120x120_fill_q75_box_smart1.jpg","permalink":"https://ibakuman.github.io/posts/leetccode/problems/0133-clone-graph/","title":"133. å…‹éš†å›¾"},{"content":"é¢˜ç›®æè¿° ç»™å®šä¸€ä¸ªäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ root ï¼Œè¿”å›å®ƒçš„ä¸­åºéå†ã€‚\nç¤ºä¾‹ 1ï¼š\nè¾“å…¥ï¼šroot = [1,null,2,3] è¾“å‡ºï¼š[1,3,2] ç¤ºä¾‹ 2ï¼š\nè¾“å…¥ï¼šroot = [] è¾“å‡ºï¼š[] ç¤ºä¾‹ 3ï¼š\nè¾“å…¥ï¼šroot = [1] è¾“å‡ºï¼š[1] æç¤ºï¼š\næ ‘ä¸­èŠ‚ç‚¹æ•°ç›®åœ¨èŒƒå›´ [0, 100] å†… -100 \u0026lt;= Node.val \u0026lt;= 100 è¿›é˜¶:Â é€’å½’ç®—æ³•å¾ˆç®€å•ï¼Œä½ å¯ä»¥é€šè¿‡è¿­ä»£ç®—æ³•å®Œæˆå—ï¼Ÿ\nè§£æ³•ä¸€ï¼šé€’å½’ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 /** * Definition for a binary tree node. * type TreeNode struct { * Val int * Left *TreeNode * Right *TreeNode * } */ func inorderTraversal(root *TreeNode) []int { var res []int var inorder func(root* TreeNode) inorder = func(root* TreeNode) { if root == nil { return } inorder(root.Left) res = append(res, root.Val) inorder(root.Right) } inorder(root) return res } è§£æ³•äºŒï¼šè¿­ä»£ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 /** * Definition for a binary tree node. * type TreeNode struct { * Val int * Left *TreeNode * Right *TreeNode * } */ func inorderTraversal(root *TreeNode) []int { var stack []*TreeNode var result []int for len(stack) \u0026gt; 0 || root != nil { for root != nil { stack = append(stack, root) root = root.Left } root = stack[len(stack)-1] stack = stack[:len(stack)-1] result = append(result, root.Val) root = root.Right } return result } ","date":"2023-04-27T21:03:05+08:00","image":"https://ibakuman.github.io/gallery/landscape/27_hubc821d6e6d7f4a0f5b14def3892e014e_5550125_120x120_fill_q75_box_smart1.jpg","permalink":"https://ibakuman.github.io/posts/leetccode/problems/0094-binary-tree-inorder-traversal/","title":"94. äºŒå‰æ ‘çš„ä¸­åºéå†"},{"content":"é¢˜ç›®æè¿° ç»™å®šä¸€ä¸ªç»è¿‡ç¼–ç çš„å­—ç¬¦ä¸²ï¼Œè¿”å›å®ƒè§£ç åçš„å­—ç¬¦ä¸²ã€‚\nç¼–ç è§„åˆ™ä¸º: k[encoded_string]ï¼Œè¡¨ç¤ºå…¶ä¸­æ–¹æ‹¬å·å†…éƒ¨çš„ encoded_string æ­£å¥½é‡å¤ k æ¬¡ã€‚æ³¨æ„ k ä¿è¯ä¸ºæ­£æ•´æ•°ã€‚\nä½ å¯ä»¥è®¤ä¸ºè¾“å…¥å­—ç¬¦ä¸²æ€»æ˜¯æœ‰æ•ˆçš„ï¼›è¾“å…¥å­—ç¬¦ä¸²ä¸­æ²¡æœ‰é¢å¤–çš„ç©ºæ ¼ï¼Œä¸”è¾“å…¥çš„æ–¹æ‹¬å·æ€»æ˜¯ç¬¦åˆæ ¼å¼è¦æ±‚çš„ã€‚\næ­¤å¤–ï¼Œä½ å¯ä»¥è®¤ä¸ºåŸå§‹æ•°æ®ä¸åŒ…å«æ•°å­—ï¼Œæ‰€æœ‰çš„æ•°å­—åªè¡¨ç¤ºé‡å¤çš„æ¬¡æ•° k ï¼Œä¾‹å¦‚ä¸ä¼šå‡ºç°åƒÂ 3aÂ æˆ–Â 2[4]Â çš„è¾“å…¥ã€‚\nç¤ºä¾‹ 1ï¼š\nè¾“å…¥ï¼šs = \u0026ldquo;3[a]2[bc]\u0026rdquo; è¾“å‡ºï¼š\u0026ldquo;aaabcbc\u0026rdquo; ç¤ºä¾‹ 2ï¼š\nè¾“å…¥ï¼šs = \u0026ldquo;3[a2[c]]\u0026rdquo; è¾“å‡ºï¼š\u0026ldquo;accaccacc\u0026rdquo; ç¤ºä¾‹ 3ï¼š\nè¾“å…¥ï¼šs = \u0026ldquo;2[abc]3[cd]ef\u0026rdquo; è¾“å‡ºï¼š\u0026ldquo;abcabccdcdcdef\u0026rdquo; ç¤ºä¾‹ 4ï¼š\nè¾“å…¥ï¼šs = \u0026ldquo;abc3[cd]xyz\u0026rdquo; è¾“å‡ºï¼š\u0026ldquo;abccdcdcdxyz\u0026rdquo; æç¤ºï¼š\n1 \u0026lt;= s.length \u0026lt;= 30 sÂ ç”±å°å†™è‹±æ–‡å­—æ¯ã€æ•°å­—å’Œæ–¹æ‹¬å·Â '[]' ç»„æˆ sÂ ä¿è¯æ˜¯ä¸€ä¸ªÂ æœ‰æ•ˆÂ çš„è¾“å…¥ã€‚ sÂ ä¸­æ‰€æœ‰æ•´æ•°çš„å–å€¼èŒƒå›´ä¸ºÂ [1, 300] è§£æ³•ä¸€ï¼šæ ˆ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 func decodeString(s string) string { idx := 0 var stk []string getDigits := func() string { num := \u0026#34;\u0026#34; for s[idx] \u0026gt;= \u0026#39;0\u0026#39; \u0026amp;\u0026amp; s[idx] \u0026lt;= \u0026#39;9\u0026#39; { num += string(s[idx]) idx++ } return num } for idx \u0026lt; len(s) { if s[idx] \u0026gt;= \u0026#39;0\u0026#39; \u0026amp;\u0026amp; s[idx] \u0026lt;= \u0026#39;9\u0026#39; { stk = append(stk, getDigits()) } else if s[idx] == \u0026#39;]\u0026#39; { var sub []string for stk[len(stk)-1] != \u0026#34;[\u0026#34; { sub = append(sub, stk[len(stk)-1]) stk = stk[:len(stk)-1] } // reverse character for i := 0; i \u0026lt; len(sub)/2; i++ { sub[i], sub[len(sub)-i-1] = sub[len(sub)-i-1], sub[i] } // pop [ from stack stk = stk[:len(stk)-1] // get repeat count cnt, _ := strconv.Atoi(stk[len(stk)-1]) // pop repeat count from stack stk = stk[:len(stk)-1] // repeat sub and push result to stack stk = append(stk, strings.Repeat(strings.Join(sub, \u0026#34;\u0026#34;), cnt)) idx++ } else { stk = append(stk, string(s[idx])) idx++ } } return strings.Join(stk, \u0026#34;\u0026#34;) } ","date":"2023-04-27T19:52:03+08:00","image":"https://ibakuman.github.io/gallery/landscape/31_hu50ead7b655b5f47cafc1e1da4c3aac1b_499903_120x120_fill_q75_box_smart1.jpg","permalink":"https://ibakuman.github.io/posts/leetccode/problems/0394-decode-string/","title":"394. å­—ç¬¦ä¸²ç¼–ç "},{"content":"é¢˜ç›®æè¿° ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„ tokens ï¼Œè¡¨ç¤ºä¸€ä¸ªæ ¹æ®Â é€†æ³¢å…°è¡¨ç¤ºæ³• è¡¨ç¤ºçš„ç®—æœ¯è¡¨è¾¾å¼ã€‚\nè¯·ä½ è®¡ç®—è¯¥è¡¨è¾¾å¼ã€‚è¿”å›ä¸€ä¸ªè¡¨ç¤ºè¡¨è¾¾å¼å€¼çš„æ•´æ•°ã€‚\næ³¨æ„ï¼š\næœ‰æ•ˆçš„ç®—ç¬¦ä¸º '+'ã€'-'ã€'*' å’Œ '/' ã€‚ æ¯ä¸ªæ“ä½œæ•°ï¼ˆè¿ç®—å¯¹è±¡ï¼‰éƒ½å¯ä»¥æ˜¯ä¸€ä¸ªæ•´æ•°æˆ–è€…å¦ä¸€ä¸ªè¡¨è¾¾å¼ã€‚ ä¸¤ä¸ªæ•´æ•°ä¹‹é—´çš„é™¤æ³•æ€»æ˜¯ å‘é›¶æˆªæ–­ ã€‚ è¡¨è¾¾å¼ä¸­ä¸å«é™¤é›¶è¿ç®—ã€‚ è¾“å…¥æ˜¯ä¸€ä¸ªæ ¹æ®é€†æ³¢å…°è¡¨ç¤ºæ³•è¡¨ç¤ºçš„ç®—æœ¯è¡¨è¾¾å¼ã€‚ ç­”æ¡ˆåŠæ‰€æœ‰ä¸­é—´è®¡ç®—ç»“æœå¯ä»¥ç”¨ 32 ä½ æ•´æ•°è¡¨ç¤ºã€‚ ç¤ºä¾‹Â 1ï¼š\n1 2 3 è¾“å…¥ï¼štokens = [\u0026#34;2\u0026#34;,\u0026#34;1\u0026#34;,\u0026#34;+\u0026#34;,\u0026#34;3\u0026#34;,\u0026#34;*\u0026#34;] è¾“å‡ºï¼š9 è§£é‡Šï¼šè¯¥ç®—å¼è½¬åŒ–ä¸ºå¸¸è§çš„ä¸­ç¼€ç®—æœ¯è¡¨è¾¾å¼ä¸ºï¼š((2 + 1) * 3) = 9 ç¤ºä¾‹Â 2ï¼š\n1 2 3 è¾“å…¥ï¼štokens = [\u0026#34;4\u0026#34;,\u0026#34;13\u0026#34;,\u0026#34;5\u0026#34;,\u0026#34;/\u0026#34;,\u0026#34;+\u0026#34;] è¾“å‡ºï¼š6 è§£é‡Šï¼šè¯¥ç®—å¼è½¬åŒ–ä¸ºå¸¸è§çš„ä¸­ç¼€ç®—æœ¯è¡¨è¾¾å¼ä¸ºï¼š(4 + (13 / 5)) = 6 ç¤ºä¾‹Â 3ï¼š\n1 2 3 4 5 6 7 8 9 10 è¾“å…¥ï¼štokens = [\u0026#34;10\u0026#34;,\u0026#34;6\u0026#34;,\u0026#34;9\u0026#34;,\u0026#34;3\u0026#34;,\u0026#34;+\u0026#34;,\u0026#34;-11\u0026#34;,\u0026#34;*\u0026#34;,\u0026#34;/\u0026#34;,\u0026#34;*\u0026#34;,\u0026#34;17\u0026#34;,\u0026#34;+\u0026#34;,\u0026#34;5\u0026#34;,\u0026#34;+\u0026#34;] è¾“å‡ºï¼š22 è§£é‡Šï¼šè¯¥ç®—å¼è½¬åŒ–ä¸ºå¸¸è§çš„ä¸­ç¼€ç®—æœ¯è¡¨è¾¾å¼ä¸ºï¼š ((10 * (6 / ((9 + 3) * -11))) + 17) + 5 = ((10 * (6 / (12 * -11))) + 17) + 5 = ((10 * (6 / -132)) + 17) + 5 = ((10 * 0) + 17) + 5 = (0 + 17) + 5 = 17 + 5 = 22 æç¤ºï¼š\n1 \u0026lt;= tokens.length \u0026lt;= 104 tokens[i]Â æ˜¯ä¸€ä¸ªç®—ç¬¦ï¼ˆ\u0026quot;+\u0026quot;ã€\u0026quot;-\u0026quot;ã€\u0026quot;*\u0026quot; æˆ– \u0026quot;/\u0026quot;ï¼‰ï¼Œæˆ–æ˜¯åœ¨èŒƒå›´ [-200, 200] å†…çš„ä¸€ä¸ªæ•´æ•° é€†æ³¢å…°è¡¨è¾¾å¼ï¼š\né€†æ³¢å…°è¡¨è¾¾å¼æ˜¯ä¸€ç§åç¼€è¡¨è¾¾å¼ï¼Œæ‰€è°“åç¼€å°±æ˜¯æŒ‡ç®—ç¬¦å†™åœ¨åé¢ã€‚\nå¹³å¸¸ä½¿ç”¨çš„ç®—å¼åˆ™æ˜¯ä¸€ç§ä¸­ç¼€è¡¨è¾¾å¼ï¼Œå¦‚ ( 1 + 2 ) * ( 3 + 4 ) ã€‚ è¯¥ç®—å¼çš„é€†æ³¢å…°è¡¨è¾¾å¼å†™æ³•ä¸º ( ( 1 2 + ) ( 3 4 + ) * ) ã€‚ é€†æ³¢å…°è¡¨è¾¾å¼ä¸»è¦æœ‰ä»¥ä¸‹ä¸¤ä¸ªä¼˜ç‚¹ï¼š\nå»æ‰æ‹¬å·åè¡¨è¾¾å¼æ— æ­§ä¹‰ï¼Œä¸Šå¼å³ä¾¿å†™æˆ 1 2 + 3 4 + * ä¹Ÿå¯ä»¥ä¾æ®æ¬¡åºè®¡ç®—å‡ºæ­£ç¡®ç»“æœã€‚ é€‚åˆç”¨æ ˆæ“ä½œè¿ç®—ï¼šé‡åˆ°æ•°å­—åˆ™å…¥æ ˆï¼›é‡åˆ°ç®—ç¬¦åˆ™å–å‡ºæ ˆé¡¶ä¸¤ä¸ªæ•°å­—è¿›è¡Œè®¡ç®—ï¼Œå¹¶å°†ç»“æœå‹å…¥æ ˆä¸­ è§£æ³•ä¸€ï¼šæ ˆ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 func evalRPN(tokens []string) int { var stack []int for _, v := range tokens { num, err := strconv.Atoi(v) if err == nil { stack = append(stack, num) } else { a := stack[len(stack)-1] stack = stack[:len(stack)-1] b := stack[len(stack)-1] stack = stack[:len(stack)-1] if \u0026#34;+\u0026#34; == v { stack = append(stack, a+b) } else if \u0026#34;-\u0026#34; == v { stack = append(stack, b-a) } else if \u0026#34;*\u0026#34; == v { stack = append(stack, a*b) } else if \u0026#34;/\u0026#34; == v { stack = append(stack, b/a) } } } return stack[len(stack)-1] } ","date":"2023-04-27T11:49:51+08:00","image":"https://ibakuman.github.io/gallery/landscape/07_hu38aa638bb2ccd6db7051157dcdf19c8f_1416034_120x120_fill_q75_box_smart1.jpg","permalink":"https://ibakuman.github.io/posts/leetccode/problems/0150-evaluate-reverse-polish-notation/","title":"150. é€†æ³¢å…°è¡¨è¾¾å¼æ±‚å€¼"},{"content":"é¢˜ç›®æè¿° è®¾è®¡ä¸€ä¸ªæ”¯æŒ push ï¼Œpop ï¼Œtop æ“ä½œï¼Œå¹¶èƒ½åœ¨å¸¸æ•°æ—¶é—´å†…æ£€ç´¢åˆ°æœ€å°å…ƒç´ çš„æ ˆã€‚\nå®ç° MinStack ç±»:\nMinStack() åˆå§‹åŒ–å †æ ˆå¯¹è±¡ã€‚ void push(int val) å°†å…ƒç´  val æ¨å…¥å †æ ˆã€‚ void pop() åˆ é™¤å †æ ˆé¡¶éƒ¨çš„å…ƒç´ ã€‚ int top() è·å–å †æ ˆé¡¶éƒ¨çš„å…ƒç´ ã€‚ int getMin() è·å–å †æ ˆä¸­çš„æœ€å°å…ƒç´ ã€‚ ç¤ºä¾‹ 1:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 è¾“å…¥ï¼š [\u0026#34;MinStack\u0026#34;,\u0026#34;push\u0026#34;,\u0026#34;push\u0026#34;,\u0026#34;push\u0026#34;,\u0026#34;getMin\u0026#34;,\u0026#34;pop\u0026#34;,\u0026#34;top\u0026#34;,\u0026#34;getMin\u0026#34;] [[],[-2],[0],[-3],[],[],[],[]] è¾“å‡ºï¼š [null,null,null,null,-3,null,0,-2] è§£é‡Šï¼š MinStack minStack = new MinStack(); minStack.push(-2); minStack.push(0); minStack.push(-3); minStack.getMin(); --\u0026gt; è¿”å› -3. minStack.pop(); minStack.top(); --\u0026gt; è¿”å› 0. minStack.getMin(); --\u0026gt; è¿”å› -2. æç¤ºï¼š\n-231Â \u0026lt;= val \u0026lt;= 231Â - 1 popã€top å’Œ getMin æ“ä½œæ€»æ˜¯åœ¨ éç©ºæ ˆ ä¸Šè°ƒç”¨ push,Â pop,Â top, andÂ getMin æœ€å¤šè¢«è°ƒç”¨Â 3 * 104Â æ¬¡ è§£æ³•ä¸€ï¼šå·®å€¼æ ˆ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 type MinStack struct { stack []int min int } func Constructor() MinStack { return MinStack{} } func (this *MinStack) Push(val int) { if len(this.stack) == 0 { this.stack = append(this.stack, 0) this.min = val } else { this.stack = append(this.stack, val-this.min) if this.min \u0026gt; val { this.min = val } } } func (this *MinStack) Pop() { n := len(this.stack) top := this.stack[n-1] if top \u0026lt; 0 { this.min = this.min - top } this.stack = this.stack[:n-1] } func (this *MinStack) Top() int { n := len(this.stack) top := this.stack[n-1] if top \u0026lt; 0 { return this.min } else { return this.min + top } } func (this *MinStack) GetMin() int { return this.min } /** * Your MinStack object will be instantiated and called as such: * obj := Constructor(); * obj.Push(val); * obj.Pop(); * param_3 := obj.Top(); * param_4 := obj.GetMin(); */ ","date":"2023-04-27T10:47:40+08:00","image":"https://ibakuman.github.io/gallery/landscape/08_hufd4c43b663954d2f1b153b9f2254ca86_1202710_120x120_fill_q75_box_smart1.jpg","permalink":"https://ibakuman.github.io/posts/leetccode/problems/0155-min-stack/","title":"155. æœ€å°æ ˆ"},{"content":"é¢˜ç›®æè¿° ç»™ä½ ä¸€ä¸ªé•¿åº¦ä¸º n çš„é“¾è¡¨ï¼Œæ¯ä¸ªèŠ‚ç‚¹åŒ…å«ä¸€ä¸ªé¢å¤–å¢åŠ çš„éšæœºæŒ‡é’ˆ random ï¼Œè¯¥æŒ‡é’ˆå¯ä»¥æŒ‡å‘é“¾è¡¨ä¸­çš„ä»»ä½•èŠ‚ç‚¹æˆ–ç©ºèŠ‚ç‚¹ã€‚\næ„é€ è¿™ä¸ªé“¾è¡¨çš„Â æ·±æ‹·è´ã€‚Â æ·±æ‹·è´åº”è¯¥æ­£å¥½ç”± n ä¸ªå…¨æ–°èŠ‚ç‚¹ç»„æˆï¼Œå…¶ä¸­æ¯ä¸ªæ–°èŠ‚ç‚¹çš„å€¼éƒ½è®¾ä¸ºå…¶å¯¹åº”çš„åŸèŠ‚ç‚¹çš„å€¼ã€‚æ–°èŠ‚ç‚¹çš„ next æŒ‡é’ˆå’Œ random æŒ‡é’ˆä¹Ÿéƒ½åº”æŒ‡å‘å¤åˆ¶é“¾è¡¨ä¸­çš„æ–°èŠ‚ç‚¹ï¼Œå¹¶ä½¿åŸé“¾è¡¨å’Œå¤åˆ¶é“¾è¡¨ä¸­çš„è¿™äº›æŒ‡é’ˆèƒ½å¤Ÿè¡¨ç¤ºç›¸åŒçš„é“¾è¡¨çŠ¶æ€ã€‚å¤åˆ¶é“¾è¡¨ä¸­çš„æŒ‡é’ˆéƒ½ä¸åº”æŒ‡å‘åŸé“¾è¡¨ä¸­çš„èŠ‚ç‚¹ ã€‚\nä¾‹å¦‚ï¼Œå¦‚æœåŸé“¾è¡¨ä¸­æœ‰ X å’Œ Y ä¸¤ä¸ªèŠ‚ç‚¹ï¼Œå…¶ä¸­ X.random --\u0026gt; Y ã€‚é‚£ä¹ˆåœ¨å¤åˆ¶é“¾è¡¨ä¸­å¯¹åº”çš„ä¸¤ä¸ªèŠ‚ç‚¹ x å’Œ y ï¼ŒåŒæ ·æœ‰ x.random --\u0026gt; y ã€‚\nè¿”å›å¤åˆ¶é“¾è¡¨çš„å¤´èŠ‚ç‚¹ã€‚\nç”¨ä¸€ä¸ªç”±Â nÂ ä¸ªèŠ‚ç‚¹ç»„æˆçš„é“¾è¡¨æ¥è¡¨ç¤ºè¾“å…¥ / è¾“å‡ºä¸­çš„é“¾è¡¨ã€‚æ¯ä¸ªèŠ‚ç‚¹ç”¨ä¸€ä¸ªÂ [val, random_index]Â è¡¨ç¤ºï¼š\nvalï¼šä¸€ä¸ªè¡¨ç¤ºÂ Node.valÂ çš„æ•´æ•°ã€‚ random_indexï¼šéšæœºæŒ‡é’ˆæŒ‡å‘çš„èŠ‚ç‚¹ç´¢å¼•ï¼ˆèŒƒå›´ä»Â 0Â åˆ°Â n-1ï¼‰ï¼›å¦‚æœä¸æŒ‡å‘ä»»ä½•èŠ‚ç‚¹ï¼Œåˆ™ä¸ºÂ nullÂ ã€‚ ä½ çš„ä»£ç  åª æ¥å—åŸé“¾è¡¨çš„å¤´èŠ‚ç‚¹ head ä½œä¸ºä¼ å…¥å‚æ•°ã€‚\nç¤ºä¾‹ 1ï¼š\nè¾“å…¥ï¼šhead = [[7,null],[13,0],[11,4],[10,2],[1,0]]\nè¾“å‡ºï¼š[[7,null],[13,0],[11,4],[10,2],[1,0]]\nç¤ºä¾‹ 2ï¼š\nè¾“å…¥ï¼šhead = [[1,1],[2,1]]\nè¾“å‡ºï¼š[[1,1],[2,1]]\nç¤ºä¾‹ 3ï¼š\nè¾“å…¥ï¼šhead = [[3,null],[3,0],[3,null]]\nè¾“å‡ºï¼š[[3,null],[3,0],[3,null]]\næç¤ºï¼š\n0 \u0026lt;= n \u0026lt;= 1000 -104Â \u0026lt;= Node.val \u0026lt;= 104 Node.randomÂ ä¸ºÂ null æˆ–æŒ‡å‘é“¾è¡¨ä¸­çš„èŠ‚ç‚¹ã€‚ è§£æ³•ä¸€ï¼šé€’å½’ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 /** * Definition for a Node. * type Node struct { * Val int * Next *Node * Random *Node * } */ func copyRandomList(head *Node) *Node { record := map[*Node]*Node{} var _copy func(head *Node) *Node _copy = func(head *Node) *Node { if head == nil { return head } if record[head] != nil { return record[head] } newNode := \u0026amp;Node{Val: head.Val} record[head] = newNode newNode.Next = _copy(head.Next) newNode.Random = _copy(head.Random) // record[head] = newNode ä¸èƒ½æ”¾åœ¨è¿™é‡Œï¼Œä¼šé€ æˆæ— é™å¾ªç¯ return newNode } return _copy(head) } å¤æ‚åº¦åˆ†æ\næ—¶é—´å¤æ‚åº¦ï¼šO(n)ï¼Œå…¶ä¸­ n æ˜¯é“¾è¡¨çš„é•¿åº¦ã€‚å¯¹äºæ¯ä¸ªèŠ‚ç‚¹ï¼Œæˆ‘ä»¬è‡³å¤šè®¿é—®å…¶ã€Œåç»§èŠ‚ç‚¹ã€å’Œã€ŒéšæœºæŒ‡é’ˆæŒ‡å‘çš„èŠ‚ç‚¹ã€å„ä¸€æ¬¡ï¼Œå‡æ‘Šæ¯ä¸ªç‚¹è‡³å¤šè¢«è®¿é—®ä¸¤æ¬¡ã€‚\nç©ºé—´å¤æ‚åº¦ï¼šO(n)ï¼Œå…¶ä¸­ n æ˜¯é“¾è¡¨çš„é•¿åº¦ã€‚ä¸ºå“ˆå¸Œè¡¨çš„ç©ºé—´å¼€é”€ã€‚\nè§£æ³•äºŒï¼šè¿­ä»£ + èŠ‚ç‚¹æ‹†åˆ† 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 func copyRandomList(head *Node) *Node { if head == nil { return nil } // å¤åˆ¶æ¯ä¸€ä¸ªèŠ‚ç‚¹ for cur := head; cur != nil; cur = cur.Next.Next { next := cur.Next newNode := \u0026amp;Node{Val: cur.Val} cur.Next = newNode newNode.Next = next } // è®¾ç½® Random æŒ‡å‘ for cur := head; cur != nil; cur = cur.Next.Next { if cur.Random != nil { cur.Next.Random = cur.Random.Next } } // è®¾ç½® Next æŒ‡å‘, å¦‚æœæ²¡æœ‰å‡½æ•°å¼€å§‹å¯¹ head == nil çš„å¤„ç†ï¼Œä¸‹é¢ä»£ç ä¼šå¯¼è‡´ç¨‹åº panic ret := head.Next // æ³¨æ„ï¼šæ­¤æ—¶ for å¾ªç¯çš„å¾ªç¯å˜é‡æ›´æ–°ä¸º cur = cur.Next è€Œä¸æ˜¯ cur = cur.Next.Next for cur := head; cur != nil; cur = cur.Next { next := cur.Next cur.Next = cur.Next.Next if cur.Next != nil { next.Next = cur.Next.Next } } return ret } æ€è€ƒï¼šå¦‚ä½•å°†ä¸€ä¸ªèŠ‚ç‚¹æ•°ç›®ä¸ºå¶æ•°çš„é“¾è¡¨åˆ†æˆä¸¤ä¸ªå­é“¾è¡¨ a å’Œ bï¼Œa ç”±æ‰€æœ‰ç¼–å·ä¸ºå¶æ•°çš„èŠ‚ç‚¹æ„æˆï¼Œb ç”±æ‰€æœ‰ç¼–å·ä¸ºå¥‡æ•°çš„èŠ‚ç‚¹æ„æˆï¼ŒèŠ‚ç‚¹ä» 0 å¼€å§‹ç¼–å·ï¼Œå¤´èŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ç¼–å·ä¸º 1ï¼Œä¾æ¬¡ç±»æ¨ã€‚\nå¯ä»¥æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤å°†ä¸€ä¸ªèŠ‚ç‚¹æ•°ç›®ä¸ºå¶æ•°çš„é“¾è¡¨åˆ†æˆä¸¤ä¸ªå­é“¾è¡¨ a å’Œ bï¼š\nåˆ›å»ºä¸¤ä¸ªæ–°çš„é“¾è¡¨ï¼Œåˆ†åˆ«ä½œä¸ºå­é“¾è¡¨ a å’Œå­é“¾è¡¨ bã€‚åŒæ—¶åˆ›å»ºæŒ‡å‘ä¸¤ä¸ªå­é“¾è¡¨å¤´éƒ¨çš„æŒ‡é’ˆ a_head å’Œ b_headã€‚\néå†åŸé“¾è¡¨ï¼Œå¯¹æ¯ä¸ªèŠ‚ç‚¹è¿›è¡Œåˆ†ç±»ã€‚å¯ä»¥æ ¹æ®èŠ‚ç‚¹ç¼–å·çš„å¥‡å¶æ€§æ¥è¿›è¡Œåˆ†ç±»ï¼Œå…¶ä¸­ç¼–å·ä¸ºå¶æ•°çš„èŠ‚ç‚¹å½’åˆ°å­é“¾è¡¨ a ä¸­ï¼Œç¼–å·ä¸ºå¥‡æ•°çš„èŠ‚ç‚¹å½’åˆ°å­é“¾è¡¨ b ä¸­ã€‚\nåœ¨éå†è¿‡ç¨‹ä¸­ï¼Œä½¿ç”¨æŒ‡é’ˆ a_tail å’Œ b_tail åˆ†åˆ«åœ¨å­é“¾è¡¨ a å’Œå­é“¾è¡¨ b çš„æœ«å°¾æ·»åŠ æ–°çš„èŠ‚ç‚¹ã€‚\néå†å®Œæˆåï¼Œå­é“¾è¡¨ a å’Œå­é“¾è¡¨ b å°±å·²ç»åˆ†åˆ«åŒ…å«äº†åŸé“¾è¡¨ä¸­æ‰€æœ‰ç¼–å·ä¸ºå¶æ•°å’Œå¥‡æ•°çš„èŠ‚ç‚¹ã€‚\n","date":"2023-04-26T23:43:50+08:00","image":"https://ibakuman.github.io/gallery/landscape/01_hu984801500a3ee8d5189999f9716a0882_2696078_120x120_fill_q75_box_smart1.jpg","permalink":"https://ibakuman.github.io/posts/algorithm/list/0138-copy-list-with-random-pointer/","title":"138.å¤åˆ¶å¸¦éšå³æŒ‡é’ˆçš„é“¾è¡¨"},{"content":"é—®é¢˜æè¿° ç»™ä½ ä¸€ä¸ªå•é“¾è¡¨çš„å¤´èŠ‚ç‚¹ head ï¼Œè¯·ä½ åˆ¤æ–­è¯¥é“¾è¡¨æ˜¯å¦ä¸ºå›æ–‡é“¾è¡¨ã€‚å¦‚æœæ˜¯ï¼Œè¿”å› true ï¼›å¦åˆ™ï¼Œè¿”å› false ã€‚\nç¤ºä¾‹ 1ï¼š\nè¾“å…¥ï¼šhead = [1,2,2,1]\nè¾“å‡ºï¼štrue\nç¤ºä¾‹ 2ï¼š\nè¾“å…¥ï¼šhead = [1,2]\nè¾“å‡ºï¼šfalse\næç¤ºï¼š\né“¾è¡¨ä¸­èŠ‚ç‚¹æ•°ç›®åœ¨èŒƒå›´ [1, 105] å†… 0 \u0026lt;= Node.val \u0026lt;= 9 è¿›é˜¶ï¼šä½ èƒ½å¦ç”¨Â O(n) æ—¶é—´å¤æ‚åº¦å’Œ O(1) ç©ºé—´å¤æ‚åº¦è§£å†³æ­¤é¢˜ï¼Ÿ\nè§£æ³•ä¸€ï¼šæŸ¥æ‰¾ä¸­é—´èŠ‚ç‚¹ + ç¿»è½¬é“¾è¡¨ æˆ‘ä»¬å¯ä»¥å°†é“¾è¡¨çš„ååŠéƒ¨åˆ†åè½¬ï¼ˆä¿®æ”¹é“¾è¡¨ç»“æ„ï¼‰ï¼Œç„¶åå°†å‰åŠéƒ¨åˆ†å’ŒååŠéƒ¨åˆ†è¿›è¡Œæ¯”è¾ƒã€‚æ¯”è¾ƒå®Œæˆåæˆ‘ä»¬åº”è¯¥å°†é“¾è¡¨æ¢å¤åŸæ ·ã€‚è™½ç„¶ä¸éœ€è¦æ¢å¤ä¹Ÿèƒ½é€šè¿‡æµ‹è¯•ç”¨ä¾‹ï¼Œä½†æ˜¯ä½¿ç”¨è¯¥å‡½æ•°çš„äººé€šå¸¸ä¸å¸Œæœ›é“¾è¡¨ç»“æ„è¢«æ›´æ”¹ã€‚\nè¯¥æ–¹æ³•è™½ç„¶å¯ä»¥å°†ç©ºé—´å¤æ‚åº¦é™åˆ° O(1)ï¼Œä½†æ˜¯åœ¨å¹¶å‘ç¯å¢ƒä¸‹ï¼Œè¯¥æ–¹æ³•ä¹Ÿæœ‰ç¼ºç‚¹ã€‚åœ¨å¹¶å‘ç¯å¢ƒä¸‹ï¼Œå‡½æ•°è¿è¡Œæ—¶éœ€è¦é”å®šå…¶ä»–çº¿ç¨‹æˆ–è¿›ç¨‹å¯¹é“¾è¡¨çš„è®¿é—®ï¼Œå› ä¸ºåœ¨å‡½æ•°æ‰§è¡Œè¿‡ç¨‹ä¸­é“¾è¡¨ä¼šè¢«ä¿®æ”¹ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 /** * Definition for singly-linked list. * type ListNode struct { * Val int * Next *ListNode * } */ func isPalindrome(head *ListNode) bool { // å¤„ç†ç©ºé“¾è¡¨æƒ…å†µ if head == nil { return true } midNode := middleNode(head) // å¼€å§‹æ—¶å¦‚æœä¸å¤„ç† head == nil çš„æƒ…å†µï¼Œè®¿é—® midNode.Next ä¼šå¯¼è‡´ç¨‹åº panicï¼Œå› ä¸º midNode æ­¤æ—¶ä¸º nil b := reverseList(midNode.Next) midNode.Next = nil a := head copyB := b res := true for a != nil \u0026amp;\u0026amp; b != nil { if a.Val != b.Val { res = false break } a = a.Next b = b.Next } // å¼€å§‹è¿˜åŸ midNode.Next = reverseList(copyB) // éªŒè¯æ˜¯å¦è¿˜åŸ for head != nil { fmt.Printf(\u0026#34;%d \u0026#34;, head.Val) head = head.Next } return res } func middleNode(head *ListNode) *ListNode { if head == nil { return nil } slow, fast := head, head for fast.Next != nil \u0026amp;\u0026amp; fast.Next.Next != nil { slow = slow.Next fast = fast.Next.Next } return slow } func reverseList(head *ListNode) *ListNode { var prev *ListNode for head != nil { next := head.Next head.Next = prev prev = head head = next } return prev } è§£æ³•äºŒï¼šé€’å½’ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 /** * Definition for singly-linked list. * type ListNode struct { * Val int * Next *ListNode * } */ func isPalindrome(head *ListNode) bool { frontNode := head var check func(head *ListNode) bool // check(node) æ£€æŸ¥ä»¥ node ä¸ºå¤´èŠ‚ç‚¹çš„é“¾è¡¨æ˜¯å¦æ˜¯å›æ–‡é“¾è¡¨ check = func(head *ListNode) bool { if head == nil { return true } if !check(head.Next) { return false } if head.Val != frontNode.Val { return false } frontNode = frontNode.Next return true } return check(head) } ","date":"2023-04-26T21:59:13+08:00","image":"https://ibakuman.github.io/gallery/landscape/19_hu3c9ceb46f3c27ef42abe81330e191c65_524406_120x120_fill_q75_box_smart1.jpg","permalink":"https://ibakuman.github.io/posts/algorithm/list/0234-palindrome-linked-list/","title":"234.å›æ–‡é“¾è¡¨"},{"content":"é¢˜ç›®æè¿° ç»™å®šä¸€ä¸ªé“¾è¡¨çš„å¤´èŠ‚ç‚¹ headÂ ï¼Œè¿”å›é“¾è¡¨å¼€å§‹å…¥ç¯çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ã€‚Â å¦‚æœé“¾è¡¨æ— ç¯ï¼Œåˆ™è¿”å›Â nullã€‚\nå¦‚æœé“¾è¡¨ä¸­æœ‰æŸä¸ªèŠ‚ç‚¹ï¼Œå¯ä»¥é€šè¿‡è¿ç»­è·Ÿè¸ª next æŒ‡é’ˆå†æ¬¡åˆ°è¾¾ï¼Œåˆ™é“¾è¡¨ä¸­å­˜åœ¨ç¯ã€‚ ä¸ºäº†è¡¨ç¤ºç»™å®šé“¾è¡¨ä¸­çš„ç¯ï¼Œè¯„æµ‹ç³»ç»Ÿå†…éƒ¨ä½¿ç”¨æ•´æ•° pos æ¥è¡¨ç¤ºé“¾è¡¨å°¾è¿æ¥åˆ°é“¾è¡¨ä¸­çš„ä½ç½®ï¼ˆç´¢å¼•ä» 0 å¼€å§‹ï¼‰ã€‚å¦‚æœ pos æ˜¯ -1ï¼Œåˆ™åœ¨è¯¥é“¾è¡¨ä¸­æ²¡æœ‰ç¯ã€‚æ³¨æ„ï¼špos ä¸ä½œä¸ºå‚æ•°è¿›è¡Œä¼ é€’ï¼Œä»…ä»…æ˜¯ä¸ºäº†æ ‡è¯†é“¾è¡¨çš„å®é™…æƒ…å†µã€‚\nä¸å…è®¸ä¿®æ”¹é“¾è¡¨ã€‚\nç¤ºä¾‹ 1ï¼š\nè¾“å…¥ï¼šhead = [3,2,0,-4], pos = 1 è¾“å‡ºï¼šè¿”å›ç´¢å¼•ä¸º 1 çš„é“¾è¡¨èŠ‚ç‚¹ è§£é‡Šï¼šé“¾è¡¨ä¸­æœ‰ä¸€ä¸ªç¯ï¼Œå…¶å°¾éƒ¨è¿æ¥åˆ°ç¬¬äºŒä¸ªèŠ‚ç‚¹ã€‚ ç¤ºä¾‹Â 2ï¼š\nè¾“å…¥ï¼šhead = [1,2], pos = 0 è¾“å‡ºï¼šè¿”å›ç´¢å¼•ä¸º 0 çš„é“¾è¡¨èŠ‚ç‚¹ è§£é‡Šï¼šé“¾è¡¨ä¸­æœ‰ä¸€ä¸ªç¯ï¼Œå…¶å°¾éƒ¨è¿æ¥åˆ°ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ã€‚ ç¤ºä¾‹ 3ï¼š\nè¾“å…¥ï¼šhead = [1], pos = -1 è¾“å‡ºï¼šè¿”å› null è§£é‡Šï¼šé“¾è¡¨ä¸­æ²¡æœ‰ç¯ã€‚ æç¤ºï¼š\né“¾è¡¨ä¸­èŠ‚ç‚¹çš„æ•°ç›®èŒƒå›´åœ¨èŒƒå›´ [0, 104] å†… -105 \u0026lt;= Node.val \u0026lt;= 105 pos çš„å€¼ä¸º -1 æˆ–è€…é“¾è¡¨ä¸­çš„ä¸€ä¸ªæœ‰æ•ˆç´¢å¼• è¿›é˜¶ï¼šä½ æ˜¯å¦å¯ä»¥ä½¿ç”¨ O(1) ç©ºé—´è§£å†³æ­¤é¢˜ï¼Ÿ\nè§£æ³•ä¸€ï¼šå¿«æ…¢æŒ‡é’ˆ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 /** * Definition for singly-linked list. * type ListNode struct { * Val int * Next *ListNode * } */ func detectCycle(head *ListNode) *ListNode { slow, fast := head, head for fast != nil \u0026amp;\u0026amp; fast.Next != nil { slow = slow.Next fast = fast.Next.Next if slow == fast { break } } if fast == nil || fast.Next == nil { return nil } fast = head for slow != fast { slow = slow.Next fast = fast.Next } return fast } ä¸Šé¢ä»£ç æ‰§è¡Œå®Œæ£€æµ‹ç¯çš„ for å¾ªç¯åè¿˜ä¸èƒ½ç¡®å®šæ˜¯å¦å­˜åœ¨ç¯ï¼Œéœ€è¦å†æ¬¡æ‰§è¡Œä¸€æ¬¡ if åˆ¤æ–­ï¼Œä¼˜åŒ–å¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 /** * Definition for singly-linked list. * type ListNode struct { * Val int * Next *ListNode * } */ func detectCycle(head *ListNode) *ListNode { slow, fast := head, head for fast != nil \u0026amp;\u0026amp; fast.Next != nil { slow = slow.Next fast = fast.Next.Next if fast == slow { for slow != head { head = head.Next slow = slow.Next } return slow } } return nil } ","date":"2023-04-26T21:34:37+08:00","image":"https://ibakuman.github.io/gallery/landscape/16_hu0ea51e27a440094cf104de9d9c751749_432111_120x120_fill_q75_box_smart1.jpg","permalink":"https://ibakuman.github.io/posts/algorithm/list/0142-linked-list-cycle-ii/","title":"142.ç¯å½¢é“¾è¡¨ II"},{"content":"é¢˜ç›®æè¿° ç»™ä½ ä¸€ä¸ªé“¾è¡¨çš„å¤´èŠ‚ç‚¹ head ï¼Œåˆ¤æ–­é“¾è¡¨ä¸­æ˜¯å¦æœ‰ç¯ã€‚\nå¦‚æœé“¾è¡¨ä¸­æœ‰æŸä¸ªèŠ‚ç‚¹ï¼Œå¯ä»¥é€šè¿‡è¿ç»­è·Ÿè¸ª next æŒ‡é’ˆå†æ¬¡åˆ°è¾¾ï¼Œåˆ™é“¾è¡¨ä¸­å­˜åœ¨ç¯ã€‚ ä¸ºäº†è¡¨ç¤ºç»™å®šé“¾è¡¨ä¸­çš„ç¯ï¼Œè¯„æµ‹ç³»ç»Ÿå†…éƒ¨ä½¿ç”¨æ•´æ•° pos æ¥è¡¨ç¤ºé“¾è¡¨å°¾è¿æ¥åˆ°é“¾è¡¨ä¸­çš„ä½ç½®ï¼ˆç´¢å¼•ä» 0 å¼€å§‹ï¼‰ã€‚æ³¨æ„ï¼špos ä¸ä½œä¸ºå‚æ•°è¿›è¡Œä¼ é€’ ã€‚ä»…ä»…æ˜¯ä¸ºäº†æ ‡è¯†é“¾è¡¨çš„å®é™…æƒ…å†µã€‚\nå¦‚æœé“¾è¡¨ä¸­å­˜åœ¨ç¯Â ï¼Œåˆ™è¿”å› true ã€‚ å¦åˆ™ï¼Œè¿”å› false ã€‚\nç¤ºä¾‹ 1ï¼š\nè¾“å…¥ï¼šhead = [3,2,0,-4], pos = 1\nè¾“å‡ºï¼štrue\nè§£é‡Šï¼šé“¾è¡¨ä¸­æœ‰ä¸€ä¸ªç¯ï¼Œå…¶å°¾éƒ¨è¿æ¥åˆ°ç¬¬äºŒä¸ªèŠ‚ç‚¹ã€‚\nç¤ºä¾‹Â 2ï¼š\nè¾“å…¥ï¼šhead = [1,2], pos = 0\nè¾“å‡ºï¼štrue\nè§£é‡Šï¼šé“¾è¡¨ä¸­æœ‰ä¸€ä¸ªç¯ï¼Œå…¶å°¾éƒ¨è¿æ¥åˆ°ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ã€‚\nç¤ºä¾‹ 3ï¼š\nè¾“å…¥ï¼šhead = [1], pos = -1\nè¾“å‡ºï¼šfalse\nè§£é‡Šï¼šé“¾è¡¨ä¸­æ²¡æœ‰ç¯ã€‚\næç¤ºï¼š\né“¾è¡¨ä¸­èŠ‚ç‚¹çš„æ•°ç›®èŒƒå›´æ˜¯ $[0, 10^4]$ $-10^5 \u0026lt;= Node.val \u0026lt;= 10^5$ pos ä¸º -1 æˆ–è€…é“¾è¡¨ä¸­çš„ä¸€ä¸ª æœ‰æ•ˆç´¢å¼• ã€‚ è¿›é˜¶ï¼š ä½ èƒ½ç”¨ O(1)ï¼ˆå³ï¼Œå¸¸é‡ï¼‰å†…å­˜è§£å†³æ­¤é—®é¢˜å—ï¼Ÿ\nè§£æ³•ä¸€ï¼šå¿«æ…¢æŒ‡é’ˆ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 /** * Definition for singly-linked list. * type ListNode struct { * Val int * Next *ListNode * } */ func hasCycle(head *ListNode) bool { slow, fast := head, head for fast != nil \u0026amp;\u0026amp; fast.Next != nil { slow = slow.Next fast = fast.Next.Next if slow == fast { return true } } return false } æ‹“å±•ï¼šå¦‚æœé“¾è¡¨æœ‰ç¯ï¼Œå¦‚ä½•è·å¾—ç¯çš„é•¿åº¦ä»¥åŠé“¾è¡¨å¼€å§‹å…¥ç¯çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ã€‚\n","date":"2023-04-26T21:17:29+08:00","image":"https://ibakuman.github.io/gallery/landscape/21_hub73357eff33b538ccccba9977cd6e8b3_9581476_120x120_fill_q75_box_smart1.jpg","permalink":"https://ibakuman.github.io/posts/algorithm/list/0141-linked-list-cycle/","title":"141.ç¯å½¢é“¾è¡¨"},{"content":"é¢˜ç›®æè¿° ç»™å®šä¸€ä¸ªå•é“¾è¡¨ L çš„å¤´èŠ‚ç‚¹ head ï¼Œå•é“¾è¡¨ L è¡¨ç¤ºä¸ºï¼š\nL0 â†’ L1 â†’ â€¦ â†’ Ln - 1 â†’ Ln\nè¯·å°†å…¶é‡æ–°æ’åˆ—åå˜ä¸ºï¼š\nL0 â†’ Ln â†’ L1 â†’ Ln - 1 â†’ L2 â†’ Ln - 2 â†’ â€¦\nä¸èƒ½åªæ˜¯å•çº¯çš„æ”¹å˜èŠ‚ç‚¹å†…éƒ¨çš„å€¼ï¼Œè€Œæ˜¯éœ€è¦å®é™…çš„è¿›è¡ŒèŠ‚ç‚¹äº¤æ¢ã€‚\nç¤ºä¾‹ 1ï¼š\nè¾“å…¥ï¼šhead = [1,2,3,4] è¾“å‡ºï¼š[1,4,2,3] ç¤ºä¾‹ 2ï¼š\nè¾“å…¥ï¼šhead = [1,2,3,4,5] è¾“å‡ºï¼š[1,5,2,4,3] æç¤ºï¼š\né“¾è¡¨çš„é•¿åº¦èŒƒå›´ä¸º [1, 5*104] 1 \u0026lt;= node.val \u0026lt;= 1000 è§£æ³•ä¸€ï¼šç¿»è½¬é“¾è¡¨ + åˆå¹¶é“¾è¡¨ + æŸ¥è¯¢ä¸­é—´èŠ‚ç‚¹ è§‚å¯Ÿåå‘ç°å¯ä»¥å…ˆæ‰¾åˆ°é“¾è¡¨çš„ä¸­é—´èŠ‚ç‚¹ aTailï¼ˆå¯¹äºèŠ‚ç‚¹æ•°ä¸ºå¶æ•°çš„é“¾è¡¨ï¼Œå–ä¸¤ä¸ªä¸­é—´èŠ‚ç‚¹ä¸­çš„ç¬¬ä¸€ä¸ªï¼‰ï¼Œé€šè¿‡ä¸­é—´èŠ‚ç‚¹å°†é“¾è¡¨åˆ†ä¸ºé“¾è¡¨ a å’Œé“¾è¡¨ bï¼Œé“¾è¡¨ a çš„èŒƒå›´æ˜¯ä»åŸé“¾è¡¨çš„å¤´éƒ¨åˆ° aTailï¼ˆåŒ…æ‹¬ aTailï¼‰ï¼Œé“¾è¡¨ b çš„èŒƒå›´ä¸º aTail.Next åˆ°é“¾è¡¨æœ«å°¾ã€‚ç„¶åç¿»è½¬é“¾è¡¨ bï¼Œç„¶åå¯ä»¥åˆå¹¶é“¾è¡¨ a å’Œé“¾è¡¨ bã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 /** * Definition for singly-linked list. * type ListNode struct { * Val int * Next *ListNode * } */ func reorderList(head *ListNode) { if head == nil || head.Next == nil { return } aTail := middleNode(head) b := aTail.Next aTail.Next = nil // æ–­å¼€ a å’Œ b çš„è¿æ¥ b = reverseList(b) mergeList(head, b) return } // å–ä»¥ head ä¸ºå¤´èŠ‚ç‚¹çš„é“¾è¡¨çš„ä¸­é—´èŠ‚ç‚¹ func middleNode(head *ListNode) *ListNode{ if head == nil { return head } slow, fast := head, head for fast.Next != nil \u0026amp;\u0026amp; fast.Next.Next != nil { slow = slow.Next fast = fast.Next.Next } return slow } func reverseList(head *ListNode) *ListNode { if head == nil || head.Next == nil { return head } var prev *ListNode cur := head for cur != nil { next := cur.Next// å…ˆè®°å½•ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ cur.Next = prev prev = cur cur = next// ä½¿ cur æŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ } return prev } func mergeList(a *ListNode, b* ListNode) *ListNode { head := a for a != nil \u0026amp;\u0026amp; b != nil { next := a.Next// è®°å½• a è¦æŒ‡å‘çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ a.Next = b// æ›´æ”¹ a çš„æŒ‡å‘ b = b.Next// æ›´æ”¹ b çš„æŒ‡å‘ // a.Next.Next æ­¤æ—¶å­˜å‚¨çš„æ˜¯æ”¹å˜å‰çš„ b,è¿™è¡Œä»£ç å¿…é¡»åœ¨ `b=b.Next` ä¹‹åæ‰§è¡Œ a.Next.Next = next a = next// ä½¿ a æŒ‡å‘é“¾è¡¨ a çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ } return head } æ‹“å±•ï¼šå¯¹äºèŠ‚ç‚¹æ•°ä¸ºå¶æ•°çš„é“¾è¡¨ï¼ŒaTail èƒ½ä¸èƒ½å–ä¸¤ä¸ªä¸­é—´èŠ‚ç‚¹çš„ç¬¬äºŒä¸ªèŠ‚ç‚¹?\næ€»ç»“ å½“éœ€è¦æ›´æ”¹æŸä¸€èŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„æŒ‡å‘æ—¶ï¼Œå…ˆå­˜å‚¨è¿™ä¸ªèŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„ä¿¡æ¯ï¼Œç„¶åé©¬ä¸Šæ›´æ”¹è¿™ä¸ªèŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ã€‚ ","date":"2023-04-26T18:14:46+08:00","image":"https://ibakuman.github.io/gallery/landscape/24_hu02460565c68f6ee68754f9a01c400f03_406275_120x120_fill_q75_box_smart1.jpg","permalink":"https://ibakuman.github.io/posts/algorithm/list/0143-reorder-list/","title":"143.é‡æ’é“¾è¡¨"},{"content":"é—®é¢˜æè¿° ç»™ä½ å•é“¾è¡¨çš„å¤´ç»“ç‚¹ head ï¼Œè¯·ä½ æ‰¾å‡ºå¹¶è¿”å›é“¾è¡¨çš„ä¸­é—´ç»“ç‚¹ã€‚\nå¦‚æœæœ‰ä¸¤ä¸ªä¸­é—´ç»“ç‚¹ï¼Œåˆ™è¿”å›ç¬¬äºŒä¸ªä¸­é—´ç»“ç‚¹ã€‚\nç¤ºä¾‹ 1ï¼š\nè¾“å…¥ï¼šhead = [1,2,3,4,5]\nè¾“å‡ºï¼š[3,4,5]\nè§£é‡Šï¼šé“¾è¡¨åªæœ‰ä¸€ä¸ªä¸­é—´ç»“ç‚¹ï¼Œå€¼ä¸º 3 ã€‚\nç¤ºä¾‹ 2ï¼š\nè¾“å…¥ï¼šhead = [1,2,3,4,5,6]\nè¾“å‡ºï¼š[4,5,6]\nè§£é‡Šï¼šè¯¥é“¾è¡¨æœ‰ä¸¤ä¸ªä¸­é—´ç»“ç‚¹ï¼Œå€¼åˆ†åˆ«ä¸º 3 å’Œ 4 ï¼Œè¿”å›ç¬¬äºŒä¸ªç»“ç‚¹ã€‚\næç¤ºï¼š\né“¾è¡¨çš„ç»“ç‚¹æ•°èŒƒå›´æ˜¯ [1, 100] 1 \u0026lt;= Node.val \u0026lt;= 100 è§£æ³•ä¸€ï¼šå¿«æ…¢æŒ‡é’ˆ ä¸‹é¢çš„ for å¾ªç¯ç»“æŸåï¼Œfast == nil æˆ– fast.Next == nilï¼Œå³ fast æŒ‡å‘ç©ºèŠ‚ç‚¹æˆ–å½“å‰é“¾è¡¨çš„æœ€åä¸€ä¸ªèŠ‚ç‚¹ã€‚ç”±äº fast æ¯æ¬¡èµ°ä¸¤æ­¥ï¼Œæ•…æœ€ç»ˆèµ°çš„æ­¥æ•°æ˜¯å¶æ•°ã€‚å¦‚æœ fast æœ€åæŒ‡å‘çš„æ˜¯ç©ºèŠ‚ç‚¹ï¼Œåˆ™è¡¨æ˜é“¾è¡¨èŠ‚ç‚¹çš„æ•°ç›®ä¸ºå¶æ•°ï¼Œæ­¤æ—¶ slow æŒ‡å‘ä¸¤ä¸ªä¸­é—´èŠ‚ç‚¹ä¸­é åçš„é‚£ä¸€ä¸ªã€‚å¦‚æœ fast æœ€åæŒ‡å‘é“¾è¡¨æœ€åä¸€ä¸ªèŠ‚ç‚¹ï¼Œåˆ™è¡¨æ˜æ­¤æ—¶é“¾è¡¨çš„æ•°ç›®ä¸ºå¥‡æ•°ï¼Œæ­¤æ—¶ slow æŒ‡å‘å”¯ä¸€çš„ä¸­é—´èŠ‚ç‚¹ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 /** * Definition for singly-linked list. * type ListNode struct { * Val int * Next *ListNode * } */ func middleNode(head *ListNode) *ListNode { slow, fast := head, head for fast != nil \u0026amp;\u0026amp; fast.Next != nil { slow = slow.Next fast = fast.Next.Next } return slow } æ‹“å±• å½“é“¾è¡¨èŠ‚ç‚¹æ•°ç›®ä¸ºå¶æ•°æ—¶ï¼Œå¦‚ä½•è·å–ä¸¤ä¸ªä¸­é—´èŠ‚ç‚¹ä¸­é å‰çš„é‚£ä¸€ä¸ª? å…ˆå¤„ç† head == nil çš„ç‰¹æ®Šæƒ…å†µï¼Œåå°† for å¾ªç¯çš„è¿›å…¥æ¡ä»¶ç”± fast != nil \u0026amp;\u0026amp; fast.Next != nil æ”¹ä¸º fast.Next != nil \u0026amp;\u0026amp; fast.Next.Next != nil å³å¯ã€‚ä»£ç å¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 /** * Definition for singly-linked list. * type ListNode struct { * Val int * Next *ListNode * } */ func middleNode(head *ListNode) *ListNode { if head == nil { return head } slow, fast := head, head for fast.Next != nil \u0026amp;\u0026amp; fast.Next.Next != nil { slow = slow.Next fast = fast.Next.Next } return slow } ","date":"2023-04-26T13:27:01+08:00","image":"https://ibakuman.github.io/gallery/landscape/25_hu0a3309c019aba12b8d679d09b57cc9da_1259768_120x120_fill_q75_box_smart1.jpg","permalink":"https://ibakuman.github.io/posts/algorithm/list/0876-middle-of-the-linked-list/","title":"876.é“¾è¡¨çš„ä¸­é—´èŠ‚ç‚¹"},{"content":"å®‰è£…è½¯ä»¶ htop htop æ˜¯ Linux åŸç”Ÿ top å‘½ä»¤çš„å‡çº§ç‰ˆã€‚å®ƒæ˜¯ä¸€ä¸ªç»ˆç«¯ä¸‹çš„äº¤äº’å¼ä»»åŠ¡ç®¡ç†å™¨ã€‚ä½ å¯ä»¥ä½¿ç”¨ htop ç›´æ¥åœ¨ç»ˆç«¯ç®¡ç†ä½ çš„è¿›ç¨‹ä¸ä»»åŠ¡ã€‚ä½ å¯ä»¥ç›´æ¥è¿è¡Œ sudo pacman -S htop æ¥å®‰è£…ã€‚\nscreenfetch screenfetch å‘½ä»¤èƒ½åœ¨ä½ çš„ç»ˆç«¯æ‰“å°å‡ºä½ çš„ç³»ç»Ÿä¿¡æ¯ï¼Œç”šè‡³å›¾æ ‡ï¼ˆå¾ˆé…·ä¸æ˜¯å—ï¼‰ï¼åŒæ ·å¯ä»¥ä½¿ç”¨ pacman ç›´æ¥å®‰è£…ã€‚å½“ç„¶ä½ ä¹Ÿå¯ä»¥è€ƒè™‘ä½¿ç”¨ neofetch ä½œä¸ºæ›¿ä»£å“ã€‚\nManjaro ç¾åŒ– å®‰è£… MySQL å®¢æˆ·ç«¯ 1 sudo pacman -S mysql-clients ","date":"2023-04-26T09:03:58+08:00","image":"https://ibakuman.github.io/gallery/landscape/23_hu3a7b7452a865fd9297e7a2768212101d_732306_120x120_fill_q75_box_smart1.jpg","permalink":"https://ibakuman.github.io/posts/manjaro/install/","title":"å®‰è£…ä»¥åŠé…ç½® Manjaro"},{"content":"æ¦‚è¿° awkæ˜¯å¤„ç†æ–‡æœ¬æ–‡ä»¶çš„ä¸€ä¸ªåº”ç”¨ç¨‹åºï¼Œå‡ ä¹æ‰€æœ‰ Linux ç³»ç»Ÿéƒ½è‡ªå¸¦è¿™ä¸ªç¨‹åºã€‚\nå®ƒä¾æ¬¡å¤„ç†æ–‡ä»¶çš„æ¯ä¸€è¡Œï¼Œå¹¶è¯»å–é‡Œé¢çš„æ¯ä¸€ä¸ªå­—æ®µã€‚å¯¹äºæ—¥å¿—ã€CSV é‚£æ ·çš„æ¯è¡Œæ ¼å¼ç›¸åŒçš„æ–‡æœ¬æ–‡ä»¶ï¼Œawk å¯èƒ½æ˜¯æœ€æ–¹ä¾¿çš„å·¥å…·ã€‚\nawk å…¶å®ä¸ä»…ä»…æ˜¯å·¥å…·è½¯ä»¶ï¼Œè¿˜æ˜¯ä¸€ç§ç¼–ç¨‹è¯­è¨€ã€‚ä¸è¿‡ï¼Œæœ¬æ–‡åªä»‹ç»å®ƒçš„å‘½ä»¤è¡Œç”¨æ³•ï¼Œå¯¹äºå¤§å¤šæ•°åœºåˆï¼Œåº”è¯¥è¶³å¤Ÿç”¨äº†ã€‚\nåŸºæœ¬ç”¨æ³• awk çš„åŸºæœ¬ç”¨æ³•å°±æ˜¯ä¸‹é¢çš„å½¢å¼ã€‚\n1 2 3 4 5 # æ ¼å¼ $ awk åŠ¨ä½œ æ–‡ä»¶å # ç¤ºä¾‹ $ awk \u0026#39;{print $0}\u0026#39; demo.txt ä¸Šé¢ç¤ºä¾‹ä¸­ï¼Œdemo.txt æ˜¯ awk æ‰€è¦å¤„ç†çš„æ–‡æœ¬æ–‡ä»¶ã€‚å‰é¢å•å¼•å·å†…éƒ¨æœ‰ä¸€ä¸ªå¤§æ‹¬å·ï¼Œé‡Œé¢å°±æ˜¯æ¯ä¸€è¡Œçš„å¤„ç†åŠ¨ä½œ print $0ã€‚å…¶ä¸­ï¼Œprint æ˜¯æ‰“å°å‘½ä»¤ï¼Œ$0 ä»£è¡¨å½“å‰è¡Œï¼Œå› æ­¤ä¸Šé¢å‘½ä»¤çš„æ‰§è¡Œç»“æœï¼Œå°±æ˜¯æŠŠæ¯ä¸€è¡ŒåŸæ ·æ‰“å°å‡ºæ¥ã€‚\nä¸‹é¢ï¼Œæˆ‘ä»¬å…ˆç”¨æ ‡å‡†è¾“å…¥ï¼ˆstdinï¼‰æ¼”ç¤ºä¸Šé¢è¿™ä¸ªä¾‹å­ã€‚\n1 2 $ echo \u0026#39;this is a test\u0026#39; | awk \u0026#39;{print $0}\u0026#39; this is a test ä¸Šé¢ä»£ç ä¸­ï¼Œprint $0 å°±æ˜¯æŠŠæ ‡å‡†è¾“å…¥ this is a testï¼Œé‡æ–°æ‰“å°äº†ä¸€éã€‚\nawk ä¼šæ ¹æ®ç©ºæ ¼å’Œåˆ¶è¡¨ç¬¦ï¼Œå°†æ¯ä¸€è¡Œåˆ†æˆè‹¥å¹²å­—æ®µï¼Œä¾æ¬¡ç”¨ $1ã€$2ã€$3 ä»£è¡¨ç¬¬ä¸€ä¸ªå­—æ®µã€ç¬¬äºŒä¸ªå­—æ®µã€ç¬¬ä¸‰ä¸ªå­—æ®µç­‰ç­‰ã€‚\n1 2 $ echo \u0026#39;this is a test\u0026#39; | awk \u0026#39;{print $3}\u0026#39; a ä¸Šé¢ä»£ç ä¸­ï¼Œ$3 ä»£è¡¨ this is a test çš„ç¬¬ä¸‰ä¸ªå­—æ®µ aã€‚\nä¸‹é¢ï¼Œä¸ºäº†ä¾¿äºä¸¾ä¾‹ï¼Œæˆ‘ä»¬æŠŠ /etc/passwd æ–‡ä»¶ä¿å­˜æˆ demo.txtã€‚\n1 2 3 4 5 root: x:0:0: root:/root:/usr/bin/zsh daemon: x:1:1: daemon:/usr/sbin:/usr/sbin/nologin bin: x:2:2: bin:/bin:/usr/sbin/nologin sys: x:3:3: sys:/dev:/usr/sbin/nologin sync: x:4:65534: sync:/bin:/bin/sync è¿™ä¸ªæ–‡ä»¶çš„å­—æ®µåˆ†éš”ç¬¦æ˜¯å†’å·ï¼ˆ: ï¼‰ï¼Œæ‰€ä»¥è¦ç”¨ -F å‚æ•°æŒ‡å®šåˆ†éš”ç¬¦ä¸ºå†’å·ã€‚ç„¶åï¼Œæ‰èƒ½æå–åˆ°å®ƒçš„ç¬¬ä¸€ä¸ªå­—æ®µã€‚\n1 2 3 4 5 6 $ awk -F \u0026#39;:\u0026#39; \u0026#39;{ print $1 }\u0026#39; demo.txt root daemon bin sys sync å˜é‡ é™¤äº† $ + æ•°å­—è¡¨ç¤ºæŸä¸ªå­—æ®µï¼Œawk è¿˜æä¾›å…¶ä»–ä¸€äº›å˜é‡ã€‚\nå˜é‡ NF è¡¨ç¤ºå½“å‰è¡Œæœ‰å¤šå°‘ä¸ªå­—æ®µï¼Œå› æ­¤ $NF å°±ä»£è¡¨æœ€åä¸€ä¸ªå­—æ®µã€‚\n1 2 $ echo \u0026#39;this is a test\u0026#39; | awk \u0026#39;{print $NF}\u0026#39; test $(NF-1) ä»£è¡¨å€’æ•°ç¬¬äºŒä¸ªå­—æ®µã€‚\n1 2 3 4 5 6 $ awk -F \u0026#39;:\u0026#39; \u0026#39;{print $1, $(NF-1)}\u0026#39; demo.txt root /root daemon /usr/sbin bin /bin sys /dev sync /bin ä¸Šé¢ä»£ç ä¸­ï¼Œprint å‘½ä»¤é‡Œé¢çš„é€—å·ï¼Œè¡¨ç¤ºè¾“å‡ºçš„æ—¶å€™ï¼Œä¸¤ä¸ªéƒ¨åˆ†ä¹‹é—´ä½¿ç”¨ç©ºæ ¼åˆ†éš”ã€‚\nå˜é‡ NR è¡¨ç¤ºå½“å‰å¤„ç†çš„æ˜¯ç¬¬å‡ è¡Œã€‚\n1 2 3 4 5 6 $ awk -F \u0026#39;:\u0026#39; \u0026#39;{print NR \u0026#34;) \u0026#34; $1}\u0026#39; demo.txt 1) root 2) daemon 3) bin 4) sys 5) sync ä¸Šé¢ä»£ç ä¸­ï¼Œprint å‘½ä»¤é‡Œé¢ï¼Œå¦‚æœåŸæ ·è¾“å‡ºå­—ç¬¦ï¼Œè¦æ”¾åœ¨åŒå¼•å·é‡Œé¢ã€‚\nawk çš„å…¶ä»–å†…ç½®å˜é‡å¦‚ä¸‹ã€‚\nFILENAMEï¼šå½“å‰æ–‡ä»¶å FSï¼šå­—æ®µåˆ†éš”ç¬¦ï¼Œé»˜è®¤æ˜¯ç©ºæ ¼å’Œåˆ¶è¡¨ç¬¦ã€‚ RSï¼šè¡Œåˆ†éš”ç¬¦ï¼Œç”¨äºåˆ†å‰²æ¯ä¸€è¡Œï¼Œé»˜è®¤æ˜¯æ¢è¡Œç¬¦ã€‚ OFSï¼šè¾“å‡ºå­—æ®µçš„åˆ†éš”ç¬¦ï¼Œç”¨äºæ‰“å°æ—¶åˆ†éš”å­—æ®µï¼Œé»˜è®¤ä¸ºç©ºæ ¼ã€‚ ORSï¼šè¾“å‡ºè®°å½•çš„åˆ†éš”ç¬¦ï¼Œç”¨äºæ‰“å°æ—¶åˆ†éš”è®°å½•ï¼Œé»˜è®¤ä¸ºæ¢è¡Œç¬¦ã€‚ OFMTï¼šæ•°å­—è¾“å‡ºçš„æ ¼å¼ï¼Œé»˜è®¤ä¸ºï¼….6gã€‚ å‡½æ•° awk è¿˜æä¾›äº†ä¸€äº›å†…ç½®å‡½æ•°ï¼Œæ–¹ä¾¿å¯¹åŸå§‹æ•°æ®çš„å¤„ç†ã€‚\nå‡½æ•° toupper() ç”¨äºå°†å­—ç¬¦è½¬ä¸ºå¤§å†™ã€‚\n1 2 3 4 5 6 $ awk -F \u0026#39;:\u0026#39; \u0026#39;{ print toupper($1) }\u0026#39; demo.txt ROOT DAEMON BIN SYS SYNC ä¸Šé¢ä»£ç ä¸­ï¼Œç¬¬ä¸€ä¸ªå­—æ®µè¾“å‡ºæ—¶éƒ½å˜æˆäº†å¤§å†™ã€‚\nå…¶ä»–å¸¸ç”¨å‡½æ•°å¦‚ä¸‹ã€‚\ntolower()ï¼šå­—ç¬¦è½¬ä¸ºå°å†™ã€‚ length()ï¼šè¿”å›å­—ç¬¦ä¸²é•¿åº¦ã€‚ substr()ï¼šè¿”å›å­å­—ç¬¦ä¸²ã€‚ sin()ï¼šæ­£å¼¦ã€‚ cos()ï¼šä½™å¼¦ã€‚ sqrt()ï¼šå¹³æ–¹æ ¹ã€‚ rand()ï¼šéšæœºæ•°ã€‚ awk å†…ç½®å‡½æ•°çš„å®Œæ•´åˆ—è¡¨ï¼Œå¯ä»¥æŸ¥çœ‹æ‰‹å†Œã€‚\næ¡ä»¶ awk å…è®¸æŒ‡å®šè¾“å‡ºæ¡ä»¶ï¼Œåªè¾“å‡ºç¬¦åˆæ¡ä»¶çš„è¡Œã€‚\nè¾“å‡ºæ¡ä»¶è¦å†™åœ¨åŠ¨ä½œçš„å‰é¢ã€‚\n1 $ awk \u0026#39;æ¡ä»¶ åŠ¨ä½œ\u0026#39; æ–‡ä»¶å è¯·çœ‹ä¸‹é¢çš„ä¾‹å­ã€‚\n1 2 3 4 5 $ awk -F \u0026#39;:\u0026#39; \u0026#39;/usr/ {print $1}\u0026#39; demo.txt root daemon bin sys ä¸Šé¢ä»£ç ä¸­ï¼Œprint å‘½ä»¤å‰é¢æ˜¯ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ï¼Œåªè¾“å‡ºåŒ…å« usr çš„è¡Œã€‚\nä¸‹é¢çš„ä¾‹å­åªè¾“å‡ºå¥‡æ•°è¡Œï¼Œä»¥åŠè¾“å‡ºç¬¬ä¸‰è¡Œä»¥åçš„è¡Œã€‚\n1 2 3 4 5 6 7 8 9 10 # è¾“å‡ºå¥‡æ•°è¡Œ $ awk -F \u0026#39;:\u0026#39; \u0026#39;NR % 2 == 1 {print $1}\u0026#39; demo.txt root bin sync # è¾“å‡ºç¬¬ä¸‰è¡Œä»¥åçš„è¡Œ $ awk -F \u0026#39;:\u0026#39; \u0026#39;NR \u0026gt; 3 {print $1}\u0026#39; demo.txt sys sync ä¸‹é¢çš„ä¾‹å­è¾“å‡ºç¬¬ä¸€ä¸ªå­—æ®µç­‰äºæŒ‡å®šå€¼çš„è¡Œã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 $ awk -F \u0026#39;:\u0026#39; \u0026#39;$1 == \u0026#34;root\u0026#34; {print $1}\u0026#39; demo.txt root $ awk -F \u0026#39;:\u0026#39; \u0026#39;$1 == \u0026#34;root\u0026#34; || $1 == \u0026#34;bin\u0026#34; {print $1}\u0026#39; demo.txt root bin \u0026gt; ``` ## if è¯­å¥ `awk` æä¾›äº† `if` ç»“æ„ï¼Œç”¨äºç¼–å†™å¤æ‚çš„æ¡ä»¶ã€‚ ```bash $ awk -F \u0026#39;:\u0026#39; \u0026#39;{if ($1 \u0026gt; \u0026#34;m\u0026#34;) print $1}\u0026#39; demo.txt root sys sync ä¸Šé¢ä»£ç è¾“å‡ºç¬¬ä¸€ä¸ªå­—æ®µçš„ç¬¬ä¸€ä¸ªå­—ç¬¦å¤§äº m çš„è¡Œã€‚\nif ç»“æ„è¿˜å¯ä»¥æŒ‡å®š else éƒ¨åˆ†ã€‚\n1 2 3 4 5 6 $ awk -F \u0026#39;:\u0026#39; \u0026#39;{if ($1 \u0026gt; \u0026#34;m\u0026#34;) print $1; else print \u0026#34;---\u0026#34;}\u0026#39; demo.txt root --- --- sys sync å‚è€ƒé“¾æ¥ awk å…¥é—¨æ•™ç¨‹ An Awk tutorial by Example , Greg Grothaus 30 Examples for Awk Command in Text Processing , Mokhtar Ebrahim ","date":"2022-11-19T12:37:19+08:00","image":"https://ibakuman.github.io/gallery/landscape/30_hu6b33f88901e241f064888f7143885028_2042071_120x120_fill_q75_box_smart1.jpg","permalink":"https://ibakuman.github.io/posts/linux/awk/beginners-guide-to-awk/","title":"awk å…¥é—¨æ•™ç¨‹"},{"content":"Mozilla æµè§ˆå™¨æä¾›äº†ä¸€ä¸ª JavaScript çš„ç»‘å®šäº‹ä»¶ç›‘å¬å™¨çš„å‡½æ•° addEventListener\n1 document.getElementById(\u0026#34;button1\u0026#34;).addEventListener(\u0026#34;click\u0026#34;,callback,isCapture); å…¶ä¸­å„ä¸ªå‚æ•°è¯´æ˜å¦‚ä¸‹ï¼š\nclick ä»£è¡¨æ³¨å†Œçš„ä»€ä¹ˆäº‹ä»¶ã€‚â€œclickâ€ä»£è¡¨çš„è‡ªç„¶æ˜¯ç‚¹å‡»äº‹ä»¶ï¼Œæ³¨æ„å‰é¢ä¸åŠ â€œonâ€å‰ç¼€ã€‚ä¹Ÿå¯ä»¥æ˜¯å…¶ä»–äº‹ä»¶ï¼Œå»æ‰â€œonâ€å‰ç¼€å³å¯ã€‚ callback å›è°ƒå‡½æ•°ï¼Œå½“äº‹ä»¶è¢«è§¦å‘æ—¶è°ƒç”¨è¯¥å‡½æ•°ã€‚ isCapture æ˜¯å¦åœ¨æ•è·é˜¶æ®µæ‰§è¡Œå›è°ƒã€‚é»˜è®¤ä¸º falseã€‚ ä¸‹é¢æ¥è¯´ä¸€ä¸‹ç¬¬ä¸‰ä¸ªå‚æ•° isCaptureã€‚å®ƒæ˜¯ä¸€ä¸ª boolean ç±»å‹çš„å€¼ã€‚è¯´åˆ°å®ƒå°±ä¸å¾—ä¸æä¸€ä¸‹ JavaScript ä¸­çš„äº‹ä»¶è§¦å‘ç»å†çš„ä¸¤ä¸ªé˜¶æ®µï¼šæ•è·é˜¶æ®µå’Œå†’æ³¡é˜¶æ®µã€‚\nä»å›¾ä¸­å¯è§éƒ½æ˜¯åµŒå¥—å…³ç³»ã€‚æˆ‘ä»¬å‡å®šç‚¹å‡»äº†æœ€å†…å±‚çš„ text å…ƒç´ ï¼Œè§¦å‘äº†å®ƒçš„ onclick äº‹ä»¶ã€‚ ä½†æ˜¯å®é™…ä¸Šå› ä¸ºæ˜¯åµŒå¥—çš„åŸå› ï¼Œç‚¹å‡»äº†æœ€å†…å±‚çš„ text ä¹Ÿç›¸å½“äºç‚¹å‡»äº†å®ƒçš„çˆ¶å…ƒç´  divï¼Œä¹Ÿç›¸å½“äºç‚¹å‡»äº†çˆ¶å…ƒç´ çš„çˆ¶å…ƒç´  bodyâ€¦â€¦ä¹Ÿç›¸å½“äºç‚¹å‡»äº† windowï¼Œé‚£ä¹ˆå¦‚æœè¿™äº›å¤–å±‚å…ƒç´ ä¹Ÿæœ‰ onclick çš„ç‚¹å‡»äº‹ä»¶ï¼Œå®ƒä»¬ä¹Ÿåº”å½“è¢«è§¦å‘ï¼Œç°åœ¨çš„é—®é¢˜æ˜¯ï¼Œæ˜¯åœ¨ä»€ä¹ˆæ—¶å€™è¢«è§¦å‘ï¼Ÿ å›¾ä¸­å¯è§æœ‰ä¸¤ä¸ªé˜¶æ®µ\nå…ˆä»æœ€å¤–é¢å¼€å§‹ï¼ˆä¹Ÿå°±æ˜¯ window å¼€å§‹ï¼‰å‘å†…æ¨è¿›ï¼Œç›´åˆ°å®šä½åˆ°è§¦å‘çš„å…ƒç´  textã€‚è¿™ä¸€è¿‡ç¨‹å«â€œæ•è·è¿‡ç¨‹â€ã€‚ ç„¶åä»è¯¥å…ƒç´ å¼€å§‹ï¼Œåˆå‘ä¸Šçº§å†’æ³¡ã€‚è¯¥è¿‡ç¨‹ä¸ºâ€œå†’æ³¡è¿‡ç¨‹â€ã€‚ æ˜¾ç„¶ï¼Œå¯¹äºè¿™ä¸ªåµŒå¥—é“¾ä¸Šçš„æ¯ä¸ªå…ƒç´ ï¼Œå®ƒçš„è§¦å‘æŒ‰æ•°å³å¯ä»¥åœ¨æ•è·é˜¶æ®µè¢«æ‰§è¡Œï¼Œä¹Ÿå¯ä»¥åœ¨å†’æ³¡é˜¶æ®µè¢«æ‰§è¡Œã€‚\næ‰€ä»¥ï¼ŒaddEventListener çš„ç¬¬ä¸‰ä¸ªå‚æ•°æ­£æ˜¯æŒ‡å®šè¿™ä¸ªè§¦å‘æ—¶æ®µçš„ã€‚é»˜è®¤æƒ…å†µæ˜¯ falseï¼Œä¹Ÿå°±æ˜¯åœ¨å†’æ³¡é˜¶æ®µè¢«æ‰§è¡Œï¼›å¦‚æœæŒ‡æ´¾ä¸º trueï¼Œåˆ™åœ¨æ•è·é˜¶æ®µè¢«æ‰§è¡Œã€‚\nç”¨ä¸€ä¸ªç®€å•çš„å®éªŒå¯ä»¥è¯´æ˜é—®é¢˜ï¼š å‡è®¾ç°åœ¨ä¸€ä¸ª HTML ç•Œé¢æœ‰ä¸‰ä¸ªå‘ˆåµŒå¥—å…³ç³»çš„å…ƒç´ \n1 2 3 4 5 \u0026lt;div id=\u0026#34;outer\u0026#34; \u0026gt; \u0026lt;div id=\u0026#34;middle\u0026#34; \u0026gt; \u0026lt;input type=\u0026#34;button\u0026#34; id=\u0026#34;inner\u0026#34; value=\u0026#34;inner\u0026#34;/\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; æœ€å¤–å±‚æ˜¯ outerï¼Œä¸­é—´æ˜¯ middleï¼Œå†…éƒ¨æ˜¯ innerã€‚ ä¸‹é¢æ˜¯ä¸‰ä¸ªå…ƒç´ ç»‘å®šç‚¹å‡»äº‹ä»¶ï¼š\n1 2 3 4 5 6 7 8 9 10 window.onload=function(){ document.getElementById(\u0026#34;inner\u0026#34;).addEventListener(\u0026#34;click\u0026#34;,show(\u0026#34;inner\u0026#34;),false); document.getElementById(\u0026#34;middle\u0026#34;).addEventListener(\u0026#34;click\u0026#34;,show(\u0026#34;middle\u0026#34;),false); document.getElementById(\u0026#34;outer\u0026#34;).addEventListener(\u0026#34;click\u0026#34;,show(\u0026#34;outer\u0026#34;),false); } function show(i){ return function(){ console.log(i); } } ç‚¹å‡»å¯¹åº”å…ƒç´ ï¼Œå°±ä¼šåœ¨æ§åˆ¶å°æ‰“å°å‡ºç›¸åº”ä¿¡æ¯ã€‚ä¸‹é¢åˆ†åˆ«ä¿®æ”¹ä¸‰ä¸ª boolean å‚æ•°ï¼Œè§‚å¯Ÿè¾“å‡ºç»“æœ\nOUTPUT çš„ç»“æœå·¦è¾¹å…ˆæ‰“å°ï¼Œå³è¾¹åæ‰“å°ã€‚æˆ‘ä»¬ä¸¾ä¸¤ä¸ªç»“æœè¯´æ˜ï¼š\nisCapture åˆ†åˆ«è¢«è®¾ç½®ä¸º TFF çš„æ—¶å€™ï¼Œç‚¹å‡»æœ€å†…å±‚ inner çš„æŒ‰é’®ï¼Œç”±äº outerã€middle è®¾ç½®çš„ä¸º falseï¼Œé‚£ä¹ˆå®ƒä»¬åœ¨æ•è·é˜¶æ®µä¸ä¼šè¢«è§¦å‘ï¼Œæ§åˆ¶æµåˆ°è¾¾ innerï¼Œæ­¤æ—¶å…ˆè¾“å‡º innerï¼Œç„¶åå¼€å§‹è¿”å›ï¼Œä¹Ÿå°±æ˜¯å‘ä¸Šçº§å†’æ³¡ï¼Œæ‰€ä»¥ä¾æ¬¡è§¦å‘ middleã€outerã€‚ isCapture åˆ†åˆ«è¢«è®¾ç½®ä¸º TTF çš„æ—¶å€™ï¼Œç‚¹å‡»æœ€å†…å±‚ inner æŒ‰é’®ï¼Œç”±äº outer è®¾ç½®ä¸º falseï¼Œé‚£ä¹ˆå®ƒåœ¨è¿›å…¥çš„é˜¶æ®µä¸ä¼šè¢«è§¦å‘ï¼Œä½†æ˜¯å½“é‡åˆ° middle æ—¶å€™ï¼Œå› ä¸ºæ˜¯ trueï¼Œæ‰€ä»¥ä¼šè¢«è§¦å‘ï¼Œå…ˆè¾“å‡º middleï¼Œç„¶åè¾“å‡º innerï¼Œæœ€ååœ¨è¿”å›çš„å†’æ³¡é˜¶æ®µï¼Œouter è¢«è§¦å‘ï¼Œæœ€åè¾“å‡º outerã€‚ å‚è€ƒ åŸæ–‡åœ°å€ ","date":"2022-11-14T23:13:10+08:00","image":"https://ibakuman.github.io/gallery/landscape/18_hu7a8b922ea914ad8a12e0fc01dcf809f5_223556_120x120_fill_q75_box_smart1.jpg","permalink":"https://ibakuman.github.io/posts/javascript/third-arg-in-addeventlistener/","title":"å…³äº JavaScript çš„ addEventListener å‡½æ•°ç¬¬ä¸‰ä¸ªå‚æ•°çš„ä½œç”¨"},{"content":"In this tutorial, weâ€™ll learn how to generate auto-numbering for headings, subheadings, and TOC in Hugo Pages.\nOverview When you generate a website using Hugo static site generator, It doesnâ€™t provide any out of the box auto-numbering support for headings, subheadings, and TOC in Hugo Pages.\nThis blog website is also generated using Hugo and with few changes, weâ€™re able to add auto-numbering support to our Hugo Pages.\nIf youâ€™re still not clear what is auto-numbering all about then look at the auto incrementing numbers before the headings, subheadings and TOC in this post i.e. 1,2, 2.1,2.2,2.3 etc.\n1 2 3 4 5 1. Overview 2. Auto-numbering Pages 2.1. Add â€œautonumberingâ€ property in front-matter 2.2. Add CSS Class to single.html 2.3. Add CSS Styles to style.css Letâ€™s discuss how to enable this feature.\nAuto-numbering Pages Follow these three steps to enable auto-numbering feature in your Hugo website:\nAdd â€œautonumberingâ€ property in front-matter First of all, weâ€™re going to add a custom property autonumbering in the front-matter of our Hugo pages.\nWe can enable or disable auto-numbering for a specific page using this property. If autonumbering: true, means it is enabled otherwise disabled.\n1 content/blog-page.md 1 2 3 4 5 6 --- ... autonumbering: true --- Add CSS Class to single.html Next, we are going to edit layouts/_default/single.html file and add a condition on article element to add autonumbering CSS class based on autonumbering property is enabled or disabled.\nPlease note that if you are using any Hugo theme then you can find single.html in themes folder.\n1 layouts/_default/single.html 1 2 3 4 5 6 7 8 9 10 11 12 13 {{ define \u0026#34;main\u0026#34; }} \u0026lt;main\u0026gt; \u0026lt;article class=\u0026#34;post {{- if .Param \u0026#34;autonumbering\u0026#34; }} autonumbering {{- end }}\u0026#34;\u0026gt; \u0026lt;header\u0026gt; ... \u0026lt;/header\u0026gt; ... \u0026lt;footer\u0026gt; ... \u0026lt;/footer\u0026gt; \u0026lt;/article\u0026gt; \u0026lt;/main\u0026gt; {{ end }} If autonumbering is enabled on any post. It will look like this:\n1 2 3 \u0026lt;main\u0026gt; \u0026lt;article class=\u0026#34;post autonumbering\u0026#34; \u0026gt;\u0026lt;/article\u0026gt; \u0026lt;/main\u0026gt; If autonumbering is disabled on any post. It will look like this:\n1 2 3 \u0026lt;main\u0026gt; \u0026lt;article class=\u0026#34;post\u0026#34; \u0026gt;\u0026lt;/article\u0026gt; \u0026lt;/main\u0026gt; Add CSS Styles to style.css At last, add the following CSS Styles snippet in the CSS files you would be using in your project. Location of css file may differ in your project.\n1 static/css/style.css 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 .auto-numbering { counter-reset: h2; h2 { counter-reset: h3; \u0026amp;::before { counter-increment: h2; content: counter(h2)\u0026#34;. \u0026#34;; } } h3 { counter-reset: h4; \u0026amp;::before { counter-increment: h3; content: counter(h2)\u0026#34;.\u0026#34;counter(h3)\u0026#34;. \u0026#34;; } } h4 { counter-reset: h5; \u0026amp;::before { counter-increment: h4; content: counter(h2)\u0026#34;.\u0026#34;counter(h3)\u0026#34;.\u0026#34;counter(h4)\u0026#34;. \u0026#34;; } } } Thatâ€™s it. You should be able to use autonumbering feature in your hugo pages now.\nReference https://codingnconcepts.com/hugo/auto-number-headings-hugo/ ","date":"2022-11-14T17:38:17+08:00","image":"https://ibakuman.github.io/gallery/landscape/32_hu51b920b09f70697adb8efd022a77ced5_660746_120x120_fill_q75_box_smart1.jpg","permalink":"https://ibakuman.github.io/posts/hugo/auto-number-headings-toc-in-hugo-pages/","title":"Auto number Headings \u0026 TOC in Hugo Pages"},{"content":"æ¦‚è¿° åªè¦ä½ ç¨å¾®æ¥è§¦è¿‡ä¸€äº› JavaScriptï¼Œä½ ä¸€å®šä¼šé¢‘ç¹åœ°æ¥è§¦åˆ°ä¸‹é¢è¿™ä¸ªæ¨¡å¼ â€”â€”Â IIFEï¼Œå…¶å…¨ç§°ä¸ºÂ immediately invoked function expressionï¼Œå³ â€œç«‹å³è°ƒç”¨çš„å‡½æ•°è¡¨è¾¾å¼â€ï¼š\n1 2 3 (function() { // ... })(); ä¸€ç›´ä»¥æ¥ï¼ŒIIFE åˆ›é€ çš„å‡½æ•°ä½œç”¨åŸŸè¢«ç”¨äºé˜²æ­¢å±€éƒ¨å˜é‡æ³„æ¼è‡³å…¨å±€ä½œç”¨åŸŸä¸­ã€‚ç±»ä¼¼åœ°ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ IIFE æ¥åŒ…è£¹ç§æœ‰çŠ¶æ€ï¼ˆæˆ–å¹¿è€Œè¨€ä¹‹ï¼Œæ•°æ®ï¼‰ï¼Œè¿™ä¸¤è€…æœ¬è´¨ä¸Šæ˜¯ç›¸é€šçš„ã€‚\næƒ³çŸ¥é“ IIFE çš„æ›´å¤šç”¨é€”å—ï¼Œæ¯”å¦‚æé«˜ä»£ç å‹ç¼©ç‡ï¼Ÿä¸å¦¨çœ‹çœ‹ @toddmotto çš„ è¿™ç¯‡æ–‡ç« \nä¸è¿‡ï¼Œä½ å¯èƒ½è¿˜æ˜¯ä¼šå¥½å¥‡ä¸ºä»€ä¹ˆ IIFE çš„è¯­æ³•æ˜¯è¿™æ ·çš„ï¼Ÿå®ƒçœ‹ä¸Šå»çš„ç¡®æœ‰ä¸€ç‚¹ç‚¹å¥‡æ€ªï¼Œè®©æˆ‘ä»¬ä¸€ç‚¹ä¸€ç‚¹åœ°æ¥æ­å¼€å¥¹ç¥ç§˜çš„é¢çº±å§ã€‚\nIIFE è¯­æ³• IIFE çš„æ ¸å¿ƒæ— éå°±æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œä»Â functionÂ å…³é”®å­—å¼€å§‹ï¼Œåˆ°å³èŠ±æ‹¬å·ç»“æŸï¼š\n1 2 3 function() { // ... } ä¸è¿‡ï¼Œè¿™å¯ä¸æ˜¯ä¸€æ®µåˆæ³•çš„ JavaScript ä»£ç ã€‚å½“ parserï¼ˆè¯­æ³•åˆ†æå™¨ï¼‰çœ‹åˆ°è¿™æ®µè¯­å¥ç”±Â functionÂ å…³é”®å­—å¼€å¤´æ—¶ï¼Œå®ƒå°±ä¼šæŒ‰ç…§å‡½æ•°å£°æ˜ï¼ˆFunction Declarationï¼‰çš„æ–¹å¼å¼€å§‹è§£æäº†ã€‚å¯æ˜¯è¿™æ®µå‡½æ•°å£°æ˜å¹¶æ²¡æœ‰å£°æ˜å‡½æ•°åï¼Œä¸ç¬¦åˆè¯­æ³•è§„åˆ™ã€‚å› æ­¤è§£æå¤±è´¥ï¼Œæˆ‘ä»¬åªä¼šå¾—åˆ°ä¸€ä¸ªè¯­æ³•é”™è¯¯ã€‚\næ‰€ä»¥æˆ‘ä»¬å¾—æƒ³ä¸ªåŠæ³•è®© JavaScript å¼•æ“æŠŠå®ƒä½œä¸ºå‡½æ•°è¡¨è¾¾å¼ï¼ˆFunction Expressionï¼‰è€Œéå‡½æ•°å£°æ˜ï¼ˆFunction Declarationï¼‰æ¥è§£æã€‚å¦‚æœä½ è¿˜ä¸çŸ¥é“è¿™ä¸¤è€…çš„åŒºåˆ«ï¼Œå¯ä»¥çœ‹çœ‹åŸä½œè€…è¿™ç¯‡æœ‰å…³ JavaScript ä¸­ä¸åŒå£°æ˜å‡½æ•°æ–¹å¼å·®å¼‚ çš„æ–‡ç« ã€‚\næˆ‘ä»¬ä½¿ç”¨çš„æŠ€å·§å…¶å®éå¸¸ç®€å•ã€‚ç”¨ä¸€ä¸ªåœ†æ‹¬å·å°†å‡½æ•°åŒ…è£¹èµ·æ¥å…¶å®å°±å¯ä»¥æ¶ˆé™¤è¯­æ³•é”™è¯¯äº†ï¼Œæˆ‘ä»¬å¾—åˆ°ä»¥ä¸‹ä»£ç ï¼š\n1 2 3 (function() { // ... }); ä¸€æ—¦é­é‡åˆ°æœªé—­åˆçš„åœ†æ‹¬å·ï¼Œparser å°±ä¼šæŠŠä¸¤ä¸ªåœ†æ‹¬å·ä¹‹é—´çš„è¯­å¥ä½œä¸ºè¡¨è¾¾å¼æ¥çœ‹å¾…ã€‚ä¸å‡½æ•°å£°æ˜ç›¸æ¯”ï¼Œå‡½æ•°è¡¨è¾¾å¼å¯ä»¥æ˜¯åŒ¿åçš„ï¼Œæ‰€ä»¥ä¸Šé¢è¿™æ®µï¼ˆè¢«åœ†æ‹¬å·åŒ…ç€çš„ï¼‰å‡½æ•°è¡¨è¾¾å¼å°±æˆä¸ºäº†ä¸€æ®µåˆæ³•çš„ JavaScript ä»£ç ã€‚\nå¦‚æœä½ æƒ³ç»§ç»­äº†è§£ ECMAScript è¯­æ³•ï¼ŒParenthesizedExpression è¿™ä¸ªéƒ¨åˆ†è¢«è¯¦ç»†å™è¿°åœ¨ è§„èŒƒçš„ 12.2 èŠ‚ .\næœ€åå‰©ä¸‹çš„ï¼Œå°±æ˜¯è°ƒç”¨è¿™ä¸ªå‡½æ•°è¡¨è¾¾å¼äº†ã€‚ç›®å‰ä¸ºæ­¢ï¼Œè¿™ä¸ªå‡½æ•°è¿˜æœªè¢«æ‰§è¡Œã€‚æˆ‘ä»¬ä¹Ÿæ²¡æœ‰å°†å®ƒèµ‹å€¼ç»™ä»»ä½•å˜é‡ ï¼Œå› æ­¤æˆ‘ä»¬æ— æ³•æŒæœ‰å®ƒçš„å¼•ç”¨ä»è€Œä¹‹åèƒ½ç”¨æ¥è°ƒç”¨å®ƒã€‚æˆ‘ä»¬å°†è¦åšçš„æ˜¯åœ¨å®ƒåé¢å†åŠ ä¸Šä¸€å¯¹åœ†æ‹¬å·ï¼š\n1 2 3 (function() { // ... })(); ä¼ è¯´ä¸­çš„ IIFE å°±è¿™ä¹ˆå‡ºç°äº†ã€‚å¦‚æœä½ ç¨å¾®å›æƒ³ä¸€ä¸‹ï¼Œå°±ä¼šè§‰å¾—è¿™ä¸ªåå­—å†åˆé€‚ä¸è¿‡äº†ï¼šä¸€ä¸ªè¢«ç«‹å³è°ƒç”¨çš„å‡½æ•°è¡¨è¾¾å¼ï¼ˆimmediately invoked function expressionï¼‰\næ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ¥çœ‹å‡ ä¸ªåœ¨ä¸åŒåŸå› å‚¬ç”Ÿä¸‹çš„ IIFE å˜ç§ã€‚\nåœ†æ‹¬å·åº”è¯¥æ”¾å“ªï¼Ÿ æˆ‘ä»¬åˆšæ‰çš„åšæ³•ï¼Œæ˜¯æŠŠç”¨äºè°ƒç”¨å‡½æ•°è¡¨è¾¾å¼çš„åœ†æ‹¬å·ç›´æ¥æ”¾åœ¨ç”¨äºåŒ…è£¹çš„åœ†æ‹¬å·ä¹‹åï¼š\n1 2 3 (function() { // ... })(); ä¸è¿‡ï¼ŒDouglas Crockford ç­‰äººè§‰å¾—æ‚¬è¡åœ¨å¤–çš„åœ†æ‹¬å· å¤ªä¸ç¾è§‚äº† ï¼æ‰€ä»¥å®ƒä»¬æŠŠåœ†æ‹¬å·ç§»åˆ°äº†é‡Œé¢ï¼š\n1 2 3 (function() { // ... }()); å…¶å®ä¸¤ç§åšæ³•ä»åŠŸèƒ½è¿˜æ˜¯è¯­ä¹‰ä¸Šæ¥è¯´éƒ½å·®ä¸å¤šï¼Œæ‰€ä»¥é€‰æ‹©ä¸€ç§ä½ å–œæ¬¢çš„å¹¶åšæŒä¸‹å»å°±å¥½äº†ã€‚\nå®å IIFE è¢«åŒ…è£¹èµ·æ¥çš„å‡½æ•°å…¶å®å°±æ˜¯ä¸ªæ™®é€šçš„å‡½æ•°è¡¨è¾¾å¼ï¼Œæ‰€ä»¥ä½ ä¹Ÿå¯ä»¥ç»™å®ƒä¸ªåå­—è®©å®ƒå˜æˆ å®åçš„å‡½æ•°è¡¨è¾¾å¼ ï¼š\n1 2 3 (function iife() { // ... })(); æ³¨æ„ä½ ä»ç„¶ä¸èƒ½çœç•¥ç”¨äºåŒ…è£¹çš„æ‹¬å·ï¼Œä¸‹é¢è¿™æ®µä»£ç ä»ç„¶æ˜¯æ— æ•ˆçš„ï¼š\n1 2 3 function iife() { // ... }(); è™½ç„¶ parser ç°åœ¨å¯ä»¥æˆåŠŸåœ°æŠŠå®ƒä½œä¸ºå‡½æ•°å£°æ˜æ¥è§£æï¼Œä½†å¾ˆå¿«ï¼Œç´§è·Ÿçš„Â (Â ç¬¦å·å°±ä¼šæŠ›å‡ºè¯­æ³•é”™è¯¯äº†ã€‚ä¸å‡½æ•°è¡¨è¾¾å¼ä¸åŒï¼Œå‡½æ•°å£°æ˜å¹¶ä¸å¯ä»¥è¢«ç«‹åˆ»è°ƒç”¨ã€‚\né¿å…æ–‡ä»¶åˆå¹¶æ—¶é‡åˆ°é—®é¢˜ æœ‰æ—¶ï¼Œä½ ä¼šçœ‹åˆ° IIFE çš„å‰é¢æ”¾äº†ä¸ªåˆ†å·ï¼š\n1 2 3 ;(function() { // ... })(); è¿™ä¸ªåˆ†å·è¢«ç§°ä¸º é˜²å¾¡æ€§åˆ†å· ï¼Œç”¨äºé˜²æ­¢ä¸¤ä¸ª JavaScript æ–‡ä»¶åˆå¹¶æ—¶å¯èƒ½äº§ç”Ÿçš„é—®é¢˜ã€‚æƒ³è±¡ä¸€ä¸‹å‡è®¾ç¬¬ä¸€ä¸ªæ–‡ä»¶çš„ä»£ç æ˜¯è¿™æ ·çš„ï¼š\n1 var foo = bar å¯ä»¥çœ‹åˆ°è¿™ä¸ªå˜é‡å£°æ˜è¯­å¥å¹¶æ²¡æœ‰ä»¥åˆ†å·ç»“å°¾ã€‚å¦‚æœç¬¬äºŒä¸ª JS æ–‡ä»¶ä¸­çš„ IIFE å‰é¢æ²¡æœ‰æ”¾åˆ†å·ï¼Œåˆå¹¶çš„ç»“æœå°±ä¼šæ˜¯è¿™æ ·ï¼š\n1 2 3 4 var foo = bar (function() { // ... })(); ç¬¬ä¸€çœ¼çœ‹ä¸Šå»å¥½åƒæ˜¯ä¸€ä¸ªèµ‹å€¼æ“ä½œä¸ä¸€ä¸ª IIFEã€‚å¯æ˜¯äº‹ä¸æ„¿è¿ï¼Œæˆ‘ä»¬æŠŠÂ barÂ åé¢çš„æ¢è¡Œå»æ‰å°±èƒ½çœ‹æ¸…æ¥šäº†ï¼šÂ barÂ ä¼šè¢«å½“ä½œä¸€ä¸ªæ¥å—å‡½æ•°ç±»å‹å‚æ•°çš„å‡½æ•°\n1 2 3 var foo = bar(function() { // ... })(); è€Œé˜²å¾¡æ€§åˆ†å·å°±å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼š\n1 2 3 4 var foo = bar; (function() { // ... })(); å°±ç®—è¿™ä¸ªåˆ†å·å‰é¢ä»€ä¹ˆä»£ç ä¹Ÿæ²¡æœ‰ï¼Œåœ¨è¯­æ³•ä¸Šå…¶å®è¿™ä¹Ÿæ˜¯æ­£ç¡®çš„ï¼šå®ƒä¼šè¢«å½“åšä¸€ä¸ªç©ºå£°æ˜ï¼ˆempty statementï¼‰ï¼Œæ— ä¼¤å¤§é›…ã€‚\nJavaScript è‡ªåŠ¨æ·»åŠ åˆ†å· çš„ç‰¹æ€§å¾ˆå®¹æ˜“è®©æ„æƒ³ä¸åˆ°çš„é”™è¯¯å‘ç”Ÿã€‚æˆ‘å»ºè®®ä½ æ°¸è¿œæ˜¾å¼åœ°å†™å¥½åˆ†å·ï¼Œä»¥é˜²è§£é‡Šå™¨è‡ªå·±æ·»åŠ ã€‚\nç”¨ç®­å¤´å‡½æ•°ä»£æ›¿å‡½æ•°è¡¨è¾¾å¼ éšç€ ECMAScript 2015 çš„åˆ°æ¥ï¼ŒJavaScript çš„å‡½æ•°å£°æ˜æ–¹å¼ä¸­åˆå¤šäº†ä¸€ä¸ªç®­å¤´å‡½æ•°ï¼ˆArrow Functionï¼‰ã€‚ç®­å¤´å‡½æ•°ä¸å‡½æ•°è¡¨è¾¾å¼åŒå±äºè¡¨è¾¾å¼è€Œéå£°æ˜è¯­å¥ã€‚æ‰€ä»¥æˆ‘ä»¬åŒæ ·å¯ä»¥ç”¨å®ƒæ¥åˆ›é€  IIFEï¼š\n1 2 3 (() =\u0026gt; { // ... })(); ä¸è¿‡æˆ‘å¹¶ä¸å»ºè®®ä½ è¿™ä¹ˆåšï¼›æˆ‘è§‰å¾—ä¼ ç»Ÿçš„Â functionÂ å…³é”®å­—å†™æ³•çš„å¯è¯»æ€§è¦å¥½å¾—å¤šã€‚\nå‚è€ƒé“¾æ¥ åŸæ–‡åœ°å€ ","date":"2022-11-06T09:23:33+08:00","image":"https://ibakuman.github.io/gallery/landscape/12_hudcb57a36f165de723463bb2c9342c95a_1835608_120x120_fill_q75_box_smart1.jpg","permalink":"https://ibakuman.github.io/posts/javascript/demystifying-iife-syntax/","title":"æ­ç§˜ IIFE è¯­æ³•"},{"content":"æ­å»ºåŸºæœ¬ç»“æ„ é¡¹ç›®æ–‡ä»¶ç»“æ„\n1 2 3 4 5 6 . â””â”€â”€ custom â”œâ”€â”€ main.js â”œâ”€â”€ package.json â””â”€â”€ src â””â”€â”€ promise.js promise.js\n1 2 3 4 5 6 7 export function Promise(executor) { } Promise.prototype.then = function (onResolved, onRejected) { } main.js\n1 2 3 4 5 6 7 import {Promise} from \u0026#34;./src/promise.js\u0026#34;; let p = new Promise((resolve, reject) =\u0026gt; { resolve(\u0026#39;OK\u0026#39;) }) p.then(value =\u0026gt; console.log(value), reason =\u0026gt; console.log(reason)) package.json\n1 2 3 4 5 6 7 8 9 10 11 12 { \u0026#34;name\u0026#34;: \u0026#34;custom\u0026#34;, \u0026#34;version\u0026#34;: \u0026#34;1.0.0\u0026#34;, \u0026#34;description\u0026#34;: \u0026#34;\u0026#34;, \u0026#34;main\u0026#34;: \u0026#34;main.js\u0026#34;, \u0026#34;scripts\u0026#34;: { \u0026#34;test\u0026#34;: \u0026#34;echo \\\u0026#34;Error: no test specified\\\u0026#34; \u0026amp;\u0026amp; exit 1\u0026#34; }, \u0026#34;author\u0026#34;: \u0026#34;\u0026#34;, \u0026#34;license\u0026#34;: \u0026#34;ISC\u0026#34;, \u0026#34;type\u0026#34;: \u0026#34;module\u0026#34; } åˆæ­¥å®ç° resolve å’Œ reject promise.js\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 export function Promise(executor) { this.PromiseState = \u0026#39;pending\u0026#39; this.PromiseResult = null const self = this function resolve(data) { // 1. ä¿®æ”¹å¯¹è±¡çš„çŠ¶æ€ self.PromiseState = \u0026#39;fulfilled\u0026#39; // 2. è®¾ç½®å¯¹è±¡ç»“æœå€¼ self.PromiseResult = data } function reject(data) { self.PromiseState = \u0026#39;rejected\u0026#39; self.PromiseResult = data } // åŒæ­¥è°ƒç”¨æ‰§è¡Œå™¨ executor(resolve, reject) } Promise.prototype.then = function (onResolved, onRejected) { } å¤„ç†æ‰§è¡Œå™¨æ‰§è¡Œäº§ç”Ÿçš„å¼‚å¸¸ promise.js\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 export function Promise(executor) { this.PromiseState = \u0026#39;pending\u0026#39; this.PromiseResult = null const self = this function resolve(data) { // 1. ä¿®æ”¹å¯¹è±¡çš„çŠ¶æ€ self.PromiseState = \u0026#39;fulfilled\u0026#39; // 2. è®¾ç½®å¯¹è±¡ç»“æœå€¼ self.PromiseResult = data } function reject(data) { self.PromiseState = \u0026#39;rejected\u0026#39; self.PromiseResult = data } // åŒæ­¥è°ƒç”¨æ‰§è¡Œå™¨ try { executor(resolve, reject) } catch (e) { reject(e) } } Promise.prototype.then = function (onResolved, onRejected) { } main.js\n1 2 3 4 5 6 7 import {Promise} from \u0026#34;./src/promise.js\u0026#34;; let p = new Promise((resolve, reject) =\u0026gt; { throw \u0026#39;error\u0026#39; }) p.then(value =\u0026gt; console.log(value), reason =\u0026gt; console.log(reason)) é™åˆ¶çŠ¶æ€åªèƒ½ä¿®æ”¹ä¸€æ¬¡ promise.js\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 export function Promise(executor) { this.PromiseState = \u0026#39;pending\u0026#39; this.PromiseResult = null const self = this function resolve(data) { if (self.PromiseState !== \u0026#39;pending\u0026#39;) return // 1. ä¿®æ”¹å¯¹è±¡çš„çŠ¶æ€ self.PromiseState = \u0026#39;fulfilled\u0026#39; // 2. è®¾ç½®å¯¹è±¡ç»“æœå€¼ self.PromiseResult = data } function reject(data) { if (self.PromiseState !== \u0026#39;pending\u0026#39;) return self.PromiseState = \u0026#39;rejected\u0026#39; self.PromiseResult = data } // åŒæ­¥è°ƒç”¨æ‰§è¡Œå™¨ try { executor(resolve, reject) } catch (e) { reject(e) } } Promise.prototype.then = function (onResolved, onRejected) { } åŒæ­¥æ‰§è¡Œå•ä¸ªå›è°ƒ promise.js\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 export function Promise(executor) { this.PromiseState = \u0026#39;pending\u0026#39; this.PromiseResult = null const self = this function resolve(data) { if (self.PromiseState !== \u0026#39;pending\u0026#39;) return // 1. ä¿®æ”¹å¯¹è±¡çš„çŠ¶æ€ self.PromiseState = \u0026#39;fulfilled\u0026#39; // 2. è®¾ç½®å¯¹è±¡ç»“æœå€¼ self.PromiseResult = data } function reject(data) { if (self.PromiseState !== \u0026#39;pending\u0026#39;) return self.PromiseState = \u0026#39;rejected\u0026#39; self.PromiseResult = data } // åŒæ­¥è°ƒç”¨æ‰§è¡Œå™¨ try { executor(resolve, reject) } catch (e) { reject(e) } } Promise.prototype.then = function (onResolved, onRejected) { if (this.PromiseState === \u0026#39;fulfilled\u0026#39;) { onResolved(this.PromiseResult) } if (this.PromiseState === \u0026#39;rejected\u0026#39;) { onRejected(this.PromiseResult) } } main.js\n1 2 3 4 5 6 7 8 9 10 11 import {Promise} from \u0026#34;./src/promise.js\u0026#34;; let p = new Promise((resolve, reject) =\u0026gt; { resolve(\u0026#39;OK\u0026#39;) }) p.then(value =\u0026gt; { console.log(\u0026#39;success, msg: \u0026#39;, value) }, reason =\u0026gt; { console.log(\u0026#39;error, msg: \u0026#39;, reason) }) å¼‚æ­¥æ‰§è¡Œå•ä¸ªå›è°ƒ promise.js\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 export function Promise(executor) { this.PromiseState = \u0026#39;pending\u0026#39; this.PromiseResult = null // ä¿å­˜å›è°ƒå‡½æ•° this.callback = {} const self = this function resolve(data) { if (self.PromiseState !== \u0026#39;pending\u0026#39;) return // 1. ä¿®æ”¹å¯¹è±¡çš„çŠ¶æ€ self.PromiseState = \u0026#39;fulfilled\u0026#39; // 2. è®¾ç½®å¯¹è±¡ç»“æœå€¼ self.PromiseResult = data // æ‰§è¡ŒæˆåŠŸçš„å›è°ƒ if (self.callback.onResolved) { self.callback.onResolved(data) } } function reject(data) { if (self.PromiseState !== \u0026#39;pending\u0026#39;) return self.PromiseState = \u0026#39;rejected\u0026#39; self.PromiseResult = data // æ‰§è¡Œå¤±è´¥çš„å›è°ƒ if (self.callback.onRejected) { self.callback.onRejected(data) } } // åŒæ­¥è°ƒç”¨æ‰§è¡Œå™¨ try { executor(resolve, reject) } catch (e) { reject(e) } } Promise.prototype.then = function (onResolved, onRejected) { if (this.PromiseState === \u0026#39;fulfilled\u0026#39;) { onResolved(this.PromiseResult) } else if (this.PromiseState === \u0026#39;rejected\u0026#39;) { onRejected(this.PromiseResult) } else if (this.PromiseState === \u0026#39;pending\u0026#39;) { // ä¿å­˜å›è°ƒå‡½æ•° -------------------- important this.callback = { onResolved: onResolved, onRejected: onRejected } } } main.js\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 import {Promise} from \u0026#34;./src/promise.js\u0026#34;; let p = new Promise((resolve, reject) =\u0026gt; { setTimeout(() =\u0026gt; { console.log(\u0026#39;success\u0026#39;) resolve(\u0026#39;OK\u0026#39;) }, 1000) }) p.then(value =\u0026gt; { console.log(\u0026#39;success, msg: \u0026#39;, value) }, reason =\u0026gt; { console.log(\u0026#39;error, msg: \u0026#39;, reason) }) å¼‚æ­¥æ‰§è¡Œå¤šä¸ªå›è°ƒ promise.js\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 export function Promise(executor) { this.PromiseState = \u0026#39;pending\u0026#39; this.PromiseResult = null // ä¿å­˜å›è°ƒå‡½æ•° this.callbacks = [] const self = this function resolve(data) { if (self.PromiseState !== \u0026#39;pending\u0026#39;) return // 1. ä¿®æ”¹å¯¹è±¡çš„çŠ¶æ€ self.PromiseState = \u0026#39;fulfilled\u0026#39; // 2. è®¾ç½®å¯¹è±¡ç»“æœå€¼ self.PromiseResult = data // æ‰§è¡ŒæˆåŠŸçš„å›è°ƒ self.callbacks.forEach(item =\u0026gt; item.onResolved(data)) } function reject(data) { if (self.PromiseState !== \u0026#39;pending\u0026#39;) return self.PromiseState = \u0026#39;rejected\u0026#39; self.PromiseResult = data // æ‰§è¡Œå¤±è´¥çš„å›è°ƒ self.callbacks.forEach(item =\u0026gt; item.onRejected(data)) } // åŒæ­¥è°ƒç”¨æ‰§è¡Œå™¨ try { executor(resolve, reject) } catch (e) { reject(e) } } Promise.prototype.then = function (onResolved, onRejected) { if (this.PromiseState === \u0026#39;fulfilled\u0026#39;) { onResolved(this.PromiseResult) } else if (this.PromiseState === \u0026#39;rejected\u0026#39;) { onRejected(this.PromiseResult) } else if (this.PromiseState === \u0026#39;pending\u0026#39;) { // ä¿å­˜å›è°ƒå‡½æ•° -------------------- important this.callbacks.push({ onResolved: onResolved, onRejected: onRejected }) } } main.js\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 import {Promise} from \u0026#34;./src/promise.js\u0026#34;; let p = new Promise((resolve, reject) =\u0026gt; { setTimeout(() =\u0026gt; { console.log(\u0026#39;success\u0026#39;) resolve(\u0026#39;OK\u0026#39;) }, 1000) }) p.then(value =\u0026gt; { console.log(\u0026#39;success, msg: \u0026#39;, value) }, reason =\u0026gt; { console.log(\u0026#39;error, msg: \u0026#39;, reason) }) p.then(value =\u0026gt; { console.log(\u0026#39;success2, msg: \u0026#39;, value) }, reason =\u0026gt; { console.log(\u0026#39;error, msg: \u0026#39;, reason) }) åŒæ­¥çŠ¶æ€ä¸‹ then æ–¹æ³•è¿”å› Promise å¯¹è±¡ promise.js\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 export function Promise(executor) { this.PromiseState = \u0026#39;pending\u0026#39; this.PromiseResult = null // ä¿å­˜å›è°ƒå‡½æ•° this.callbacks = [] const self = this function resolve(data) { if (self.PromiseState !== \u0026#39;pending\u0026#39;) return // 1. ä¿®æ”¹å¯¹è±¡çš„çŠ¶æ€ self.PromiseState = \u0026#39;fulfilled\u0026#39; // 2. è®¾ç½®å¯¹è±¡ç»“æœå€¼ self.PromiseResult = data // æ‰§è¡ŒæˆåŠŸçš„å›è°ƒ self.callbacks.forEach(item =\u0026gt; item.onResolved(data)) } function reject(data) { if (self.PromiseState !== \u0026#39;pending\u0026#39;) return self.PromiseState = \u0026#39;rejected\u0026#39; self.PromiseResult = data // æ‰§è¡Œå¤±è´¥çš„å›è°ƒ self.callbacks.forEach(item =\u0026gt; item.onRejected(data)) } // åŒæ­¥è°ƒç”¨æ‰§è¡Œå™¨ try { executor(resolve, reject) } catch (e) { reject(e) } } Promise.prototype.then = function (onResolved, onRejected) { return new Promise((resolve, reject) =\u0026gt; { if (this.PromiseState === \u0026#39;fulfilled\u0026#39;) { // å¤„ç† onResolved æ‰§è¡Œå‡ºç°å¼‚å¸¸çš„æƒ…å†µ try { let result = onResolved(this.PromiseResult) if (result instanceof Promise) { result.then(v =\u0026gt; { resolve(v) }, r =\u0026gt; { reject(r) }) } else { resolve(result) } } catch (e) { reject(e) } } else if (this.PromiseState === \u0026#39;rejected\u0026#39;) { onRejected(this.PromiseResult) } else if (this.PromiseState === \u0026#39;pending\u0026#39;) { // ä¿å­˜å›è°ƒå‡½æ•° -------------------- important this.callbacks.push({ onResolved: onResolved, onRejected: onRejected }) } }) } main.js\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 import {Promise} from \u0026#34;./src/promise.js\u0026#34;; let p = new Promise((resolve, reject) =\u0026gt; { resolve(\u0026#39;OK\u0026#39;) }) let result = p.then(value =\u0026gt; { return new Promise((resolve, reject) =\u0026gt; { resolve(\u0026#39;success in new Promise\u0026#39;) }) }, reason =\u0026gt; { console.log(\u0026#39;error, msg: \u0026#39;, reason) }).then(value =\u0026gt; { console.log(value) }) console.dir(result) å¼‚æ­¥çŠ¶æ€ä¸‹ then æ–¹æ³•è¿”å› Promise å¯¹è±¡ promise.js\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 export function Promise(executor) { this.PromiseState = \u0026#39;pending\u0026#39; this.PromiseResult = null // ä¿å­˜å›è°ƒå‡½æ•° this.callbacks = [] const self = this function resolve(data) { if (self.PromiseState !== \u0026#39;pending\u0026#39;) return // 1. ä¿®æ”¹å¯¹è±¡çš„çŠ¶æ€ self.PromiseState = \u0026#39;fulfilled\u0026#39; // 2. è®¾ç½®å¯¹è±¡ç»“æœå€¼ self.PromiseResult = data // æ‰§è¡ŒæˆåŠŸçš„å›è°ƒ self.callbacks.forEach(item =\u0026gt; item.onResolved(data)) } function reject(data) { if (self.PromiseState !== \u0026#39;pending\u0026#39;) return self.PromiseState = \u0026#39;rejected\u0026#39; self.PromiseResult = data // æ‰§è¡Œå¤±è´¥çš„å›è°ƒ self.callbacks.forEach(item =\u0026gt; item.onRejected(data)) } // åŒæ­¥è°ƒç”¨æ‰§è¡Œå™¨ try { executor(resolve, reject) } catch (e) { reject(e) } } Promise.prototype.then = function (onResolved, onRejected) { const self = this return new Promise((resolve, reject) =\u0026gt; { if (this.PromiseState === \u0026#39;fulfilled\u0026#39;) { // å¤„ç† onResolved æ‰§è¡Œå‡ºç°å¼‚å¸¸çš„æƒ…å†µ try { let result = onResolved(this.PromiseResult) if (result instanceof Promise) { result.then(v =\u0026gt; { resolve(v) }, r =\u0026gt; { reject(r) }) } else { resolve(result) } } catch (e) { reject(e) } } else if (this.PromiseState === \u0026#39;rejected\u0026#39;) { onRejected(this.PromiseResult) } else if (this.PromiseState === \u0026#39;pending\u0026#39;) { // ä¿å­˜å›è°ƒå‡½æ•° -------------------- important this.callbacks.push({ onResolved: function () { try { let result = onResolved(self.PromiseResult) if (result instanceof Promise) { result.then(v =\u0026gt; { resolve(v) }, r =\u0026gt; { reject(r) }) } else { resolve(result) } } catch (e) { reject(e) } }, onRejected: function () { try { let result = onRejected(self.PromiseResult) if (result instanceof Promise) { result.then(v =\u0026gt; { resolve(v) }, r =\u0026gt; { reject(r) }) } else { resolve(result) } } catch (e) { reject(e) } } }) } }) } main.js\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 import {Promise} from \u0026#34;./src/promise.js\u0026#34;; let p = new Promise((resolve, reject) =\u0026gt; { setTimeout(() =\u0026gt; { resolve(\u0026#39;OK\u0026#39;) }, 1000) }) let result = p.then(value =\u0026gt; { throw \u0026#39;ERROR-1\u0026#39; }, reason =\u0026gt; { console.log(\u0026#39;LEVEL1-ERROR\u0026#39;) }) console.log(\u0026#39;immediate: \u0026#39;, result) setTimeout(() =\u0026gt; { console.log(\u0026#39;timer: \u0026#39;, result) }, 2000) Output\n1 2 3 4 5 6 immediate: Promise { PromiseState: \u0026#39;pending\u0026#39;, PromiseResult: null, callbacks: [] } timer: Promise { PromiseState: \u0026#39;rejected\u0026#39;, PromiseResult: \u0026#39;ERROR-1\u0026#39;, callbacks: [] } å¤„ç†æ‰§è¡Œ then æ–¹æ³•å‰ Promise çŠ¶æ€å˜ä¸º rejected çš„æƒ…å†µ ä¿®æ”¹å‰ main.js\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 import {Promise} from \u0026#34;./src/promise.js\u0026#34;; let p = new Promise((resolve, reject) =\u0026gt; { // setTimeout(() =\u0026gt; { reject(\u0026#39;ERROR\u0026#39;) // }, 1000) }) let result = p.then(value =\u0026gt; { throw \u0026#39;ERROR-1\u0026#39; }, reason =\u0026gt; { console.log(\u0026#39;LEVEL1-ERROR\u0026#39;) }).then(value =\u0026gt; { console.log(\u0026#39;aa\u0026#39;) }, reason =\u0026gt; { console.log(\u0026#39;bb\u0026#39;) }) console.log(\u0026#39;immediate: \u0026#39;, result) setTimeout(() =\u0026gt; { console.log(\u0026#39;timer: \u0026#39;, result) }, 2000) Output\n1 2 3 LEVEL1-ERROR immediate: Promise { PromiseState: \u0026#39;pending\u0026#39;, PromiseResult: null, callbacks: [] } timer: Promise { PromiseState: \u0026#39;pending\u0026#39;, PromiseResult: null, callbacks: [] } ä»ä¸Šé¢ä»£ç çš„æ‰§è¡Œç»“æœå¯ä»¥çœ‹å‡ºï¼Œæ­¤æ—¶æ²¡æœ‰è¾“å‡º aa ä¹Ÿæ²¡æœ‰è¾“å‡º bbã€‚ä¸»è¦åŸå› æ˜¯å½“ then æ–¹æ³•æ‰§è¡Œå‰ Promise çš„çŠ¶æ€å˜ä¸º rejectedï¼Œæ­¤æ—¶æ‰§è¡Œ this.PromiseState === 'rejcted' é‡Œé¢çš„ä»£ç ï¼Œä½†æ˜¯è¿™äº›ä»£ç æ²¡æœ‰æ”¹å˜è¿”å›çš„æ–° Promise å®ä¾‹çš„çŠ¶æ€ï¼Œå¯¼è‡´è¢«å­˜åœ¨æ–° Promise å®ä¾‹ä¸­çš„å›è°ƒå‡½æ•°ï¼ˆè¾“å‡º aa çš„æˆåŠŸå›è°ƒå’Œè¾“å‡º bb çš„å¤±è´¥å›è°ƒï¼‰ä¸€ç›´æ²¡æœ‰è¢«æ‰§è¡Œã€‚\nä¿®æ”¹å promise.js\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 export function Promise(executor) { this.PromiseState = \u0026#39;pending\u0026#39; this.PromiseResult = null // ä¿å­˜å›è°ƒå‡½æ•° this.callbacks = [] const self = this function resolve(data) { if (self.PromiseState !== \u0026#39;pending\u0026#39;) return // 1. ä¿®æ”¹å¯¹è±¡çš„çŠ¶æ€ self.PromiseState = \u0026#39;fulfilled\u0026#39; // 2. è®¾ç½®å¯¹è±¡ç»“æœå€¼ self.PromiseResult = data // æ‰§è¡ŒæˆåŠŸçš„å›è°ƒ self.callbacks.forEach(item =\u0026gt; item.onResolved(data)) } function reject(data) { if (self.PromiseState !== \u0026#39;pending\u0026#39;) return self.PromiseState = \u0026#39;rejected\u0026#39; self.PromiseResult = data // æ‰§è¡Œå¤±è´¥çš„å›è°ƒ self.callbacks.forEach(item =\u0026gt; item.onRejected(data)) } // åŒæ­¥è°ƒç”¨æ‰§è¡Œå™¨ try { executor(resolve, reject) } catch (e) { reject(e) } } Promise.prototype.then = function (onResolved, onRejected) { const self = this return new Promise((resolve, reject) =\u0026gt; { if (this.PromiseState === \u0026#39;fulfilled\u0026#39;) { // å¤„ç† onResolved æ‰§è¡Œå‡ºç°å¼‚å¸¸çš„æƒ…å†µ try { let result = onResolved(this.PromiseResult) if (result instanceof Promise) { result.then(v =\u0026gt; { resolve(v) }, r =\u0026gt; { reject(r) }) } else { resolve(result) } } catch (e) { reject(e) } } else if (this.PromiseState === \u0026#39;rejected\u0026#39;) { try { let result = onRejected(this.PromiseResult) if (result instanceof Promise) { result.then(v =\u0026gt; { resolve(v) }, r =\u0026gt; { reject(r) }) } else { resolve(result) } } catch (e) { reject(e) } } else if (this.PromiseState === \u0026#39;pending\u0026#39;) { // ä¿å­˜å›è°ƒå‡½æ•° -------------------- important this.callbacks.push({ onResolved: function () { try { let result = onResolved(self.PromiseResult) if (result instanceof Promise) { result.then(v =\u0026gt; { resolve(v) }, r =\u0026gt; { reject(r) }) } else { resolve(result) } } catch (e) { reject(e) } }, onRejected: function () { try { let result = onRejected(self.PromiseResult) if (result instanceof Promise) { result.then(v =\u0026gt; { resolve(v) }, r =\u0026gt; { reject(r) }) } else { resolve(result) } } catch (e) { reject(e) } } }) } }) } main.js\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 import {Promise} from \u0026#34;./src/promise.js\u0026#34;; let p = new Promise((resolve, reject) =\u0026gt; { // setTimeout(() =\u0026gt; { reject(\u0026#39;ERROR\u0026#39;) // }, 1000) }) let result = p.then(value =\u0026gt; { throw \u0026#39;ERROR-1\u0026#39; }, reason =\u0026gt; { console.log(\u0026#39;LEVEL1-ERROR\u0026#39;) }).then(value =\u0026gt; { console.log(\u0026#39;aa\u0026#39;) }, reason =\u0026gt; { console.log(\u0026#39;bb\u0026#39;) }) console.log(\u0026#39;immediate: \u0026#39;, result) setTimeout(() =\u0026gt; { console.log(\u0026#39;timer: \u0026#39;, result) }, 2000) Output\n1 2 3 4 5 6 7 8 9 10 11 12 LEVEL1-ERROR aa immediate: Promise { PromiseState: \u0026#39;fulfilled\u0026#39;, PromiseResult: undefined, callbacks: [] } timer: Promise { PromiseState: \u0026#39;fulfilled\u0026#39;, PromiseResult: undefined, callbacks: [] } ä»£ç é‡æ„ ä¼˜åŒ–å‰ then æ–¹æ³•ä¸­å¤šæ¬¡ä½¿ç”¨åˆ°ç±»ä¼¼å¦‚ä¸‹çš„ä»£ç ï¼Œåªæœ‰ä¸€å¤„è°ƒç”¨çš„å‡½æ•°ä¸åŒï¼ˆä¸‹é¢çš„ä»£ç ä¸­è°ƒç”¨çš„æ˜¯ onRejectedï¼‰ï¼Œå°†è¯¥ä»£ç å°è£…åˆ°ä¸€ä¸ªå•ç‹¬çš„å‡½æ•°ï¼Œæœ‰åˆ©äºåæœŸç»´æŠ¤ã€å¢åŠ å¯è¯»æ€§ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 try { let result = onRejected(this.PromiseResult) if (result instanceof Promise) { result.then(v =\u0026gt; { resolve(v) }, r =\u0026gt; { reject(r) }) } else { resolve(result) } } catch (e) { reject(e) } ä¼˜åŒ–å promise.js\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 export function Promise(executor) { this.PromiseState = \u0026#39;pending\u0026#39; this.PromiseResult = null // ä¿å­˜å›è°ƒå‡½æ•° this.callbacks = [] const self = this function resolve(data) { if (self.PromiseState !== \u0026#39;pending\u0026#39;) return // 1. ä¿®æ”¹å¯¹è±¡çš„çŠ¶æ€ self.PromiseState = \u0026#39;fulfilled\u0026#39; // 2. è®¾ç½®å¯¹è±¡ç»“æœå€¼ self.PromiseResult = data // æ‰§è¡ŒæˆåŠŸçš„å›è°ƒ self.callbacks.forEach(item =\u0026gt; item.onResolved(data)) } function reject(data) { if (self.PromiseState !== \u0026#39;pending\u0026#39;) return self.PromiseState = \u0026#39;rejected\u0026#39; self.PromiseResult = data // æ‰§è¡Œå¤±è´¥çš„å›è°ƒ self.callbacks.forEach(item =\u0026gt; item.onRejected(data)) } // åŒæ­¥è°ƒç”¨æ‰§è¡Œå™¨ try { executor(resolve, reject) } catch (e) { reject(e) } } Promise.prototype.then = function (onResolved, onRejected) { const self = this return new Promise((resolve, reject) =\u0026gt; { function handler(callback) { try { let result = callback(self.PromiseResult) if (result instanceof Promise) { result.then(v =\u0026gt; { resolve(v) }, r =\u0026gt; { reject(r) }) } else { resolve(result) } } catch (e) { reject(e) } } if (this.PromiseState === \u0026#39;fulfilled\u0026#39;) { // å¤„ç† onResolved æ‰§è¡Œå‡ºç°å¼‚å¸¸çš„æƒ…å†µ handler(onResolved) } else if (this.PromiseState === \u0026#39;rejected\u0026#39;) { handler(onRejected) } else if (this.PromiseState === \u0026#39;pending\u0026#39;) { // ä¿å­˜å›è°ƒå‡½æ•° -------------------- important this.callbacks.push({ onResolved: function () { handler(onResolved) }, onRejected: function () { handler(onRejected) } }) } }) } main.js\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 import {Promise} from \u0026#34;./src/promise.js\u0026#34;; let p = new Promise((resolve, reject) =\u0026gt; { setTimeout(() =\u0026gt; { resolve(\u0026#39;OK\u0026#39;) }, 1000) }) let result = p.then(() =\u0026gt; { return new Promise((resolve, reject) =\u0026gt; { setTimeout(() =\u0026gt; { reject(\u0026#39;ERROR\u0026#39;) }) }, 1000) }, () =\u0026gt; { }).then(() =\u0026gt; { console.log(\u0026#39;SUCCESS\u0026#39;) }, () =\u0026gt; { console.log(\u0026#39;FAILED\u0026#39;) }) console.log(\u0026#39;immediate: \u0026#39;, result) setTimeout(() =\u0026gt; { console.log(\u0026#39;timer: \u0026#39;, result) }, 2000) Output\n1 2 3 4 5 6 7 immediate: Promise { PromiseState: \u0026#39;pending\u0026#39;, PromiseResult: null, callbacks: [] } FAILED timer: Promise { PromiseState: \u0026#39;fulfilled\u0026#39;, PromiseResult: undefined, callbacks: [] } catch æ–¹æ³•ã€å¼‚å¸¸ç©¿é€ã€å€¼ä¼ é€’ promise.js\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 export function Promise(executor) { this.PromiseState = \u0026#39;pending\u0026#39; this.PromiseResult = null // ä¿å­˜å›è°ƒå‡½æ•° this.callbacks = [] const self = this function resolve(data) { if (self.PromiseState !== \u0026#39;pending\u0026#39;) return // 1. ä¿®æ”¹å¯¹è±¡çš„çŠ¶æ€ self.PromiseState = \u0026#39;fulfilled\u0026#39; // 2. è®¾ç½®å¯¹è±¡ç»“æœå€¼ self.PromiseResult = data // æ‰§è¡ŒæˆåŠŸçš„å›è°ƒ self.callbacks.forEach(item =\u0026gt; item.onResolved(data)) } function reject(data) { if (self.PromiseState !== \u0026#39;pending\u0026#39;) return self.PromiseState = \u0026#39;rejected\u0026#39; self.PromiseResult = data // æ‰§è¡Œå¤±è´¥çš„å›è°ƒ self.callbacks.forEach(item =\u0026gt; item.onRejected(data)) } // åŒæ­¥è°ƒç”¨æ‰§è¡Œå™¨ try { executor(resolve, reject) } catch (e) { reject(e) } } Promise.prototype.then = function (onResolved, onRejected) { if (typeof onResolved !== \u0026#39;function\u0026#39;) { // å®ç°å€¼ä¼ é€’çš„å…³é”®æ­¥éª¤ onResolved = value =\u0026gt; value } if (typeof onRejected !== \u0026#39;function\u0026#39;) { // error: ç”±äº throw reason æ²¡æœ‰è¿”å›å€¼ï¼Œæ•…ä¸èƒ½çœç•¥å¤§æ‹¬å· // onRejected = reason =\u0026gt; throw reason // å®ç°å¼‚å¸¸ç©¿é€çš„å…³é”®æ­¥éª¤ onRejected = reason =\u0026gt; { throw reason } } const self = this return new Promise((resolve, reject) =\u0026gt; { function handler(callback) { try { let result = callback(self.PromiseResult) if (result instanceof Promise) { result.then(v =\u0026gt; { resolve(v) }, r =\u0026gt; { reject(r) }) } else { resolve(result) } } catch (e) { reject(e) } } if (this.PromiseState === \u0026#39;fulfilled\u0026#39;) { // å¤„ç† onResolved æ‰§è¡Œå‡ºç°å¼‚å¸¸çš„æƒ…å†µ handler(onResolved) } else if (this.PromiseState === \u0026#39;rejected\u0026#39;) { handler(onRejected) } else if (this.PromiseState === \u0026#39;pending\u0026#39;) { // ä¿å­˜å›è°ƒå‡½æ•° -------------------- important this.callbacks.push({ onResolved: function () { handler(onResolved) }, onRejected: function () { handler(onRejected) } }) } }) } Promise.prototype.catch = function (onRejected) { return this.then(undefined, onRejected) } main.js\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 import {Promise} from \u0026#34;./src/promise.js\u0026#34;; let p = new Promise((resolve, reject) =\u0026gt; { setTimeout(() =\u0026gt; { // resolve(\u0026#39;OK\u0026#39;) reject(\u0026#39;ERROR\u0026#39;) }, 1000) }) let result = p.then(() =\u0026gt; console.log(1)) .then(() =\u0026gt; console.log(2)) .then(() =\u0026gt; console.log(3)) .catch(reason =\u0026gt; { console.log(reason) // å¼‚å¸¸ç©¿é€ }) .then(() =\u0026gt; 23) // å€¼ä¼ é€’ .then() .then(value =\u0026gt; { console.log(value) }) console.log(\u0026#39;immediate: \u0026#39;, result) setTimeout(() =\u0026gt; { console.log(\u0026#39;timer: \u0026#39;, result) }, 2000) Output\n1 2 3 4 5 6 7 8 immediate: Promise { PromiseState: \u0026#39;pending\u0026#39;, PromiseResult: null, callbacks: [] } ERROR 23 timer: Promise { PromiseState: \u0026#39;fulfilled\u0026#39;, PromiseResult: undefined, callbacks: [] } å®ç° Promise.resolve() åœ¨ promise.js ä¸­æ·»åŠ å¦‚ä¸‹ä»£ç \n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 Promise.resolve = function (value) { return new Promise((resolve, reject) =\u0026gt; { if (value instanceof Promise) { value.then( v =\u0026gt; { resolve(v) }, r =\u0026gt; { reject(r) }) } else { resolve(value) } }) } main.js\n1 2 3 4 5 6 7 8 9 10 11 12 import {Promise} from \u0026#34;./src/promise.js\u0026#34;; let result = Promise.resolve(new Promise((resolve, reject) =\u0026gt; { setTimeout(() =\u0026gt; { reject(\u0026#39;ERROR\u0026#39;) }, 1000) })) console.log(\u0026#39;immediate: \u0026#39;, result) setTimeout(() =\u0026gt; { console.log(\u0026#39;timer: \u0026#39;, result) }, 2000) Output\n1 2 3 4 5 6 immediate: Promise { PromiseState: \u0026#39;pending\u0026#39;, PromiseResult: null, callbacks: [] } timer: Promise { PromiseState: \u0026#39;rejected\u0026#39;, PromiseResult: \u0026#39;ERROR\u0026#39;, callbacks: [] } å®ç° Promise.reject() åœ¨ promise.js ä¸­æ·»åŠ å¦‚ä¸‹ä»£ç \n1 2 3 4 5 Promise.reject = function (reason) { return new Promise((resolve, reject) =\u0026gt; { reject(reason) }) } main.js\n1 2 3 4 5 6 7 8 9 10 11 12 import {Promise} from \u0026#34;./src/promise.js\u0026#34;; let result = Promise.reject(new Promise((resolve, reject) =\u0026gt; { setTimeout(() =\u0026gt; { resolve(\u0026#39;OK\u0026#39;) }, 1000) })) console.log(\u0026#39;immediate: \u0026#39;, result) setTimeout(() =\u0026gt; { console.log(\u0026#39;timer: \u0026#39;, result) }, 2000) Output\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 immediate: Promise { PromiseState: \u0026#39;rejected\u0026#39;, PromiseResult: Promise { PromiseState: \u0026#39;pending\u0026#39;, PromiseResult: null, callbacks: [] }, callbacks: [] } timer: Promise { PromiseState: \u0026#39;rejected\u0026#39;, PromiseResult: Promise { PromiseState: \u0026#39;fulfilled\u0026#39;, PromiseResult: \u0026#39;OK\u0026#39;, callbacks: [] }, callbacks: [] } å®ç° Promise.all() åœ¨ promise.js ä¸­æ·»åŠ å¦‚ä¸‹ä»£ç \n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 Promise.all = function (promises) { return new Promise((resolve, reject) =\u0026gt; { let count = 0 // æˆåŠŸæ‰§è¡Œçš„ promise çš„æ•°ç›® let resultArr = [] // ç»“æœæ•°ç»„ for (let i = 0; i \u0026lt; promises.length; ++i) { promises[i].then( v =\u0026gt; { ++count // æ³¨æ„ä¸è¦ä½¿ç”¨ resultArr.push(v)ï¼Œè¿™å¯èƒ½å¯¼è‡´ç»“æœä¹±åº resultArr[i] = v if (count === promises.length) { resolve(resultArr) } }, r =\u0026gt; { // åªè¦æœ‰ä¸€ä¸ªå¤±è´¥ï¼Œç«‹åˆ»æ›´æ”¹çŠ¶æ€ reject(r) } ) } }) } main.js\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 import {Promise} from \u0026#34;./src/promise.js\u0026#34;; let p1 = Promise.resolve(new Promise((resolve, reject) =\u0026gt; { setTimeout(() =\u0026gt; { resolve(\u0026#39;OK1\u0026#39;) }, 1000) })) let p2 = Promise.resolve(new Promise((resolve, reject) =\u0026gt; { setTimeout(() =\u0026gt; { resolve(\u0026#39;OK2\u0026#39;) }, 2000) })) let p3 = Promise.resolve(\u0026#39;OK3\u0026#39;) let result = Promise.all([p1, p2, p3]) console.log(\u0026#39;immediate: \u0026#39;, result) setTimeout(() =\u0026gt; { console.log(\u0026#39;timer: \u0026#39;, result) }, 2000) Output\n1 2 3 4 5 6 immediate: Promise { PromiseState: \u0026#39;pending\u0026#39;, PromiseResult: null, callbacks: [] } timer: Promise { PromiseState: \u0026#39;fulfilled\u0026#39;, PromiseResult: [ \u0026#39;OK1\u0026#39;, \u0026#39;OK2\u0026#39;, \u0026#39;OK3\u0026#39; ], callbacks: [] } å®ç° Promise.race() åœ¨ promise.js ä¸­æ·»åŠ å¦‚ä¸‹ä»£ç \n1 2 3 4 5 6 7 8 9 10 11 12 13 14 Promise.race = function (promises) { return new Promise((resolve, reject) =\u0026gt; { for (let i = 0; i \u0026lt; promises.length; ++i) { promises[i].then( v =\u0026gt; { resolve(v) }, r =\u0026gt; { reject(r) } ) } }) } main.js\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 import {Promise} from \u0026#34;./src/promise.js\u0026#34;; let p1 = Promise.resolve(new Promise((resolve, reject) =\u0026gt; { setTimeout(() =\u0026gt; { resolve(\u0026#39;OK1\u0026#39;) }, 1000) })) let p2 = Promise.resolve(new Promise((resolve, reject) =\u0026gt; { setTimeout(() =\u0026gt; { resolve(\u0026#39;OK2\u0026#39;) }, 2000) })) let p3 = Promise.resolve(\u0026#39;OK3\u0026#39;) let p4 = Promise.resolve(\u0026#39;OK4\u0026#39;) let result = Promise.race([p1, p2, p3, p4]) console.log(\u0026#39;immediate: \u0026#39;, result) setTimeout(() =\u0026gt; { console.log(\u0026#39;timer: \u0026#39;, result) }, 2000) Output\n1 2 3 4 5 6 7 8 9 10 immediate: Promise { PromiseState: \u0026#39;fulfilled\u0026#39;, PromiseResult: \u0026#39;OK3\u0026#39;, callbacks: [] } timer: Promise { PromiseState: \u0026#39;fulfilled\u0026#39;, PromiseResult: \u0026#39;OK3\u0026#39;, callbacks: [] } then æ–¹æ³•ä¼ å…¥çš„å›è°ƒå‡½æ•°å¼‚æ­¥æ‰§è¡Œ ä¿®æ”¹å‰ ä¸‹é¢ä»£ç ä½¿ç”¨è‡ªå®šä¹‰çš„ Promise æ‰§è¡Œ main.js\n1 2 3 4 5 6 7 8 9 10 11 12 import {Promise} from \u0026#34;./src/promise.js\u0026#34;; let p = new Promise((resolve, reject) =\u0026gt; { resolve(\u0026#39;OK\u0026#39;) console.log(1) }) p.then(() =\u0026gt; { console.log(2) }) console.log(3) Output\n1 2 3 1 2 3 ä¸‹é¢ä»£ç ä½¿ç”¨å®˜æ–¹çš„ Promise æ‰§è¡Œ main.js\n1 2 3 4 5 6 7 8 9 10 11 12 // import {Promise} from \u0026#34;./src/promise.js\u0026#34;; let p = new Promise((resolve, reject) =\u0026gt; { resolve(\u0026#39;OK\u0026#39;) console.log(1) }) p.then(() =\u0026gt; { console.log(2) }) console.log(3) Output\n1 2 3 1 3 2 ä»ä¸Šé¢çš„ä¸¤ç§è¾“å‡ºç»“æœå¯ä»¥çœ‹å‡ºæˆ‘ä»¬è‡ªå·±å†™çš„ then æ–¹æ³•å¦‚æœåœ¨æ‰§è¡Œå‰ Promise çš„çŠ¶æ€å·²ç»ä¸æ˜¯ pending æ—¶åˆ™ç«‹åˆ»æ‰§è¡Œï¼Œå³åŒæ­¥æ‰§è¡Œï¼Œè€Œå®˜æ–¹çš„åˆ™æ˜¯å»¶è¿Ÿæ‰§è¡Œï¼Œå³å¼‚æ­¥æ‰§è¡Œã€‚\nä¿®æ”¹å promise.js\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 export function Promise(executor) { this.PromiseState = \u0026#39;pending\u0026#39; this.PromiseResult = null // ä¿å­˜å›è°ƒå‡½æ•° this.callbacks = [] const self = this function resolve(data) { if (self.PromiseState !== \u0026#39;pending\u0026#39;) return // 1. ä¿®æ”¹å¯¹è±¡çš„çŠ¶æ€ self.PromiseState = \u0026#39;fulfilled\u0026#39; // 2. è®¾ç½®å¯¹è±¡ç»“æœå€¼ self.PromiseResult = data // å¼‚æ­¥æ‰§è¡ŒæˆåŠŸçš„å›è°ƒ setTimeout(() =\u0026gt; { self.callbacks.forEach(item =\u0026gt; item.onResolved(data)) }) } function reject(data) { if (self.PromiseState !== \u0026#39;pending\u0026#39;) return self.PromiseState = \u0026#39;rejected\u0026#39; self.PromiseResult = data // å¼‚æ­¥æ‰§è¡Œå¤±è´¥çš„å›è°ƒ setTimeout(() =\u0026gt; { self.callbacks.forEach(item =\u0026gt; item.onRejected(data)) }) } // åŒæ­¥è°ƒç”¨æ‰§è¡Œå™¨ try { executor(resolve, reject) } catch (e) { reject(e) } } Promise.prototype.then = function (onResolved, onRejected) { if (typeof onResolved !== \u0026#39;function\u0026#39;) { // å®ç°å€¼ä¼ é€’çš„å…³é”®æ­¥éª¤ onResolved = value =\u0026gt; value } if (typeof onRejected !== \u0026#39;function\u0026#39;) { // error: ç”±äº throw reason æ²¡æœ‰è¿”å›å€¼ï¼Œæ•…ä¸èƒ½çœç•¥å¤§æ‹¬å· // onRejected = reason =\u0026gt; throw reason // å®ç°å¼‚å¸¸ç©¿é€çš„å…³é”®æ­¥éª¤ onRejected = reason =\u0026gt; { throw reason } } const self = this return new Promise((resolve, reject) =\u0026gt; { function handler(callback) { try { let result = callback(self.PromiseResult); if (result instanceof Promise) { result.then(v =\u0026gt; { resolve(v) }, r =\u0026gt; { reject(r) }) } else { resolve(result) } } catch (e) { reject(e) } } if (this.PromiseState === \u0026#39;fulfilled\u0026#39;) { // å¤„ç† onResolved æ‰§è¡Œå‡ºç°å¼‚å¸¸çš„æƒ…å†µ setTimeout(() =\u0026gt; { // å¼‚æ­¥æ‰§è¡Œ handler(onResolved) }) } else if (this.PromiseState === \u0026#39;rejected\u0026#39;) { setTimeout(() =\u0026gt; { // å¼‚æ­¥æ‰§è¡Œ handler(onRejected) }) } else if (this.PromiseState === \u0026#39;pending\u0026#39;) { // ä¿å­˜å›è°ƒå‡½æ•° -------------------- important this.callbacks.push({ onResolved: function () { handler(onResolved) }, onRejected: function () { handler(onRejected) } }) } }) } Promise.prototype.catch = function (onRejected) { return this.then(undefined, onRejected) } Promise.resolve = function (value) { return new Promise((resolve, reject) =\u0026gt; { if (value instanceof Promise) { value.then( v =\u0026gt; { resolve(v) }, r =\u0026gt; { reject(r) }) } else { resolve(value) } }) } Promise.reject = function (reason) { return new Promise((resolve, reject) =\u0026gt; { reject(reason) }) } Promise.all = function (promises) { return new Promise((resolve, reject) =\u0026gt; { let count = 0 // æˆåŠŸæ‰§è¡Œçš„ promise çš„æ•°ç›® let resultArr = [] // ç»“æœæ•°ç»„ for (let i = 0; i \u0026lt; promises.length; ++i) { promises[i].then( v =\u0026gt; { ++count // æ³¨æ„ä¸è¦ä½¿ç”¨ resultArr.push(v)ï¼Œè¿™å¯èƒ½å¯¼è‡´ç»“æœä¹±åº resultArr[i] = v if (count === promises.length) { resolve(resultArr) } }, r =\u0026gt; { // åªè¦æœ‰ä¸€ä¸ªå¤±è´¥ï¼Œç«‹åˆ»æ›´æ”¹çŠ¶æ€ reject(r) } ) } }) } Promise.race = function (promises) { return new Promise((resolve, reject) =\u0026gt; { for (let i = 0; i \u0026lt; promises.length; ++i) { promises[i].then( v =\u0026gt; { resolve(v) }, r =\u0026gt; { reject(r) } ) } }) } main.js\n1 2 3 4 5 6 7 8 9 10 11 12 import {Promise} from \u0026#34;./src/promise.js\u0026#34;; let p = new Promise((resolve, reject) =\u0026gt; { resolve(\u0026#39;OK\u0026#39;) console.log(1) }) p.then(() =\u0026gt; { console.log(2) }) console.log(3) Output\n1 2 3 1 3 2 å°†æœ€ç»ˆç»“æœå°è£…æˆä¸€ä¸ªç±» promise.js\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 export class Promise { constructor(executor) { this.PromiseState = \u0026#39;pending\u0026#39; this.PromiseResult = null // ä¿å­˜å›è°ƒå‡½æ•° this.callbacks = [] const self = this function resolve(data) { if (self.PromiseState !== \u0026#39;pending\u0026#39;) return // 1. ä¿®æ”¹å¯¹è±¡çš„çŠ¶æ€ self.PromiseState = \u0026#39;fulfilled\u0026#39; // 2. è®¾ç½®å¯¹è±¡ç»“æœå€¼ self.PromiseResult = data // å¼‚æ­¥æ‰§è¡ŒæˆåŠŸçš„å›è°ƒ setTimeout(() =\u0026gt; { self.callbacks.forEach(item =\u0026gt; item.onResolved(data)) }) } function reject(data) { if (self.PromiseState !== \u0026#39;pending\u0026#39;) return self.PromiseState = \u0026#39;rejected\u0026#39; self.PromiseResult = data // å¼‚æ­¥æ‰§è¡Œå¤±è´¥çš„å›è°ƒ setTimeout(() =\u0026gt; { self.callbacks.forEach(item =\u0026gt; item.onRejected(data)) }) } // åŒæ­¥è°ƒç”¨æ‰§è¡Œå™¨ try { executor(resolve, reject) } catch (e) { reject(e) } } then(onResolved, onRejected) { if (typeof onResolved !== \u0026#39;function\u0026#39;) { // å®ç°å€¼ä¼ é€’çš„å…³é”®æ­¥éª¤ onResolved = value =\u0026gt; value } if (typeof onRejected !== \u0026#39;function\u0026#39;) { // error: ç”±äº throw reason æ²¡æœ‰è¿”å›å€¼ï¼Œæ•…ä¸èƒ½çœç•¥å¤§æ‹¬å· // onRejected = reason =\u0026gt; throw reason // å®ç°å¼‚å¸¸ç©¿é€çš„å…³é”®æ­¥éª¤ onRejected = reason =\u0026gt; { throw reason } } const self = this return new Promise((resolve, reject) =\u0026gt; { function handler(callback) { try { let result = callback(self.PromiseResult); if (result instanceof Promise) { result.then(v =\u0026gt; { resolve(v) }, r =\u0026gt; { reject(r) }) } else { resolve(result) } } catch (e) { reject(e) } } if (this.PromiseState === \u0026#39;fulfilled\u0026#39;) { // å¤„ç† onResolved æ‰§è¡Œå‡ºç°å¼‚å¸¸çš„æƒ…å†µ setTimeout(() =\u0026gt; { // å¼‚æ­¥æ‰§è¡Œ handler(onResolved) }) } else if (this.PromiseState === \u0026#39;rejected\u0026#39;) { setTimeout(() =\u0026gt; { // å¼‚æ­¥æ‰§è¡Œ handler(onRejected) }) } else if (this.PromiseState === \u0026#39;pending\u0026#39;) { // ä¿å­˜å›è°ƒå‡½æ•° -------------------- important this.callbacks.push({ onResolved: function () { handler(onResolved) }, onRejected: function () { handler(onRejected) } }) } }) } catch(onRejected) { return this.then(undefined, onRejected) } static resolve(value) { return new Promise((resolve, reject) =\u0026gt; { if (value instanceof Promise) { value.then( v =\u0026gt; { resolve(v) }, r =\u0026gt; { reject(r) }) } else { resolve(value) } }) } static reject(reason) { return new Promise((resolve, reject) =\u0026gt; { reject(reason) }) } static all(promises) { return new Promise((resolve, reject) =\u0026gt; { let count = 0 // æˆåŠŸæ‰§è¡Œçš„ promise çš„æ•°ç›® let resultArr = [] // ç»“æœæ•°ç»„ for (let i = 0; i \u0026lt; promises.length; ++i) { promises[i].then( v =\u0026gt; { ++count // æ³¨æ„ä¸è¦ä½¿ç”¨ resultArr.push(v)ï¼Œè¿™å¯èƒ½å¯¼è‡´ç»“æœä¹±åº resultArr[i] = v if (count === promises.length) { resolve(resultArr) } }, r =\u0026gt; { // åªè¦æœ‰ä¸€ä¸ªå¤±è´¥ï¼Œç«‹åˆ»æ›´æ”¹çŠ¶æ€ reject(r) } ) } }) } static race(promises) { return new Promise((resolve, reject) =\u0026gt; { for (let i = 0; i \u0026lt; promises.length; ++i) { promises[i].then( v =\u0026gt; { resolve(v) }, r =\u0026gt; { reject(r) } ) } }) } } ","date":"2022-10-31T09:31:52+08:00","image":"https://ibakuman.github.io/gallery/landscape/04_hu21e79f1310d133228b33f735d4ec0be8_1556942_120x120_fill_q75_box_smart1.jpg","permalink":"https://ibakuman.github.io/posts/javascript/implementing-promise-from-scratch/","title":"æ‰‹å†™ Promise"},{"content":"ä»€ä¹ˆæ˜¯ Promise? Promise æ˜¯ JS å¼‚æ­¥ç¼–ç¨‹ä¸­çš„é‡è¦æ¦‚å¿µï¼Œå¼‚æ­¥æŠ½è±¡å¤„ç†å¯¹è±¡ï¼Œæ˜¯ç›®å‰æ¯”è¾ƒæµè¡Œ Javascript å¼‚æ­¥ç¼–ç¨‹è§£å†³æ–¹æ¡ˆä¹‹ä¸€\nå¯¹äºå‡ ç§å¸¸è§å¼‚æ­¥ç¼–ç¨‹æ–¹æ¡ˆ å›è°ƒå‡½æ•° äº‹ä»¶ç›‘å¬ å‘å¸ƒ / è®¢é˜… Promise å¯¹è±¡ å›è°ƒå‡½æ•° å¯¹äºå›è°ƒå‡½æ•°æˆ‘ä»¬ç”¨ Jquery çš„ ajax è·å–æ•°æ®æ—¶éƒ½æ˜¯ä»¥å›è°ƒå‡½æ•°æ–¹å¼è·å–çš„æ•°æ®\n1 2 3 $.get(url, (data) =\u0026gt; { console.log(data) ) å¦‚æœè¯´å½“æˆ‘ä»¬éœ€è¦å‘é€å¤šä¸ªå¼‚æ­¥è¯·æ±‚å¹¶ä¸”æ¯ä¸ªè¯·æ±‚ä¹‹é—´éœ€è¦ç›¸äº’ä¾èµ–é‚£è¿™æ—¶æˆ‘ä»¬åªèƒ½ä»¥åµŒå¥—æ–¹å¼æ¥è§£å†³å½¢æˆ \u0026ldquo;å›è°ƒåœ°ç‹±\u0026rdquo;\n1 2 3 4 5 6 $.get(url, data1 =\u0026gt; { console.log(data1) $.get(data1.url, data2 =\u0026gt; { console.log(data1) }) }) è¿™æ ·ä¸€æ¥ï¼Œåœ¨å¤„ç†è¶Šå¤šçš„å¼‚æ­¥é€»è¾‘æ—¶ï¼Œå°±éœ€è¦è¶Šæ·±çš„å›è°ƒåµŒå¥—ï¼Œè¿™ç§ç¼–ç æ¨¡å¼çš„é—®é¢˜ä¸»è¦æœ‰ä»¥ä¸‹å‡ ä¸ªï¼š\nä»£ç é€»è¾‘ä¹¦å†™é¡ºåºä¸æ‰§è¡Œé¡ºåºä¸ä¸€è‡´ï¼Œä¸åˆ©äºé˜…è¯»ä¸ç»´æŠ¤ã€‚ å¼‚æ­¥æ“ä½œçš„é¡ºåºå˜æ›´æ—¶ï¼Œéœ€è¦å¤§è§„æ¨¡çš„ä»£ç é‡æ„ã€‚ å›è°ƒå‡½æ•°åŸºæœ¬éƒ½æ˜¯åŒ¿åå‡½æ•°ï¼Œbug è¿½è¸ªå›°éš¾ã€‚ å›è°ƒå‡½æ•°æ˜¯è¢«ç¬¬ä¸‰æ–¹åº“ä»£ç ï¼ˆå¦‚ä¸Šä¾‹ä¸­çš„ ajax ï¼‰è€Œéè‡ªå·±çš„ä¸šåŠ¡ä»£ç æ‰€è°ƒç”¨çš„ï¼Œé€ æˆäº† IOCï¼Œå³æ§åˆ¶åè½¬ã€‚ Promise å¤„ç†å¤šä¸ªç›¸äº’å…³è”çš„å¼‚æ­¥è¯·æ±‚ è€Œæˆ‘ä»¬ Promise å¯ä»¥æ›´ç›´è§‚çš„æ–¹å¼æ¥è§£å†³ \u0026ldquo;å›è°ƒåœ°ç‹±\u0026rdquo;\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 const request = url =\u0026gt; { return new Promise((resolve, reject) =\u0026gt; { $.get(url, data =\u0026gt; { resolve(data) }); }) }; // è¯·æ±‚data1 request(url).then(data1 =\u0026gt; { return request(data1.url); }).then(data2 =\u0026gt; { return request(data2.url); }).then(data3 =\u0026gt; { console.log(data3); }).catch(err =\u0026gt; throw new Error(err)); ç›¸ä¿¡å¤§å®¶åœ¨ vue/react éƒ½æ˜¯ç”¨ axios fetch è¯·æ±‚æ•°æ®ï¼Œå®ƒä»¬ä¹Ÿéƒ½æ”¯æŒ Promise API\n1 2 3 4 import axios from \u0026#39;axios\u0026#39;; axios.get(url).then(data =\u0026gt; { console.log(data) }) Axios æ˜¯ä¸€ä¸ªåŸºäº promise çš„ HTTP åº“ï¼Œå¯ä»¥ç”¨åœ¨æµè§ˆå™¨å’Œ node.js ä¸­ã€‚\nä½¿ç”¨ Promise Promise æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œ new Promise è¿”å›ä¸€ä¸ª promise å¯¹è±¡æ¥æ”¶ä¸€ä¸ª excutor æ‰§è¡Œå‡½æ•°ä½œä¸ºå‚æ•°, excutor æœ‰ä¸¤ä¸ªå‡½æ•°ç±»å‹å½¢å‚ resolve reject\n1 2 3 4 const promise = new Promise((resolve, reject) =\u0026gt; { // å¼‚æ­¥å¤„ç† // å¤„ç†ç»“æŸåã€è°ƒç”¨resolve æˆ– reject }); promise ç›¸å½“äºä¸€ä¸ªçŠ¶æ€æœº promise çš„ä¸‰ç§çŠ¶æ€\npending fulfilled rejected promise å¯¹è±¡åˆå§‹åŒ–çŠ¶æ€ä¸º pending å½“è°ƒç”¨ resolve (æˆåŠŸ)ï¼Œä¼šç”± pending =\u0026gt; fulfilled å½“è°ƒç”¨ reject (å¤±è´¥)ï¼Œä¼šç”± pending =\u0026gt; rejected Note promsie çŠ¶æ€åªèƒ½ç”± pending =\u0026gt; fulfilled/rejectedï¼Œä¸€æ—¦ä¿®æ”¹å°±ä¸èƒ½å†å˜ã€‚ promise å¯¹è±¡æ–¹æ³• then æ–¹æ³•æ³¨å†Œå½“ resolve (æˆåŠŸ) / reject (å¤±è´¥) çš„å›è°ƒå‡½æ•°\n1 2 3 // onFulfilled æ˜¯ç”¨æ¥æ¥æ”¶ promise æˆåŠŸçš„å€¼ // onRejected æ˜¯ç”¨æ¥æ¥æ”¶ promise å¤±è´¥çš„åŸå›  promise.then(onFulfilled, onRejected); Note then æ–¹æ³•æ˜¯å¼‚æ­¥æ‰§è¡Œçš„ resolve (æˆåŠŸ) onFulfilled ä¼šè¢«è°ƒç”¨\n1 2 3 4 5 6 7 8 const promise = new Promise((resolve, reject) =\u0026gt; { resolve(\u0026#39;fulfilled\u0026#39;); // çŠ¶æ€ç”± pending =\u0026gt; fulfilled }); promise.then(result =\u0026gt; { // onFulfilled console.log(result); // \u0026#39;fulfilled\u0026#39; }, reason =\u0026gt; { // onRejected ä¸ä¼šè¢«è°ƒç”¨ }) reject (å¤±è´¥) onRejected ä¼šè¢«è°ƒç”¨\n1 2 3 4 5 6 7 8 const promise = new Promise((resolve, reject) =\u0026gt; { reject(\u0026#39;rejected\u0026#39;); // çŠ¶æ€ç”± pending =\u0026gt; rejected }); promise.then(result =\u0026gt; { // onFulfilled ä¸ä¼šè¢«è°ƒç”¨ }, reason =\u0026gt; { // onRejected console.log(rejected); // \u0026#39;rejected\u0026#39; }) promise.catch\nåœ¨é“¾å¼å†™æ³•ä¸­å¯ä»¥æ•è·å‰é¢ then ä¸­å‘é€çš„å¼‚å¸¸,\n1 2 3 4 5 6 7 8 9 10 11 promise.catch(onRejected) // ç›¸å½“äº promise.then(null, onRrejected); // æ³¨æ„ // onRejected ä¸èƒ½æ•è·å½“å‰onFulfilledä¸­çš„å¼‚å¸¸ promise.then(onFulfilled, onRrejected); // å¯ä»¥å†™æˆï¼š promise.then(onFulfilled) .catch(onRrejected); promise chain promise.then æ–¹æ³•æ¯æ¬¡è°ƒç”¨éƒ½è¿”å›ä¸€ä¸ªæ–°çš„ promise å¯¹è±¡æ‰€ä»¥å¯ä»¥é“¾å¼å†™æ³•\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 function taskA() { console.log(\u0026#34;Task A\u0026#34;); } function taskB() { console.log(\u0026#34;Task B\u0026#34;); } function onRejected(error) { console.log(\u0026#34;Catch Error: A or B\u0026#34;, error); } var promise = Promise.resolve(); promise .then(taskA) .then(taskB) .catch(onRejected) // æ•è·å‰é¢thenæ–¹æ³•ä¸­çš„å¼‚å¸¸ Promise çš„é™æ€æ–¹æ³• Promise.resolve è¿”å›ä¸€ä¸ª fulfilled çŠ¶æ€çš„ promise å¯¹è±¡\n1 2 3 4 5 6 7 8 9 Promise.resolve(\u0026#39;hello\u0026#39;).then(function(value){ console.log(value); }); Promise.resolve(\u0026#39;hello\u0026#39;); // ç›¸å½“äº const promise = new Promise(resolve =\u0026gt; { resolve(\u0026#39;hello\u0026#39;); }); Promise.reject è¿”å›ä¸€ä¸ª rejected çŠ¶æ€çš„ promise å¯¹è±¡\n1 2 3 4 Promise.reject(24); new Promise((resolve, reject) =\u0026gt; { reject(24); }); Promise.all æ¥æ”¶ä¸€ä¸ª promise å¯¹è±¡æ•°ç»„ä¸ºå‚æ•°\nåªæœ‰å…¨éƒ¨ä¸º resolve æ‰ä¼šè°ƒç”¨ï¼Œé€šå¸¸ä¼šç”¨æ¥å¤„ç†å¤šä¸ªå¹¶è¡Œå¼‚æ­¥æ“ä½œã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 const p1 = new Promise((resolve, reject) =\u0026gt; { resolve(1); }); const p2 = new Promise((resolve, reject) =\u0026gt; { resolve(2); }); const p3 = new Promise((resolve, reject) =\u0026gt; { reject(3); }); Promise.all([p1, p2, p3]).then(data =\u0026gt; { console.log(data); // [1, 2, 3] ç»“æœé¡ºåºå’Œpromiseå®ä¾‹æ•°ç»„é¡ºåºæ˜¯ä¸€è‡´çš„ }, err =\u0026gt; { console.log(err); }); Promise.race æ¥æ”¶ä¸€ä¸ª promise å¯¹è±¡æ•°ç»„ä¸ºå‚æ•°\nPromise.race åªè¦æœ‰ä¸€ä¸ª promise å¯¹è±¡è¿›å…¥ FulFilled æˆ–è€… Rejected çŠ¶æ€çš„è¯ï¼Œå°±ä¼šç»§ç»­è¿›è¡Œåé¢çš„å¤„ç†ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 function timerPromisefy(delay) { return new Promise(function (resolve, reject) { setTimeout(function() { resolve(delay); }, delay); }); } var startDate = Date.now(); Promise.race([ timerPromisefy(10), timerPromisefy(20), timerPromisefy(30) ]).then(function (values) { console.log(values); // 10 }); Promise ä»£ç å®ç° 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 232 233 234 235 236 237 238 239 240 241 242 243 244 245 246 247 248 249 250 251 252 253 254 255 256 257 258 259 260 261 262 263 264 265 266 267 268 269 270 271 272 273 274 275 276 277 278 279 280 281 282 283 284 285 286 287 288 289 290 291 292 293 294 /** * Promise å®ç° éµå¾ªpromise/A+è§„èŒƒ * Promise/A+è§„èŒƒè¯‘æ–‡: * https://malcolmyu.github.io/2015/06/12/Promises-A-Plus/#note-4 */ // promise ä¸‰ä¸ªçŠ¶æ€ const PENDING = \u0026#34;pending\u0026#34;; const FULFILLED = \u0026#34;fulfilled\u0026#34;; const REJECTED = \u0026#34;rejected\u0026#34;; function Promise(excutor) { let that = this; // ç¼“å­˜å½“å‰promiseå®ä¾‹å¯¹è±¡ that.status = PENDING; // åˆå§‹çŠ¶æ€ that.value = undefined; // fulfilledçŠ¶æ€æ—¶ è¿”å›çš„ä¿¡æ¯ that.reason = undefined; // rejectedçŠ¶æ€æ—¶ æ‹’ç»çš„åŸå›  that.onFulfilledCallbacks = []; // å­˜å‚¨fulfilledçŠ¶æ€å¯¹åº”çš„onFulfilledå‡½æ•° that.onRejectedCallbacks = []; // å­˜å‚¨rejectedçŠ¶æ€å¯¹åº”çš„onRejectedå‡½æ•° function resolve(value) { // valueæˆåŠŸæ€æ—¶æ¥æ”¶çš„ç»ˆå€¼ if(value instanceof Promise) { return value.then(resolve, reject); } // ä¸ºä»€ä¹ˆresolve åŠ setTimeout? // 2.2.4è§„èŒƒ onFulfilled å’Œ onRejected åªå…è®¸åœ¨ execution context æ ˆä»…åŒ…å«å¹³å°ä»£ç æ—¶è¿è¡Œ. // æ³¨1 è¿™é‡Œçš„å¹³å°ä»£ç æŒ‡çš„æ˜¯å¼•æ“ã€ç¯å¢ƒä»¥åŠ promise çš„å®æ–½ä»£ç ã€‚å®è·µä¸­è¦ç¡®ä¿ onFulfilled å’Œ onRejected æ–¹æ³•å¼‚æ­¥æ‰§è¡Œï¼Œä¸”åº”è¯¥åœ¨ then æ–¹æ³•è¢«è°ƒç”¨çš„é‚£ä¸€è½®äº‹ä»¶å¾ªç¯ä¹‹åçš„æ–°æ‰§è¡Œæ ˆä¸­æ‰§è¡Œã€‚ setTimeout(() =\u0026gt; { // è°ƒç”¨resolve å›è°ƒå¯¹åº”onFulfilledå‡½æ•° if (that.status === PENDING) { // åªèƒ½ç”±pedningçŠ¶æ€ =\u0026gt; fulfilledçŠ¶æ€ (é¿å…è°ƒç”¨å¤šæ¬¡resolve reject) that.status = FULFILLED; that.value = value; that.onFulfilledCallbacks.forEach(cb =\u0026gt; cb(that.value)); } }); } function reject(reason) { // reasonå¤±è´¥æ€æ—¶æ¥æ”¶çš„æ‹’å›  setTimeout(() =\u0026gt; { // è°ƒç”¨reject å›è°ƒå¯¹åº”onRejectedå‡½æ•° if (that.status === PENDING) { // åªèƒ½ç”±pedningçŠ¶æ€ =\u0026gt; rejectedçŠ¶æ€ (é¿å…è°ƒç”¨å¤šæ¬¡resolve reject) that.status = REJECTED; that.reason = reason; that.onRejectedCallbacks.forEach(cb =\u0026gt; cb(that.reason)); } }); } // æ•è·åœ¨excutoræ‰§è¡Œå™¨ä¸­æŠ›å‡ºçš„å¼‚å¸¸ // new Promise((resolve, reject) =\u0026gt; { // throw new Error(\u0026#39;error in excutor\u0026#39;) // }) try { excutor(resolve, reject); } catch (e) { reject(e); } } /** * resolveä¸­çš„å€¼å‡ ç§æƒ…å†µï¼š * 1.æ™®é€šå€¼ * 2.promiseå¯¹è±¡ * 3.thenableå¯¹è±¡/å‡½æ•° */ /** * å¯¹resolve è¿›è¡Œæ”¹é€ å¢å¼º é’ˆå¯¹resolveä¸­ä¸åŒå€¼æƒ…å†µ è¿›è¡Œå¤„ç† * @param {promise} promise2 promise1.thenæ–¹æ³•è¿”å›çš„æ–°çš„promiseå¯¹è±¡ * @param {[type]} x promise1ä¸­onFulfilledçš„è¿”å›å€¼ * @param {[type]} resolve promise2çš„resolveæ–¹æ³• * @param {[type]} reject promise2çš„rejectæ–¹æ³• */ function resolvePromise(promise2, x, resolve, reject) { if (promise2 === x) { // å¦‚æœä»onFulfilledä¸­è¿”å›çš„x å°±æ˜¯promise2 å°±ä¼šå¯¼è‡´å¾ªç¯å¼•ç”¨æŠ¥é”™ return reject(new TypeError(\u0026#39;å¾ªç¯å¼•ç”¨\u0026#39;)); } let called = false; // é¿å…å¤šæ¬¡è°ƒç”¨ // å¦‚æœxæ˜¯ä¸€ä¸ªpromiseå¯¹è±¡ ï¼ˆè¯¥åˆ¤æ–­å’Œä¸‹é¢ åˆ¤æ–­æ˜¯ä¸æ˜¯thenableå¯¹è±¡é‡å¤ æ‰€ä»¥å¯æœ‰å¯æ— ï¼‰ if (x instanceof Promise) { // è·å¾—å®ƒçš„ç»ˆå€¼ ç»§ç»­resolve if (x.status === PENDING) { // å¦‚æœä¸ºç­‰å¾…æ€éœ€ç­‰å¾…ç›´è‡³ x è¢«æ‰§è¡Œæˆ–æ‹’ç» å¹¶è§£æyå€¼ x.then(y =\u0026gt; { resolvePromise(promise2, y, resolve, reject); }, reason =\u0026gt; { reject(reason); }); } else { // å¦‚æœ x å·²ç»å¤„äºæ‰§è¡Œæ€/æ‹’ç»æ€(å€¼å·²ç»è¢«è§£æä¸ºæ™®é€šå€¼)ï¼Œç”¨ç›¸åŒçš„å€¼æ‰§è¡Œä¼ é€’ä¸‹å» promise x.then(resolve, reject); } // å¦‚æœ x ä¸ºå¯¹è±¡æˆ–è€…å‡½æ•° } else if (x != null \u0026amp;\u0026amp; ((typeof x === \u0026#39;object\u0026#39;) || (typeof x === \u0026#39;function\u0026#39;))) { try { // æ˜¯å¦æ˜¯thenableå¯¹è±¡ï¼ˆå…·æœ‰thenæ–¹æ³•çš„å¯¹è±¡/å‡½æ•°ï¼‰ let then = x.then; if (typeof then === \u0026#39;function\u0026#39;) { then.call(x, y =\u0026gt; { if(called) return; called = true; resolvePromise(promise2, y, resolve, reject); }, reason =\u0026gt; { if(called) return; called = true; reject(reason); }) } else { // è¯´æ˜æ˜¯ä¸€ä¸ªæ™®é€šå¯¹è±¡/å‡½æ•° resolve(x); } } catch(e) { if(called) return; called = true; reject(e); } } else { resolve(x); } } /** * [æ³¨å†ŒfulfilledçŠ¶æ€/rejectedçŠ¶æ€å¯¹åº”çš„å›è°ƒå‡½æ•°] * @param {function} onFulfilled fulfilledçŠ¶æ€æ—¶ æ‰§è¡Œçš„å‡½æ•° * @param {function} onRejected rejectedçŠ¶æ€æ—¶ æ‰§è¡Œçš„å‡½æ•° * @return {function} newPromsie è¿”å›ä¸€ä¸ªæ–°çš„promiseå¯¹è±¡ */ Promise.prototype.then = function(onFulfilled, onRejected) { const that = this; let newPromise; // å¤„ç†å‚æ•°é»˜è®¤å€¼ ä¿è¯å‚æ•°åç»­èƒ½å¤Ÿç»§ç»­æ‰§è¡Œ onFulfilled = typeof onFulfilled === \u0026#34;function\u0026#34; ? onFulfilled : value =\u0026gt; value; onRejected = typeof onRejected === \u0026#34;function\u0026#34; ? onRejected : reason =\u0026gt; { throw reason; }; // thené‡Œé¢çš„FULFILLED/REJECTEDçŠ¶æ€æ—¶ ä¸ºä»€ä¹ˆè¦åŠ setTimeout ? // åŸå› : // å…¶ä¸€ 2.2.4è§„èŒƒ è¦ç¡®ä¿ onFulfilled å’Œ onRejected æ–¹æ³•å¼‚æ­¥æ‰§è¡Œ(ä¸”åº”è¯¥åœ¨ then æ–¹æ³•è¢«è°ƒç”¨çš„é‚£ä¸€è½®äº‹ä»¶å¾ªç¯ä¹‹åçš„æ–°æ‰§è¡Œæ ˆä¸­æ‰§è¡Œ) æ‰€ä»¥è¦åœ¨resolveé‡ŒåŠ ä¸ŠsetTimeout // å…¶äºŒ 2.2.6è§„èŒƒ å¯¹äºä¸€ä¸ªpromiseï¼Œå®ƒçš„thenæ–¹æ³•å¯ä»¥è°ƒç”¨å¤šæ¬¡.ï¼ˆå½“åœ¨å…¶ä»–ç¨‹åºä¸­å¤šæ¬¡è°ƒç”¨åŒä¸€ä¸ªpromiseçš„thenæ—¶ ç”±äºä¹‹å‰çŠ¶æ€å·²ç»ä¸ºFULFILLED/REJECTEDçŠ¶æ€ï¼Œåˆ™ä¼šèµ°çš„ä¸‹é¢é€»è¾‘),æ‰€ä»¥è¦ç¡®ä¿ä¸ºFULFILLED/REJECTEDçŠ¶æ€å ä¹Ÿè¦å¼‚æ­¥æ‰§è¡ŒonFulfilled/onRejected // å…¶äºŒ 2.2.6è§„èŒƒ ä¹Ÿæ˜¯resolveå‡½æ•°é‡ŒåŠ setTimeoutçš„åŸå›  // æ€»ä¹‹éƒ½æ˜¯ è®©thenæ–¹æ³•å¼‚æ­¥æ‰§è¡Œ ä¹Ÿå°±æ˜¯ç¡®ä¿onFulfilled/onRejectedå¼‚æ­¥æ‰§è¡Œ // å¦‚ä¸‹é¢è¿™ç§æƒ…æ™¯ å¤šæ¬¡è°ƒç”¨p1.then // p1.then((value) =\u0026gt; { // æ­¤æ—¶p1.status ç”±peddingçŠ¶æ€ =\u0026gt; fulfilledçŠ¶æ€ // console.log(value); // resolve // // console.log(p1.status); // fulfilled // p1.then(value =\u0026gt; { // å†æ¬¡p1.then è¿™æ—¶å·²ç»ä¸ºfulfilledçŠ¶æ€ èµ°çš„æ˜¯fulfilledçŠ¶æ€åˆ¤æ–­é‡Œçš„é€»è¾‘ æ‰€ä»¥æˆ‘ä»¬ä¹Ÿè¦ç¡®ä¿åˆ¤æ–­é‡Œé¢onFuilledå¼‚æ­¥æ‰§è¡Œ // console.log(value); // \u0026#39;resolve\u0026#39; // }); // console.log(\u0026#39;å½“å‰æ‰§è¡Œæ ˆä¸­åŒæ­¥ä»£ç \u0026#39;); // }) // console.log(\u0026#39;å…¨å±€æ‰§è¡Œæ ˆä¸­åŒæ­¥ä»£ç \u0026#39;); // if (that.status === FULFILLED) { // æˆåŠŸæ€ return newPromise = new Promise((resolve, reject) =\u0026gt; { setTimeout(() =\u0026gt; { try{ let x = onFulfilled(that.value); resolvePromise(newPromise, x, resolve, reject); // æ–°çš„promise resolve ä¸Šä¸€ä¸ªonFulfilledçš„è¿”å›å€¼ } catch(e) { reject(e); // æ•è·å‰é¢onFulfilledä¸­æŠ›å‡ºçš„å¼‚å¸¸ then(onFulfilled, onRejected); } }); }) } if (that.status === REJECTED) { // å¤±è´¥æ€ return newPromise = new Promise((resolve, reject) =\u0026gt; { setTimeout(() =\u0026gt; { try { let x = onRejected(that.reason); resolvePromise(newPromise, x, resolve, reject); } catch(e) { reject(e); } }); }); } if (that.status === PENDING) { // ç­‰å¾…æ€ // å½“å¼‚æ­¥è°ƒç”¨resolve/rejectedæ—¶ å°†onFulfilled/onRejectedæ”¶é›†æš‚å­˜åˆ°é›†åˆä¸­ return newPromise = new Promise((resolve, reject) =\u0026gt; { that.onFulfilledCallbacks.push((value) =\u0026gt; { try { let x = onFulfilled(value); resolvePromise(newPromise, x, resolve, reject); } catch(e) { reject(e); } }); that.onRejectedCallbacks.push((reason) =\u0026gt; { try { let x = onRejected(reason); resolvePromise(newPromise, x, resolve, reject); } catch(e) { reject(e); } }); }); } }; /** * Promise.all Promiseè¿›è¡Œå¹¶è¡Œå¤„ç† * å‚æ•°: promiseå¯¹è±¡ç»„æˆçš„æ•°ç»„ä½œä¸ºå‚æ•° * è¿”å›å€¼: è¿”å›ä¸€ä¸ªPromiseå®ä¾‹ * å½“è¿™ä¸ªæ•°ç»„é‡Œçš„æ‰€æœ‰promiseå¯¹è±¡å…¨éƒ¨å˜ä¸ºresolveçŠ¶æ€çš„æ—¶å€™ï¼Œæ‰ä¼šresolveã€‚ */ Promise.all = function(promises) { return new Promise((resolve, reject) =\u0026gt; { let done = gen(promises.length, resolve); promises.forEach((promise, index) =\u0026gt; { promise.then((value) =\u0026gt; { done(index, value) }, reject) }) }) } function gen(length, resolve) { let count = 0; let values = []; return function(i, value) { values[i] = value; if (++count === length) { console.log(values); resolve(values); } } } /** * Promise.race * å‚æ•°: æ¥æ”¶ promiseå¯¹è±¡ç»„æˆçš„æ•°ç»„ä½œä¸ºå‚æ•° * è¿”å›å€¼: è¿”å›ä¸€ä¸ªPromiseå®ä¾‹ * åªè¦æœ‰ä¸€ä¸ªpromiseå¯¹è±¡è¿›å…¥ FulFilled æˆ–è€… Rejected çŠ¶æ€çš„è¯ï¼Œå°±ä¼šç»§ç»­è¿›è¡Œåé¢çš„å¤„ç†(å–å†³äºå“ªä¸€ä¸ªæ›´å¿«) */ Promise.race = function(promises) { return new Promise((resolve, reject) =\u0026gt; { promises.forEach((promise, index) =\u0026gt; { promise.then(resolve, reject); }); }); } // ç”¨äºpromiseæ–¹æ³•é“¾æ—¶ æ•è·å‰é¢onFulfilled/onRejectedæŠ›å‡ºçš„å¼‚å¸¸ Promise.prototype.catch = function(onRejected) { return this.then(null, onRejected); } Promise.resolve = function (value) { return new Promise(resolve =\u0026gt; { resolve(value); }); } Promise.reject = function (reason) { return new Promise((resolve, reject) =\u0026gt; { reject(reason); }); } /** * åŸºäºPromiseå®ç°Deferredçš„ * Deferredå’ŒPromiseçš„å…³ç³» * - Deferred æ‹¥æœ‰ Promise * - Deferred å…·å¤‡å¯¹ Promiseçš„çŠ¶æ€è¿›è¡Œæ“ä½œçš„ç‰¹æƒæ–¹æ³•ï¼ˆresolve rejectï¼‰ * *å‚è€ƒjQuery.Deferred *url: http://api.jquery.com/category/deferred-object/ */ Promise.deferred = function() { // å»¶è¿Ÿå¯¹è±¡ let defer = {}; defer.promise = new Promise((resolve, reject) =\u0026gt; { defer.resolve = resolve; defer.reject = reject; }); return defer; } /** * Promise/A+è§„èŒƒæµ‹è¯• * npm i -g promises-aplus-tests * promises-aplus-tests Promise.js */ try { module.exports = Promise } catch (e) { } Promise æµ‹è¯• 1 2 npm i -g promises-aplus-tests promises-aplus-tests Promise.js å‚è€ƒ åŸæ–‡åœ°å€ ES6-promise Promises/A+è§„èŒƒ-è‹±æ–‡ Promises/A+è§„èŒƒ-ç¿»è¯‘ 1 Promises/A+è§„èŒƒ-ç¿»è¯‘-æ¨è JS æ‰§è¡Œæ ˆ Javascript å¼‚æ­¥ç¼–ç¨‹çš„ 4 ç§æ–¹æ³• ","date":"2022-10-30T21:10:33+08:00","image":"https://ibakuman.github.io/gallery/landscape/03_hua119d5172e80ee912c81cee3e4b607ac_783790_120x120_fill_q75_box_smart1.jpg","permalink":"https://ibakuman.github.io/posts/javascript/promise/","title":"Promise è¯¦è§£ä¸å®ç°ï¼ˆPromise/A+è§„èŒƒï¼‰"},{"content":"åŸºæœ¬è¯­æ³• border-radius ï¼š none | \u0026lt;length\u0026gt;{1,4} [/ \u0026lt;length\u0026gt;{1,4} ]?\n\u0026lt;length\u0026gt;ï¼š ç”±æµ®ç‚¹æ•°å­—å’Œå•ä½æ ‡è¯†ç¬¦ç»„æˆçš„é•¿åº¦å€¼ã€‚ä¸å¯ä¸ºè´Ÿå€¼ã€‚\nå¦‚æœä½ åœ¨ border-radius å±æ€§ä¸­åªæŒ‡å®šä¸€ä¸ªå€¼ï¼Œé‚£ä¹ˆå°†ç”Ÿæˆ 4 ä¸ªåœ†è§’ã€‚\nä½†æ˜¯ï¼Œå¦‚æœä½ è¦åœ¨å››ä¸ªè§’ä¸Šä¸€ä¸€æŒ‡å®šï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹è§„åˆ™ï¼š\nå››ä¸ªå€¼ï¼šç¬¬ä¸€ä¸ªå€¼ä¸ºå·¦ä¸Šè§’ï¼Œç¬¬äºŒä¸ªå€¼ä¸ºå³ä¸Šè§’ï¼Œç¬¬ä¸‰ä¸ªå€¼ä¸ºå³ä¸‹è§’ï¼Œç¬¬å››ä¸ªå€¼ä¸ºå·¦ä¸‹è§’ ä¸‰ä¸ªå€¼ï¼šç¬¬ä¸€ä¸ªå€¼ä¸ºå·¦ä¸Šè§’, ç¬¬äºŒä¸ªå€¼ä¸ºå³ä¸Šè§’å’Œå·¦ä¸‹è§’ï¼Œç¬¬ä¸‰ä¸ªå€¼ä¸ºå³ä¸‹è§’ ä¸¤ä¸ªå€¼ï¼šç¬¬ä¸€ä¸ªå€¼ä¸ºå·¦ä¸Šè§’ä¸å³ä¸‹è§’ï¼Œç¬¬äºŒä¸ªå€¼ä¸ºå³ä¸Šè§’ä¸å·¦ä¸‹è§’ ä¸€ä¸ªå€¼ï¼šå››ä¸ªåœ†è§’å€¼ç›¸åŒ ç¤ºä¾‹ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 \u0026lt;!DOCTYPE html\u0026gt; \u0026lt;html lang=\u0026#34;en\u0026#34;\u0026gt; \u0026lt;head\u0026gt; \u0026lt;meta charset=\u0026#34;UTF-8\u0026#34;\u0026gt; \u0026lt;meta http-equiv=\u0026#34;X-UA-Compatible\u0026#34; content=\u0026#34;IE=edge\u0026#34;\u0026gt; \u0026lt;meta name=\u0026#34;viewport\u0026#34; content=\u0026#34;width=device-width, initial-scale=1.0\u0026#34;\u0026gt; \u0026lt;title\u0026gt;border-radius\u0026lt;/title\u0026gt; \u0026lt;style\u0026gt; body { background-color: black; } .wrapper { width: 40%; display: flex; flex-wrap: wrap; } div[class*=\u0026#34;box\u0026#34;] { display: flex; align-items: center; width: 100px; height: 100px; margin: 0 20px; } .box1 { border-radius: 10px; background-color: brown; } .box2 { border-radius: 10px 20px; background-color: yellow; } .box3 { /* å·¦ä¸Šè§’ (å³ä¸Šè§’ï¼Œå·¦ä¸‹è§’) å³ä¸‹è§’ */ border-radius: 10px 20px 30px; background-color: blueviolet; } .box4 { border-radius: 10px 20px 30px 40px; background-color: burlywood; } .box5 { border-radius: 10px / 40px; background-color: cornflowerblue; } .box6 { border-radius: 10px 20px / 30px 40px; background-color: crimson; } .box7 { /* border-radius: 50px; */ border-radius: 55px; background-color: cadetblue; border: 5px solid green; } \u0026lt;/style\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; \u0026lt;div class=\u0026#34;wrapper\u0026#34;\u0026gt; \u0026lt;div class=\u0026#34;box1\u0026#34;\u0026gt;border-radius: 10px\u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;box2\u0026#34;\u0026gt;border-radius: 10px 0px\u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;box3\u0026#34;\u0026gt;border-radius: 10px 20px 30px\u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;box4\u0026#34;\u0026gt;border-radius: 10px 20px 30px 40px\u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;box7\u0026#34;\u0026gt;border-radius: 50px\u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;box5\u0026#34;\u0026gt;border-radius: 10px / 20px\u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;box6\u0026#34;\u0026gt;border-radius: 10px 20px / 30px 40px\u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt; æ•ˆæœå¦‚ä¸‹\nå‚è€ƒ CSS3: border-radiusè¾¹æ¡†åœ†è§’è¯¦è§£ ","date":"2022-10-29T09:38:30+08:00","image":"https://ibakuman.github.io/gallery/landscape/28_hubb8073e5e8dea6b644ad1c33059b37ce_1206472_120x120_fill_q75_box_smart1.jpg","permalink":"https://ibakuman.github.io/posts/css/border-radius/","title":"border-radius è¾¹æ¡†åœ†è§’è¯¦è§£"},{"content":"æ¦‚è¿° box-shadow å±æ€§ç”¨äºåœ¨å…ƒç´ çš„æ¡†æ¶ä¸Šæ·»åŠ é˜´å½±æ•ˆæœã€‚ ä½ å¯ä»¥åœ¨åŒä¸€ä¸ªå…ƒç´ ä¸Šè®¾ç½®å¤šä¸ªé˜´å½±æ•ˆæœï¼Œå¹¶ç”¨ é€—å· å°†ä»–ä»¬åˆ†éš”å¼€ã€‚ è¯¥å±æ€§å¯è®¾ç½®çš„å€¼åŒ…æ‹¬é˜´å½±çš„ X è½´åç§»é‡ã€Y è½´åç§»é‡ã€æ¨¡ç³ŠåŠå¾„ã€æ‰©æ•£åŠå¾„å’Œé¢œè‰²ã€‚\n1 box-shadow: [inset] \u0026lt;offset-x\u0026gt; \u0026lt;offset-y\u0026gt; [\u0026lt;blur-radius\u0026gt;] [\u0026lt;spread-radius\u0026gt;] color [,] 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 /* xåç§»é‡ | yåç§»é‡ | é˜´å½±é¢œè‰² */ box-shadow: 60px -16px teal; /* xåç§»é‡ | yåç§»é‡ | é˜´å½±æ¨¡ç³ŠåŠå¾„ | é˜´å½±é¢œè‰² */ box-shadow: 10px 5px 5px black; /* xåç§»é‡ | yåç§»é‡ | é˜´å½±æ¨¡ç³ŠåŠå¾„ | é˜´å½±æ‰©æ•£åŠå¾„ | é˜´å½±é¢œè‰² */ box-shadow: 2px 2px 2px 1px rgba(0, 0, 0, 0.2); /* æ’é¡µ(é˜´å½±å‘å†…) | xåç§»é‡ | yåç§»é‡ | é˜´å½±é¢œè‰² */ box-shadow: inset 5em 1em gold; /* ä»»æ„æ•°é‡çš„é˜´å½±ï¼Œä»¥é€—å·åˆ†éš” */ box-shadow: 3px 3px red, -1em 0 0.4em olive; /* å…¨å±€å…³é”®å­— */ box-shadow: inherit; box-shadow: initial; box-shadow: unset; è§„åˆ™ï¼š(å½“ç»™å‡ºä¸¤ä¸ªã€ä¸‰ä¸ªæˆ–å››ä¸ªå€¼æ—¶)\nå¦‚æœåªç»™å‡ºä¸¤ä¸ªå€¼, é‚£ä¹ˆè¿™ä¸¤ä¸ªå€¼å°†ä¼šè¢«å½“ä½œ \u0026lt;offset-x\u0026gt; \u0026lt;offset-y\u0026gt; æ¥è§£é‡Šã€‚ \u0026lt;offset-x\u0026gt; è®¾ç½®æ°´å¹³åç§»é‡ï¼Œæ­£å€¼é˜´å½±åˆ™ä½äºå…ƒç´ å³è¾¹ï¼Œè´Ÿå€¼é˜´å½±åˆ™ä½äºå…ƒç´ å·¦è¾¹ \u0026lt;offset-y\u0026gt; è®¾ç½®å‚ç›´åç§»é‡ï¼Œæ­£å€¼é˜´å½±åˆ™ä½äºå…ƒç´ ä¸‹æ–¹ï¼Œè´Ÿå€¼é˜´å½±åˆ™ä½äºå…ƒç´ ä¸Šæ–¹ å¦‚æœç»™å‡ºäº†ç¬¬ä¸‰ä¸ªå€¼, é‚£ä¹ˆç¬¬ä¸‰ä¸ªå€¼å°†ä¼šè¢«å½“ä½œ\u0026lt;blur-radius\u0026gt;è§£é‡Šã€‚ å€¼è¶Šå¤§ï¼Œæ¨¡ç³Šé¢ç§¯è¶Šå¤§ï¼Œé˜´å½±è¶Šå¤§è¶Šæ·¡ã€‚ä¸èƒ½ä¸ºè´Ÿå€¼ã€‚ å¦‚æœç»™å‡ºäº†ç¬¬å››ä¸ªå€¼, é‚£ä¹ˆç¬¬å››ä¸ªå€¼å°†ä¼šè¢«å½“ä½œ\u0026lt;spread-radius\u0026gt;è§£é‡Šã€‚ å–æ­£å€¼æ—¶ï¼Œé˜´å½±æ‰©å¤§ï¼›å–è´Ÿå€¼æ—¶ï¼Œé˜´å½±æ”¶ç¼©ã€‚é»˜è®¤ä¸º 0ï¼Œæ­¤æ—¶é˜´å½±ä¸å…ƒç´ åŒæ ·å¤§ã€‚éœ€è¦è€ƒè™‘ insetã€‚ å¯é€‰ï¼Œinsetå…³é”®å­—ã€‚é»˜è®¤é˜´å½±åœ¨è¾¹æ¡†å¤–ï¼Œå³é˜´å½±å‘å¤–æ‰©æ•£ã€‚ä½¿ç”¨ inset å…³é”®å­—ä¼šä½¿å¾—é˜´å½±è½åœ¨ç›’å­å†…éƒ¨ã€‚ æ­¤æ—¶é˜´å½±ä¼šåœ¨è¾¹æ¡†ä¹‹å†… ã€èƒŒæ™¯ä¹‹ä¸Šã€å†…å®¹ä¹‹ä¸‹ã€‚ å¯é€‰ï¼Œ\u0026lt;color\u0026gt;å€¼ã€‚ æ ·å¼å¯¹æ¯” 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 \u0026lt;!DOCTYPE html\u0026gt; \u0026lt;html lang=\u0026#34;en\u0026#34;\u0026gt; \u0026lt;head\u0026gt; \u0026lt;meta charset=\u0026#34;UTF-8\u0026#34;\u0026gt; \u0026lt;meta name=\u0026#34;viewport\u0026#34; content=\u0026#34;width=device-width, initial-scale=1.0\u0026#34;\u0026gt; \u0026lt;title\u0026gt;box-shadow\u0026lt;/title\u0026gt; \u0026lt;style\u0026gt; .shadow { width: 40px; height: 40px; margin: 100px auto; border: 2px solid orange; box-shadow: -50px 0px 10px 0px blue, 0px -60px 0px 10px red, 50px 0px 0px 0px green, 0px 50px 0px -10px yellow; } \u0026lt;/style\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; \u0026lt;div class=\u0026#34;shadow\u0026#34;\u0026gt;\u0026lt;/div\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt; è§‚å¯Ÿå›¾ä¸­å››è‰²æ–¹å—å¯çŸ¥ï¼šç¬¬ä¸‰ä¸ªæ•°å€¼ï¼ˆæ¨¡ç³ŠåŠå¾„ï¼‰æ§åˆ¶æ¨¡ç³Šç¨‹åº¦ï¼Œä¸æ”¹å˜é˜´å½±å¤§å°ï¼›ç¬¬å››ä¸ªæ•°å€¼ï¼ˆæ‰©æ•£åŠå¾„ï¼‰ä¼šæ”¹å˜é˜´å½±å¤§å°ï¼Œæ­£å€¼-\u0026gt;é˜´å½±æ‰©å±•ï¼Œè´Ÿå€¼-\u0026gt;é˜´å½±æ”¶ç¼©ã€‚\nå¸¸è§é—®é¢˜ï¼šåˆ¶ä½œå•è¾¹é˜´å½±æ—¶ï¼Œæ˜æ˜è®¾ç½®äº† x,y è½´æ–¹å‘çš„åç§»ï¼Œä¸ºä»€ä¹ˆåˆ«çš„è¾¹è¿˜æ˜¯æœ‰é˜´å½±å‡ºç°ï¼Ÿ\nè§£å†³æ–¹æ¡ˆï¼šå¢åŠ æ­¤è¾¹æ‰€åœ¨æ–¹å‘çš„åç§»é‡ï¼ˆæ•°å€¼å¤§å°ä¸æ­£è´Ÿï¼‰ï¼Œå¹¶é€‚å½“ç¼©å°é˜´å½±å¤§å°ï¼ˆç¬¬å››ä¸ªæ•°å€¼ä¸ºè´Ÿå€¼ï¼‰ï¼Œå‡å°‘æ¨¡ç³ŠåŠå¾„çš„è§†è§‰å½±å“ï¼›\nç¤ºä¾‹ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 \u0026lt;!DOCTYPE html\u0026gt; \u0026lt;html lang=\u0026#34;en\u0026#34;\u0026gt; \u0026lt;head\u0026gt; \u0026lt;meta charset=\u0026#34;UTF-8\u0026#34;\u0026gt; \u0026lt;meta name=\u0026#34;viewport\u0026#34; content=\u0026#34;width=device-width, initial-scale=1.0\u0026#34;\u0026gt; \u0026lt;title\u0026gt;box-shadow-all\u0026lt;/title\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;style\u0026gt; .shadow div { float: left; margin: 50px 120px; width: 100px; height: 100px; border: 2px solid yellowgreen; text-align: center; line-height: 100px; } .top { box-shadow: 0px -5px 10px -5px red; } .right { box-shadow: 5px 0 10px -5px red; } .bottom { box-shadow: 0 5px 10px -5px red; } .left { box-shadow: -5px 0 10px -5px red; } .left-top { box-shadow: -5px -5px 10px -4px red; } .right-top { box-shadow: 5px -5px 10px -4px red; } .right-bottom { box-shadow: 5px 5px 10px -4px red; } .left-bottom { box-shadow: -5px 5px 10px -4px red; } .no-top { /* .left-bottom, .right-bottom ç»„åˆ */ box-shadow: -5px 5px 10px -4px red, 5px 5px 10px -4px red; } .no-right { /* .left-top, .left-bottom ç»„åˆ */ box-shadow: -5px -5px 10px -4px red, -5px 5px 10px -4px red; } .no-bottom { /* .left-top, .right-top ç»„åˆ */ box-shadow: -5px -5px 10px -4px red, 5px -5px 10px -4px red; } .no-left { /* .right-bottom, .right-top ç»„åˆ */ box-shadow: 5px 5px 10px -4px red, 5px -5px 10px -4px red; } \u0026lt;/style\u0026gt; \u0026lt;body\u0026gt; \u0026lt;div class=\u0026#34;shadow\u0026#34;\u0026gt; \u0026lt;div class=\u0026#34;top\u0026#34;\u0026gt;é¡¶éƒ¨é˜´å½±\u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;right\u0026#34;\u0026gt;å³éƒ¨é˜´å½±\u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;bottom\u0026#34;\u0026gt;åº•éƒ¨é˜´å½±\u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;left\u0026#34;\u0026gt;å·¦è¾¹é˜´å½±\u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;left-top\u0026#34;\u0026gt;å·¦ä¸Šé˜´å½±\u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;right-top\u0026#34;\u0026gt;å³ä¸Šé˜´å½±\u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;right-bottom\u0026#34;\u0026gt;å³ä¸‹é˜´å½±\u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;left-bottom\u0026#34;\u0026gt;å·¦ä¸‹é˜´å½±\u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;no-top\u0026#34;\u0026gt;æ— ä¸Šé˜´å½±\u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;no-right\u0026#34;\u0026gt;æ— å³é˜´å½±\u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;no-bottom\u0026#34;\u0026gt;æ— ä¸‹é˜´å½±\u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;no-left\u0026#34;\u0026gt;æ— å·¦é˜´å½±\u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt; å‚è€ƒ åŸæ–‡åœ°å€ ","date":"2022-10-28T22:04:32+08:00","image":"https://ibakuman.github.io/gallery/landscape/30_hu6b33f88901e241f064888f7143885028_2042071_120x120_fill_q75_box_smart1.jpg","permalink":"https://ibakuman.github.io/posts/css/box-shadow/","title":"box-shadow å±æ€§è¯¦è§£åŠç¤ºä¾‹"},{"content":"æ¦‚è¿° Sass (Syntactically Awesome StyleSheets) æ˜¯ä¸€æ¬¾å¼ºåŒ– CSS çš„è¾…åŠ©å·¥å…·ï¼Œå®ƒåœ¨ CSS è¯­æ³•çš„åŸºç¡€ä¸Šå¢åŠ äº†å˜é‡ (variables)ã€åµŒå¥— (nested rules)ã€æ··åˆ (mixins)ã€å¯¼å…¥ (inline imports) ç­‰é«˜çº§åŠŸèƒ½ï¼Œè¿™äº›æ‹“å±•ä»¤ CSS æ›´åŠ å¼ºå¤§ä¸ä¼˜é›…ã€‚ä½¿ç”¨ Sass ä»¥åŠ Sass çš„æ ·å¼åº“ï¼ˆå¦‚ Compass ï¼‰æœ‰åŠ©äºæ›´å¥½åœ°ç»„ç»‡ç®¡ç†æ ·å¼æ–‡ä»¶ï¼Œä»¥åŠæ›´é«˜æ•ˆåœ°å¼€å‘é¡¹ç›®ã€‚\nç‰¹è‰²åŠŸèƒ½ (Features) å®Œå…¨å…¼å®¹ CSS3 åœ¨ CSS åŸºç¡€ä¸Šå¢åŠ å˜é‡ã€åµŒå¥— (nesting)ã€æ··åˆ (mixins) ç­‰åŠŸèƒ½ é€šè¿‡ å‡½æ•° è¿›è¡Œé¢œè‰²å€¼ä¸å±æ€§å€¼çš„è¿ç®— æä¾› æ§åˆ¶æŒ‡ä»¤ (control directives) ç­‰é«˜çº§åŠŸèƒ½ è‡ªå®šä¹‰è¾“å‡ºæ ¼å¼ è¯­æ³•æ ¼å¼ (Syntax) Sass æœ‰ä¸¤ç§è¯­æ³•æ ¼å¼ã€‚é¦–å…ˆæ˜¯ SCSS (Sassy CSS) â€”â€” ä¹Ÿæ˜¯æœ¬æ–‡ç¤ºä¾‹æ‰€ä½¿ç”¨çš„æ ¼å¼ â€”â€” è¿™ç§æ ¼å¼ä»…åœ¨ CSS3 è¯­æ³•çš„åŸºç¡€ä¸Šè¿›è¡Œæ‹“å±•ï¼Œæ‰€æœ‰ CSS3 è¯­æ³•åœ¨ SCSS ä¸­éƒ½æ˜¯é€šç”¨çš„ï¼ŒåŒæ—¶åŠ å…¥ Sass çš„ç‰¹è‰²åŠŸèƒ½ã€‚æ­¤å¤–ï¼ŒSCSS ä¹Ÿæ”¯æŒå¤§å¤šæ•° CSS hacks å†™æ³•ä»¥åŠæµè§ˆå™¨å‰ç¼€å†™æ³• (vendor-specific syntax)ï¼Œä»¥åŠæ—©æœŸçš„ IE æ»¤é•œå†™æ³•ã€‚è¿™ç§æ ¼å¼ä»¥ .scss ä½œä¸ºæ‹“å±•åã€‚\nå¦ä¸€ç§ä¹Ÿæ˜¯æœ€æ—©çš„ Sass è¯­æ³•æ ¼å¼ï¼Œè¢«ç§°ä¸ºç¼©è¿›æ ¼å¼ (Indented Sass) é€šå¸¸ç®€ç§° \u0026ldquo;Sass\u0026rdquo;ï¼Œæ˜¯ä¸€ç§ç®€åŒ–æ ¼å¼ã€‚å®ƒä½¿ç”¨ â€œç¼©è¿›â€ ä»£æ›¿ â€œèŠ±æ‹¬å·â€ è¡¨ç¤ºå±æ€§å±äºæŸä¸ªé€‰æ‹©å™¨ï¼Œç”¨ â€œæ¢è¡Œâ€ ä»£æ›¿ â€œåˆ†å·â€ åˆ†éš”å±æ€§ï¼Œå¾ˆå¤šäººè®¤ä¸ºè¿™æ ·åšæ¯” SCSS æ›´å®¹æ˜“é˜…è¯»ï¼Œä¹¦å†™ä¹Ÿæ›´å¿«é€Ÿã€‚ç¼©è¿›æ ¼å¼ä¹Ÿå¯ä»¥ä½¿ç”¨ Sass çš„å…¨éƒ¨åŠŸèƒ½ï¼Œåªæ˜¯ä¸ SCSS ç›¸æ¯”ä¸ªåˆ«åœ°æ–¹é‡‡å–äº†ä¸åŒçš„è¡¨è¾¾æ–¹å¼ï¼Œå…·ä½“è¯·æŸ¥çœ‹ the indented syntax reference ã€‚è¿™ç§æ ¼å¼ä»¥ .sass ä½œä¸ºæ‹“å±•åã€‚\nCSS åŠŸèƒ½æ‹“å±• (CSS Extensions) åµŒå¥—è§„åˆ™ (Nested Rules) Sass å…è®¸å°†ä¸€å¥— CSS æ ·å¼åµŒå¥—è¿›å¦ä¸€å¥—æ ·å¼ä¸­ï¼Œå†…å±‚çš„æ ·å¼å°†å®ƒå¤–å±‚çš„é€‰æ‹©å™¨ä½œä¸ºçˆ¶é€‰æ‹©å™¨ï¼Œä¾‹å¦‚ï¼š\n1 2 3 4 5 6 7 8 9 #main p { color: #00ff00; width: 97%; .redbox { background-color: #ff0000; color: #000000; } } ç¼–è¯‘ä¸º\n1 2 3 4 5 6 #main p { color: #00ff00; width: 97%; } #main p .redbox { background-color: #ff0000; color: #000000; } åµŒå¥—åŠŸèƒ½é¿å…äº†é‡å¤è¾“å…¥çˆ¶é€‰æ‹©å™¨ï¼Œè€Œä¸”ä»¤å¤æ‚çš„ CSS ç»“æ„æ›´æ˜“äºç®¡ç†ï¼š\n1 2 3 4 5 6 7 8 9 10 #main { width: 97%; p, div { font-size: 2em; a { font-weight: bold; } } pre { font-size: 3em; } } ç¼–è¯‘ä¸º\n1 2 3 4 5 6 7 8 #main { width: 97%; } #main p, #main div { font-size: 2em; } #main p a, #main div a { font-weight: bold; } #main pre { font-size: 3em; } çˆ¶é€‰æ‹©å™¨ \u0026amp; (Referencing Parent Selectors: \u0026amp;) åœ¨åµŒå¥— CSS è§„åˆ™æ—¶ï¼Œæœ‰æ—¶ä¹Ÿéœ€è¦ç›´æ¥ä½¿ç”¨åµŒå¥—å¤–å±‚çš„çˆ¶é€‰æ‹©å™¨ï¼Œä¾‹å¦‚ï¼Œå½“ç»™æŸä¸ªå…ƒç´ è®¾å®š hover æ ·å¼æ—¶ï¼Œæˆ–è€…å½“ body å…ƒç´ æœ‰æŸä¸ª classname æ—¶ï¼Œå¯ä»¥ç”¨ \u0026amp; ä»£è¡¨åµŒå¥—è§„åˆ™å¤–å±‚çš„çˆ¶é€‰æ‹©å™¨ã€‚\n1 2 3 4 5 6 a { font-weight: bold; text-decoration: none; \u0026amp;:hover { text-decoration: underline; } body.firefox \u0026amp; { font-weight: normal; } } ç¼–è¯‘ä¸º\n1 2 3 4 5 6 7 a { font-weight: bold; text-decoration: none; } a:hover { text-decoration: underline; } body.firefox a { font-weight: normal; } ç¼–è¯‘åçš„ CSS æ–‡ä»¶ä¸­ \u0026amp; å°†è¢«æ›¿æ¢æˆåµŒå¥—å¤–å±‚çš„çˆ¶é€‰æ‹©å™¨ï¼Œå¦‚æœå«æœ‰å¤šå±‚åµŒå¥—ï¼Œæœ€å¤–å±‚çš„çˆ¶é€‰æ‹©å™¨ä¼šä¸€å±‚ä¸€å±‚å‘ä¸‹ä¼ é€’ï¼š\n1 2 3 4 5 6 7 #main { color: black; a { font-weight: bold; \u0026amp;:hover { color: red; } } } ç¼–è¯‘ä¸º\n1 2 3 4 5 6 #main { color: black; } #main a { font-weight: bold; } #main a:hover { color: red; } \u0026amp; å¿…é¡»ä½œä¸ºé€‰æ‹©å™¨çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ï¼Œå…¶åå¯ä»¥è·Ÿéšåç¼€ç”Ÿæˆå¤åˆçš„é€‰æ‹©å™¨ï¼Œä¾‹å¦‚\n1 2 3 4 #main { color: black; \u0026amp;-sidebar { border: 1px solid; } } ç¼–è¯‘ä¸º\n1 2 3 4 #main { color: black; } #main-sidebar { border: 1px solid; } å½“çˆ¶é€‰æ‹©å™¨å«æœ‰ä¸åˆé€‚çš„åç¼€æ—¶ï¼ŒSass å°†ä¼šæŠ¥é”™ã€‚\nå±æ€§åµŒå¥— (Nested Properties) æœ‰äº› CSS å±æ€§éµå¾ªç›¸åŒçš„å‘½åç©ºé—´ (namespace)ï¼Œæ¯”å¦‚ font-family, font-size, font-weight éƒ½ä»¥ font ä½œä¸ºå±æ€§çš„å‘½åç©ºé—´ã€‚ä¸ºäº†ä¾¿äºç®¡ç†è¿™æ ·çš„å±æ€§ï¼ŒåŒæ—¶ä¹Ÿä¸ºäº†é¿å…äº†é‡å¤è¾“å…¥ï¼ŒSass å…è®¸å°†å±æ€§åµŒå¥—åœ¨å‘½åç©ºé—´ä¸­ï¼Œä¾‹å¦‚ï¼š\n1 2 3 4 5 6 7 .funky { font: { family: fantasy; size: 30em; weight: bold; } } ç¼–è¯‘ä¸º\n1 2 3 4 .funky { font-family: fantasy; font-size: 30em; font-weight: bold; } å‘½åç©ºé—´ä¹Ÿå¯ä»¥åŒ…å«è‡ªå·±çš„å±æ€§å€¼ï¼Œä¾‹å¦‚ï¼š\n1 2 3 4 5 6 .funky { font: 20px/24px { family: fantasy; weight: bold; } } ç¼–è¯‘ä¸º\n1 2 3 4 .funky { font: 20px/24px; font-family: fantasy; font-weight: bold; } å ä½ç¬¦é€‰æ‹©å™¨ %foo (Placeholder Selectors: %foo) Sass é¢å¤–æä¾›äº†ä¸€ç§ç‰¹æ®Šç±»å‹çš„é€‰æ‹©å™¨ï¼šå ä½ç¬¦é€‰æ‹©å™¨ (placeholder selector)ã€‚ä¸å¸¸ç”¨çš„ id ä¸ class é€‰æ‹©å™¨å†™æ³•ç›¸ä¼¼ï¼Œåªæ˜¯ # æˆ– . æ›¿æ¢æˆäº† %ã€‚å¿…é¡»é€šè¿‡ @extend æŒ‡ä»¤è°ƒç”¨ï¼Œæ›´å¤šä»‹ç»è¯·æŸ¥é˜… @extend-Only Selectors ã€‚\nå½“å ä½ç¬¦é€‰æ‹©å™¨å•ç‹¬ä½¿ç”¨æ—¶ï¼ˆæœªé€šè¿‡ @extend è°ƒç”¨ï¼‰ï¼Œä¸ä¼šç¼–è¯‘åˆ° CSS æ–‡ä»¶ä¸­ã€‚\næ³¨é‡Š Sass æ”¯æŒæ ‡å‡†çš„ CSS å¤šè¡Œæ³¨é‡Š /* */ï¼Œä»¥åŠå•è¡Œæ³¨é‡Š //ï¼Œå‰è€…ä¼šè¢«å®Œæ•´è¾“å‡ºåˆ°ç¼–è¯‘åçš„ CSS æ–‡ä»¶ä¸­ï¼Œè€Œåè€…åˆ™ä¸ä¼šï¼Œä¾‹å¦‚ï¼š\n1 2 3 4 5 6 7 8 9 10 /* This comment is * several lines long. * since it uses the CSS comment syntax, * it will appear in the CSS output. */ body { color: black; } // These comments are only one line long each. // They won\u0026#39;t appear in the CSS output, // since they use the single-line comment syntax. a { color: green; } ç¼–è¯‘ä¸º\n1 2 3 4 5 6 7 8 9 /* This comment is * several lines long. * since it uses the CSS comment syntax, * it will appear in the CSS output. */ body { color: black; } a { color: green; } å°† ! ä½œä¸ºå¤šè¡Œæ³¨é‡Šçš„ç¬¬ä¸€ä¸ªå­—ç¬¦è¡¨ç¤ºåœ¨å‹ç¼©è¾“å‡ºæ¨¡å¼ä¸‹ä¿ç•™è¿™æ¡æ³¨é‡Šå¹¶è¾“å‡ºåˆ° CSS æ–‡ä»¶ä¸­ï¼Œé€šå¸¸ç”¨äºæ·»åŠ ç‰ˆæƒä¿¡æ¯ã€‚\næ’å€¼è¯­å¥ (interpolation) ä¹Ÿå¯å†™è¿›å¤šè¡Œæ³¨é‡Šä¸­è¾“å‡ºå˜é‡å€¼ï¼š\n1 2 $version: \u0026#34;1.2.3\u0026#34;; /* This CSS is generated by My Snazzy Framework version #{$version}. */ ç¼–è¯‘ä¸º\n1 /* This CSS is generated by My Snazzy Framework version 1.2.3. */ SassScript åœ¨ CSS å±æ€§çš„åŸºç¡€ä¸Š Sass æä¾›äº†ä¸€äº›åä¸º SassScript çš„æ–°åŠŸèƒ½ã€‚ SassScript å¯ä½œç”¨äºä»»ä½•å±æ€§ï¼Œå…è®¸å±æ€§ä½¿ç”¨å˜é‡ã€ç®—æ•°è¿ç®—ç­‰é¢å¤–åŠŸèƒ½ã€‚\né€šè¿‡ interpolationï¼ŒSassScript ç”šè‡³å¯ä»¥ç”Ÿæˆé€‰æ‹©å™¨æˆ–å±æ€§åï¼Œè¿™ä¸€ç‚¹å¯¹ç¼–å†™ mixin æœ‰å¾ˆå¤§å¸®åŠ©ã€‚\nInteractive Shell Interactive Shell å¯ä»¥åœ¨å‘½ä»¤è¡Œä¸­æµ‹è¯• SassScript çš„åŠŸèƒ½ã€‚åœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥ sass -iï¼Œç„¶åè¾“å…¥æƒ³è¦æµ‹è¯•çš„ SassScript æŸ¥çœ‹è¾“å‡ºç»“æœï¼š\n1 2 3 4 5 6 7 8 9 $ sass -i \u0026gt;\u0026gt; \u0026#34;Hello, Sassy World!\u0026#34; \u0026#34;Hello, Sassy World!\u0026#34; \u0026gt;\u0026gt; 1px + 1px + 1px 3px \u0026gt;\u0026gt; #777 + #777 # eeeeee \u0026gt;\u0026gt; #777 + #888 white å˜é‡ $(Variables: $) SassScript æœ€æ™®éçš„ç”¨æ³•å°±æ˜¯å˜é‡ï¼Œå˜é‡ä»¥ç¾å…ƒç¬¦å·å¼€å¤´ï¼Œèµ‹å€¼æ–¹æ³•ä¸ CSS å±æ€§çš„å†™æ³•ä¸€æ ·ï¼š\n1 $width: 5em; ç›´æ¥ä½¿ç”¨å³è°ƒç”¨å˜é‡ï¼š\n1 2 3 # main { width: $width; } å˜é‡æ”¯æŒå—çº§ä½œç”¨åŸŸï¼ŒåµŒå¥—è§„åˆ™å†…å®šä¹‰çš„å˜é‡åªèƒ½åœ¨åµŒå¥—è§„åˆ™å†…ä½¿ç”¨ï¼ˆå±€éƒ¨å˜é‡ï¼‰ï¼Œä¸åœ¨åµŒå¥—è§„åˆ™å†…å®šä¹‰çš„å˜é‡åˆ™å¯åœ¨ä»»ä½•åœ°æ–¹ä½¿ç”¨ï¼ˆå…¨å±€å˜é‡ï¼‰ã€‚å°†å±€éƒ¨å˜é‡è½¬æ¢ä¸ºå…¨å±€å˜é‡å¯ä»¥æ·»åŠ  !global å£°æ˜ï¼š\n1 2 3 4 5 6 7 8 # main { $width: 5em !global; width: $width; } # sidebar { width: $width; } ç¼–è¯‘ä¸º\n1 2 3 4 5 6 7 # main { width: 5em; } # sidebar { width: 5em; } æ•°æ®ç±»å‹ (Data Types) SassScript æ”¯æŒ 6 ç§ä¸»è¦çš„æ•°æ®ç±»å‹ï¼š\næ•°å­—ï¼Œ1,2, 13,10px å­—ç¬¦ä¸²ï¼Œæœ‰å¼•å·å­—ç¬¦ä¸²ä¸æ— å¼•å·å­—ç¬¦ä¸²ï¼Œ\u0026quot;foo\u0026quot;, 'bar', baz é¢œè‰²ï¼Œblue, #04a3f9, rgba(255,0,0,0.5) å¸ƒå°”å‹ï¼Œtrue, false ç©ºå€¼ï¼Œnull æ•°ç»„ (list)ï¼Œç”¨ç©ºæ ¼æˆ–é€—å·ä½œåˆ†éš”ç¬¦ï¼Œ1.5em 1em 0 2em, Helvetica, Arial, sans-serif maps, ç›¸å½“äº JavaScript çš„ objectï¼Œ(key1: value1, key2: value2) SassScript ä¹Ÿæ”¯æŒå…¶ä»– CSS å±æ€§å€¼ï¼Œæ¯”å¦‚ Unicode å­—ç¬¦é›†ï¼Œæˆ– !important å£°æ˜ã€‚ç„¶è€Œ Sass ä¸ä¼šç‰¹æ®Šå¯¹å¾…è¿™äº›å±æ€§å€¼ï¼Œä¸€å¾‹è§†ä¸ºæ— å¼•å·å­—ç¬¦ä¸²ã€‚\nå­—ç¬¦ä¸² (Strings) SassScript æ”¯æŒ CSS çš„ä¸¤ç§å­—ç¬¦ä¸²ç±»å‹ï¼šæœ‰å¼•å·å­—ç¬¦ä¸² (quoted strings)ï¼Œå¦‚ \u0026quot;Lucida Grande\u0026quot; 'http://sass-lang.com'ï¼›ä¸æ— å¼•å·å­—ç¬¦ä¸² (unquoted strings)ï¼Œå¦‚ sans-serif boldï¼Œåœ¨ç¼–è¯‘ CSS æ–‡ä»¶æ—¶ä¸ä¼šæ”¹å˜å…¶ç±»å‹ã€‚åªæœ‰ä¸€ç§æƒ…å†µä¾‹å¤–ï¼Œä½¿ç”¨ #{ } (interpolation) æ—¶ï¼Œæœ‰å¼•å·å­—ç¬¦ä¸²å°†è¢«ç¼–è¯‘ä¸ºæ— å¼•å·å­—ç¬¦ä¸²ï¼Œè¿™æ ·ä¾¿äºåœ¨ mixin ä¸­å¼•ç”¨é€‰æ‹©å™¨åï¼š\n1 2 3 4 5 6 @mixin firefox-message($selector) { body.firefox #{$selector}:before { content: \u0026#34;Hi, Firefox users!\u0026#34;; } } @include firefox-message(\u0026#34;.header\u0026#34;); ç¼–è¯‘ä¸º\n1 2 body.firefox .header:before { content: \u0026#34;Hi, Firefox users!\u0026#34;; } è€Œ\n1 2 3 4 5 6 @mixin firefox-message($selector) { body.firefox $selector:before { content: \u0026#34;Hi, Firefox users!\u0026#34;; } } @include firefox-message(\u0026#34;.header\u0026#34;); åˆ™ä¼šåœ¨ç¼–è¯‘æŠ¥é”™ï¼šError: expected selector\næ•°ç»„ (Lists) æ•°ç»„ (lists) æŒ‡ Sass å¦‚ä½•å¤„ç† CSS ä¸­ margin: 10px 15px 0 0 æˆ–è€… font-face: Helvetica, Arial, sans-serif è¿™æ ·é€šè¿‡ç©ºæ ¼æˆ–è€…é€—å·åˆ†éš”çš„ä¸€ç³»åˆ—çš„å€¼ã€‚äº‹å®ä¸Šï¼Œç‹¬ç«‹çš„å€¼ä¹Ÿè¢«è§†ä¸ºæ•°ç»„ â€”â€” åªåŒ…å«ä¸€ä¸ªå€¼çš„æ•°ç»„ã€‚\næ•°ç»„æœ¬èº«æ²¡æœ‰å¤ªå¤šåŠŸèƒ½ï¼Œä½† Sass list functions èµ‹äºˆäº†æ•°ç»„æ›´å¤šæ–°åŠŸèƒ½ï¼šnth å‡½æ•°å¯ä»¥ç›´æ¥è®¿é—®æ•°ç»„ä¸­çš„æŸä¸€é¡¹ï¼›join å‡½æ•°å¯ä»¥å°†å¤šä¸ªæ•°ç»„è¿æ¥åœ¨ä¸€èµ·ï¼›append å‡½æ•°å¯ä»¥åœ¨æ•°ç»„ä¸­æ·»åŠ æ–°å€¼ï¼›è€Œ @each æŒ‡ä»¤èƒ½å¤Ÿéå†æ•°ç»„ä¸­çš„æ¯ä¸€é¡¹ã€‚\næ•°ç»„ä¸­å¯ä»¥åŒ…å«å­æ•°ç»„ï¼Œæ¯”å¦‚ 1px 2px, 5px 6px æ˜¯åŒ…å« 1px 2px ä¸ 5px 6px ä¸¤ä¸ªæ•°ç»„çš„æ•°ç»„ã€‚å¦‚æœå†…å¤–ä¸¤å±‚æ•°ç»„ä½¿ç”¨ç›¸åŒçš„åˆ†éš”æ–¹å¼ï¼Œéœ€è¦ç”¨åœ†æ‹¬å·åŒ…è£¹å†…å±‚ï¼Œæ‰€ä»¥ä¹Ÿå¯ä»¥å†™æˆ (1px 2px) (5px 6px)ã€‚å˜åŒ–æ˜¯ï¼Œä¹‹å‰çš„ 1px 2px, 5px 6px ä½¿ç”¨é€—å·åˆ†å‰²äº†ä¸¤ä¸ªå­æ•°ç»„ (comma-separated)ï¼Œè€Œ (1px 2px) (5px 6px) åˆ™ä½¿ç”¨ç©ºæ ¼åˆ†å‰² (space-separated)ã€‚\nå½“æ•°ç»„è¢«ç¼–è¯‘ä¸º CSS æ—¶ï¼ŒSass ä¸ä¼šæ·»åŠ ä»»ä½•åœ†æ‹¬å·ï¼ˆCSS ä¸­æ²¡æœ‰è¿™ç§å†™æ³•ï¼‰ï¼Œæ‰€ä»¥ (1px 2px) (5px 6px) ä¸ 1px 2px, 5px 6px åœ¨ç¼–è¯‘åçš„ CSS æ–‡ä»¶ä¸­æ˜¯å®Œå…¨ä¸€æ ·çš„ï¼Œä½†æ˜¯å®ƒä»¬åœ¨ Sass æ–‡ä»¶ä¸­å´æœ‰ä¸åŒçš„æ„ä¹‰ï¼Œå‰è€…æ˜¯åŒ…å«ä¸¤ä¸ªæ•°ç»„çš„æ•°ç»„ï¼Œè€Œåè€…æ˜¯åŒ…å«å››ä¸ªå€¼çš„æ•°ç»„ã€‚\nç”¨ () è¡¨ç¤ºä¸åŒ…å«ä»»ä½•å€¼çš„ç©ºæ•°ç»„ï¼ˆåœ¨ Sass 3.3 ç‰ˆä¹‹åä¹Ÿè§†ä¸ºç©ºçš„ mapï¼‰ã€‚ç©ºæ•°ç»„ä¸å¯ä»¥ç›´æ¥ç¼–è¯‘æˆ CSSï¼Œæ¯”å¦‚ç¼–è¯‘ font-family: () Sass å°†ä¼šæŠ¥é”™ã€‚å¦‚æœæ•°ç»„ä¸­åŒ…å«ç©ºæ•°ç»„æˆ–ç©ºå€¼ï¼Œç¼–è¯‘æ—¶å°†è¢«æ¸…é™¤ï¼Œæ¯”å¦‚ 1px 2px () 3px æˆ– 1px 2px null 3pxã€‚\nåŸºäºé€—å·åˆ†éš”çš„æ•°ç»„å…è®¸ä¿ç•™ç»“å°¾çš„é€—å·ï¼Œè¿™æ ·åšçš„æ„ä¹‰æ˜¯å¼ºè°ƒæ•°ç»„çš„ç»“æ„å…³ç³»ï¼Œå°¤å…¶æ˜¯éœ€è¦å£°æ˜åªåŒ…å«å•ä¸ªå€¼çš„æ•°ç»„æ—¶ã€‚ä¾‹å¦‚ (1,) è¡¨ç¤ºåªåŒ…å« 1 çš„æ•°ç»„ï¼Œè€Œ (1 2 3,) è¡¨ç¤ºåŒ…å« 1 2 3 è¿™ä¸ªä»¥ç©ºæ ¼åˆ†éš”çš„æ•°ç»„çš„æ•°ç»„ã€‚\nMaps Maps represent an association between keys and values, where keys are used to look up values. They make it easy to collect values into named groups and access those groups dynamically. They have no direct parallel in CSS, although theyâ€™re syntactically similar to media query expressions: scss $map: (key1: value1, key2: value2, key3: value3);Unlike lists, maps must always be surrounded by parentheses and must always be comma-separated. Both the keys and values in maps can be any SassScript object. A map may only have one value associated with a given key (although that value may be a list). A given value may be associated with many keys, though. Like lists, maps are mostly manipulated using SassScript functions. The map-get function looks up values in a map and the map-merge function adds values to a map. The @each directive can be used to add styles for each key/value pair in a map. The order of pairs in a map is always the same as when the map was created. Maps can also be used anywhere lists can. When used by a list function, a map is treated as a list of pairs. For example, (key1: value1, key2: value2) would be treated as the nested list key1 value1, key2 value2 by list functions. Lists cannot be treated as maps, though, with the exception of the empty list. ( ) represents both a map with no key/value pairs and a list with no elements. Note that map keys can be any Sass data type (even another map) and the syntax for declaring a map allows arbitrary SassScript expressions that will be evaluated to determine the key. Maps cannot be converted to plain CSS. Using one as the value of a variable or an argument to a CSS function will cause an error. Use the inspect($value) function to produce an output string useful for debugging maps.\né¢œè‰² (Colors) Any CSS color expression returns a SassScript Color value. This includes a large number of named colors which are indistinguishable { if two things are indistinguishable, you cannot see any difference between them } from unquoted strings. In compressed output mode, Sass will output the smallest CSS representation of a color. For example, #FF0000 will output as red in compressed mode, but blanchedalmond will output as #FFEBCD. A common issue users encounter with named colors is that since Sass prefers the same output format as was typed in other output modes, a color interpolated into a selector becomes invalid syntax when compressed. To avoid this, always quote named colors if they are meant to be used in the construction of a selector.\nè¿ç®— (Operations) æ‰€æœ‰æ•°æ®ç±»å‹å‡æ”¯æŒç›¸ç­‰è¿ç®— == æˆ– !=ï¼Œæ­¤å¤–ï¼Œæ¯ç§æ•°æ®ç±»å‹ä¹Ÿæœ‰å…¶å„è‡ªæ”¯æŒçš„è¿ç®—æ–¹å¼ã€‚\næ•°å­—è¿ç®— (Number Operations) SassScript æ”¯æŒæ•°å­—çš„åŠ å‡ä¹˜é™¤ã€å–æ•´ç­‰è¿ç®— (+, -, *, /, %)ï¼Œå¦‚æœå¿…è¦ä¼šåœ¨ä¸åŒå•ä½é—´è½¬æ¢å€¼ã€‚\n1 2 3 p { width: 1in + 8pt; } ç¼–è¯‘ä¸º\n1 2 p { width: 1.111in; } å…³ç³»è¿ç®— \u0026lt;, \u0026gt;, \u0026lt;=, \u0026gt;= ä¹Ÿå¯ç”¨äºæ•°å­—è¿ç®—ï¼Œç›¸ç­‰è¿ç®— ==, != å¯ç”¨äºæ‰€æœ‰æ•°æ®ç±»å‹ã€‚\né™¤æ³•è¿ç®— / åœ¨ CSS ä¸­é€šå¸¸èµ·åˆ°åˆ†éš”æ•°å­—çš„ç”¨é€”ï¼ŒSassScript ä½œä¸º CSS è¯­è¨€çš„æ‹“å±•å½“ç„¶ä¹Ÿæ”¯æŒè¿™ä¸ªåŠŸèƒ½ï¼ŒåŒæ—¶ä¹Ÿèµ‹äºˆäº† / é™¤æ³•è¿ç®—çš„åŠŸèƒ½ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœ / åœ¨ SassScript ä¸­æŠŠä¸¤ä¸ªæ•°å­—åˆ†éš”ï¼Œç¼–è¯‘åçš„ CSS æ–‡ä»¶ä¸­ä¹Ÿæ˜¯åŒæ ·çš„ä½œç”¨ã€‚\nä»¥ä¸‹ä¸‰ç§æƒ…å†µ / å°†è¢«è§†ä¸ºé™¤æ³•è¿ç®—ç¬¦å·ï¼š\nå¦‚æœå€¼ï¼Œæˆ–å€¼çš„ä¸€éƒ¨åˆ†ï¼Œæ˜¯å˜é‡æˆ–è€…å‡½æ•°çš„è¿”å›å€¼ å¦‚æœå€¼è¢«åœ†æ‹¬å·åŒ…è£¹ å¦‚æœå€¼æ˜¯ç®—æ•°è¡¨è¾¾å¼çš„ä¸€éƒ¨åˆ† 1 2 3 4 5 6 7 8 p { font: 10px/8px; // Plain CSS, no division $width: 1000px; width: $width/2; // Uses a variable, does division width: round(1.5)/2; // Uses a function, does division height: (500px/2); // Uses parentheses, does division margin-left: 5px + 8px/2px; // Uses +, does division } ç¼–è¯‘ä¸º\n1 2 3 4 5 p { font: 10px/8px; width: 500px; height: 250px; margin-left: 9px; } å¦‚æœéœ€è¦ä½¿ç”¨å˜é‡ï¼ŒåŒæ—¶åˆè¦ç¡®ä¿ / ä¸åšé™¤æ³•è¿ç®—è€Œæ˜¯å®Œæ•´åœ°ç¼–è¯‘åˆ° CSS æ–‡ä»¶ä¸­ï¼Œåªéœ€è¦ç”¨ #{} æ’å€¼è¯­å¥å°†å˜é‡åŒ…è£¹ã€‚\n1 2 3 4 5 p { $font-size: 12px; $line-height: 30px; font: #{$font-size}/#{$line-height}; } ç¼–è¯‘ä¸º\n1 2 p { font: 12px/30px; } é¢œè‰²å€¼è¿ç®— (Color Operations) é¢œè‰²å€¼çš„è¿ç®—æ˜¯åˆ†æ®µè®¡ç®—è¿›è¡Œçš„ï¼Œä¹Ÿå°±æ˜¯åˆ†åˆ«è®¡ç®—çº¢è‰²ï¼Œç»¿è‰²ï¼Œä»¥åŠè“è‰²çš„å€¼ï¼š\n1 2 3 p { color: #010203 + #040506; } è®¡ç®— 01 + 04 = 05 02 + 05 = 07 03 + 06 = 09ï¼Œç„¶åç¼–è¯‘ä¸º\n1 2 p { color: #050709; } ä½¿ç”¨ color functions æ¯”è®¡ç®—é¢œè‰²å€¼æ›´æ–¹ä¾¿ä¸€äº›ã€‚\næ•°å­—ä¸é¢œè‰²å€¼ä¹‹é—´ä¹Ÿå¯ä»¥è¿›è¡Œç®—æ•°è¿ç®—ï¼ŒåŒæ ·ä¹Ÿæ˜¯åˆ†æ®µè®¡ç®—çš„ï¼Œæ¯”å¦‚\n1 2 3 p { color: #010203 * 2; } è®¡ç®— 01 * 2 = 02 02 * 2 = 04 03 * 2 = 06ï¼Œç„¶åç¼–è¯‘ä¸º\n1 2 p { color: #020406; } éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœé¢œè‰²å€¼åŒ…å« alpha channelï¼ˆrgba æˆ– hsla ä¸¤ç§é¢œè‰²å€¼ï¼‰ï¼Œå¿…é¡»æ‹¥æœ‰ç›¸ç­‰çš„ alpha å€¼æ‰èƒ½è¿›è¡Œè¿ç®—ï¼Œå› ä¸ºç®—æœ¯è¿ç®—ä¸ä¼šä½œç”¨äº alpha å€¼ã€‚\n1 2 3 p { color: rgba(255, 0, 0, 0.75) + rgba(0, 255, 0, 0.75); } ç¼–è¯‘ä¸º\n1 2 p { color: rgba(255, 255, 0, 0.75); } é¢œè‰²å€¼çš„ alpha channel å¯ä»¥é€šè¿‡ opacify æˆ– transparentize ä¸¤ä¸ªå‡½æ•°è¿›è¡Œè°ƒæ•´ã€‚\n1 2 3 4 5 $translucent-red: rgba(255, 0, 0, 0.5); p { color: opacify($translucent-red, 0.3); background-color: transparentize($translucent-red, 0.25); } ç¼–è¯‘ä¸º\n1 2 3 p { color: rgba(255, 0, 0, 0.8); background-color: rgba(255, 0, 0, 0.25); } IE æ»¤é•œè¦æ±‚æ‰€æœ‰çš„é¢œè‰²å€¼åŒ…å« alpha å±‚ï¼Œè€Œä¸”æ ¼å¼å¿…é¡»å›ºå®š #AABBCCDDï¼Œä½¿ç”¨ ie_hex_str å‡½æ•°å¯ä»¥å¾ˆå®¹æ˜“åœ°å°†é¢œè‰²è½¬åŒ–ä¸º IE æ»¤é•œè¦æ±‚çš„æ ¼å¼ã€‚\n1 2 3 4 5 $translucent-red: rgba(255, 0, 0, 0.5); $green: #00ff00; div { filter: progid:DXImageTransform.Microsoft.gradient(enabled=\u0026#39;false\u0026#39;, startColorstr=\u0026#39;#{ie-hex-str($green)}\u0026#39;, endColorstr=\u0026#39;#{ie-hex-str($translucent-red)}\u0026#39;); } ç¼–è¯‘ä¸º\n1 2 3 div { filter: progid:DXImageTransform.Microsoft.gradient(enabled=\u0026#39;false\u0026#39;, startColorstr=#FF00FF00, endColorstr=#80FF0000); } å­—ç¬¦ä¸²è¿ç®— (String Operations) + å¯ç”¨äºè¿æ¥å­—ç¬¦ä¸²\n1 2 3 p { cursor: e + -resize; } ç¼–è¯‘ä¸º\n1 2 p { cursor: e-resize; } æ³¨æ„ï¼Œå¦‚æœæœ‰å¼•å·å­—ç¬¦ä¸²ï¼ˆä½äº + å·¦ä¾§ï¼‰è¿æ¥æ— å¼•å·å­—ç¬¦ä¸²ï¼Œè¿ç®—ç»“æœæ˜¯æœ‰å¼•å·çš„ï¼Œç›¸åï¼Œæ— å¼•å·å­—ç¬¦ä¸²ï¼ˆä½äº + å·¦ä¾§ï¼‰è¿æ¥æœ‰å¼•å·å­—ç¬¦ä¸²ï¼Œè¿ç®—ç»“æœåˆ™æ²¡æœ‰å¼•å·ã€‚\n1 2 3 4 p:before { content: \u0026#34;Foo \u0026#34; + Bar; font-family: sans- + \u0026#34;serif\u0026#34;; } ç¼–è¯‘ä¸º\n1 2 3 p:before { content: \u0026#34;Foo Bar\u0026#34;; font-family: sans-serif; } è¿ç®—è¡¨è¾¾å¼ä¸å…¶ä»–å€¼è¿ç”¨æ—¶ï¼Œç”¨ç©ºæ ¼åšè¿æ¥ç¬¦ï¼š\n1 2 3 p { margin: 3px + 4px auto; } ç¼–è¯‘ä¸º\n1 2 p { margin: 7px auto; } åœ¨æœ‰å¼•å·çš„æ–‡æœ¬å­—ç¬¦ä¸²ä¸­ä½¿ç”¨ #{} æ’å€¼è¯­å¥å¯ä»¥æ·»åŠ åŠ¨æ€çš„å€¼ï¼š\n1 2 3 p:before { content: \u0026#34;I ate #{5 + 10} pies!\u0026#34;; } ç¼–è¯‘ä¸º\n1 2 p:before { content: \u0026#34;I ate 15 pies!\u0026#34;; } ç©ºçš„å€¼è¢«è§†ä½œæ’å…¥äº†ç©ºå­—ç¬¦ä¸²ï¼š\n1 2 3 4 $value: null; p:before { content: \u0026#34;I ate #{$value} pies!\u0026#34;; } ç¼–è¯‘ä¸º\n1 2 p:before { content: \u0026#34;I ate pies!\u0026#34;; } å¸ƒå°”è¿ç®— (Boolean Operations) SassScript æ”¯æŒå¸ƒå°”å‹çš„ and or ä»¥åŠ not è¿ç®—ã€‚\næ•°ç»„è¿ç®— (List Operations) æ•°ç»„ä¸æ”¯æŒä»»ä½•è¿ç®—æ–¹å¼ï¼Œåªèƒ½ä½¿ç”¨ list functions æ§åˆ¶ã€‚\nåœ†æ‹¬å· (Parentheses) åœ†æ‹¬å·å¯ä»¥ç”¨æ¥å½±å“è¿ç®—çš„é¡ºåºï¼š\n1 2 3 p { width: 1em + (2em * 3); } ç¼–è¯‘ä¸º\n1 2 p { width: 7em; } å‡½æ•° (Functions) SassScript å®šä¹‰äº†å¤šç§å‡½æ•°ï¼Œæœ‰äº›ç”šè‡³å¯ä»¥é€šè¿‡æ™®é€šçš„ CSS è¯­å¥è°ƒç”¨ï¼š\n1 2 3 p { color: hsl(0, 100%, 50%); } ç¼–è¯‘ä¸º\n1 2 p { color: #ff0000; } å…³é”®è¯å‚æ•° (Keyword Arguments) Sass å‡½æ•°å…è®¸ä½¿ç”¨å…³é”®è¯å‚æ•° (keyword arguments)ï¼Œä¸Šé¢çš„ä¾‹å­ä¹Ÿå¯ä»¥å†™æˆï¼š\n1 2 3 p { color: hsl($hue: 0, $saturation: 100%, $lightness: 50%); } è™½ç„¶ä¸å¤Ÿç®€æ˜ï¼Œä½†æ˜¯é˜…è¯»èµ·æ¥ä¼šæ›´æ–¹ä¾¿ã€‚å…³é”®è¯å‚æ•°ç»™å‡½æ•°æä¾›äº†æ›´çµæ´»çš„æ¥å£ï¼Œä»¥åŠå®¹æ˜“è°ƒç”¨çš„å‚æ•°ã€‚å…³é”®è¯å‚æ•°å¯ä»¥æ‰“ä¹±é¡ºåºä½¿ç”¨ï¼Œå¦‚æœä½¿ç”¨é»˜è®¤å€¼ä¹Ÿå¯ä»¥çœç¼ºï¼Œå¦å¤–ï¼Œå‚æ•°åè¢«è§†ä¸ºå˜é‡åï¼Œä¸‹åˆ’çº¿ã€çŸ­æ¨ªçº¿å¯ä»¥äº’æ¢ä½¿ç”¨ã€‚\né€šè¿‡ Sass:: Script:: Functions æŸ¥çœ‹å®Œæ•´çš„ Sass å‡½æ•°åˆ—è¡¨ï¼Œå‚æ•°åï¼Œä»¥åŠå¦‚ä½•è‡ªå®šä¹‰å‡½æ•°ã€‚\næ’å€¼è¯­å¥ #{}(Interpolation: #{}) é€šè¿‡ #{} æ’å€¼è¯­å¥å¯ä»¥åœ¨é€‰æ‹©å™¨æˆ–å±æ€§åä¸­ä½¿ç”¨å˜é‡ï¼š\n1 2 3 4 5 $name: foo; $attr: border; p.#{$name} { #{$attr}-color: blue; } ç¼–è¯‘ä¸º\n1 2 p.foo { border-color: blue; } æ’å€¼è¯­å¥ä¹Ÿå¯ä»¥åœ¨å±æ€§å€¼ä¸­æ’å…¥ SassScriptï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œè¿™æ ·å¯èƒ½è¿˜ä¸å¦‚ä½¿ç”¨å˜é‡æ–¹ä¾¿ï¼Œä½†æ˜¯ä½¿ç”¨ #{} å¯ä»¥é¿å… Sass è¿è¡Œè¿ç®—è¡¨è¾¾å¼ï¼Œç›´æ¥ç¼–è¯‘ CSSã€‚\n1 2 3 4 5 p { $font-size: 12px; $line-height: 30px; font: #{$font-size}/#{$line-height}; } ç¼–è¯‘ä¸º\n1 2 p { font: 12px/30px; } \u0026amp; in SassScript Just like when itâ€™s used in selectors, \u0026amp; in SassScript refers to the current parent selector. Itâ€™s a comma-separated list of space-separated lists. For example:\n1 2 3 .foo.bar .baz.bang, .bip.qux { $selector: \u0026amp;; } The value of $selector is now ((\u0026quot;.foo.bar\u0026quot; \u0026ldquo;.baz.bang\u0026rdquo;), \u0026ldquo;.bip.qux\u0026rdquo;). The compound { made up of two or more parts } selectors are quoted here to indicate that theyâ€™re strings, but in reality they would be unquoted. Even if the parent selector doesnâ€™t contain a comma or a space, \u0026amp; will always have two levels of nesting, so it can be accessed consistently.\nIf there is no parent selector, the value of \u0026amp; will be null. This means you can use it in a mixin to detect whether a parent selector exists:\n1 2 3 4 5 6 7 8 9 10 11 @mixin does-parent-exist { @if \u0026amp; { \u0026amp;:hover { color: red; } } @else { a { color: red; } } } å˜é‡å®šä¹‰ !default (Variable Defaults: !default) å¯ä»¥åœ¨å˜é‡çš„ç»“å°¾æ·»åŠ  !default ç»™ä¸€ä¸ªæœªé€šè¿‡ !default å£°æ˜èµ‹å€¼çš„å˜é‡èµ‹å€¼ï¼Œæ­¤æ—¶ï¼Œå¦‚æœå˜é‡å·²ç»è¢«èµ‹å€¼ï¼Œä¸ä¼šå†è¢«é‡æ–°èµ‹å€¼ï¼Œä½†æ˜¯å¦‚æœå˜é‡è¿˜æ²¡æœ‰è¢«èµ‹å€¼ï¼Œåˆ™ä¼šè¢«èµ‹äºˆæ–°çš„å€¼ã€‚\n1 2 3 4 5 6 7 8 $content: \u0026#34;First content\u0026#34;; $content: \u0026#34;Second content?\u0026#34; !default; $new_content: \u0026#34;First time reference\u0026#34; !default; # main { content: $content; new-content: $new_content; } ç¼–è¯‘ä¸º\n1 2 3 # main { content: \u0026#34;First content\u0026#34;; new-content: \u0026#34;First time reference\u0026#34;; } å˜é‡æ˜¯ null ç©ºå€¼æ—¶å°†è§†ä¸ºæœªè¢« !default èµ‹å€¼ã€‚\n1 2 3 4 5 6 $content: null; $content: \u0026#34;Non-null content\u0026#34; !default; # main { content: $content; } ç¼–è¯‘ä¸º\n1 2 # main { content: \u0026#34;Non-null content\u0026#34;; } Rules ä¸æŒ‡ä»¤ (@-Rules and Directives) Sass æ”¯æŒæ‰€æœ‰çš„ CSS3 @-Rulesï¼Œä»¥åŠ Sass ç‰¹æœ‰çš„ â€œæŒ‡ä»¤â€ï¼ˆdirectivesï¼‰ã€‚è¿™ä¸€èŠ‚ä¼šè¯¦ç»†è§£é‡Šï¼Œæ›´å¤šèµ„æ–™è¯·æŸ¥çœ‹ æ§åˆ¶æŒ‡ä»¤ (control directives) ä¸ æ··åˆæŒ‡ä»¤ (mixin directives) ä¸¤ä¸ªéƒ¨åˆ†ã€‚\nimport Sass æ‹“å±•äº† @import çš„åŠŸèƒ½ï¼Œå…è®¸å…¶å¯¼å…¥ SCSS æˆ– Sass æ–‡ä»¶ã€‚è¢«å¯¼å…¥çš„æ–‡ä»¶å°†åˆå¹¶ç¼–è¯‘åˆ°åŒä¸€ä¸ª CSS æ–‡ä»¶ä¸­ï¼Œå¦å¤–ï¼Œè¢«å¯¼å…¥çš„æ–‡ä»¶ä¸­æ‰€åŒ…å«çš„å˜é‡æˆ–è€…æ··åˆæŒ‡ä»¤ (mixin) éƒ½å¯ä»¥åœ¨å¯¼å…¥çš„æ–‡ä»¶ä¸­ä½¿ç”¨ã€‚\nSass åœ¨å½“å‰åœ°å€ï¼Œæˆ– Rack, Rails, Merb çš„ Sass æ–‡ä»¶åœ°å€å¯»æ‰¾ Sass æ–‡ä»¶ï¼Œå¦‚æœéœ€è¦è®¾å®šå…¶ä»–åœ°å€ï¼Œå¯ä»¥ç”¨ :load_paths é€‰é¡¹ï¼Œæˆ–è€…åœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥ --load-path å‘½ä»¤ã€‚\né€šå¸¸ï¼Œ@import å¯»æ‰¾ Sass æ–‡ä»¶å¹¶å°†å…¶å¯¼å…¥ï¼Œä½†åœ¨ä»¥ä¸‹æƒ…å†µä¸‹ï¼Œ@import ä»…ä½œä¸ºæ™®é€šçš„ CSS è¯­å¥ï¼Œä¸ä¼šå¯¼å…¥ä»»ä½• Sass æ–‡ä»¶ã€‚\næ–‡ä»¶æ‹“å±•åæ˜¯ .cssï¼› æ–‡ä»¶åä»¥ http:// å¼€å¤´ï¼› æ–‡ä»¶åæ˜¯ url()ï¼› @import åŒ…å« media queriesã€‚ å¦‚æœä¸åœ¨ä¸Šè¿°æƒ…å†µå†…ï¼Œæ–‡ä»¶çš„æ‹“å±•åæ˜¯ .scss æˆ– .sassï¼Œåˆ™å¯¼å…¥æˆåŠŸã€‚æ²¡æœ‰æŒ‡å®šæ‹“å±•åï¼ŒSass å°†ä¼šè¯•ç€å¯»æ‰¾æ–‡ä»¶åç›¸åŒï¼Œæ‹“å±•åä¸º .scss æˆ– .sass çš„æ–‡ä»¶å¹¶å°†å…¶å¯¼å…¥ã€‚\n1 @import \u0026#34;foo.scss\u0026#34;; æˆ–\n1 @import \u0026#34;foo\u0026#34;; éƒ½ä¼šå¯¼å…¥æ–‡ä»¶ foo.scssï¼Œä½†æ˜¯\n1 2 3 4 @import \u0026#34;foo.css\u0026#34;; @import \u0026#34;foo\u0026#34; screen; @import \u0026#34;http://foo.com/bar\u0026#34;; @import url(foo); ç¼–è¯‘ä¸º\n1 2 3 4 @import \u0026#34;foo.css\u0026#34;; @import \u0026#34;foo\u0026#34; screen; @import \u0026#34;http://foo.com/bar\u0026#34;; @import url(foo); Sass å…è®¸åŒæ—¶å¯¼å…¥å¤šä¸ªæ–‡ä»¶ï¼Œä¾‹å¦‚åŒæ—¶å¯¼å…¥ rounded-corners ä¸ text-shadow ä¸¤ä¸ªæ–‡ä»¶ï¼š\n1 @import \u0026#34;rounded-corners\u0026#34;, \u0026#34;text-shadow\u0026#34;; å¯¼å…¥æ–‡ä»¶ä¹Ÿå¯ä»¥ä½¿ç”¨ #{ } æ’å€¼è¯­å¥ï¼Œä½†ä¸æ˜¯é€šè¿‡å˜é‡åŠ¨æ€å¯¼å…¥ Sass æ–‡ä»¶ï¼Œåªèƒ½ä½œç”¨äº CSS çš„ url() å¯¼å…¥æ–¹å¼ï¼š\n1 2 $family: unquote(\u0026#34;Droid+Sans\u0026#34;); @import url(\u0026#34;http://fonts.googleapis.com/css?family=\\#{$family}\u0026#34;); ç¼–è¯‘ä¸º\n1 @import url(\u0026#34;http://fonts.googleapis.com/css?family=Droid+Sans\u0026#34;); åˆ†éŸ³ (Partials) å¦‚æœéœ€è¦å¯¼å…¥ SCSS æˆ–è€… Sass æ–‡ä»¶ï¼Œä½†åˆä¸å¸Œæœ›å°†å…¶ç¼–è¯‘ä¸º CSSï¼Œåªéœ€è¦åœ¨æ–‡ä»¶åå‰æ·»åŠ ä¸‹åˆ’çº¿ï¼Œè¿™æ ·ä¼šå‘Šè¯‰ Sass ä¸è¦ç¼–è¯‘è¿™äº›æ–‡ä»¶ï¼Œä½†å¯¼å…¥è¯­å¥ä¸­å´ä¸éœ€è¦æ·»åŠ ä¸‹åˆ’çº¿ã€‚\nä¾‹å¦‚ï¼Œå°†æ–‡ä»¶å‘½åä¸º _colors.scssï¼Œä¾¿ä¸ä¼šç¼–è¯‘ _colours.css æ–‡ä»¶ã€‚\n1 @import \u0026#34;colors\u0026#34;; ä¸Šé¢çš„ä¾‹å­ï¼Œå¯¼å…¥çš„å…¶å®æ˜¯ _colors.scss æ–‡ä»¶\nNote å¦‚æœåŒæ—¶å­˜åœ¨æ·»åŠ ä¸‹åˆ’çº¿ä¸æœªæ·»åŠ ä¸‹åˆ’çº¿çš„åŒåæ–‡ä»¶ï¼Œæ·»åŠ ä¸‹åˆ’çº¿çš„æ–‡ä»¶å°†ä¼šè¢«å¿½ç•¥ã€‚ åµŒå¥— @import å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œä¸€èˆ¬åœ¨æ–‡ä»¶çš„æœ€å¤–å±‚ï¼ˆä¸åœ¨åµŒå¥—è§„åˆ™å†…ï¼‰ä½¿ç”¨ @importï¼Œå…¶å®ï¼Œä¹Ÿå¯ä»¥å°† @import åµŒå¥—è¿› CSS æ ·å¼æˆ–è€… @media ä¸­ï¼Œä¸å¹³æ—¶çš„ç”¨æ³•æ•ˆæœç›¸åŒï¼Œåªæ˜¯è¿™æ ·å¯¼å…¥çš„æ ·å¼åªèƒ½å‡ºç°åœ¨åµŒå¥—çš„å±‚ä¸­ã€‚\nå‡è®¾ example.scss æ–‡ä»¶åŒ…å«ä»¥ä¸‹æ ·å¼ï¼š\n1 2 3 .example { color: red; } ç„¶åå¯¼å…¥åˆ° #main æ ·å¼å†…\n1 2 3 #main { @import \u0026#34;example\u0026#34;; } å°†ä¼šè¢«ç¼–è¯‘ä¸º\n1 2 3 #main .example { color: red; } Note Directives that are only allowed at the base level of a document, like @mixin or @charset, are not allowed in files that are @imported in a nested context.\nè¯‘ï¼šä¸å¯ä»¥åœ¨æ··åˆæŒ‡ä»¤ (mixin) æˆ–æ§åˆ¶æŒ‡ä»¤ (control directives) ä¸­åµŒå¥— @importã€‚\nmedia Sass ä¸­ @media æŒ‡ä»¤ä¸ CSS ä¸­ç”¨æ³•ä¸€æ ·ï¼Œåªæ˜¯å¢åŠ äº†ä¸€ç‚¹é¢å¤–çš„åŠŸèƒ½ï¼šå…è®¸å…¶åœ¨ CSS è§„åˆ™ä¸­åµŒå¥—ã€‚å¦‚æœ @media åµŒå¥—åœ¨ CSS è§„åˆ™å†…ï¼Œç¼–è¯‘æ—¶ï¼Œ@media å°†è¢«ç¼–è¯‘åˆ°æ–‡ä»¶çš„æœ€å¤–å±‚ï¼ŒåŒ…å«åµŒå¥—çš„çˆ¶é€‰æ‹©å™¨ã€‚è¿™ä¸ªåŠŸèƒ½è®© @media ç”¨èµ·æ¥æ›´æ–¹ä¾¿ï¼Œä¸éœ€è¦é‡å¤ä½¿ç”¨é€‰æ‹©å™¨ï¼Œä¹Ÿä¸ä¼šæ‰“ä¹± CSS çš„ä¹¦å†™æµç¨‹ã€‚\n1 2 3 4 5 6 .sidebar { width: 300px; @media screen and (orientation: landscape) { width: 500px; } } ç¼–è¯‘ä¸º\n1 2 3 4 5 .sidebar { width: 300px; } @media screen and (orientation: landscape) { .sidebar { width: 500px; } } @media çš„ queries å…è®¸äº’ç›¸åµŒå¥—ä½¿ç”¨ï¼Œç¼–è¯‘æ—¶ï¼ŒSass è‡ªåŠ¨æ·»åŠ  and\n1 2 3 4 5 6 7 @media screen { .sidebar { @media (orientation: landscape) { width: 500px; } } } ç¼–è¯‘ä¸º\n1 2 3 @media screen and (orientation: landscape) { .sidebar { width: 500px; } } @media ç”šè‡³å¯ä»¥ä½¿ç”¨ SassScriptï¼ˆæ¯”å¦‚å˜é‡ï¼Œå‡½æ•°ï¼Œä»¥åŠè¿ç®—ç¬¦ï¼‰ä»£æ›¿æ¡ä»¶çš„åç§°æˆ–è€…å€¼ï¼š\n1 2 3 4 5 6 7 8 9 $media: screen; $feature: -webkit-min-device-pixel-ratio; $value: 1.5; @media #{$media} and ($feature: $value) { .sidebar { width: 500px; } } ç¼–è¯‘ä¸º\n1 2 3 @media screen and (-webkit-min-device-pixel-ratio: 1.5) { .sidebar { width: 500px; } } extend åœ¨è®¾è®¡ç½‘é¡µçš„æ—¶å€™å¸¸å¸¸é‡åˆ°è¿™ç§æƒ…å†µï¼šä¸€ä¸ªå…ƒç´ ä½¿ç”¨çš„æ ·å¼ä¸å¦ä¸€ä¸ªå…ƒç´ å®Œå…¨ç›¸åŒï¼Œä½†åˆæ·»åŠ äº†é¢å¤–çš„æ ·å¼ã€‚é€šå¸¸ä¼šåœ¨ HTML ä¸­ç»™å…ƒç´ å®šä¹‰ä¸¤ä¸ª classï¼Œä¸€ä¸ªé€šç”¨æ ·å¼ï¼Œä¸€ä¸ªç‰¹æ®Šæ ·å¼ã€‚å‡è®¾ç°åœ¨è¦è®¾è®¡ä¸€ä¸ªæ™®é€šé”™è¯¯æ ·å¼ä¸ä¸€ä¸ªä¸¥é‡é”™è¯¯æ ·å¼ï¼Œä¸€èˆ¬ä¼šè¿™æ ·å†™ï¼š\n1 2 3 \u0026lt;div class=\u0026#34;error seriousError\u0026#34;\u0026gt; Oh no! You\u0026#39;ve been hacked! \u0026lt;/div\u0026gt; æ ·å¼å¦‚ä¸‹\n1 2 3 4 5 6 7 .error { border: 1px #f00; background-color: #fdd; } .seriousError { border-width: 3px; } éº»çƒ¦çš„æ˜¯ï¼Œè¿™æ ·åšå¿…é¡»æ—¶åˆ»è®°ä½ä½¿ç”¨ .seriousError æ—¶éœ€è¦å‚è€ƒ .error çš„æ ·å¼ï¼Œå¸¦æ¥äº†å¾ˆå¤šä¸å˜ï¼šæ™ºèƒ½æ¯”å¦‚åŠ é‡ç»´æŠ¤è´Ÿæ‹…ï¼Œå¯¼è‡´ bugï¼Œæˆ–è€…ç»™ HTML æ·»åŠ æ— è¯­æ„çš„æ ·å¼ã€‚ä½¿ç”¨ @extend å¯ä»¥é¿å…ä¸Šè¿°æƒ…å†µï¼Œå‘Šè¯‰ Sass å°†ä¸€ä¸ªé€‰æ‹©å™¨ä¸‹çš„æ‰€æœ‰æ ·å¼ç»§æ‰¿ç»™å¦ä¸€ä¸ªé€‰æ‹©å™¨ã€‚\n1 2 3 4 5 6 7 8 .error { border: 1px #f00; background-color: #fdd; } .seriousError { @extend .error; border-width: 3px; } ä¸Šé¢ä»£ç çš„æ„æ€æ˜¯å°† .error ä¸‹çš„æ‰€æœ‰æ ·å¼ç»§æ‰¿ç»™ .seriousErrorï¼Œborder-width: 3px; æ˜¯å•ç‹¬ç»™ .seriousError è®¾å®šç‰¹æ®Šæ ·å¼ï¼Œè¿™æ ·ï¼Œä½¿ç”¨ .seriousError çš„åœ°æ–¹å¯ä»¥ä¸å†ä½¿ç”¨ .errorã€‚\nå…¶ä»–ä½¿ç”¨åˆ° .error çš„æ ·å¼ä¹Ÿä¼šåŒæ ·ç»§æ‰¿ç»™ .seriousErrorï¼Œä¾‹å¦‚ï¼Œå¦ä¸€ä¸ªæ ·å¼ .error.intrusion ä½¿ç”¨äº† hacked.png åšèƒŒæ™¯ï¼Œ\u0026lt;div class=\u0026quot;seriousError intrusion\u0026quot;\u0026gt; ä¹ŸåŒæ ·ä¼šä½¿ç”¨ hacked.png èƒŒæ™¯ã€‚\n1 2 3 .error.intrusion { background-image: url(\u0026#34;/image/hacked.png\u0026#34;); } How it Works @extend çš„ä½œç”¨æ˜¯å°†é‡å¤ä½¿ç”¨çš„æ ·å¼ (.error) å»¶ä¼¸ (extend) ç»™éœ€è¦åŒ…å«è¿™ä¸ªæ ·å¼çš„ç‰¹æ®Šæ ·å¼ï¼ˆ.seriousErrorï¼‰ï¼Œåˆšåˆšçš„ä¾‹å­ï¼š\n1 2 3 4 5 6 7 8 9 10 11 .error { border: 1px #f00; background-color: #fdd; } .error.intrusion { background-image: url(\u0026#34;/image/hacked.png\u0026#34;); } .seriousError { @extend .error; border-width: 3px; } ç¼–è¯‘ä¸º\n1 2 3 4 5 6 7 8 9 .error, .seriousError { border: 1px #f00; background-color: #fdd; } .error.intrusion, .seriousError.intrusion { background-image: url(\u0026#34;/image/hacked.png\u0026#34;); } .seriousError { border-width: 3px; } å½“åˆå¹¶é€‰æ‹©å™¨æ—¶ï¼Œ@extend ä¼šå¾ˆèªæ˜åœ°é¿å…æ— è°“çš„é‡å¤ï¼Œ.seriousError.seriousError å°†ç¼–è¯‘ä¸º .seriousErrorï¼Œä¸èƒ½åŒ¹é…ä»»ä½•å…ƒç´ çš„é€‰æ‹©å™¨ï¼ˆæ¯”å¦‚ #main#footer ï¼‰ä¹Ÿä¼šåˆ é™¤ã€‚\nå»¶ä¼¸å¤æ‚çš„é€‰æ‹©å™¨ (Extending Complex Selectors) Class é€‰æ‹©å™¨å¹¶ä¸æ˜¯å”¯ä¸€å¯ä»¥è¢«å»¶ä¼¸ (extend) çš„ï¼ŒSass å…è®¸å»¶ä¼¸ä»»ä½•å®šä¹‰ç»™å•ä¸ªå…ƒç´ çš„é€‰æ‹©å™¨ï¼Œæ¯”å¦‚ .special.coolï¼Œa:hover æˆ–è€… a.user[href^=\u0026quot;http://\u0026quot;] ç­‰ï¼Œä¾‹å¦‚ï¼š\n1 2 3 .hoverlink { @extend a:hover; } åŒ class å…ƒç´ ä¸€æ ·ï¼Œa:hover çš„æ ·å¼å°†ç»§æ‰¿ç»™ .hoverlinkã€‚\n1 2 3 4 5 6 .hoverlink { @extend a:hover; } a:hover { text-decoration: underline; } ç¼–è¯‘ä¸º\n1 2 a:hover, .hoverlink { text-decoration: underline; } ä¸ä¸Šé¢ .error.intrusion çš„ä¾‹å­ä¸€æ ·ï¼Œæ‰€æœ‰ a:hover çš„æ ·å¼å°†ç»§æ‰¿ç»™ .hoverlinkï¼ŒåŒ…æ‹¬å…¶ä»–ä½¿ç”¨åˆ° a:hover çš„æ ·å¼ï¼Œä¾‹å¦‚ï¼š\n1 2 3 4 5 6 .hoverlink { @extend a:hover; } .comment a.user:hover { font-weight: bold; } ç¼–è¯‘ä¸º\n1 2 .comment a.user:hover, .comment .user.hoverlink { font-weight: bold; } å¤šé‡å»¶ä¼¸ (Multiple Extends) åŒä¸€ä¸ªé€‰æ‹©å™¨å¯ä»¥å»¶ä¼¸ç»™å¤šä¸ªé€‰æ‹©å™¨ï¼Œå®ƒæ‰€åŒ…å«çš„å±æ€§å°†ç»§æ‰¿ç»™æ‰€æœ‰è¢«å»¶ä¼¸çš„é€‰æ‹©å™¨ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 .error { border: 1px #f00; background-color: #fdd; } .attention { font-size: 3em; background-color: #ff0; } .seriousError { @extend .error; @extend .attention; border-width: 3px; } ç¼–è¯‘ä¸º\n1 2 3 4 5 6 7 8 9 10 .error, .seriousError { border: 1px #f00; background-color: #fdd; } .attention, .seriousError { font-size: 3em; background-color: #ff0; } .seriousError { border-width: 3px; } æ¯ä¸ª .seriousError å°†åŒ…å« .error ä¸ .attention ä¸‹çš„æ‰€æœ‰æ ·å¼ï¼Œè¿™æ—¶ï¼Œåå®šä¹‰çš„æ ·å¼äº«æœ‰ä¼˜å…ˆæƒï¼š.seriousError çš„èƒŒæ™¯é¢œè‰²æ˜¯ #ff0 è€Œä¸æ˜¯ #fddï¼Œå› ä¸º .attention åœ¨ .error ä¹‹åå®šä¹‰ã€‚\nå¤šé‡å»¶ä¼¸å¯ä»¥ä½¿ç”¨é€—å·åˆ†éš”é€‰æ‹©å™¨åï¼Œæ¯”å¦‚ @extend .error, .attention; ä¸ @extend .error; @extend.attention æœ‰ç›¸åŒçš„æ•ˆæœã€‚\né“¾å¼å»¶ä¼¸ (Chaining Extends) å½“ä¸€ä¸ªé€‰æ‹©å™¨å»¶ä¼¸ç»™ç¬¬äºŒä¸ªåï¼Œå¯ä»¥ç»§ç»­å°†ç¬¬äºŒä¸ªé€‰æ‹©å™¨å»¶ä¼¸ç»™ç¬¬ä¸‰ä¸ªï¼Œä¾‹å¦‚ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 .error { border: 1px #f00; background-color: #fdd; } .seriousError { @extend .error; border-width: 3px; } .criticalError { @extend .seriousError; position: fixed; top: 10%; bottom: 10%; left: 10%; right: 10%; } ç°åœ¨ï¼Œæ¯ä¸ª .seriousError é€‰æ‹©å™¨å°†åŒ…å« .error çš„æ ·å¼ï¼Œè€Œ .criticalError ä¸ä»…åŒ…å« .seriousError çš„æ ·å¼ä¹Ÿä¼šåŒæ—¶åŒ…å« .error çš„æ‰€æœ‰æ ·å¼ï¼Œä¸Šé¢çš„ä»£ç ç¼–è¯‘ä¸ºï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 .error, .seriousError, .criticalError { border: 1px #f00; background-color: #fdd; } .seriousError, .criticalError { border-width: 3px; } .criticalError { position: fixed; top: 10%; bottom: 10%; left: 10%; right: 10%; } é€‰æ‹©å™¨åˆ— (Selector Sequences) æš‚æ—¶ä¸å¯ä»¥å°†é€‰æ‹©å™¨åˆ— (Selector Sequences)ï¼Œæ¯”å¦‚ .foo .bar æˆ– .foo + .barï¼Œå»¶ä¼¸ç»™å…¶ä»–å…ƒç´ ï¼Œä½†æ˜¯ï¼Œå´å¯ä»¥å°†å…¶ä»–å…ƒç´ å»¶ä¼¸ç»™é€‰æ‹©å™¨åˆ—ï¼š\n1 2 3 4 5 6 7 8 9 10 #fake-links .link { @extend a; } a { color: blue; \u0026amp;:hover { text-decoration: underline; } } ç¼–è¯‘ä¸º\n1 2 3 4 a, #fake-links .link { color: blue; } a:hover, #fake-links .link:hover { text-decoration: underline; } åˆå¹¶é€‰æ‹©å™¨åˆ— (Merging Selector Sequences) æœ‰æ—¶ä¼šé‡åˆ°å¤æ‚çš„æƒ…å†µï¼Œæ¯”å¦‚é€‰æ‹©å™¨åˆ—ä¸­çš„æŸä¸ªå…ƒç´ éœ€è¦å»¶ä¼¸ç»™å¦ä¸€ä¸ªé€‰æ‹©å™¨åˆ—ï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œä¸¤ä¸ªé€‰æ‹©å™¨åˆ—éœ€è¦åˆå¹¶ï¼Œæ¯”å¦‚ï¼š\n1 2 3 4 5 6 #admin .tabbar a { font-weight: bold; } #demo .overview .fakelink { @extend a; } æŠ€æœ¯ä¸Šè®²èƒ½å¤Ÿç”Ÿæˆæ‰€æœ‰åŒ¹é…æ¡ä»¶çš„ç»“æœï¼Œä½†æ˜¯è¿™æ ·ç”Ÿæˆçš„æ ·å¼è¡¨å¤ªå¤æ‚äº†ï¼Œä¸Šé¢è¿™ä¸ªç®€å•çš„ä¾‹å­å°±å¯èƒ½æœ‰ 10 ç§ç»“æœã€‚æ‰€ä»¥ï¼ŒSass åªä¼šç¼–è¯‘è¾“å‡ºæœ‰ç”¨çš„é€‰æ‹©å™¨ã€‚\nå½“ä¸¤ä¸ªåˆ— (sequence) åˆå¹¶æ—¶ï¼Œå¦‚æœæ²¡æœ‰åŒ…å«ç›¸åŒçš„é€‰æ‹©å™¨ï¼Œå°†ç”Ÿæˆä¸¤ä¸ªæ–°é€‰æ‹©å™¨ï¼šç¬¬ä¸€åˆ—å‡ºç°åœ¨ç¬¬äºŒåˆ—ä¹‹å‰ï¼Œæˆ–è€…ç¬¬äºŒåˆ—å‡ºç°åœ¨ç¬¬ä¸€åˆ—ä¹‹å‰ï¼š\n1 2 3 4 5 6 #admin .tabbar a { font-weight: bold; } #demo .overview .fakelink { @extend a; } ç¼–è¯‘ä¸º\n1 2 3 4 #admin .tabbar a, #admin .tabbar #demo .overview .fakelink, #demo .overview #admin .tabbar .fakelink { font-weight: bold; } å¦‚æœä¸¤ä¸ªåˆ— (sequence) åŒ…å«äº†ç›¸åŒçš„é€‰æ‹©å™¨ï¼Œç›¸åŒéƒ¨åˆ†å°†ä¼šåˆå¹¶åœ¨ä¸€èµ·ï¼Œå…¶ä»–éƒ¨åˆ†äº¤æ›¿è¾“å‡ºã€‚åœ¨ä¸‹é¢çš„ä¾‹å­é‡Œï¼Œä¸¤ä¸ªåˆ—éƒ½åŒ…å« #adminï¼Œè¾“å‡ºç»“æœä¸­å®ƒä»¬åˆå¹¶åœ¨äº†ä¸€èµ·ï¼š\n1 2 3 4 5 6 #admin .tabbar a { font-weight: bold; } #admin .overview .fakelink { @extend a; } ç¼–è¯‘ä¸º\n1 2 3 4 #admin .tabbar a, #admin .tabbar .overview .fakelink, #admin .overview .tabbar .fakelink { font-weight: bold; } extend-Only é€‰æ‹©å™¨ (@extend-Only Selectors) æœ‰æ—¶ï¼Œéœ€è¦å®šä¹‰ä¸€å¥—æ ·å¼å¹¶ä¸æ˜¯ç»™æŸä¸ªå…ƒç´ ç”¨ï¼Œè€Œæ˜¯åªé€šè¿‡ @extend æŒ‡ä»¤ä½¿ç”¨ï¼Œå°¤å…¶æ˜¯åœ¨åˆ¶ä½œ Sass æ ·å¼åº“çš„æ—¶å€™ï¼Œå¸Œæœ› Sass èƒ½å¤Ÿå¿½ç•¥ç”¨ä¸åˆ°çš„æ ·å¼ã€‚\nå¦‚æœä½¿ç”¨æ™®é€šçš„ CSS è§„åˆ™ï¼Œæœ€åä¼šç¼–è¯‘å‡ºå¾ˆå¤šç”¨ä¸åˆ°çš„æ ·å¼ï¼Œä¹Ÿå®¹æ˜“ä¸å…¶ä»–æ ·å¼åå†²çªï¼Œæ‰€ä»¥ï¼ŒSass å¼•å…¥äº†â€œå ä½ç¬¦é€‰æ‹©å™¨â€ (placeholder selectors)ï¼Œçœ‹èµ·æ¥å¾ˆåƒæ™®é€šçš„ id æˆ– class é€‰æ‹©å™¨ï¼Œåªæ˜¯ # æˆ– . è¢«æ›¿æ¢æˆäº† %ã€‚å¯ä»¥åƒ class æˆ–è€… id é€‰æ‹©å™¨é‚£æ ·ä½¿ç”¨ï¼Œå½“å®ƒä»¬å•ç‹¬ä½¿ç”¨æ—¶ï¼Œä¸ä¼šè¢«ç¼–è¯‘åˆ° CSS æ–‡ä»¶ä¸­ã€‚\n1 2 3 4 5 6 // This ruleset won\u0026#39;t be rendered on its own. #context a%extreme { color: blue; font-weight: bold; font-size: 2em; } å ä½ç¬¦é€‰æ‹©å™¨éœ€è¦é€šè¿‡å»¶ä¼¸æŒ‡ä»¤ä½¿ç”¨ï¼Œç”¨æ³•ä¸ class æˆ–è€… id é€‰æ‹©å™¨ä¸€æ ·ï¼Œè¢«å»¶ä¼¸åï¼Œå ä½ç¬¦é€‰æ‹©å™¨æœ¬èº«ä¸ä¼šè¢«ç¼–è¯‘ã€‚\n1 2 3 .notice { @extend %extreme; } ç¼–è¯‘ä¸º\n1 2 3 4 #context a.notice { color: blue; font-weight: bold; font-size: 2em; } optional å£°æ˜ (The !optional Flag) å¦‚æœ @extend å¤±è´¥ä¼šæ”¶åˆ°é”™è¯¯æç¤ºï¼Œæ¯”å¦‚ï¼Œè¿™æ ·å†™ a.important {@extend .notice}ï¼Œå½“æ²¡æœ‰ .notice é€‰æ‹©å™¨æ—¶ï¼Œå°†ä¼šæŠ¥é”™ï¼Œåªæœ‰ h1.notice åŒ…å« .notice æ—¶ä¹Ÿä¼šæŠ¥é”™ï¼Œå› ä¸º h1 ä¸ a å†²çªï¼Œä¼šç”Ÿæˆæ–°çš„é€‰æ‹©å™¨ã€‚\nå¦‚æœè¦æ±‚ @extend ä¸ç”Ÿæˆæ–°é€‰æ‹©å™¨ï¼Œå¯ä»¥é€šè¿‡ !optional å£°æ˜è¾¾åˆ°è¿™ä¸ªç›®çš„ï¼Œä¾‹å¦‚ï¼š\n1 2 3 a.important { @extend .notice !optional; } åœ¨æŒ‡ä»¤ä¸­å»¶ä¼¸ (@extend in Directives) åœ¨æŒ‡ä»¤ä¸­ä½¿ç”¨ @extend æ—¶ï¼ˆæ¯”å¦‚åœ¨ @media ä¸­ï¼‰æœ‰ä¸€äº›é™åˆ¶ï¼šSass ä¸å¯ä»¥å°† @media å±‚å¤–çš„ CSS è§„åˆ™å»¶ä¼¸ç»™æŒ‡ä»¤å±‚å†…çš„ CSSï¼Œè¿™æ ·ä¼šç”Ÿæˆå¤§é‡çš„æ— ç”¨ä»£ç ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœåœ¨ @media ï¼ˆæˆ–è€…å…¶ä»– CSS æŒ‡ä»¤ï¼‰ä¸­ä½¿ç”¨ @extendï¼Œå¿…é¡»å»¶ä¼¸ç»™ç›¸åŒæŒ‡ä»¤å±‚ä¸­çš„é€‰æ‹©å™¨ã€‚\nä¸‹é¢çš„ä¾‹å­æ˜¯å¯è¡Œçš„ï¼š\n1 2 3 4 5 6 7 8 9 10 @media print { .error { border: 1px #f00; background-color: #fdd; } .seriousError { @extend .error; border-width: 3px; } } ä½†ä¸å¯ä»¥è¿™æ ·ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 .error { border: 1px #f00; background-color: #fdd; } @media print { .seriousError { // INVALID EXTEND: .error is used outside of the \u0026#34;@media print\u0026#34; directive @extend .error; border-width: 3px; } } å¸Œæœ›æœ‰ä¸€å¤©ï¼Œæµè§ˆå™¨å¯ä»¥åŸç”Ÿæ”¯æŒ @extend æŒ‡ä»¤ï¼Œè¿™æ ·å°±å¯ä»¥åœ¨ä»»ä½•æŒ‡ä»¤ä¸­ä½¿ç”¨å»¶ä¼¸åŠŸèƒ½ï¼Œä¸å†å—é™åˆ¶äº†ã€‚\nat-root The @at-root directive causes one or more rules to be emitted at the root of the document, rather than being nested beneath their parent selectors. It can either be used with a single inline selector:\n1 2 3 4 .parent { ... @at-root .child { ... } } Which would produce:\n1 2 .parent { ... } .child { ... } Or it can be used with a block containing multiple selectors:\n1 2 3 4 5 6 7 8 .parent { ... @at-root { .child1 { ... } .child2 { ... } } .step-child { ... } } Which would output the following:\n1 2 3 4 .parent { ... } .child1 { ... } .child2 { ... } .parent .step-child { ... } at-root (without: \u0026hellip;) and @at-root (with: \u0026hellip;) By default, @at-root just excludes selectors. However, itâ€™s also possible to use @at-root to move outside of nested directives such as @media as well. For example:\n1 2 3 4 5 6 7 8 @media print { .page { width: 8in; @at-root (without: media) { color: red; } } } produces:\n1 2 3 4 5 6 7 8 @media print { .page { width: 8in; } } .page { color: red; } You can use @at-root (without: \u0026hellip;) to move outside of any directive. You can also do it with multiple directives separated by a space: @at-root (without: media supports) moves outside of both @media and @supports queries.\nThere are two special values you can pass to @at-root. â€œruleâ€ refers to normal CSS rules; @at-root (without: rule) is the same as @at-root with no query. @at-root (without: all) means that the styles should be moved outside of all directives and CSS rules.\nIf you want to specify which directives or rules to include, rather than listing which ones should be excluded, you can use with instead of without. For example, @at-root (with: rule) will move outside of all directives, but will preserve any CSS rules.\ndebug The @debug directive prints the value of a SassScript expression to the standard error output stream. Itâ€™s useful for debugging Sass files that have complicated SassScript going on. For example:\n1 @debug 10em + 12em; ç¼–è¯‘ä¸º\n1 Line 1 DEBUG: 22em warn The @warn directive prints the value of a SassScript expression to the standard error output stream. Itâ€™s useful for libraries that need to warn users of deprecations or recovering from minor mixin usage mistakes. There are two major distinctions between @warn and @debug:\nYou can turn warnings off with the \u0026ndash;quiet command-line option or the : quiet Sass option. A stylesheet trace will be printed out along with the message so that the user being warned can see where their styles caused the warning. Usage Example:\n1 2 3 4 5 6 7 8 9 10 11 @mixin adjust-location($x, $y) { @if unitless($x) { @warn \u0026#34;Assuming #{$x} to be in pixels\u0026#34;; $x: 1px * $x; } @if unitless($y) { @warn \u0026#34;Assuming #{$y} to be in pixels\u0026#34;; $y: 1px * $y; } position: relative; left: $x; top: $y; } warn The @error directive throws the value of a SassScript expression as a fatal error, including a nice stack trace. Itâ€™s useful for validating arguments to mixins and functions. For example:\n1 2 3 4 5 6 7 8 9 @mixin adjust-location($x, $y) { @if unitless($x) { @error \u0026#34;$x may not be unitless, was #{$x}.\u0026#34;; } @if unitless($y) { @error \u0026#34;$y may not be unitless, was #{$y}.\u0026#34;; } position: relative; left: $x; top: $y; } There is currently no way to catch errors.\næ§åˆ¶æŒ‡ä»¤ (Control Directives) SassScript æä¾›äº†ä¸€äº›åŸºç¡€çš„æ§åˆ¶æŒ‡ä»¤ï¼Œæ¯”å¦‚åœ¨æ»¡è¶³ä¸€å®šæ¡ä»¶æ—¶å¼•ç”¨æ ·å¼ï¼Œæˆ–è€…è®¾å®šèŒƒå›´é‡å¤è¾“å‡ºæ ¼å¼ã€‚æ§åˆ¶æŒ‡ä»¤æ˜¯ä¸€ç§é«˜çº§åŠŸèƒ½ï¼Œæ—¥å¸¸ç¼–å†™è¿‡ç¨‹ä¸­å¹¶ä¸å¸¸ç”¨åˆ°ï¼Œä¸»è¦ä¸æ··åˆæŒ‡ä»¤ (mixin) é…åˆä½¿ç”¨ï¼Œå°¤å…¶æ˜¯ç”¨åœ¨ Compass ç­‰æ ·å¼åº“ä¸­ã€‚\nif( ) The built-in if( ) function allows you to branch on a condition and returns only one of two possible outcomes. It can be used in any script context. The if function only evaluates the argument corresponding to the one that it will return â€“ this allows you to refer to variables that may not be defined or to have calculations that would otherwise cause an error (E.g. divide by zero).\nif å½“ @if çš„è¡¨è¾¾å¼è¿”å›å€¼ä¸æ˜¯ false æˆ–è€… null æ—¶ï¼Œæ¡ä»¶æˆç«‹ï¼Œè¾“å‡º {} å†…çš„ä»£ç ï¼š\n1 2 3 4 5 p { @if 1 + 1 == 2 { border: 1px solid; } @if 5 \u0026lt; 3 { border: 2px dotted; } @if null { border: 3px double; } } ç¼–è¯‘ä¸º\n1 2 p { border: 1px solid; } @if å£°æ˜åé¢å¯ä»¥è·Ÿå¤šä¸ª @else if å£°æ˜ï¼Œæˆ–è€…ä¸€ä¸ª @else å£°æ˜ã€‚å¦‚æœ @if å£°æ˜å¤±è´¥ï¼ŒSass å°†é€æ¡æ‰§è¡Œ @else if å£°æ˜ï¼Œå¦‚æœå…¨éƒ¨å¤±è´¥ï¼Œæœ€åæ‰§è¡Œ @else å£°æ˜ï¼Œä¾‹å¦‚ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 $type: monster; p { @if $type == ocean { color: blue; } @else if $type == matador { color: red; } @else if $type == monster { color: green; } @else { color: black; } } ç¼–è¯‘ä¸º\n1 2 p { color: green; } for @for æŒ‡ä»¤å¯ä»¥åœ¨é™åˆ¶çš„èŒƒå›´å†…é‡å¤è¾“å‡ºæ ¼å¼ï¼Œæ¯æ¬¡æŒ‰è¦æ±‚ï¼ˆå˜é‡çš„å€¼ï¼‰å¯¹è¾“å‡ºç»“æœåšå‡ºå˜åŠ¨ã€‚è¿™ä¸ªæŒ‡ä»¤åŒ…å«ä¸¤ç§æ ¼å¼ï¼š@for $var from \u0026lt;start\u0026gt; through \u0026lt;end\u0026gt;ï¼Œæˆ–è€… @for $var from \u0026lt;start\u0026gt; to \u0026lt;end\u0026gt;ï¼ŒåŒºåˆ«åœ¨äº through ä¸ to çš„å«ä¹‰ï¼šå½“ä½¿ç”¨ through æ—¶ï¼Œæ¡ä»¶èŒƒå›´åŒ…å« \u0026lt;start\u0026gt; ä¸ \u0026lt;end\u0026gt; çš„å€¼ï¼Œè€Œä½¿ç”¨ to æ—¶æ¡ä»¶èŒƒå›´åªåŒ…å« \u0026lt;start\u0026gt; çš„å€¼ä¸åŒ…å« \u0026lt;end\u0026gt; çš„å€¼ã€‚å¦å¤–ï¼Œ$var å¯ä»¥æ˜¯ä»»ä½•å˜é‡ï¼Œæ¯”å¦‚ $iï¼›\u0026lt;start\u0026gt; å’Œ \u0026lt;end\u0026gt; å¿…é¡»æ˜¯æ•´æ•°å€¼ã€‚\n1 2 3 @for $i from 1 through 3 { .item-#{$i} { width: 2em * $i; } } ç¼–è¯‘ä¸º\n1 2 3 4 5 6 .item-1 { width: 2em; } .item-2 { width: 4em; } .item-3 { width: 6em; } each @each æŒ‡ä»¤çš„æ ¼å¼æ˜¯ $var in \u0026lt;list\u0026gt;, $var å¯ä»¥æ˜¯ä»»ä½•å˜é‡åï¼Œæ¯”å¦‚ $length æˆ–è€… $nameï¼Œè€Œ \u0026lt;list\u0026gt; æ˜¯ä¸€è¿ä¸²çš„å€¼ï¼Œä¹Ÿå°±æ˜¯å€¼åˆ—è¡¨ã€‚\n@each å°†å˜é‡ $var ä½œç”¨äºå€¼åˆ—è¡¨ä¸­çš„æ¯ä¸€ä¸ªé¡¹ç›®ï¼Œç„¶åè¾“å‡ºç»“æœï¼Œä¾‹å¦‚ï¼š\n1 2 3 4 5 @each $animal in puma, sea-slug, egret, salamander { .#{$animal}-icon { background-image: url(\u0026#39;/images/#{$animal}.png\u0026#39;); } } ç¼–è¯‘ä¸º\n1 2 3 4 5 6 7 8 .puma-icon { background-image: url(\u0026#39;/images/puma.png\u0026#39;); } .sea-slug-icon { background-image: url(\u0026#39;/images/sea-slug.png\u0026#39;); } .egret-icon { background-image: url(\u0026#39;/images/egret.png\u0026#39;); } .salamander-icon { background-image: url(\u0026#39;/images/salamander.png\u0026#39;); } Multiple Assignment The @each directive can also use multiple variables, as in @each $var1, $var2, \u0026hellip; in . If is a list of lists, each element of the sub-lists is assigned to the respective variable. For example:\n1 2 3 4 5 6 7 8 9 @each $animal, $color, $cursor in (puma, black, default), (sea-slug, blue, pointer), (egret, white, move) { .#{$animal}-icon { background-image: url(\u0026#39;/images/#{$animal}.png\u0026#39;); border: 2px solid $color; cursor: $cursor; } } is compiled to:\n1 2 3 4 5 6 7 8 9 10 11 12 .puma-icon { background-image: url(\u0026#39;/images/puma.png\u0026#39;); border: 2px solid black; cursor: default; } .sea-slug-icon { background-image: url(\u0026#39;/images/sea-slug.png\u0026#39;); border: 2px solid blue; cursor: pointer; } .egret-icon { background-image: url(\u0026#39;/images/egret.png\u0026#39;); border: 2px solid white; cursor: move; } Since maps are treated as lists of pairs, multiple assignment works with them as well. For example:\n1 2 3 4 5 @each $header, $size in (h1: 2em, h2: 1.5em, h3: 1.2em) { #{$header} { font-size: $size; } } is compiled to:\n1 2 3 4 5 6 h1 { font-size: 2em; } h2 { font-size: 1.5em; } h3 { font-size: 1.2em; } while @while æŒ‡ä»¤é‡å¤è¾“å‡ºæ ¼å¼ç›´åˆ°è¡¨è¾¾å¼è¿”å›ç»“æœä¸º falseã€‚è¿™æ ·å¯ä»¥å®ç°æ¯” @for æ›´å¤æ‚çš„å¾ªç¯ï¼Œåªæ˜¯å¾ˆå°‘ä¼šç”¨åˆ°ã€‚ä¾‹å¦‚ï¼š\n1 2 3 4 5 $i: 6; @while $i \u0026gt; 0 { .item-#{$i} { width: 2em * $i; } $i: $i - 2; } 1 2 3 4 5 6 7 8 .item-6 { width: 12em; } .item-4 { width: 8em; } .item-2 { width: 4em; } æ··åˆæŒ‡ä»¤ (Mixin Directives) æ··åˆæŒ‡ä»¤ï¼ˆMixinï¼‰ç”¨äºå®šä¹‰å¯é‡å¤ä½¿ç”¨çš„æ ·å¼ï¼Œé¿å…äº†ä½¿ç”¨æ— è¯­æ„çš„ classï¼Œæ¯”å¦‚ .float-leftã€‚æ··åˆæŒ‡ä»¤å¯ä»¥åŒ…å«æ‰€æœ‰çš„ CSS è§„åˆ™ï¼Œç»å¤§éƒ¨åˆ† Sass è§„åˆ™ï¼Œç”šè‡³é€šè¿‡å‚æ•°åŠŸèƒ½å¼•å…¥å˜é‡ï¼Œè¾“å‡ºå¤šæ ·åŒ–çš„æ ·å¼ã€‚\nå®šä¹‰æ··åˆæŒ‡ä»¤ @mixin(Defining a Mixin: @mixin) æ··åˆæŒ‡ä»¤çš„ç”¨æ³•æ˜¯åœ¨ @mixin åæ·»åŠ åç§°ä¸æ ·å¼ï¼Œæ¯”å¦‚åä¸º large-text çš„æ··åˆé€šè¿‡ä¸‹é¢çš„ä»£ç å®šä¹‰ï¼š\n1 2 3 4 5 6 7 8 @mixin large-text { font: { family: Arial; size: 20px; weight: bold; } color: #ff0000; } æ··åˆä¹Ÿéœ€è¦åŒ…å«é€‰æ‹©å™¨å’Œå±æ€§ï¼Œç”šè‡³å¯ä»¥ç”¨ \u0026amp; å¼•ç”¨çˆ¶é€‰æ‹©å™¨ï¼š\n1 2 3 4 5 6 7 8 9 10 11 @mixin clearfix { display: inline-block; \u0026amp;:after { content: \u0026#34;.\u0026#34;; display: block; height: 0; clear: both; visibility: hidden; } * html \u0026amp; { height: 1px } } å¼•ç”¨æ··åˆæ ·å¼ @include(Including a Mixin: @include) ä½¿ç”¨ @include æŒ‡ä»¤å¼•ç”¨æ··åˆæ ·å¼ï¼Œæ ¼å¼æ˜¯åœ¨å…¶åæ·»åŠ æ··åˆåç§°ï¼Œä»¥åŠéœ€è¦çš„å‚æ•°ï¼ˆå¯é€‰ï¼‰ï¼š\n1 2 3 4 5 .page-title { @include large-text; padding: 4px; margin-top: 10px; } ç¼–è¯‘ä¸º\n1 2 3 4 5 6 7 .page-title { font-family: Arial; font-size: 20px; font-weight: bold; color: #ff0000; padding: 4px; margin-top: 10px; } ä¹Ÿå¯ä»¥åœ¨æœ€å¤–å±‚å¼•ç”¨æ··åˆæ ·å¼ï¼Œä¸ä¼šç›´æ¥å®šä¹‰å±æ€§ï¼Œä¹Ÿä¸å¯ä»¥ä½¿ç”¨çˆ¶é€‰æ‹©å™¨ã€‚\n1 2 3 4 5 6 7 @mixin silly-links { a { color: blue; background-color: red; } } @include silly-links; ç¼–è¯‘ä¸º\n1 2 3 a { color: blue; background-color: red; } æ··åˆæ ·å¼ä¸­ä¹Ÿå¯ä»¥åŒ…å«å…¶ä»–æ··åˆæ ·å¼ï¼Œæ¯”å¦‚\n1 2 3 4 5 6 @mixin compound { @include highlighted-background; @include header-text; } @mixin highlighted-background { background-color: #fc0; } @mixin header-text { font-size: 20px; } æ··åˆæ ·å¼ä¸­åº”è¯¥åªå®šä¹‰åä»£é€‰æ‹©å™¨ï¼Œè¿™æ ·å¯ä»¥å®‰å…¨çš„å¯¼å…¥åˆ°æ–‡ä»¶çš„ä»»ä½•ä½ç½®ã€‚\nå‚æ•° (Arguments) å‚æ•°ç”¨äºç»™æ··åˆæŒ‡ä»¤ä¸­çš„æ ·å¼è®¾å®šå˜é‡ï¼Œå¹¶ä¸”èµ‹å€¼ä½¿ç”¨ã€‚åœ¨å®šä¹‰æ··åˆæŒ‡ä»¤çš„æ—¶å€™ï¼ŒæŒ‰ç…§å˜é‡çš„æ ¼å¼ï¼Œé€šè¿‡é€—å·åˆ†éš”ï¼Œå°†å‚æ•°å†™è¿›åœ†æ‹¬å·é‡Œã€‚å¼•ç”¨æŒ‡ä»¤æ—¶ï¼ŒæŒ‰ç…§å‚æ•°çš„é¡ºåºï¼Œå†å°†æ‰€èµ‹çš„å€¼å¯¹åº”å†™è¿›æ‹¬å·ï¼š\n1 2 3 4 5 6 7 8 @mixin sexy-border($color, $width) { border: { color: $color; width: $width; style: dashed; } } p { @include sexy-border(blue, 1in); } ç¼–è¯‘ä¸º\n1 2 3 4 p { border-color: blue; border-width: 1in; border-style: dashed; } æ··åˆæŒ‡ä»¤ä¹Ÿå¯ä»¥ä½¿ç”¨ç»™å˜é‡èµ‹å€¼çš„æ–¹æ³•ç»™å‚æ•°è®¾å®šé»˜è®¤å€¼ï¼Œç„¶åï¼Œå½“è¿™ä¸ªæŒ‡ä»¤è¢«å¼•ç”¨çš„æ—¶å€™ï¼Œå¦‚æœæ²¡æœ‰ç»™å‚æ•°èµ‹å€¼ï¼Œåˆ™è‡ªåŠ¨ä½¿ç”¨é»˜è®¤å€¼ï¼š\n1 2 3 4 5 6 7 8 9 @mixin sexy-border($color, $width: 1in) { border: { color: $color; width: $width; style: dashed; } } p { @include sexy-border(blue); } h1 { @include sexy-border(blue, 2in); } ç¼–è¯‘ä¸º\n1 2 3 4 5 6 7 8 9 p { border-color: blue; border-width: 1in; border-style: dashed; } h1 { border-color: blue; border-width: 2in; border-style: dashed; } å…³é”®è¯å‚æ•° (Keyword Arguments) æ··åˆæŒ‡ä»¤ä¹Ÿå¯ä»¥ä½¿ç”¨å…³é”®è¯å‚æ•°ï¼Œä¸Šé¢çš„ä¾‹å­ä¹Ÿå¯ä»¥å†™æˆï¼š\n1 2 p { @include sexy-border($color: blue); } h1 { @include sexy-border($color: blue, $width: 2in); } è™½ç„¶ä¸å¤Ÿç®€æ˜ï¼Œä½†æ˜¯é˜…è¯»èµ·æ¥ä¼šæ›´æ–¹ä¾¿ã€‚å…³é”®è¯å‚æ•°ç»™å‡½æ•°æä¾›äº†æ›´çµæ´»çš„æ¥å£ï¼Œä»¥åŠå®¹æ˜“è°ƒç”¨çš„å‚æ•°ã€‚å…³é”®è¯å‚æ•°å¯ä»¥æ‰“ä¹±é¡ºåºä½¿ç”¨ï¼Œå¦‚æœä½¿ç”¨é»˜è®¤å€¼ä¹Ÿå¯ä»¥çœç¼ºï¼Œå¦å¤–ï¼Œå‚æ•°åè¢«è§†ä¸ºå˜é‡åï¼Œä¸‹åˆ’çº¿ã€çŸ­æ¨ªçº¿å¯ä»¥äº’æ¢ä½¿ç”¨ã€‚\nå¯å˜å‚æ•° (Variable Arguments) æœ‰æ—¶ï¼Œä¸èƒ½ç¡®å®šæ··åˆæŒ‡ä»¤éœ€è¦ä½¿ç”¨å¤šå°‘ä¸ªå‚æ•°ï¼Œæ¯”å¦‚ä¸€ä¸ªå…³äº box-shadow çš„æ··åˆæŒ‡ä»¤ä¸èƒ½ç¡®å®šæœ‰å¤šå°‘ä¸ª \u0026lsquo;shadow\u0026rsquo; ä¼šè¢«ç”¨åˆ°ã€‚è¿™æ—¶ï¼Œå¯ä»¥ä½¿ç”¨å¯å˜å˜é‡ â€¦ å£°æ˜ï¼ˆå†™åœ¨å‚æ•°çš„æœ€åæ–¹ï¼‰å‘Šè¯‰ Sass å°†è¿™äº›å‚æ•°è§†ä¸ºå€¼åˆ—è¡¨å¤„ç†ï¼š\n1 2 3 4 5 6 7 8 @mixin box-shadow($shadows...) { -moz-box-shadow: $shadows; -webkit-box-shadow: $shadows; box-shadow: $shadows; } .shadows { @include box-shadow(0px 4px 5px #666, 2px 6px 10px #999); } ç¼–è¯‘ä¸º\n1 2 3 4 5 .shadowed { -moz-box-shadow: 0px 4px 5px #666, 2px 6px 10px #999; -webkit-box-shadow: 0px 4px 5px #666, 2px 6px 10px #999; box-shadow: 0px 4px 5px #666, 2px 6px 10px #999; } å¯å˜å‚æ•°ä¹Ÿå¯ä»¥ç”¨åœ¨å¼•ç”¨æ··åˆæŒ‡ä»¤çš„æ—¶å€™ (@include)ï¼Œä¸å¹³æ—¶ç”¨æ³•ä¸€æ ·ï¼Œå°†ä¸€ä¸²å€¼åˆ—è¡¨ä¸­çš„å€¼é€æ¡ä½œä¸ºå‚æ•°å¼•ç”¨ï¼š\n1 2 3 4 5 6 7 8 9 @mixin colors($text, $background, $border) { color: $text; background-color: $background; border-color: $border; } $values: #ff0000, #00ff00, #0000ff; .primary { @include colors($values...); } ç¼–è¯‘ä¸º\n1 2 3 4 5 .primary { color: #ff0000; background-color: #00ff00; border-color: #0000ff; } Note You can use variable arguments to wrap a mixin and add additional styles without changing the argument signature of the mixin. If you do so, even keyword arguments will get passed through to the wrapped mixin. For example 1 2 3 4 5 6 7 8 @mixin wrapped-stylish-mixin($args...) { font-weight: bold; @include stylish-mixin($args...); } .stylish { // The $width argument will get passed on to \u0026#34;stylish-mixin\u0026#34; as a keyword @include wrapped-stylish-mixin(#00ff00, $width: 100px); } å‘æ··åˆæ ·å¼ä¸­å¯¼å…¥å†…å®¹ (Passing Content Blocks to a Mixin) åœ¨å¼•ç”¨æ··åˆæ ·å¼çš„æ—¶å€™ï¼Œå¯ä»¥å…ˆå°†ä¸€æ®µä»£ç å¯¼å…¥åˆ°æ··åˆæŒ‡ä»¤ä¸­ï¼Œç„¶åå†è¾“å‡ºæ··åˆæ ·å¼ï¼Œé¢å¤–å¯¼å…¥çš„éƒ¨åˆ†å°†å‡ºç°åœ¨ @content æ ‡å¿—çš„åœ°æ–¹ï¼š\n1 2 3 4 5 6 7 8 9 10 @mixin apply-to-ie6-only { * html { @content; } } @include apply-to-ie6-only { #logo { background-image: url(/logo.gif); } } ç¼–è¯‘ä¸º\n1 2 3 * html #logo { background-image: url(/logo.gif); } ä¸ºä¾¿äºä¹¦å†™ï¼Œ@mixin å¯ä»¥ç”¨ = è¡¨ç¤ºï¼Œè€Œ @include å¯ä»¥ç”¨ + è¡¨ç¤ºï¼Œæ‰€ä»¥ä¸Šé¢çš„ä¾‹å­å¯ä»¥å†™æˆï¼š\n1 2 3 4 5 6 7 =apply-to-ie6-only * html @content +apply-to-ie6-only #logo background-image: url(/logo.gif) æ³¨æ„ï¼š å½“ @content åœ¨æŒ‡ä»¤ä¸­å‡ºç°è¿‡å¤šæ¬¡æˆ–è€…å‡ºç°åœ¨å¾ªç¯ä¸­æ—¶ï¼Œé¢å¤–çš„ä»£ç å°†è¢«å¯¼å…¥åˆ°æ¯ä¸€ä¸ªåœ°æ–¹ã€‚\nVariable Scope and Content Blocks Note The block of content passed to a mixin are evaluated in the scope where the block is defined, not in the scope of the mixin. This means that variables local to the mixin cannot be used within the passed style block and variables will resolve to the global value: 1 2 3 4 5 6 7 8 9 $color: white; @mixin colors($color: blue) { background-color: $color; @content; border-color: $color; } .colors { @include colors { color: $color; } } ç¼–è¯‘ä¸º\n1 2 3 4 5 .colors { background-color: blue; color: white; border-color: blue; } Additionally, this makes it clear that the variables and mixins that are used within the passed block are related to the other styles around where the block is defined. For example:\n1 2 3 4 5 6 7 #sidebar { $sidebar-width: 300px; width: $sidebar-width; @include smartphone { width: $sidebar-width / 3; } } å‡½æ•°æŒ‡ä»¤ (Function Directives) Sass æ”¯æŒè‡ªå®šä¹‰å‡½æ•°ï¼Œå¹¶èƒ½åœ¨ä»»ä½•å±æ€§å€¼æˆ– Sass script ä¸­ä½¿ç”¨ï¼š\n1 2 3 4 5 6 7 8 $grid-width: 40px; $gutter-width: 10px; @function grid-width($n) { @return $n * $grid-width + ($n - 1) * $gutter-width; } #sidebar { width: grid-width(5); } ç¼–è¯‘ä¸º\n1 2 #sidebar { width: 240px; } ä¸ mixin ç›¸åŒï¼Œä¹Ÿå¯ä»¥ä¼ é€’è‹¥å¹²ä¸ªå…¨å±€å˜é‡ç»™å‡½æ•°ä½œä¸ºå‚æ•°ã€‚ä¸€ä¸ªå‡½æ•°å¯ä»¥å«æœ‰å¤šæ¡è¯­å¥ï¼Œéœ€è¦è°ƒç”¨ @return è¾“å‡ºç»“æœã€‚\nè‡ªå®šä¹‰çš„å‡½æ•°ä¹Ÿå¯ä»¥ä½¿ç”¨å…³é”®è¯å‚æ•°ï¼Œä¸Šé¢çš„ä¾‹å­è¿˜å¯ä»¥è¿™æ ·å†™ï¼š\n1 #sidebar { width: grid-width($n: 5); } å»ºè®®åœ¨è‡ªå®šä¹‰å‡½æ•°å‰æ·»åŠ å‰ç¼€é¿å…å‘½åå†²çªï¼Œå…¶ä»–äººé˜…è¯»ä»£ç æ—¶ä¹Ÿä¼šçŸ¥é“è¿™ä¸æ˜¯ Sass æˆ–è€… CSS çš„è‡ªå¸¦åŠŸèƒ½ã€‚\nè‡ªå®šä¹‰å‡½æ•°ä¸ mixin ç›¸åŒï¼Œéƒ½æ”¯æŒ variable arguments\nè¾“å‡ºæ ¼å¼ (Output Style) Sass é»˜è®¤çš„ CSS è¾“å‡ºæ ¼å¼å¾ˆç¾è§‚ä¹Ÿèƒ½æ¸…æ™°åæ˜ æ–‡æ¡£ç»“æ„ï¼Œä¸ºæ»¡è¶³å…¶ä»–éœ€æ±‚ Sass ä¹Ÿæä¾›äº†å¤šç§è¾“å‡ºæ ¼å¼ã€‚\nSass æä¾›äº†å››ç§è¾“å‡ºæ ¼å¼ï¼Œå¯ä»¥é€šè¿‡ : style option é€‰é¡¹è®¾å®šï¼Œæˆ–è€…åœ¨å‘½ä»¤è¡Œä¸­ä½¿ç”¨ --style é€‰é¡¹ã€‚\nnested Nested ï¼ˆåµŒå¥—ï¼‰æ ·å¼æ˜¯ Sass é»˜è®¤çš„è¾“å‡ºæ ¼å¼ï¼Œèƒ½å¤Ÿæ¸…æ™°åæ˜  CSS ä¸ HTML çš„ç»“æ„å…³ç³»ã€‚é€‰æ‹©å™¨ä¸å±æ€§ç­‰å•ç‹¬å ç”¨ä¸€è¡Œï¼Œç¼©è¿›é‡ä¸ Sass æ–‡ä»¶ä¸­ä¸€è‡´ï¼Œæ¯è¡Œçš„ç¼©è¿›é‡åæ˜ äº†å…¶åœ¨åµŒå¥—è§„åˆ™å†…çš„å±‚æ•°ã€‚å½“é˜…è¯»å¤§å‹ CSS æ–‡ä»¶æ—¶ï¼Œè¿™ç§æ ·å¼å¯ä»¥å¾ˆå®¹æ˜“åœ°åˆ†ææ–‡ä»¶çš„ä¸»è¦ç»“æ„ã€‚\n1 2 3 4 5 6 7 8 9 10 #main { color: #fff; background-color: #000; } #main p { width: 10em; } .huge { font-size: 10em; font-weight: bold; text-decoration: underline; } expanded Expanded è¾“å‡ºæ›´åƒæ˜¯æ‰‹å†™çš„æ ·å¼ï¼Œé€‰æ‹©å™¨ã€å±æ€§ç­‰å„å ç”¨ä¸€è¡Œï¼Œå±æ€§æ ¹æ®é€‰æ‹©å™¨ç¼©è¿›ï¼Œè€Œé€‰æ‹©å™¨ä¸åšä»»ä½•ç¼©è¿›ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 # main { color: #fff; background-color: #000; } #main p { width: 10em; } .huge { font-size: 10em; font-weight: bold; text-decoration: underline; } compact Compact è¾“å‡ºæ–¹å¼æ¯”èµ·ä¸Šé¢ä¸¤ç§å ç”¨çš„ç©ºé—´æ›´å°‘ï¼Œæ¯æ¡ CSS è§„åˆ™åªå ä¸€è¡Œï¼ŒåŒ…å«å…¶ä¸‹çš„æ‰€æœ‰å±æ€§ã€‚åµŒå¥—è¿‡çš„é€‰æ‹©å™¨åœ¨è¾“å‡ºæ—¶æ²¡æœ‰ç©ºè¡Œï¼Œä¸åµŒå¥—çš„é€‰æ‹©å™¨ä¼šè¾“å‡ºç©ºç™½è¡Œä½œä¸ºåˆ†éš”ç¬¦ã€‚\n1 2 3 4 #main { color: #fff; background-color: #000; } #main p { width: 10em; } .huge { font-size: 10em; font-weight: bold; text-decoration: underline; } compressed Compressed è¾“å‡ºæ–¹å¼åˆ é™¤æ‰€æœ‰æ— æ„ä¹‰çš„ç©ºæ ¼ã€ç©ºç™½è¡Œã€ä»¥åŠæ³¨é‡Šï¼ŒåŠ›æ±‚å°†æ–‡ä»¶ä½“ç§¯å‹ç¼©åˆ°æœ€å°ï¼ŒåŒæ—¶ä¹Ÿä¼šåšå‡ºå…¶ä»–è°ƒæ•´ï¼Œæ¯”å¦‚ä¼šè‡ªåŠ¨æ›¿æ¢å ç”¨ç©ºé—´æœ€å°çš„é¢œè‰²è¡¨è¾¾æ–¹å¼ã€‚\n1 #main{color:#fff;background-color:#000}#main p{width:10em}.huge{font-size:10em;font-weight:bold;text-decoration:underline} æ‹“å±• Sass (Extending Sass) Sass æä¾›äº†å¾ˆå¤šé«˜çº§è‡ªå®šä¹‰åŠŸèƒ½ï¼Œä½¿ç”¨è¿™äº›åŠŸèƒ½éœ€è¦æœ‰è‰¯å¥½çš„ Ruby åŸºç¡€ã€‚\nè‡ªå®šä¹‰ Sass å‡½æ•° (Defining Custom Sass Functions) é€šè¿‡ Ruby API å¯ä»¥è‡ªå®šä¹‰ Sass å‡½æ•°ï¼Œå…·ä½“è¯·æŸ¥çœ‹ source documentation ã€‚\nå­˜å‚¨ç¼“å­˜ (Cache Stores) Sass caches parsed documents so that they can be reused without parsing them again unless they have changed. By default, Sass will write these cache files to a location on the filesystem indicated by : cache_location. If you cannot write to the filesystem or need to share cache across ruby processes or machines, then you can define your own cache store and set the: cache_store option. For details on creating your own cache store, please see the source documentation.\nè‡ªå®šä¹‰å¯¼å…¥ (Custom Importers) Sass importers are in charge of taking paths passed to @import and finding the appropriate Sass code for those paths. By default, this code is loaded from the filesystem, but importers could be added to load from a database, over HTTP, or use a different file naming scheme than what Sass expects.\nEach importer is in charge of a single load path (or whatever the corresponding notion is for the backend). Importers can be placed in the : load_paths array alongside normal filesystem paths.\nWhen resolving an @import, Sass will go through the load paths looking for an importer that successfully imports the path. Once one is found, the imported file is used.\nUser-created importers must inherit from Sass:: Importers:: Base.\nå‚è€ƒ åŸæ–‡åœ°å€ ","date":"2022-10-27T08:09:40+08:00","image":"https://ibakuman.github.io/gallery/landscape/09_hu8c633d2cf76ab6635d2135cc8fe71c52_994828_120x120_fill_q75_box_smart1.jpg","permalink":"https://ibakuman.github.io/posts/sass/tutorial/","title":"Sass æ•™ç¨‹"},{"content":" å‰ç«¯æ¨¡å—åŒ–æ˜¯å‰ç«¯å·¥ç¨‹åŒ–çš„åŸºçŸ³ã€‚æ—¶ä¸‹ï¼Œå¤§å‰ç«¯æ—¶ä»£ä¸­å¯¹æ¨¡å—çš„è¿ç”¨æ›´æ˜¯æ— å¤„ä¸åœ¨ï¼Œè€Œæ”¾çœ¼æœªæ¥ï¼Œes6 ä¸­æ‰€æå‡ºçš„ import å’Œ export çš„å½¢å¼ä¼¼ä¹å°†ç»Ÿä¸€å‰åç«¯çš„æ¨¡å—åŒ–åŠ è½½ã€‚\næ¦‚è¿° éš”ç¦»ä¸åŒçš„ JavaScript æ–‡ä»¶ï¼Œä»…æš´éœ²å½“å‰æ¨¡å—æ‰€éœ€è¦çš„å…¶ä»–æ¨¡å—ï¼Œè¿™å°±æ˜¯æ¨¡å—åŒ–æ€æƒ³ã€‚\nåœ¨å­¦ä¹  ES6 çš„æ¨¡å—åŒ–ä¹‹å‰å…ˆå¤ä¹ ä¸€ä¸‹ä¹‹å‰å‡ºç°çš„æ¨¡å—åŒ–ï¼Œæ¯”è¾ƒå¸¸ç”¨çš„æœ‰ä¸‰ç§è§„èŒƒå®šä¹‰ï¼šCommonJSã€AMDã€CMDã€‚\nå®ƒä»¬çš„ç‰¹ç‚¹ä¸ç›¸äº’é—´çš„åŒºåˆ«æ˜¯ï¼š\nCommonJS é€‚ç”¨äºæœåŠ¡ç«¯ï¼Œå†™æ³•ä¸ºï¼š 1 2 var clock = require(\u0026#39;clock.js\u0026#39;) clock.start(); ä¸Šä¾‹è¡¨ç¤ºï¼Œclock çš„è°ƒç”¨å¿…é¡»ç­‰å¾… clock.js è¯·æ±‚åŠ è½½æˆåŠŸï¼Œæ¢å¥è¯è¯´ï¼Œæ˜¯åŒæ­¥æ“ä½œï¼Œè€Œè¿™ä¹Ÿå¯¼è‡´äº† CommonJS å¹¿æ³›åº”ç”¨äºæœåŠ¡ç«¯è€Œä¸æ˜¯å®¢æˆ·ç«¯ï¼ˆæœåŠ¡å™¨è¯»å–æ¨¡å—éƒ½æ˜¯åœ¨æœ¬åœ°ç£ç›˜ï¼ŒåŠ è½½é€Ÿåº¦å¿«ï¼Œè€Œå¦‚æœæ˜¯åœ¨å®¢æˆ·ç«¯åˆ™å®¹æ˜“å‡ºç°â€˜å‡æ­»â€™çŠ¶æ€ï¼‰é‚£ä¹ˆèƒ½ä¸èƒ½ç”¨å¼‚æ­¥åŠ è½½æ¨¡å—å‘¢ï¼Ÿ\nAMD (Asynchronous Module Definition) å°±æ˜¯å¼‚æ­¥åŠ è½½æ¨¡å—ï¼Œå¤šç”¨äºæµè§ˆå™¨ï¼ˆ require.js åº”ç”¨äº†è¿™ä¸€è§„èŒƒï¼‰ï¼Œå†™æ³•ä¸ºï¼š 1 2 3 4 5 6 require([module],callback); // eg require([\u0026#39;clock.js\u0026#39;],function(clock){ clock.start(); }) è™½ç„¶å®ç°äº†å¼‚æ­¥åŠ è½½ï¼Œè§„é¿äº†æµè§ˆå™¨çš„â€œå‡æ­»â€é—®é¢˜ï¼Œä½†æ˜¯ä¹Ÿå­˜åœ¨ç¼ºç‚¹ï¼šä¸€å¼€å§‹å°±æŠŠæ‰€æœ‰ä¾èµ–å†™å‡ºæ¥æ˜¯ä¸ç¬¦åˆé€»è¾‘é¡ºåºçš„ã€‚é‚£ä¹ˆï¼Œèƒ½ä¸èƒ½åƒ CommonJS ä¸€æ ·ç”¨çš„æ—¶å€™æ‰ requireï¼Œç„¶åè¿˜èƒ½æ”¯æŒå¼‚æ­¥åŠ è½½åæ‰§è¡Œå‘¢ï¼Ÿ\nCMD (Common Module Definition) åˆ™æ˜¯ä¾èµ–å°±è¿‘ï¼Œç”¨çš„æ—¶å€™å† requireï¼ˆ sea.js æ¨å´‡çš„è§„èŒƒ ï¼‰ï¼Œå†™æ³•ä¸ºï¼š 1 2 3 4 define(function(require,exports,module){ var clock = require(\u0026#39;clock.js\u0026#39;); clock.start(); }) AMD å’Œ CMD çš„åŒºåˆ«æ˜¯å¯¹ä¾èµ–æ¨¡å—çš„æ‰§è¡Œæ—¶æœºä¸åŒï¼Œè€Œä¸æ˜¯åŠ è½½å¤„ç†æ–¹å¼ä¸åŒï¼ŒäºŒè€…çš†ä¸ºå¼‚æ­¥åŠ è½½æ¨¡å—ã€‚\nAMD ä¾èµ–å‰ç½®ï¼ŒJavaScript å¯ä»¥æ–¹ä¾¿åœ°æ¸…æ¥šä¾èµ–æ¨¡å—æœ‰å“ªäº›ï¼Œç«‹å³åŠ è½½ï¼›\nCMD å°±è¿‘ä¾èµ–ï¼Œå¼€å‘è€…å¯ä»¥åœ¨éœ€è¦ç”¨åˆ°ä¾èµ–çš„æ—¶å€™å† requireï¼Œä½†æ˜¯å¯¹äº JavaScript å¤„ç†å™¨æ¥è¯´ï¼Œéœ€è¦æŠŠä»£ç å¤„ç†ä¸ºå­—ç¬¦ä¸²è§£æä¸€éæ‰çŸ¥é“ä¾èµ–äº†å“ªäº›æ¨¡å—ï¼Œå³ç‰ºç‰²æ€§èƒ½æ¥è·å¾—å¼€å‘çš„ä¾¿åˆ©ï¼Œè™½ç„¶å®é™…ä¸Šè§£æçš„æ—¶é—´çŸ­åˆ°å¯ä»¥å¿½ç•¥ï¼Œä½†æ˜¯ä¹Ÿæœ‰å¾ˆå¤šäººè¯Ÿç—… CMD è¿™ä¸€ç‚¹ã€‚\nES6 çš„æ¨¡å—åŒ–è®¾è®¡æ€æƒ³æ˜¯å°½é‡é™æ€åŒ–ï¼Œä½¿å¾—ç¼–è¯‘æ—¶å°±èƒ½ç¡®å®šæ¨¡å—çš„ä¾èµ–å…³ç³»ã€‚\nå¯¹æ¯” CommonJS å’Œ ES6 æ¨¡å—ï¼š\n1 2 3 4 5 6 7 8 // CommonJS let { start, exists, readFile } = require(\u0026#39;fs\u0026#39;) // ç›¸å½“äº // let _fs = require(\u0026#39;fs\u0026#39;) // let start = _fs.start, exists = _fs.exists, readFile = _fs.readFile // ES6 import { start, exists, readFile } from \u0026#39;fs\u0026#39; ä¸Šè¿°ä¾‹å­ä¸­ï¼ŒCommonJS çš„å®è´¨æ˜¯æ•´ä½“åŠ è½½ fs æ¨¡å—ç”Ÿæˆä¸€ä¸ª _fs å¯¹è±¡ï¼Œä¹‹åå†ä»å¯¹è±¡ä¸­åˆ†åˆ«è¯»å– 3 ä¸ªæ–¹æ³•ï¼Œç§°ä¸ºâ€œè¿è¡Œæ—¶åŠ è½½â€ã€‚è€Œ ES6 æ¨¡å—æ˜¯åŠ è½½ 3 ä¸ªæ–¹æ³•ï¼Œç§°ä¸ºâ€œç¼–è¯‘æ—¶åŠ è½½â€\nES6 æ¨¡å—åŒ–çš„è¯­æ³•è§„èŒƒ ä¸¥æ ¼æ¨¡å¼ åœ¨ ES6 æ¨¡å—ä¸­è‡ªåŠ¨é‡‡ç”¨ä¸¥æ ¼æ¨¡å¼ã€‚è§„å®šï¼š\nå˜é‡å¿…é¡»å…ˆå£°æ˜ å‡½æ•°å‚æ•°ä¸èƒ½æœ‰åŒåå±æ€§ ä¸èƒ½ä½¿ç”¨ with å¯¹åªè¯»å±æ€§èµ‹å€¼ã€delete ä¸å¯åˆ é™¤å±æ€§ç›´æ¥æŠ¥é”™ ä¸å¯åˆ é™¤å˜é‡ delete propã€åªèƒ½åˆ é™¤å±æ€§ delete global[prop] eval ä¸ä¼šåœ¨å¤–å±‚ä½œç”¨åŸŸå¼•å…¥å˜é‡ eval å’Œ arguments ä¸å¯é‡æ–°èµ‹å€¼ arguments ä¸ä¼šè‡ªåŠ¨ååº”å‡½æ•°å‚æ•°å˜åŒ– ç¦æ­¢ this æŒ‡å‘å…¨å±€ å¢åŠ ä¿ç•™å­—ï¼šstaticã€interfaceã€protected ç­‰ã€‚ æ³¨æ„ï¼šåœ¨ ES6 æ¨¡å—ä¸­ï¼Œé¡¶å±‚ this ä¸º undefinedï¼Œä¸åº”è¯¥è¢«ä½¿ç”¨ã€‚\nexport å‘½ä»¤ ç¬¬ä¸€ç§ï¼šåˆ†åˆ«æš´éœ²\n1 2 3 export var a = \u0026#39;123\u0026#39;; export const _b = \u0026#39;2323\u0026#39; export let c = \u0026#39;2222\u0026#39; ç¬¬äºŒç§ï¼šç»Ÿä¸€æš´éœ²\n1 2 3 4 var a = \u0026#39;123\u0026#39;; const _b = \u0026#39;2323\u0026#39; let c = \u0026#39;2222\u0026#39; export {a, _b, c}; // æ¨è ç¬¬ä¸‰ç§ï¼š(ç¬¬äºŒç§åŸºç¡€ä¸ŠåŠ ä¸Š as å…³é”®è¯é‡å‘½å)\n1 2 3 4 5 6 7 var a = \u0026#39;123\u0026#39;; const _b = \u0026#39;2323\u0026#39; let c = \u0026#39;2222\u0026#39; export { a as stream1, _b as stream2, c as stream3 }; æ³¨æ„ï¼š\nexport è¯­å¥è¾“å‡ºçš„æ¥å£æ˜¯å¯¹åº”å€¼çš„å¼•ç”¨ï¼Œä¹Ÿå°±æ˜¯ä¸€ç§åŠ¨æ€ç»‘å®šå…³ç³»ï¼Œé€šè¿‡è¯¥æ¥å£å¯ä»¥è·å–æ¨¡å—å†…éƒ¨å®æ—¶çš„å€¼ã€‚\nå¯¹æ¯” CommonJS è§„èŒƒï¼šCommonJS æ¨¡å—è¾“å‡ºçš„æ˜¯å€¼çš„ç¼“å­˜ï¼Œä¸å­˜åœ¨åŠ¨æ€æ›´æ–°ã€‚\nexport å‘½ä»¤è§„å®šè¦å¤„äºæ¨¡å—é¡¶å±‚ï¼Œä¸€æ—¦å‡ºç°åœ¨å—çº§ä½œç”¨åŸŸå†…ï¼Œå°±ä¼šæŠ¥é”™ï¼Œimport åŒç†ã€‚\nimport å‘½ä»¤ ç¬¬ä¸€ç§\n1 import {a, _b ,c} from \u0026#39;./profile\u0026#39; å˜é‡å aã€bã€c ä¸ºæš´éœ²æ—¶å–çš„æ ‡è¯†ç¬¦ï¼Œä¸èƒ½éšæ„æ›´æ”¹ã€‚\nç¬¬äºŒç§\n1 import {stream1 as firstVal} from \u0026#39;./profile\u0026#39; å¼•å…¥æ—¶è¿›è¡Œé‡å‘½åã€‚\nimport æ˜¯é™æ€æ‰§è¡Œï¼Œä¸å¯ä»¥åº”ç”¨è¡¨è¾¾å¼ã€å˜é‡å’Œ if ç»“æ„ã€‚\n1 2 3 4 5 if (x == 1) { import { foo } from \u0026#39;module1\u0026#39; } else { //... } import è¯­å¥æ˜¯ Singleton æ¨¡å¼ï¼šè™½ç„¶ foo å’Œ bar åœ¨ä¸¤ä¸ªè¯­å¥ä¸­åŠ è½½ï¼Œä½†æ˜¯å¯¹åº”çš„æ˜¯åŒä¸€ä¸ª my_module å®ä¾‹ã€‚\n1 2 3 4 5 import { foo } from \u0026#39;./module1\u0026#39; import { bar } from \u0026#39;./module1\u0026#39; // ç›¸å½“äº import {foo,bar} from \u0026#39;./module1\u0026#39; æ¨¡å—çš„æ•´ä½“åŠ è½½ å¯ä»¥ä½¿ç”¨*æ¥æŒ‡å®šä¸€ä¸ªå¯¹è±¡ï¼Œæ‰€æœ‰è¾“å‡ºå€¼éƒ½åŠ è½½åˆ°è¿™ä¸ªå¯¹è±¡ä¸Šï¼š\n1 2 3 import * as circle from \u0026#39;./module1\u0026#39; circle.foo(); circle.bar(); ç”±äºæ¨¡å—æ•´ä½“åŠ è½½æ‰€åœ¨çš„å¯¹è±¡éƒ½æ˜¯å¯ä»¥é™æ€åˆ†æçš„ï¼Œæ‰€ä»¥ä¸å…è®¸è¿è¡Œæ—¶æ”¹å˜ã€‚\n1 2 3 4 import * as circle from \u0026#39;./module1\u0026#39; // ä¸‹é¢ä¸¤è¡Œéƒ½æ˜¯ä¸å…è®¸çš„ circle.foo = 123; circle.bar = function(){} é»˜è®¤å¯¼å‡º export default å‘½ä»¤å¯ä»¥ä¸ºæ¨¡å—é»˜è®¤è¾“å‡º\n1 2 3 4 5 6 7 8 9 // module2.js export default function(){ console.log(\u0026#39;123\u0026#39;) } // ç›¸å½“äº function a(){ console.log(\u0026#39;123\u0026#39;) } export {a as default}; import å‘½ä»¤å¯ä»¥ä¸ºåŒ¿åå‡½æ•°æŒ‡å®šä»»æ„åå­—\n1 2 3 import defaultFn from \u0026#39;./module2\u0026#39; // ç›¸å½“äº import {default as defaultFn} from \u0026#39;./module2\u0026#39; export å’Œ import çš„å¤åˆå†™æ³• 1 2 3 4 export {foo, bar} from \u0026#39;my_module\u0026#39;; // ç­‰åŒäº import {foo,bar} from \u0026#39;my_module\u0026#39;; export{foo,bar}; 1 2 3 4 export {es6 as default} from \u0026#39;./someModule\u0026#39; // ç­‰åŒäº import {es6} from \u0026#39;./someModule\u0026#39; export default es6; import( ) æ–¹æ³• å‰é¢æåˆ°è¿‡ï¼Œrequire æ˜¯åŠ¨æ€åŠ è½½ï¼Œå³å¯ä»¥åœ¨ç”¨çš„æ—¶å€™å† requireï¼›è€Œ import æ˜¯é™æ€æ‰§è¡Œï¼Œåªèƒ½å¤„äºä»£ç æœ€é¡¶å±‚ï¼Œä¸å¯ä»¥å­˜åœ¨äºå—çº§ä½œç”¨åŸŸä¸­ã€‚è¿™å¯¼è‡´ import æ— æ³•åœ¨è¿è¡Œä¸­æ‰§è¡Œï¼ˆç±»ä¼¼äº AMD çš„ç¼ºç‚¹ï¼‰ã€‚ äºæ˜¯å°±æœ‰äº†ä¸€ç§ææ¡ˆï¼šå¼•å…¥ import( ) å‡½æ•°ï¼Œç±»ä¼¼äº Node çš„ require å‡½æ•°ï¼ˆCommonJSï¼‰ï¼Œä½†æ˜¯å®ƒå®ç°äº†å¼‚æ­¥åŠ è½½ã€‚\nå®šä¹‰ï¼šimport( ) å‡½æ•°æ¥æ”¶ä¸ import ç›¸åŒçš„å‚æ•°ï¼Œè¿”å›ä¸€ä¸ª Promise å¯¹è±¡ï¼ŒåŠ è½½è·å–åˆ°çš„å€¼ä½œä¸º then æ–¹æ³•çš„å›è°ƒå‚æ•°ã€‚\n1 2 3 4 5 6 7 8 9 const main = document.querySelector(\u0026#39;main\u0026#39;) import(`./section-modules/${someVariable}.js`) .then(module =\u0026gt; { module.loadPageInto(main); }) .catch(err =\u0026gt; { main.textContext = err.message; }) 1 2 3 4 5 // åŠ è½½è·å¾—æ¥å£å‚æ•°ï¼š import(\u0026#39;./module1.js\u0026#39;) .then(({default:defaultFn,foo,bar}) =\u0026gt; { console.log(defaultFn) }) 1 2 3 4 5 6 7 8 9 10 11 12 // åŒæ—¶åŠ è½½å¤šä¸ªæ¨¡å—å¹¶åº”ç”¨äº sync å‡½æ•°ä¸­ async function main() { const myModule = await import(\u0026#39;./myModule.js\u0026#39;); const {export1, export2} = await import(\u0026#39;./myModule.js\u0026#39;); const [module1, module2, module3] = await Promise.all([ import(\u0026#39;./module1.js\u0026#39;), import(\u0026#39;./module2.js\u0026#39;), import(\u0026#39;./module3.js\u0026#39;) ]) } main(); ä¸åŒè§„èŒƒé—´åŠ è½½ import åŠ è½½ CommonJS æ¨¡å— ä½¿ç”¨ import å‘½ä»¤åŠ è½½ CommonJS æ¨¡å—ï¼ŒNode ä¼šè‡ªåŠ¨å°† module.exports å±æ€§å½“åšæ¨¡å—çš„é»˜è®¤è¾“å‡ºï¼Œå³ç­‰åŒäº export defaultã€‚ 1 2 3 4 5 6 7 8 9 10 11 // a.js module.exports = { foo: \u0026#39;hello\u0026#39;, bar: \u0026#39;world\u0026#39; } // åœ¨ import å¼•å…¥æ—¶ç­‰åŒäº export default { foo: \u0026#39;hello\u0026#39;, bar: \u0026#39;world\u0026#39; } CommonJS æ¨¡å—æ˜¯è¿è¡Œæ—¶ç¡®å®šè¾“å‡ºæ¥å£ï¼Œæ‰€ä»¥é‡‡ç”¨ import å‘½ä»¤åŠ è½½ CommonJS æ¨¡å—æ—¶ï¼Œåªèƒ½ä½¿ç”¨æ•´ä½“è¾“å…¥ï¼ˆ*ï¼‰ã€‚ 1 2 3 4 import {readfile} from \u0026#39;fs\u0026#39; //å½“ fs ä¸º CommonJS æ¨¡å—æ—¶é”™è¯¯ // æ•´ä½“è¾“å…¥ import * as express from \u0026#39;express\u0026#39; const app = express.default(); require åŠ è½½ ES6 æ¨¡å— require å‘½ä»¤åŠ è½½ ES6 æ¨¡å—æ—¶ï¼Œæ‰€æœ‰çš„è¾“å‡ºæ¥å£éƒ½ä¼šæˆä¸ºè¾“å…¥å¯¹è±¡çš„å±æ€§ã€‚ 1 2 3 4 5 6 7 8 // es.js let foo = {bar : \u0026#39;my-default\u0026#39;}; exxport default foo; foo = null; // cjs.js const es_namespace = require(\u0026#39;./es\u0026#39;) console.log(es_namespace.default);// {bar:\u0026#39;my-default\u0026#39;} å¯¹æ¯” CommonJS æœ‰äº†æ–°æ¬¢ä¹Ÿä¸èƒ½å¿˜äº†æ—§çˆ±ï¼Œè®©æˆ‘ä»¬å†æ¥ç»§ç»­å¯¹æ¯” CommonJS å’Œ ES6 æ¨¡å—åŒ–çš„åŒºåˆ«ï¼Œè¿›ä¸€æ­¥ä½“ä¼šç†è§£ ES6 æ¨¡å—åŒ–çš„ç‰¹æ€§ã€‚\nè¾“å‡ºå€¼çš„å¤åˆ¶ CommonJS æ¨¡å—è¾“å‡ºçš„æ˜¯ä¸€ä¸ªå€¼çš„å¤åˆ¶ï¼ŒES6 è¾“å‡ºçš„æ˜¯å€¼çš„å¼•ç”¨\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 // lib.js let num = 3; function changeNum() { num = 4; } module.exports = { num: num, changeNum: changeNum, }; //main.js var mod = require(\u0026#39;./lib.js\u0026#39;) console.log(mod.num); // 3 mod.changeNum(); console.log(mod.num); // 3 è¿™æ˜¯ç”±äºï¼Œmod.num æ˜¯ä¸€ä¸ªåŸå§‹ç±»å‹çš„å€¼ï¼Œä¼šè¢«ç¼“å­˜ã€‚å¯ä»¥é€šè¿‡å†™æˆä¸€ä¸ªå‡½æ•°ï¼Œæ¥å¾—åˆ°å†…éƒ¨ä¿®æ”¹åçš„å€¼ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 // lib.js let num = 3; function changeNum() { num = 4; } module.exports = { get num(){ return num }, changeNum: changeNum, }; //main.js var mod = require(\u0026#39;./lib.js\u0026#39;) console.log(mod.num); // 3 mod.changeNum(); console.log(mod.num); // 4 å¯¹æ¯” ES6 æ¨¡å—ï¼š\n1 2 3 4 5 6 7 8 9 10 11 // lib.js export let num = 3; export function changeNum() { num = 4; } //main.js import {num,changeNum} from \u0026#39;./lib.js\u0026#39; console.log(num); // 3 changeNum(); console.log(num); // 4 CommonJS çš„å¾ªç¯åŠ è½½ 4.2.1 åŠ è½½åŸç† CommonJS ä¸€ä¸ªæ¨¡å—å¯¹åº”ä¸€ä¸ªè„šæœ¬æ–‡ä»¶ï¼Œrequire å‘½ä»¤æ¯æ¬¡åŠ è½½ä¸€ä¸ªæ¨¡å—å°±ä¼šæ‰§è¡Œæ•´ä¸ªè„šæœ¬ï¼Œç„¶åç”Ÿæˆä¸€ä¸ªå¯¹è±¡ã€‚è¿™ä¸ªå¯¹è±¡ä¸€æ—¦ç”Ÿæˆï¼Œä»¥åå†æ¬¡æ‰§è¡Œç›¸åŒçš„ require å‘½ä»¤éƒ½ä¼šç›´æ¥åˆ°ç¼“å­˜ä¸­å–å€¼ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼šCommonJS æ¨¡å—æ— è®ºåŠ è½½å¤šå°‘æ¬¡ï¼Œéƒ½åªä¼šåœ¨ç¬¬ä¸€æ¬¡åŠ è½½æ—¶è¿è¡Œä¸€æ¬¡ï¼Œä»¥åå†åŠ è½½æ—¶å°±è¿”å›ç¬¬ä¸€æ¬¡è¿è¡Œçš„ç»“æœï¼Œé™¤éæ‰‹åŠ¨æ¸…é™¤ç³»ç»Ÿç¼“å­˜ã€‚\n4.2.2 å¾ªç¯åŠ è½½ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 // a.js exports.done = false; var b = require(\u0026#39;./b.js\u0026#39;); // 1. a.js æš‚åœæ‰§è¡Œï¼Œè½¬åˆ°æ‰§è¡Œ b.js, b.jså®Œæ¯•åå›æ¥ï¼Œb:{done:true} console.log(\u0026#39;åœ¨ a.js ä¸­ï¼Œb.done=%j\u0026#39;,b.done); // 5. \u0026#39;åœ¨a.jsä¸­ï¼Œb.done=true\u0026#39; exports.done = true; console.log(\u0026#39;a.js æ‰§è¡Œå®Œæ¯•\u0026#39;) // 6. \u0026#39;a.jsæ‰§è¡Œå®Œæ¯•\u0026#39; // b.js exports.done = false; var a = require(\u0026#39;./b.js\u0026#39;) // 2. a:{done:false} console.log(\u0026#39;åœ¨ b.js ä¸­ï¼Œa.done=%j\u0026#39;,a.done); // 3. \u0026#39;åœ¨b.jsä¸­ï¼Œa.done=false\u0026#39; exports.done = true; console.log(\u0026#39;b.js æ‰§è¡Œå®Œæ¯•\u0026#39;) // 4. \u0026#39;b.jsæ‰§è¡Œå®Œæ¯•\u0026#39;ï¼Œç»§ç»­æ‰§è¡Œa.js // main.js var a = require(\u0026#39;./a.js\u0026#39;); var b = require(\u0026#39;./b.js\u0026#39;); console.log(\u0026#39;åœ¨ main.js ä¸­ï¼Œa.done=%jï¼Œb.done=%j\u0026#39;,a.done,b.done); // 7.\u0026#39;åœ¨main.jsä¸­ï¼Œa.done=trueï¼Œb.done=true\u0026#39; Output\n1 2 3 4 5 6 åœ¨ b.js ä¸­ï¼Œa.done=false b.js æ‰§è¡Œå®Œæ¯• åœ¨ a.js ä¸­ï¼Œb.done=true a.js æ‰§è¡Œå®Œæ¯• åœ¨ main.js ä¸­ï¼Œa.done=trueï¼Œb.done=true Process finished with exit code 0 ä¸Šé¢ä»£ç å¯ä»¥çœ‹åˆ°ï¼š\nåœ¨ b.js ä¸­ï¼Œa.js æ²¡æœ‰æ‰§è¡Œå®Œæ¯•ã€‚ å½“ main.js æ‰§è¡Œåˆ°ç¬¬äºŒè¡Œæ—¶ä¸ä¼šå†æ¬¡æ‰§è¡Œ b.jsï¼Œè€Œæ˜¯è¾“å‡ºç¼“å­˜çš„ b.js çš„æ‰§è¡Œç»“æœï¼Œå³å®ƒçš„ç¬¬å››è¡Œï¼šexports.done = true æ€»ç»“ä¸€ä¸‹ï¼š\nCommonJS æ¨¡å—é‡åˆ°å¾ªç¯åŠ è½½è¿”å›çš„æ˜¯å½“å‰å·²ç»æ‰§è¡Œçš„éƒ¨åˆ†çš„å€¼ï¼Œè€Œä¸æ˜¯ä»£ç å…¨éƒ¨æ‰§è¡Œåçš„å€¼ï¼ˆä¸Šé¢çš„ç¬¬ 2 æ­¥æ³¨é‡Šï¼‰ CommonJS è¾“å‡ºçš„æ˜¯è¢«è¾“å‡ºå€¼çš„ç¼“å­˜ï¼ˆå¤åˆ¶ï¼‰ï¼Œè€ŒéåŠ¨æ€å¼•ç”¨ã€‚ å¯¹æ¯”ï¼šES6 æ¨¡å—æ˜¯åŠ¨æ€å¼•ç”¨ï¼Œå˜é‡ä¸ä¼šè¢«ç¼“å­˜\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 // a.js import {bar} from \u0026#39;./b.js\u0026#39;; export function foo(){ console.log(\u0026#39;foo\u0026#39;) bar(); console.log(\u0026#39;æ‰§è¡Œå®Œæ¯•\u0026#39;) } foo(); // b.js import {foo} from \u0026#39;./a.js\u0026#39; // å¦‚æœä¸º CommonJSï¼Œè¿™é‡Œç›´æ¥å°±è¿”å› undefined å€¼ä¸”ä¸ä¼šå†æ›´æ”¹ export function bar(){ console.log(\u0026#39;bar\u0026#39;) if(Math.random() \u0026gt; 0.5){ foo(); } } // æ‰§è¡Œç»“æœå¯èƒ½ä¸ºï¼šfoo bar æ‰§è¡Œå®Œæ¯• // æ‰§è¡Œç»“æœä¹Ÿå¯èƒ½ä¸ºï¼š foo bar foo bar æ‰§è¡Œå®Œæ¯• æ‰§è¡Œå®Œæ¯• 5 å‚è€ƒ åŸæ–‡åœ°å€ ","date":"2022-10-04T17:32:28+08:00","image":"https://ibakuman.github.io/gallery/landscape/30_hu6b33f88901e241f064888f7143885028_2042071_120x120_fill_q75_box_smart1.jpg","permalink":"https://ibakuman.github.io/posts/javascript/an-article-to-help-you-understand-es6-module-system/","title":"ä¸€ç¯‡æ–‡ç« å¸®ä½ å¼„æ‡‚ ES6 æ¨¡å—åŒ–"},{"content":"Overview Partials are one of the most used and maintained Hugo template files. They are our components, our includes, our bits, and recently even became our functions.\nIn this series weâ€™re not going to cover the basics of partials such as their â€œcontextâ€ as itâ€™s already discussed in depth here .\nNope for this Christmas, weâ€™re going to push partials way beyond your basic includes. Weâ€™re going to see how you can have Hugo cache your partials to speed up the build time, use partials as functions, and finally see the best organizing and commenting practices to make sure they last!\nSo without further ado, letâ€™s kick off { å¼€åœº } the series with partialâ€™s own caching solution: partialCached\nWhy use partialCached? As you know the purpose of a partial is to wrap frequently addressed template code inside one reusable file.\né™¤äº†åè¯ç”¨æ³•ï¼Œaddress ä¹Ÿå¯ä»¥ä½œä¸ºåŠ¨è¯ä½¿ç”¨å–”ï¼ç”¨æ¥è¡¨ç¤ºã€Œåº”ä»˜ã€å¤„ç†ï¼ˆdeal withï¼‰ã€ï¼Œåé¢æ¥ä¸Šéœ€è¦å¤„ç†çš„äº‹ç‰©ï¼Œåƒæ˜¯ issueï¼ˆè®®é¢˜ï¼‰ã€problemï¼ˆé—®é¢˜ï¼‰ã€concernï¼ˆæ‹…å¿§ï¼‰ã€questionï¼ˆé—®é¢˜ï¼‰\u0026hellip;ç­‰ã€‚ æ‰€ä»¥å½±ç‰‡ä¸­æåˆ° \u0026hellip;it\u0026rsquo;s addressing the big issues of the day about people in depressed areas.ï¼Œå­—é¢æ„æ€å…¶å®å°±æ˜¯ã€Œè¿™æœ¬ä¹¦ä¹Ÿå¤„ç†åˆ°ç°ä»Šç»æµè§æ¡åŒºäººæ°‘ç»æµä¸Šçš„å¤§é—®é¢˜ã€å–”ï¼\nIf like me you hate copying/pasting identical lines of code accross your projects, you must be using partials a lot!\nThe markup rendered by your partial might be the same on a majority of pages and differ only for a few, or it could be completely different from one page to the next. The latter scenario will rarely benefit from caching so letâ€™s focus on the first one.\nThink about your header for example.\nYour header will almost always print the same markup! Same logo, same URL pointing to home, same navigation, same social links. It will be printed throughout the site on every single page.\nIf your Hugo project needs to create one thousand HTML files, then, on every build, Hugo will have to look for your menu configuration, your social configuration and process the exact same markup a thousand times.\nWith a partialCached you can inform Hugo that this piece of code will never change, and can therefor { å› æ­¤ } be processed once, cached and reused:\n1 {{ partialCached \u0026#34;header.html\u0026#34; . }} Thatâ€™s 999 times when Hugo will not have to bother interpreting that partialâ€™s code. Depending on the complexity of your navigation, you potentially saved a lot of precious milliseconds â±ï¸!\nBut is our header really going to be the same for every page?\nNo as it most likely will underline or highlight some links from the main menu depending on where your visitors are on the site.\nOur Hugo menu code might contain something like:\n1 2 3 4 5 6 7 8 9 10 \u0026lt;nav\u0026gt; {{ range .Site.Menus.main }} \u0026lt;a class=\u0026#34;{{ if $currentPage.Section .Page.Section }} active {{ end }}\u0026#34; href=\u0026#34;{{ .URL }}\u0026#34; \u0026gt; {{ .Name }} \u0026lt;/a\u0026gt; {{ end }} \u0026lt;/nav\u0026gt; The above code is pretty straightforward { ç®€å•æ˜äº†çš„ }. Our projects bears a simple five item menu, each linking to a section of the site. In order to make Blog menu item appear active when visiting a page from the Blog section, we compare the $currentPage.Section with the menu itemâ€™s own .Page.Section.\nNow with our current {{ partialCached \u0026quot;header.html\u0026quot; . }}, Hugo will run this if clause once and apply its result to every subsquent pages it builds regardless of their section. Thatâ€™s not good!\nEnter partialsâ€™ variants.\nPartial variants We know that the header is only going to change five times, depending on the current pageâ€™s .Section. We therefor need to tell Hugo to cache a different variant of the partial depending on this factor.\nContrary to { è·Ÿâ€¦ç›¸å } partial, partialCached list of arguments is not limited to context.\nIn our simple use case, the obvious variant is the current page .Section so we can drop this:\n1 {{ partialCached \u0026#34;navigation.html\u0026#34; . .Section }} ğŸ‰ Thatâ€™s 995 times when Hugo will not have to bother interpreting that partialâ€™s code.\nGood. Thatâ€™s one variant down, but what if something else has to change, and itâ€™s not connected to the section? For example on this very site, the social links are very prominent { çªå‡ºçš„; æ˜¾è‘—çš„ } in the contact page, so when on that page, the header does not â€œrepeatâ€ them.\nCode goes something like this:\n1 2 3 4 5 {{ if ne .Layout \u0026#34;contact\u0026#34; }} {{ range site.Socials }} {{/* you got the picture */}} {{ end }} {{ end }} So we need 2 variants now, the .Section variant and the Is it the contact page? variant.\nLucky for us, the number of variants argument is limitless, so here we go:\n1 {{ partialCached \u0026#34;navigation.html\u0026#34; . .Section \u0026#34;contact\u0026#34; }} That was for easy reading but letâ€™s face it, youâ€™ll most likely need something more Â«Â dynamicÂ Â»\n1 2 {{ $layout := cond (eq .Layout \u0026#34;contact\u0026#34;) \u0026#34;contact\u0026#34; \u0026#34;other\u0026#34; }} {{ partialCached \u0026#34;navigation.html\u0026#34; . .Section $layout }} ğŸ‰ Thatâ€™s 994 times when Hugo will not have to bother interpreting that partialâ€™s code.\nStepping variants up a notch ğŸ’ª Letâ€™s dive into something a little bit more complex.\nOur blog has an Â«Â authorsÂ Â» box. We have three authors on site, so this box will either list one, or a combination of them based on an array in our postâ€™s Front Matter. Itâ€™s safe to say, that out of our 1000 articles, many will share the same combination.\nHere, the ideal variant would therefor be our list of authors in a consistent order, so weâ€™d be tempted to just run:\n1 {{ partialCached \u0026#34;authors-box.html\u0026#34; . .Params.authors }} Unfortunately for the time being { ç›®å‰ }, variant arguments passed to partialCached must be strings ğŸ¤·.\nSince Hugo 0.61.0 you can use any object as cache key(s), not just strings.\nIn order to pass this requirement, we need to turn this array into a string before using it, and the safest way to do this is, as often, using printf and the right verb . Personally I like %x as it will produce a base-16 string representation of a value, regardless of its type.\nAssuming with have:\n1 2 3 4 authors: - Bud Parr - Frank Taillandier - RÃ©gis Philibert 1 {{ $variant := printf \u0026#34;%x\u0026#34; .Params.authors }} ğŸ–¨ï¸ğŸ‘‡ [4275642050617272 4672616e6b205461696c6c616e64696572 52c3a9676973205068696c6962657274]\nNow we have a string we can pass as a partial variant:\n1 2 3 4 5 {{ with .Params.authors }} {{ $authors := sort . }} {{ $variant := printf \u0026#34;%x\u0026#34; $authors }} {{ partialCached \u0026#34;authors-box.html\u0026#34; . $variant }} {{ end }} Why sorting the authors?\nIf our partial always lists the authors in the same alphabetical order, we should make sure the random order the editors might have added them in does not create unnecessary cached variants.\nwarning\nThis variant solution works for simple slices and maps. You should run some tests before using it with more complex data structure.\nWith all of the above, we can be sure that Hugo will only build the authorâ€™s box, once per combination of authors.\nWhat about languages? ğŸ‡«ğŸ‡·ğŸ‡¬ğŸ‡§ In a multilingual context, and thinking back to our header partial, we might have a language switch in there and be tempted to add yet another variant:\n1 {{ partialCached \u0026#34;navigation.html\u0026#34; . .Section .Lang }} But you donâ€™t have to do that, as Hugo will build as many cached partial as languages by default. So in our current use case, Hugo will compute our headerâ€™s markup ten times.\nğŸ§®\nThe golden rules to figure out the number of partial Â«Â computeÂ Â» is:\npartial X variants X languages\nImproving your build time â±ï¸ For the projects you have built yourself, it might be fairly easy to go though your partials directory and quickly identify those which could be cached. But for projects you inherited or built a long time ago, there are two CLI flags you can run. hugo --templateMetrics --templateMetricsHints.\nThe first flag ran alone is already very helpful as it will list every template file and give you information about the duration of their building. Not everything in there can be cached though, only partials.\nThe second one adds an extra column which prints that fileâ€™s â€œcache potentialâ€ in percentage.\nThose commands will help identify any big clogs { å µå¡; é˜»å¡ }, but you should always ask yourself these three questions:\nHow complex is the partial and what its cumulative { æ¸å¢çš„ï¼›ç´¯è®¡çš„ } duration might add up to. How many times will it be processed compared to its potential number of variants. How can I adapt my code to make it easily cacheable. (identifying variants early on will save a lot of refactoring later) Conclusion When building a new Hugo project or maintaining one you should always keep in mind that every line of code could slow your build. Let Hugo do the heavy-lifting a few times rather than every time!\nSo go look for those partial files, make up your own variants and start saving time and money by heavily making those partialCached!\nReferences The original article address ","date":"2022-10-04T13:17:23+08:00","image":"https://ibakuman.github.io/gallery/landscape/24_hu02460565c68f6ee68754f9a01c400f03_406275_120x120_fill_q75_box_smart1.jpg","permalink":"https://ibakuman.github.io/posts/hugo/the-full-partial-series-part-1-caching/","title":"The Full Partial Series Part 1 - Caching!"},{"content":"é¢˜ç›®æè¿° å½“ä¸€ä¸ªå­—ç¬¦ä¸² s åŒ…å«çš„æ¯ä¸€ç§å­—æ¯çš„å¤§å†™å’Œå°å†™å½¢å¼ åŒæ—¶ å‡ºç°åœ¨ s ä¸­ï¼Œå°±ç§°è¿™ä¸ªå­—ç¬¦ä¸² s æ˜¯ ç¾å¥½ å­—ç¬¦ä¸²ã€‚æ¯”æ–¹è¯´ï¼Œ\u0026quot;abABB\u0026quot; æ˜¯ç¾å¥½å­—ç¬¦ä¸²ï¼Œå› ä¸º 'A' å’Œ 'a' åŒæ—¶å‡ºç°äº†ï¼Œä¸” 'B' å’Œ 'b' ä¹ŸåŒæ—¶å‡ºç°äº†ã€‚ç„¶è€Œï¼Œ\u0026quot;abA\u0026quot; ä¸æ˜¯ç¾å¥½å­—ç¬¦ä¸²å› ä¸º 'b' å‡ºç°äº†ï¼Œè€Œ 'B' æ²¡æœ‰å‡ºç°ã€‚\nç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸² s ï¼Œè¯·ä½ è¿”å› s æœ€é•¿çš„ ç¾å¥½å­å­—ç¬¦ä¸² ã€‚å¦‚æœæœ‰å¤šä¸ªç­”æ¡ˆï¼Œè¯·ä½ è¿”å› æœ€æ—© å‡ºç°çš„ä¸€ä¸ªã€‚å¦‚æœä¸å­˜åœ¨ç¾å¥½å­å­—ç¬¦ä¸²ï¼Œè¯·ä½ è¿”å›ä¸€ä¸ªç©ºå­—ç¬¦ä¸²ã€‚\nç¤ºä¾‹ 1ï¼š\n1 2 3 4 è¾“å…¥ï¼šs = \u0026#34;YazaAay\u0026#34; è¾“å‡ºï¼š\u0026#34;aAa\u0026#34; è§£é‡Šï¼š\u0026#34;aAa\u0026#34; æ˜¯ä¸€ä¸ªç¾å¥½å­—ç¬¦ä¸²ï¼Œå› ä¸ºè¿™ä¸ªå­ä¸²ä¸­ä»…å«ä¸€ç§å­—æ¯ï¼Œå…¶å°å†™å½¢å¼ \u0026#39;a\u0026#39; å’Œå¤§å†™å½¢å¼ \u0026#39;A\u0026#39; ä¹ŸåŒæ—¶å‡ºç°äº†ã€‚ \u0026#34;aAa\u0026#34; æ˜¯æœ€é•¿çš„ç¾å¥½å­å­—ç¬¦ä¸²ã€‚ ç¤ºä¾‹ 2ï¼š\n1 2 3 è¾“å…¥ï¼šs = \u0026#34;Bb\u0026#34; è¾“å‡ºï¼š\u0026#34;Bb\u0026#34; è§£é‡Šï¼š\u0026#34;Bb\u0026#34; æ˜¯ç¾å¥½å­—ç¬¦ä¸²ï¼Œå› ä¸º \u0026#39;B\u0026#39; å’Œ \u0026#39;b\u0026#39; éƒ½å‡ºç°äº†ã€‚æ•´ä¸ªå­—ç¬¦ä¸²ä¹Ÿæ˜¯åŸå­—ç¬¦ä¸²çš„å­å­—ç¬¦ä¸²ã€‚ ç¤ºä¾‹ 3ï¼š\n1 2 3 è¾“å…¥ï¼šs = \u0026#34;c\u0026#34; è¾“å‡ºï¼š\u0026#34;\u0026#34; è§£é‡Šï¼šæ²¡æœ‰ç¾å¥½å­å­—ç¬¦ä¸²ã€‚ ç¤ºä¾‹ 4ï¼š\n1 2 3 4 è¾“å…¥ï¼šs = \u0026#34;dDzeE\u0026#34; è¾“å‡ºï¼š\u0026#34;dD\u0026#34; è§£é‡Šï¼š\u0026#34;dD\u0026#34; å’Œ \u0026#34;eE\u0026#34; éƒ½æ˜¯æœ€é•¿ç¾å¥½å­å­—ç¬¦ä¸²ã€‚ ç”±äºæœ‰å¤šä¸ªç¾å¥½å­å­—ç¬¦ä¸²ï¼Œè¿”å› \u0026#34;dD\u0026#34; ï¼Œå› ä¸ºå®ƒå‡ºç°å¾—æœ€æ—©ã€‚ æç¤ºï¼š\n1 \u0026lt;= s.length \u0026lt;= 100 s åªåŒ…å«å¤§å†™å’Œå°å†™è‹±æ–‡å­—æ¯ã€‚ è§£æ³•ä¸€ï¼šæšä¸¾ æ€è·¯ æšä¸¾æ‰€æœ‰å­å­—ç¬¦ä¸²ï¼Œåˆ¤æ–­æ¯ä¸€ä¸ªå­å­—ç¬¦ä¸²æ˜¯å¦æ˜¯ç¾å¥½å­å­—ç¬¦ä¸²ã€‚\nMY CODE 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 class Solution { public: string longestNiceSubstring(string s) { pair\u0026lt;int, int\u0026gt; ansIndex{-1, -1}; int maxLen = 0; for (int i = 0; i \u0026lt; s.size() - 1; ++i) { for (int j = i + 1; j \u0026lt; s.size(); ++j) { if (isWell(s, i, j) \u0026amp;\u0026amp; maxLen \u0026lt; j - i + 1) { maxLen = j - i + 1; ansIndex.first = i; ansIndex.second = j; } } } return maxLen \u0026gt; 0 ? s.substr(ansIndex.first, ansIndex.second + 1 - ansIndex.first) : \u0026#34;\u0026#34;; } private: bool isWell(const string \u0026amp;str, int l, int r) { unordered_set\u0026lt;char\u0026gt; luSet(str.cbegin() + l, str.cbegin() + r + 1); return all_of(luSet.cbegin(), luSet.cend(), [\u0026amp;](char ch) { return ch \u0026gt;= \u0026#39;a\u0026#39; ? luSet.count(char(ch - 32)) : luSet.count(char(ch + 32)); }); } }; \u0026mdash; å¤æ‚åº¦åˆ†æ æ—¶é—´å¤æ‚åº¦ï¼šO(n^3)ï¼Œå…¶ä¸­nä¸ºå­—ç¬¦ä¸²sçš„é•¿åº¦ã€‚isWellçš„å¤æ‚åº¦ä¸ºO(n)ã€‚ ç©ºé—´å¤æ‚åº¦ï¼šO(n)\nOfficial Answer 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 class Solution { public: string longestNiceSubstring(string s) { int n = s.size(); int maxPos = 0; int maxLen = 0; for (int i = 0; i \u0026lt; n; ++i) { int lower = 0; int upper = 0; for (int j = i; j \u0026lt; n; ++j) { if (islower(s[j])) { lower |= 1 \u0026lt;\u0026lt; (s[j] - \u0026#39;a\u0026#39;); } else { upper |= 1 \u0026lt;\u0026lt; (s[j] - \u0026#39;A\u0026#39;); } if (lower == upper \u0026amp;\u0026amp; j - i + 1 \u0026gt; maxLen) { maxPos = i; maxLen = j - i + 1; } } } return s.substr(maxPos, maxLen); } }; \u0026mdash; å¤æ‚åº¦åˆ†æ æ—¶é—´å¤æ‚åº¦ï¼šO\\left(n^{2}\\right) ï¼Œå…¶ä¸­ n ä¸ºå­—ç¬¦ä¸²çš„é•¿åº¦ã€‚éœ€è¦æšä¸¾æ‰€æœ‰å¯èƒ½çš„å­å­—ç¬¦ä¸²ï¼Œå› æ­¤éœ€è¦åŒé‡å±ç¯éå† å­—ç¬¦ä¸²ï¼Œæ€»å…±å¯èƒ½æœ‰ n^{2} ä¸ªè¿ç»­çš„å­å­—ç¬¦ä¸²ã€‚\nç©ºé—´å¤æ‚åº¦ï¼š O(1) ã€‚ç”±äºè¿”å›å€¼ä¸éœ€è¦è®¡ç®—ç©ºé—´å¤æ‚åº¦ï¼Œé™¤äº†éœ€è¦ä¸¤ä¸ªæ•´æ•°å˜é‡ç”¨æ¥æ ‡è®°ä»¥å¤–ä¸éœ€è¦ é¢å¤–çš„ç©ºé—´ã€‚\nä½œè€…ï¼šLeetCode-Solution é“¾æ¥ï¼šhttps://leetcode-cn.com/problems/longest-nice-substring/solution/zui-chang-de-mei-hao-zi-zi-fu-chuan-by-l-4l1t/ æ¥æºï¼šåŠ›æ‰£ï¼ˆLeetCodeï¼‰ è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚\nè§£æ³•äºŒï¼šåˆ†æ²»æ³• MY CODE 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 class Solution { string str; int maxPos = 0, maxLen = 0; public: string longestNiceSubstring(string s) { this-\u0026gt;str = s; divideAndConquer(0, (int) str.size()); return str.substr(maxPos, maxLen); } private: void divideAndConquer(int start, int end) { if (start + 1 \u0026gt;= end) return; int lower = 0, upper = 0; for (int i = start; i \u0026lt; end; ++i) { if (islower(str[i])) lower |= 1 \u0026lt;\u0026lt; (str[i] - \u0026#39;a\u0026#39;); else upper |= 1 \u0026lt;\u0026lt; (str[i] - \u0026#39;A\u0026#39;); } if (upper == lower) { if (end - start \u0026gt; maxLen) { maxLen = end - start; maxPos = start; } return; } int valid = lower \u0026amp; upper; int pos = start; while (pos \u0026lt; end) { start = pos; while (pos \u0026lt; end \u0026amp;\u0026amp; valid \u0026amp; (1 \u0026lt;\u0026lt; (tolower(str[pos]) - \u0026#39;a\u0026#39;))) { ++pos; } divideAndConquer(start, pos); ++pos; } } }; å¤æ‚åº¦åˆ†æ æ—¶é—´å¤æ‚åº¦: O(n \\cdot|\\Sigma|) ï¼Œå…¶ä¸­ n ä¸ºå­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œ |\\Sigma| ä¸ºå­—ç¬¦é›†çš„å¤§å°ï¼Œæœ¬é¢˜ä¸­å­—ç¬¦ä¸²ä»…åŒ…å«è‹±æ–‡å¤§å° å†™å­—æ¯ï¼Œå› æ­¤ |\\Sigma|=52 ã€‚æœ¬é¢˜ä½¿ç”¨äº†é€†å½’ï¼Œç”±äºå­—ç¬¦é›†æœ€å¤šåªæœ‰ \\frac{|\\Sigma|}{2} ä¸ªä¸åŒçš„è‹±æ–‡å­—æ¯ï¼Œæ¯æ¬¡é€†å½’éƒ½ä¼š å»æ‰ä¸€ä¸ªè‹±æ–‡å­—æ¯çš„æ‰€æœ‰å¤§å°å†™å½¢å¼ï¼Œå› æ­¤é€’å½’æ·±åº¦æœ€å¤šä¸º \\frac{|\\Sigma|}{2} ã€‚\nç©ºé—´å¤æ‚åº¦: O(|\\Sigma|) ã€‚ç”±äºé€’å…æ·±åº¦æœ€å¤šä¸º |\\Sigma| ï¼Œå› æ­¤éœ€è¦ä½¿ç”¨ O(|\\Sigma|) çš„é€’å½’æ ˆç©ºé—´ã€‚\n\u0026mdash; Official Answer 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 class Solution { private int maxPos; private int maxLen; public String longestNiceSubstring(String s) { this.maxPos = 0; this.maxLen = 0; dfs(s, 0, s.length() - 1); return s.substring(maxPos, maxPos + maxLen); } public void dfs(String s, int start, int end) { if (start \u0026gt;= end) { return; } int lower = 0, upper = 0; for (int i = start; i \u0026lt;= end; ++i) { if (Character.isLowerCase(s.charAt(i))) { lower |= 1 \u0026lt;\u0026lt; (s.charAt(i) - \u0026#39;a\u0026#39;); } else { upper |= 1 \u0026lt;\u0026lt; (s.charAt(i) - \u0026#39;A\u0026#39;); } } if (lower == upper) { if (end - start + 1 \u0026gt; maxLen) { maxPos = start; maxLen = end - start + 1; } return; } int valid = lower \u0026amp; upper; int pos = start; while (pos \u0026lt;= end) { start = pos; while (pos \u0026lt;= end \u0026amp;\u0026amp; (valid \u0026amp; (1 \u0026lt;\u0026lt; Character.toLowerCase(s.charAt(pos)) - \u0026#39;a\u0026#39;)) != 0){ ++pos; } dfs(s, start, pos - 1); ++pos; } } } \u0026mdash; å¤æ‚åº¦åˆ†æ æ—¶é—´å¤æ‚åº¦: O(n \\cdot|\\Sigma|) ï¼Œå…¶ä¸­ n ä¸ºå­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œ |\\Sigma| ä¸ºå­—ç¬¦é›†çš„å¤§å°ï¼Œæœ¬é¢˜ä¸­å­—ç¬¦ä¸²ä»…åŒ…å«è‹±æ–‡å¤§å° å†™å­—æ¯ï¼Œå› æ­¤ |\\Sigma|=52 ã€‚æœ¬é¢˜ä½¿ç”¨äº†é€†å½’ï¼Œç”±äºå­—ç¬¦é›†æœ€å¤šåªæœ‰ \\frac{|\\Sigma|}{2} ä¸ªä¸åŒçš„è‹±æ–‡å­—æ¯ï¼Œæ¯æ¬¡é€†å½’éƒ½ä¼š å»æ‰ä¸€ä¸ªè‹±æ–‡å­—æ¯çš„æ‰€æœ‰å¤§å°å†™å½¢å¼ï¼Œå› æ­¤é€’å½’æ·±åº¦æœ€å¤šä¸º \\frac{|\\Sigma|}{2} ã€‚\nç©ºé—´å¤æ‚åº¦: O(|\\Sigma|) ã€‚ç”±äºé€’å…æ·±åº¦æœ€å¤šä¸º |\\Sigma| ï¼Œå› æ­¤éœ€è¦ä½¿ç”¨ O(|\\Sigma|) çš„é€’å½’æ ˆç©ºé—´ã€‚\nä½œè€…ï¼šLeetCode-Solution é“¾æ¥ï¼šhttps://leetcode-cn.com/problems/longest-nice-substring/solution/zui-chang-de-mei-hao-zi-zi-fu-chuan-by-l-4l1t/ æ¥æºï¼šåŠ›æ‰£ï¼ˆLeetCodeï¼‰ è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚\nè§£æ³•ä¸‰ï¼šæ»‘åŠ¨çª—å£ MY CODE 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 class Solution { public: string longestNiceSubstring(string s) { int maxPos = 0, maxLen = 0; auto check = [\u0026amp;](int typeNum) { vector\u0026lt;int\u0026gt; lowerCnt(26), upperCnt(26); // cntä¸º[l...r)ä¸­åŒæ—¶å­˜åœ¨å¤§å†™å’Œå°å†™å½¢å¼çš„å­—ç¬¦çš„æ•°é‡ï¼Œtotalä¸º[l...r)ä¸­å­—ç¬¦ç§ç±»æ•° int total = 0, cnt = 0; for (int l = 0, r = 0; r \u0026lt; s.size(); ++r) { int idx = tolower(s[r]) - \u0026#39;a\u0026#39;; if (islower(s[r])) { ++lowerCnt[idx]; if (1 == lowerCnt[idx] \u0026amp;\u0026amp; upperCnt[idx] \u0026gt; 0) ++cnt; } else { ++upperCnt[idx]; if (1 == upperCnt[idx] \u0026amp;\u0026amp; lowerCnt[idx] \u0026gt; 0) ++cnt; } total += 1 == (lowerCnt[idx] + upperCnt[idx]) ? 1 : 0; // ç¼©å°çª—å£ while (total \u0026gt; typeNum) { idx = tolower(s[l]) - \u0026#39;a\u0026#39;; if (islower(s[l])) { --lowerCnt[idx]; // æ³¨æ„ä¸èƒ½æ¼æ‰upperCnt[idx]\u0026gt;0çš„æ¡ä»¶ã€‚ if (0 == lowerCnt[idx] \u0026amp;\u0026amp; upperCnt[idx] \u0026gt; 0) --cnt; } else { --upperCnt[idx]; if (0 == upperCnt[idx] \u0026amp;\u0026amp; lowerCnt[idx] \u0026gt; 0) --cnt; } ++l; total -= 0 == (lowerCnt[idx] + upperCnt[idx]) ? 1 : 0; } if (cnt == typeNum \u0026amp;\u0026amp; r - l + 1 \u0026gt; maxLen) { maxPos = l; maxLen = r - l + 1; } } }; int mask = 0; for (char ch : s) mask |= 1 \u0026lt;\u0026lt; (tolower(ch) - \u0026#39;a\u0026#39;); for (int i = 1; i \u0026lt;= __builtin_popcount(mask); ++i) check(i); return s.substr(maxPos, maxLen); }; }; å¤æ‚åº¦åˆ†æ æ—¶é—´å¤æ‚åº¦: O(N \\cdot|\\Sigma|) ï¼Œå…¶ä¸­ N ä¸ºå­—ç¬¦ç”³çš„é•¿åº¦ï¼Œ |\\Sigma| ä¸ºå­—ç¬¦é›†çš„å¤§å°ï¼Œæœ¬é¢˜ä¸­å­—ç¬¦é›†é™å®šä¸ºå¤§å°å†™ çš„å¤æ‚åº¦ä¸º O(2 N), å› æ­¤æ€»çš„æ—¶é—´ã™æ‚åº¦ä¸º O(N \\cdot|\\Sigma|) ã€‚\nç©ºé—´å¤æ‚åº¦: O(|\\Sigma|) ã€‚éœ€è¦ O(|\\Sigma|) å­˜å‚¨æ‰€æœ‰å¤§å°å†™å­—æ¯çš„è®¡æ•°ã€‚\nOfficial Answer 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 class Solution { private int maxPos; private int maxLen; public String longestNiceSubstring(String s) { this.maxPos = 0; this.maxLen = 0; int types = 0; for (int i = 0; i \u0026lt; s.length(); ++i) { types |= 1 \u0026lt;\u0026lt; (Character.toLowerCase(s.charAt(i)) - \u0026#39;a\u0026#39;); } types = Integer.bitCount(types); for (int i = 1; i \u0026lt;= types; ++i) { check(s, i); } return s.substring(maxPos, maxPos + maxLen); } public void check(String s, int typeNum) { int[] lowerCnt = new int[26]; int[] upperCnt = new int[26]; int cnt = 0; for (int l = 0, r = 0, total = 0; r \u0026lt; s.length(); ++r) { int idx = Character.toLowerCase(s.charAt(r)) - \u0026#39;a\u0026#39;; if (Character.isLowerCase(s.charAt(r))) { ++lowerCnt[idx]; if (lowerCnt[idx] == 1 \u0026amp;\u0026amp; upperCnt[idx] \u0026gt; 0) { ++cnt; } } else { ++upperCnt[idx]; if (upperCnt[idx] == 1 \u0026amp;\u0026amp; lowerCnt[idx] \u0026gt; 0) { ++cnt; } } total += (lowerCnt[idx] + upperCnt[idx]) == 1 ? 1 : 0; while (total \u0026gt; typeNum) { idx = Character.toLowerCase(s.charAt(l)) - \u0026#39;a\u0026#39;; total -= (lowerCnt[idx] + upperCnt[idx]) == 1 ? 1 : 0; if (Character.isLowerCase(s.charAt(l))) { --lowerCnt[idx]; if (lowerCnt[idx] == 0 \u0026amp;\u0026amp; upperCnt[idx] \u0026gt; 0) { --cnt; } } else { --upperCnt[idx]; if (upperCnt[idx] == 0 \u0026amp;\u0026amp; lowerCnt[idx] \u0026gt; 0) { --cnt; } } ++l; } if (cnt == typeNum \u0026amp;\u0026amp; r - l + 1 \u0026gt; maxLen) { maxPos = l; maxLen = r - l + 1; } } } } \u0026mdash; å¤æ‚åº¦åˆ†æ æ—¶é—´å¤æ‚åº¦: O(N \\cdot|\\Sigma|) ï¼Œå…¶ä¸­ N ä¸ºå­—ç¬¦ç”³çš„é•¿åº¦ï¼Œ |\\Sigma| ä¸ºå­—ç¬¦é›†çš„å¤§å°ï¼Œæœ¬é¢˜ä¸­å­—ç¬¦é›†é™å®šä¸ºå¤§å°å†™ çš„å¤æ‚åº¦ä¸º O(2 N), å› æ­¤æ€»çš„æ—¶é—´ã™æ‚åº¦ä¸º O(N \\cdot|\\Sigma|) ã€‚\nç©ºé—´å¤æ‚åº¦: O(|\\Sigma|) ã€‚éœ€è¦ O(|\\Sigma|) å­˜å‚¨æ‰€æœ‰å¤§å°å†™å­—æ¯çš„è®¡æ•°ã€‚\nä½œè€…ï¼šLeetCode-Solution é“¾æ¥ï¼šhttps://leetcode-cn.com/problems/longest-nice-substring/solution/zui-chang-de-mei-hao-zi-zi-fu-chuan-by-l-4l1t/ æ¥æºï¼šåŠ›æ‰£ï¼ˆLeetCodeï¼‰ è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚\næ€»ç»“ åœ¨javaä¸­ä½¿ç”¨Character.isLowerCaseåˆ¤æ–­æŸä¸ªå­—ç¬¦æ˜¯å¦æ˜¯å°å†™å­—ç¬¦ï¼Œåœ¨C++ä¸­åˆ™ä½¿ç”¨islowerã€‚åœ¨javaä¸­ä½¿ç”¨Character.toLowerCaseå°†å­—æ¯è½¬æ¢æˆå°å†™ï¼Œåˆ™C++ä¸­åˆ™ä½¿ç”¨tolowerã€‚ STLç®—æ³•any_ofåˆ¤æ–­æŸä¸ªåŒºé—´å†…çš„å…ƒç´ éƒ½æ»¡è¶³æŸä¸ªæ¡ä»¶ï¼Œæ¡ä»¶å¸¸ä»¥lambdaè¡¨è¾¾å¼ä¼ é€’ç»™è¯¥å‡½æ•°ï¼Œå¦‚æœå¯¹æ‰€æœ‰åŒºé—´å†…å…ƒç´ lambdaè¡¨è¾¾å¼è¿ç®—ç»“æœéƒ½ä¸ºtrueåˆ™ç»“æœä¹Ÿä¸ºtrueï¼Œåä¹‹ä¸ºfalseã€‚ ","date":"2022-02-01T20:12:09+08:00","image":"https://ibakuman.github.io/gallery/landscape/32_hu51b920b09f70697adb8efd022a77ced5_660746_120x120_fill_q75_box_smart1.jpg","permalink":"https://ibakuman.github.io/posts/leetccode/problems/1763-longest-nice-substring/","title":"1763. æœ€é•¿çš„ç¾å¥½å­å­—ç¬¦ä¸²"},{"content":"é¢˜ç›®æè¿° ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸² s ï¼Œå­—ç¬¦ä¸²çš„ã€Œèƒ½é‡ã€å®šä¹‰ä¸ºï¼šåªåŒ…å«ä¸€ç§å­—ç¬¦çš„æœ€é•¿éç©ºå­å­—ç¬¦ä¸²çš„é•¿åº¦ã€‚ è¯·ä½ è¿”å›å­—ç¬¦ä¸²çš„èƒ½é‡ã€‚\nç¤ºä¾‹ 1ï¼š\n1 2 3 è¾“å…¥ï¼šs = \u0026#34;leetcode\u0026#34; è¾“å‡ºï¼š2 è§£é‡Šï¼šå­å­—ç¬¦ä¸² \u0026#34;ee\u0026#34; é•¿åº¦ä¸º 2 ï¼ŒåªåŒ…å«å­—ç¬¦ \u0026#39;e\u0026#39; ã€‚ ç¤ºä¾‹ 2ï¼š\n1 2 3 è¾“å…¥ï¼šs = \u0026#34;abbcccddddeeeeedcba\u0026#34; è¾“å‡ºï¼š5 è§£é‡Šï¼šå­å­—ç¬¦ä¸² \u0026#34;eeeee\u0026#34; é•¿åº¦ä¸º 5 ï¼ŒåªåŒ…å«å­—ç¬¦ \u0026#39;e\u0026#39; ã€‚ ç¤ºä¾‹ 3ï¼š\nè¾“å…¥ï¼šs = \u0026ldquo;triplepillooooow\u0026rdquo;\nè¾“å‡ºï¼š5\nç¤ºä¾‹ 4ï¼š\n1 2 è¾“å…¥ï¼šs = \u0026#34;hooraaaaaaaaaaay\u0026#34; è¾“å‡ºï¼š11 ç¤ºä¾‹ 5ï¼š\n1 2 è¾“å…¥ï¼šs = \u0026#34;tourist\u0026#34; è¾“å‡ºï¼š1 æç¤ºï¼š\n$1 \u0026lt;= s.length \u0026lt;= 500$ $s$ åªåŒ…å«å°å†™è‹±æ–‡å­—æ¯ã€‚ è§£æ³•ä¸€ï¼šä¸€æ¬¡éå† MY CODE 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 class Solution { public: int maxPower(string s) { int n = s.size(); if (1 == n) return 1; int ans = 0; int t = 1; for (int i = 1; i \u0026lt; n; ++i) { if (s[i] != s[i-1]) { ans = max(ans, t); t = 1; } else { ++t; } } return max(ans, t); } }; Official Answer 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 class Solution { public: int maxPower(string s) { int ans = 1, cnt = 1; for (int i = 1; i \u0026lt; s.length(); ++i) { if (s[i] == s[i - 1]) { ++cnt; ans = max(ans, cnt); } else { cnt = 1; } } return ans; } }; å¤æ‚åº¦åˆ†æ æ—¶é—´å¤æ‚åº¦ï¼š$O(n)$ï¼Œå…¶ä¸­ $n$ æ˜¯å­—ç¬¦ä¸² $s$ çš„é•¿åº¦ã€‚éå†ä¸€æ¬¡ $s$ çš„æ—¶é—´å¤æ‚åº¦ä¸º $O(n)$ã€‚ ç©ºé—´å¤æ‚åº¦ï¼š$O(1)$ã€‚æˆ‘ä»¬åªéœ€è¦å¸¸æ•°çš„ç©ºé—´ä¿å­˜è‹¥å¹²å˜é‡ã€‚ ä½œè€…ï¼šLeetCode-Solution é“¾æ¥ï¼šhttps://leetcode-cn.com/problems/consecutive-characters/solution/lian-xu-zi-fu-by-leetcode-solution-lctm/ æ¥æºï¼šåŠ›æ‰£ï¼ˆLeetCodeï¼‰ è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚\n","date":"2021-12-01T09:59:46Z","image":"https://ibakuman.github.io/gallery/landscape/17_hudbc1561b7a760b2f47477637bc223f35_938024_120x120_fill_q75_box_smart1.jpg","permalink":"https://ibakuman.github.io/posts/leetccode/problems/1446-consecutive-characters/","title":"1446. è¿ç»­å­—ç¬¦"}]